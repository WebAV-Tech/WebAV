"use strict";(self.webpackChunkWebAV_Doc_Site=self.webpackChunkWebAV_Doc_Site||[]).push([[433],{5335:function(V,D,e){e.r(D),e.d(D,{CombinatorPlay:function(){return T}});var R=e(15009),u=e.n(R),I=e(99289),y=e.n(I),B=e(5574),f=e.n(B),b=e(15867),W=e(67294),d=e(85893);function T(t){var i=t.list,C=t.onStart,P=t.com,E=t.stream,M=(0,W.useState)(""),c=f()(M,2),m=c[0],p=c[1],r=(0,W.useState)(""),l=f()(r,2),o=l[0],h=l[1];return(0,W.useEffect)(function(){y()(u()().mark(function a(){var _,n,s;return u()().wrap(function(g){for(;;)switch(g.prev=g.next){case 0:if(!(P==null&&E==null)){g.next=2;break}return g.abrupt("return");case 2:return p("\u5408\u6210\u4E2D..."),n=performance.now(),g.next=6,new Response((_=P==null?void 0:P.output())!==null&&_!==void 0?_:E).blob();case 6:s=g.sent,h(URL.createObjectURL(s)),p("\u5408\u6210\u8017\u65F6: ".concat(Math.round(performance.now()-n),"ms"));case 9:case"end":return g.stop()}},a)}))()},[P,E]),(0,d.jsxs)("div",{children:[(0,d.jsx)(b.ZP,{onClick:function(){p("loading..."),C()},children:"\u542F\u52A8\uFF01"}),(0,d.jsxs)("div",{className:"resouse-list",children:["\u7D20\u6750\uFF1A",i.map(function(a){return(0,d.jsx)("a",{href:a,target:"_blank",style:{marginRight:"16px",textDecoration:"none"},children:a},a)})]}),(0,d.jsxs)("div",{className:"state",children:[m,o.length>0&&(0,d.jsx)("a",{href:o,download:"WebAV-".concat(Date.now(),".mp4"),target:"_self",style:{marginLeft:"16px",textDecoration:"none"},children:"\u5BFC\u51FA\u89C6\u9891"})]}),o.length>0&&(0,d.jsx)("video",{src:o,controls:!0,autoPlay:!0,style:{width:"600px",height:"333px",display:"block"}})]})}},92100:function(V,D,e){e.r(D);var R=e(15009),u=e.n(R),I=e(5574),y=e.n(I),B=e(99289),f=e.n(B),b=e(50301),W=e(15867),d=e(55742),T=e(67294),t=e(85893),i={"44.1kHz-2chan.m4a":"/audio/44.1kHz-2chan.m4a","44.1kHz-2chan.mp3":"/audio/44.1kHz-2chan.mp3","16kHz-1chan.mp3":"/audio/16kHz-1chan.mp3"},C=function(){};function P(c){return E.apply(this,arguments)}function E(){return E=f()(u()().mark(function c(m){var p,r,l,o,h,a;return u()().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return a=function(){return a=f()(u()().mark(function v(){var g,U,A,K,O,S;return u()().wrap(function(L){for(;;)switch(L.prev=L.next){case 0:return l+=1e5,L.next=3,p.tick(l);case 3:if(g=L.sent,U=g.audio,A=g.state,A!=="done"){L.next=8;break}return L.abrupt("return");case 8:if(K=U[0].length,K!==0){L.next=12;break}return h(),L.abrupt("return");case 12:O=r.createBuffer(2,K,b.DEFAULT_AUDIO_CONF.sampleRate),O.copyToChannel(U[0],0),O.copyToChannel(U[1],1),S=r.createBufferSource(),S.buffer=O,S.connect(r.destination),o=Math.max(r.currentTime,o),S.start(o),o+=O.duration,h();case 22:case"end":return L.stop()}},v)})),a.apply(this,arguments)},h=function(){return a.apply(this,arguments)},C(),n.t0=b.AudioClip,n.next=6,fetch(i[m]);case 6:return n.t1=n.sent.body,p=new n.t0(n.t1),n.next=10,p.ready;case 10:r=new AudioContext,l=0,o=0,h(),C=function(){return r.close()};case 15:case"end":return n.stop()}},c)})),E.apply(this,arguments)}D.default=M(P);function M(c){return function(){var m=(0,T.useState)("44.1kHz-2chan.m4a"),p=y()(m,2),r=p[0],l=p[1];return(0,t.jsxs)("div",{children:[(0,t.jsx)(W.ZP,{onClick:function(){c(r)},children:"\u542F\u52A8\uFF01"}),(0,t.jsx)("br",{}),(0,t.jsxs)(d.ZP.Group,{onChange:function(h){l(h.target.value)},value:r,children:[(0,t.jsx)(d.ZP,{value:"44.1kHz-2chan.m4a",children:"44.1kHz-2chan.m4a"}),(0,t.jsx)(d.ZP,{value:"44.1kHz-2chan.m4a",children:"44.1kHz-2chan.m4a"}),(0,t.jsx)(d.ZP,{value:"16kHz-1chan.mp3",children:"16kHz-1chan.mp3"})]})]})}}},18953:function(V,D,e){e.r(D);var R=e(15009),u=e.n(R),I=e(5574),y=e.n(I),B=e(99289),f=e.n(B),b=e(50301),W=e(15867),d=e(55742),T=e(67294),t=e(85893),i={avif:"/img/animated.avif",webp:"/img/animated.webp",png:"/img/animated.png",gif:"/img/animated.gif"},C=function(){};function P(c,m){return E.apply(this,arguments)}function E(){return E=f()(u()().mark(function c(m,p){var r,l,o;return u()().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return o=function(n){var s;if(n!=null){m.clearRect(0,0,m.canvas.width,m.canvas.height),m.drawImage(n,0,0);var v=setTimeout(function(){o(r[++l]),n.close()},((s=n.duration)!==null&&s!==void 0?s:0)/1e3);C=function(){clearTimeout(v)}}},a.t0=b.decodeImg,a.next=4,fetch(i[p]);case 4:return a.t1=a.sent.body,a.t2="image/".concat(p),a.next=8,(0,a.t0)(a.t1,a.t2);case 8:r=a.sent,C(),l=0,o(r[0]);case 12:case"end":return a.stop()}},c)})),E.apply(this,arguments)}D.default=M(P);function M(c){return function(){var m=(0,T.useState)("avif"),p=y()(m,2),r=p[0],l=p[1],o=(0,T.useState)(null),h=y()(o,2),a=h[0],_=h[1];return(0,t.jsxs)("div",{children:[(0,t.jsx)(W.ZP,{onClick:function(){c(a,r)},children:"\u542F\u52A8\uFF01"}),(0,t.jsx)("br",{}),(0,t.jsxs)(d.ZP.Group,{onChange:function(s){l(s.target.value)},value:r,children:[(0,t.jsx)(d.ZP,{value:"avif",children:"avif"}),(0,t.jsx)(d.ZP,{value:"webp",children:"webp"}),(0,t.jsx)(d.ZP,{value:"png",children:"png"}),(0,t.jsx)(d.ZP,{value:"gif",children:"gif"})]}),(0,t.jsx)("br",{}),(0,t.jsx)("canvas",{width:600,height:333,ref:function(s){_(s==null?void 0:s.getContext("2d"))}})]})}}},52373:function(V,D,e){e.r(D);var R=e(15009),u=e.n(R),I=e(5574),y=e.n(I),B=e(99289),f=e.n(B),b=e(50301),W=e(15867),d=e(55742),T=e(96074),t=e(67294),i=e(85893),C={"bunny.mp4":"/video/bunny-avc.mp4","bear.mp4":"/video/bear-vp9.mp4"};function P(c,m,p){return E.apply(this,arguments)}function E(){return E=f()(u()().mark(function c(m,p,r){var l,o,h,a,_;return u()().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return _=function(g){var U=performance.now(),A=setInterval(f()(u()().mark(function K(){var O,S,j;return u()().wrap(function(w){for(;;)switch(w.prev=w.next){case 0:return w.next=2,o.tick(Math.round((performance.now()-U)*1e3)*g);case 2:if(O=w.sent,S=O.state,j=O.video,S!=="done"){w.next=9;break}return clearInterval(A),o.destroy(),w.abrupt("return");case 9:j!=null&&S==="success"&&(r.clearRect(0,0,r.canvas.width,r.canvas.height),r.drawImage(j,0,0,j.codedWidth,j.codedHeight,0,0,r.canvas.width,r.canvas.height),j.close());case 10:case"end":return w.stop()}},K)})),1e3/30)},a=function(){return a=f()(u()().mark(function g(){var U,A,K,O;return u()().wrap(function(j){for(;;)switch(j.prev=j.next){case 0:U=0;case 1:return j.next=4,o.tick(U);case 4:if(A=j.sent,K=A.state,O=A.video,K!=="done"){j.next=9;break}return j.abrupt("break",13);case 9:O!=null&&K==="success"&&(r.clearRect(0,0,r.canvas.width,r.canvas.height),r.drawImage(O,0,0,O.codedWidth,O.codedHeight,0,0,r.canvas.width,r.canvas.height),O.close()),U+=33e3,j.next=1;break;case 13:o.destroy();case 14:case"end":return j.stop()}},g)})),a.apply(this,arguments)},h=function(){return a.apply(this,arguments)},s.next=5,fetch(C[p]);case 5:return l=s.sent,o=new b.MP4Clip(l.body),s.next=9,o.ready;case 9:m===1/0?h():_(m);case 10:case"end":return s.stop()}},c)})),E.apply(this,arguments)}D.default=M(P);function M(c){return function(){var m=(0,t.useState)("bunny.mp4"),p=y()(m,2),r=p[0],l=p[1],o=(0,t.useState)(1/0),h=y()(o,2),a=h[0],_=h[1],n=(0,t.useState)(null),s=y()(n,2),v=s[0],g=s[1];return(0,i.jsxs)("div",{children:[(0,i.jsx)(W.ZP,{onClick:function(){c(a,r,v)},children:"\u542F\u52A8\uFF01"}),(0,i.jsx)("br",{}),(0,i.jsxs)(d.ZP.Group,{onChange:function(A){l(A.target.value)},value:r,children:[(0,i.jsx)(d.ZP,{value:"bunny.mp4",children:"bunny.mp4"}),(0,i.jsx)(d.ZP,{value:"bear.mp4",children:"bear.mp4"})]}),(0,i.jsx)(T.Z,{type:"vertical"})," ",(0,i.jsxs)(d.ZP.Group,{onChange:function(A){_(A.target.value)},value:a,children:[(0,i.jsx)(d.ZP,{value:1/0,children:"Fastest"}),(0,i.jsx)(d.ZP,{value:3,children:"3"}),(0,i.jsx)(d.ZP,{value:1,children:"1"})]}),(0,i.jsx)("br",{}),(0,i.jsx)("canvas",{width:600,height:333,ref:function(A){g(A==null?void 0:A.getContext("2d"))}})]})}}},2477:function(V,D,e){e.r(D),e.d(D,{default:function(){return c}});var R=e(15009),u=e.n(R),I=e(5574),y=e.n(I),B=e(99289),f=e.n(B),b=e(71471),W=e(26927),d=e(15867),T=e(67294),t=e(85893),i=null;function C(r){r!=null&&(i=new b.u_(r,{bgColor:"#333",resolution:{width:1920,height:1080}}))}var P=null;function E(){return M.apply(this,arguments)}function M(){return M=f()(u()().mark(function r(){var l,o,h;return u()().wrap(function(_){for(;;)switch(_.prev=_.next){case 0:if(i!=null){_.next=2;break}return _.abrupt("return");case 2:return _.next=4,window.showSaveFilePicker({suggestedName:"WebAV-".concat(Date.now(),".mp4")});case 4:return o=_.sent,_.next=7,o.createWritable();case 7:return h=_.sent,P=new W.AVRecorder(i.captureStream(),{width:1920,height:1080,bitrate:5e6,audioCodec:"aac"}),_.next=11,P.start();case 11:(l=P.outputStream)===null||l===void 0||l.pipeTo(h).catch(console.error);case 12:case"end":return _.stop()}},r)})),M.apply(this,arguments)}function c(){var r=(0,T.useState)(""),l=y()(r,2),o=l[0],h=l[1];return(0,T.useEffect)(function(){return function(){var a;(a=i)===null||a===void 0||a.destroy()}},[]),(0,t.jsxs)(t.Fragment,{children:["\u6DFB\u52A0\u7D20\u6750\uFF1A",(0,t.jsx)(d.ZP,{onClick:f()(u()().mark(function a(){var _,n;return u()().wrap(function(v){for(;;)switch(v.prev=v.next){case 0:if(i!=null){v.next=2;break}return v.abrupt("return");case 2:return v.next=4,navigator.mediaDevices.getUserMedia({video:!0,audio:!0});case 4:return _=v.sent,n=new b.cJ("userMedia",_,{audioCtx:i.spriteManager.audioCtx}),v.next=8,i.spriteManager.addSprite(n);case 8:case"end":return v.stop()}},a)})),children:"Camera & Micphone"}),"\xA0",(0,t.jsx)(d.ZP,{onClick:f()(u()().mark(function a(){var _,n;return u()().wrap(function(v){for(;;)switch(v.prev=v.next){case 0:if(i!=null){v.next=2;break}return v.abrupt("return");case 2:return v.next=4,navigator.mediaDevices.getDisplayMedia({video:!0,audio:!0});case 4:return _=v.sent,n=new b.cJ("display",_,{audioCtx:i.spriteManager.audioCtx}),v.next=8,i.spriteManager.addSprite(n);case 8:case"end":return v.stop()}},a)})),children:"Share screen"}),"\xA0",(0,t.jsx)(d.ZP,{onClick:f()(u()().mark(function a(){var _;return u()().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:if(i!=null){s.next=2;break}return s.abrupt("return");case 2:return s.t0=b.Zd,s.next=5,m({"image/*":[".png",".gif",".jpeg",".jpg"]});case 5:return s.t1=s.sent,_=new s.t0("img",s.t1),s.next=9,i.spriteManager.addSprite(_);case 9:case"end":return s.stop()}},a)})),children:"Image"}),"\xA0",(0,t.jsx)(d.ZP,{onClick:f()(u()().mark(function a(){var _;return u()().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:if(i!=null){s.next=2;break}return s.abrupt("return");case 2:return s.t0=b.cJ,s.next=5,m({"video/*":[".webm",".mp4"]});case 5:return s.t1=s.sent,_=new s.t0("video",s.t1),s.next=9,i.spriteManager.addSprite(_);case 9:case"end":return s.stop()}},a)})),children:"Video"}),"\xA0",(0,t.jsx)(d.ZP,{onClick:f()(u()().mark(function a(){var _;return u()().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:if(i!=null){s.next=2;break}return s.abrupt("return");case 2:return s.t0=b.JN,s.next=5,m({"audio/*":[".mp3",".wav",".ogg"]});case 5:return s.t1=s.sent,_=new s.t0("audio",s.t1),s.next=9,i.spriteManager.addSprite(_);case 9:case"end":return s.stop()}},a)})),children:"Audio"}),"\xA0",(0,t.jsx)(d.ZP,{onClick:f()(u()().mark(function a(){var _;return u()().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:if(i!=null){s.next=2;break}return s.abrupt("return");case 2:return _=new b.V0("font","\u793A\u4F8B\u6587\u5B57"),s.next=5,i.spriteManager.addSprite(_);case 5:case"end":return s.stop()}},a)})),children:"Text"}),(0,t.jsx)("hr",{}),(0,t.jsx)(d.ZP,{onClick:f()(u()().mark(function a(){return u()().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,E();case 2:h("\u5F55\u5236\u4E2D...");case 3:case"end":return n.stop()}},a)})),children:"Start Recod"}),"\xA0",(0,t.jsx)(d.ZP,{onClick:f()(u()().mark(function a(){var _;return u()().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return s.next=2,(_=P)===null||_===void 0?void 0:_.stop();case 2:h("\u89C6\u9891\u5DF2\u4FDD\u5B58");case 3:case"end":return s.stop()}},a)})),children:"Stop Recod"}),(0,t.jsx)("span",{style:{marginLeft:16,color:"#666"},children:o}),(0,t.jsx)("div",{ref:C,style:{width:900,height:500,position:"relative"}})]})}function m(r){return p.apply(this,arguments)}function p(){return p=f()(u()().mark(function r(l){var o,h,a;return u()().wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,window.showOpenFilePicker({types:[{accept:l}]});case 2:return o=n.sent,h=y()(o,1),a=h[0],n.next=7,a.getFile();case 7:return n.abrupt("return",n.sent);case 8:case"end":return n.stop()}},r)})),p.apply(this,arguments)}},32199:function(V,D,e){e.r(D),e.d(D,{default:function(){return P}});var R=e(15009),u=e.n(R),I=e(5574),y=e.n(I),B=e(99289),f=e.n(B),b=e(50301),W=e(67294),d=e(5335),T=e(85893),t=["/video/webav1.mp4"];function i(){return C.apply(this,arguments)}function C(){return C=f()(u()().mark(function E(){var M,c,m;return u()().wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return r.t0=b.OffscreenSprite,r.t1=b.MP4Clip,r.next=4,fetch(t[0]);case 4:return r.t2=r.sent.body,r.t3=new r.t1(r.t2),M=new r.t0("spr1",r.t3),r.t4=b.OffscreenSprite,r.t5=b.ImgClip,r.next=11,(0,b.renderTxt2ImgBitmap)("\u6C34\u5370","font-size:40px; color: white; text-shadow: 2px 2px 6px red;");case 11:return r.t6=r.sent,r.t7=new r.t5(r.t6),c=new r.t4("spr2",r.t7),c.setAnimation({"0%":{x:0,y:0},"25%":{x:1200,y:680},"50%":{x:1200,y:0},"75%":{x:0,y:680},"100%":{x:0,y:0}},{duration:4,iterCount:1}),c.zIndex=10,c.opacity=.5,m=new b.Combinator({width:1280,height:720,bgColor:"white"}),r.next=20,m.add(M,{main:!0});case 20:return r.next=22,m.add(c,{offset:0,duration:5});case 22:return r.abrupt("return",m);case 23:case"end":return r.stop()}},E)})),C.apply(this,arguments)}function P(){var E=(0,W.useState)(null),M=y()(E,2),c=M[0],m=M[1];return(0,T.jsx)(d.CombinatorPlay,{list:t,onStart:f()(u()().mark(function p(){return u()().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return l.t0=m,l.next=3,i();case 3:return l.t1=l.sent,l.abrupt("return",(0,l.t0)(l.t1));case 5:case"end":return l.stop()}},p)})),com:c})}}}]);
