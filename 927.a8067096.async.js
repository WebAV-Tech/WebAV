!(function(){"use strict";var Ql=Object.defineProperty,Bl=Object.defineProperties;var wl=Object.getOwnPropertyDescriptors;var Fl=Object.getOwnPropertySymbols;var Pl=Object.prototype.hasOwnProperty,El=Object.prototype.propertyIsEnumerable;var Jl=(S,x,F)=>x in S?Ql(S,x,{enumerable:!0,configurable:!0,writable:!0,value:F}):S[x]=F,hl=(S,x)=>{for(var F in x||(x={}))Pl.call(x,F)&&Jl(S,F,x[F]);if(Fl)for(var F of Fl(x))El.call(x,F)&&Jl(S,F,x[F]);return S},xl=(S,x)=>Bl(S,wl(x));var dl=(S,x,F)=>new Promise((Xl,bl)=>{var ul=N=>{try{I(F.next(N))}catch(k){bl(k)}},Gl=N=>{try{I(F.throw(N))}catch(k){bl(k)}},I=N=>N.done?Xl(N.value):Promise.resolve(N.value).then(ul,Gl);I((F=F.apply(S,x)).next())});(self.webpackChunkWebAV_Doc_Site=self.webpackChunkWebAV_Doc_Site||[]).push([[927],{26927:function(S,x,F){F.r(x),F.d(x,{AVRecorder:function(){return gl}});var Xl=Object.defineProperty,bl=(h,m,e)=>m in h?Xl(h,m,{enumerable:!0,configurable:!0,writable:!0,value:e}):h[m]=e,ul=(h,m,e)=>(bl(h,typeof m!="symbol"?m+"":m,e),e),Gl=(h,m,e)=>{if(!m.has(h))throw TypeError("Cannot "+e)},I=(h,m,e)=>(Gl(h,m,"read from private field"),e?e.call(h):m.get(h)),N=(h,m,e)=>{if(m.has(h))throw TypeError("Cannot add the same private member more than once");m instanceof WeakSet?m.add(h):m.set(h,e)},k=(h,m,e,G)=>(Gl(h,m,"write to private field"),G?G.call(h,e):m.set(h,e),e),Hl=Object.defineProperty,Il=(h,m,e)=>m in h?Hl(h,m,{enumerable:!0,configurable:!0,writable:!0,value:e}):h[m]=e,f=(h,m,e)=>(Il(h,typeof m!="symbol"?m+"":m,e),e),Vl=(h,m,e)=>{if(!m.has(h))throw TypeError("Cannot "+e)},Y=(h,m,e)=>(Vl(h,m,"read from private field"),e?e.call(h):m.get(h)),E=(h,m,e)=>{if(m.has(h))throw TypeError("Cannot add the same private member more than once");m instanceof WeakSet?m.add(h):m.set(h,e)},D=(h,m,e,G)=>(Vl(h,m,"write to private field"),G?G.call(h,e):m.set(h,e),e),Sl=(h,m,e)=>(Vl(h,m,"access private method"),e);let cl=1;const ol={debug:(...h)=>{cl<=0&&console.debug(...h)},info:(...h)=>{cl<=1&&console.info(...h)},warn:(...h)=>{cl<=2&&console.warn(...h)},error:(...h)=>{cl<=3&&console.error(...h)}},Zl=new Map,T=xl(hl({setLogLevel:h=>{var m;cl=(m=Zl.get(h))!=null?m:1}},ol),{create:h=>Object.fromEntries(Object.entries(ol).map(([m,e])=>[m,(...G)=>e(h,...G)]))});Zl.set(T.debug,0),Zl.set(T.info,1),Zl.set(T.warn,2),Zl.set(T.error,3);const Nl=()=>{let h,m=16.6;self.onmessage=e=>{e.data.event==="start"&&(self.clearInterval(h),h=self.setInterval(()=>{self.postMessage({})},m)),e.data.event==="stop"&&self.clearInterval(h)}},Ml=()=>{const h=new Blob([`(${Nl.toString()})()`]),m=URL.createObjectURL(h);return new Worker(m)},Kl=new Map;let Rl=1;const Ul=Ml();Ul.onmessage=()=>{Rl+=1;for(const[h,m]of Kl.entries())Rl%h===0&&m.forEach(e=>e())};function Cl(h){return Array(h.numberOfChannels).fill(0).map((m,e)=>h.getChannelData(e))}function Ll(h,m,e){const G=e-m,R=new Float32Array(G);let o=0;for(;o<G;)R[o]=h[(m+o)%h.length],o+=1;return R}var kl={};(function(h){var m=function(){var l=new Date,d=4,c=3,t=2,a=1,n=d,b={setLogLevel:function(s){s==this.debug?n=a:s==this.info?n=t:s==this.warn?n=c:(s==this.error,n=d)},debug:function(s,X){console.debug===void 0&&(console.debug=console.log),a>=n&&console.debug("["+m.getDurationString(new Date-l,1e3)+"]","["+s+"]",X)},log:function(s,X){this.debug(s.msg)},info:function(s,X){t>=n&&console.info("["+m.getDurationString(new Date-l,1e3)+"]","["+s+"]",X)},warn:function(s,X){c>=n&&console.warn("["+m.getDurationString(new Date-l,1e3)+"]","["+s+"]",X)},error:function(s,X){d>=n&&console.error("["+m.getDurationString(new Date-l,1e3)+"]","["+s+"]",X)}};return b}();m.getDurationString=function(l,d){var c;function t(p,V){for(var y=""+p,r=y.split(".");r[0].length<V;)r[0]="0"+r[0];return r.join(".")}l<0?(c=!0,l=-l):c=!1;var a=d||1,n=l/a,b=Math.floor(n/3600);n-=b*3600;var s=Math.floor(n/60);n-=s*60;var X=n*1e3;return n=Math.floor(n),X-=n*1e3,X=Math.floor(X),(c?"-":"")+b+":"+t(s,2)+":"+t(n,2)+"."+t(X,3)},m.printRanges=function(l){var d=l.length;if(d>0){for(var c="",t=0;t<d;t++)t>0&&(c+=","),c+="["+m.getDurationString(l.start(t))+","+m.getDurationString(l.end(t))+"]";return c}else return"(empty)"},h.Log=m;var e=function(l){if(l instanceof ArrayBuffer)this.buffer=l,this.dataview=new DataView(l);else throw"Needs an array buffer";this.position=0};e.prototype.getPosition=function(){return this.position},e.prototype.getEndPosition=function(){return this.buffer.byteLength},e.prototype.getLength=function(){return this.buffer.byteLength},e.prototype.seek=function(l){var d=Math.max(0,Math.min(this.buffer.byteLength,l));return this.position=isNaN(d)||!isFinite(d)?0:d,!0},e.prototype.isEos=function(){return this.getPosition()>=this.getEndPosition()},e.prototype.readAnyInt=function(l,d){var c=0;if(this.position+l<=this.buffer.byteLength){switch(l){case 1:d?c=this.dataview.getInt8(this.position):c=this.dataview.getUint8(this.position);break;case 2:d?c=this.dataview.getInt16(this.position):c=this.dataview.getUint16(this.position);break;case 3:if(d)throw"No method for reading signed 24 bits values";c=this.dataview.getUint8(this.position)<<16,c|=this.dataview.getUint8(this.position+1)<<8,c|=this.dataview.getUint8(this.position+2);break;case 4:d?c=this.dataview.getInt32(this.position):c=this.dataview.getUint32(this.position);break;case 8:if(d)throw"No method for reading signed 64 bits values";c=this.dataview.getUint32(this.position)<<32,c|=this.dataview.getUint32(this.position+4);break;default:throw"readInt method not implemented for size: "+l}return this.position+=l,c}else throw"Not enough bytes in buffer"},e.prototype.readUint8=function(){return this.readAnyInt(1,!1)},e.prototype.readUint16=function(){return this.readAnyInt(2,!1)},e.prototype.readUint24=function(){return this.readAnyInt(3,!1)},e.prototype.readUint32=function(){return this.readAnyInt(4,!1)},e.prototype.readUint64=function(){return this.readAnyInt(8,!1)},e.prototype.readString=function(l){if(this.position+l<=this.buffer.byteLength){for(var d="",c=0;c<l;c++)d+=String.fromCharCode(this.readUint8());return d}else throw"Not enough bytes in buffer"},e.prototype.readCString=function(){for(var l=[];;){var d=this.readUint8();if(d!==0)l.push(d);else break}return String.fromCharCode.apply(null,l)},e.prototype.readInt8=function(){return this.readAnyInt(1,!0)},e.prototype.readInt16=function(){return this.readAnyInt(2,!0)},e.prototype.readInt32=function(){return this.readAnyInt(4,!0)},e.prototype.readInt64=function(){return this.readAnyInt(8,!1)},e.prototype.readUint8Array=function(l){for(var d=new Uint8Array(l),c=0;c<l;c++)d[c]=this.readUint8();return d},e.prototype.readInt16Array=function(l){for(var d=new Int16Array(l),c=0;c<l;c++)d[c]=this.readInt16();return d},e.prototype.readUint16Array=function(l){for(var d=new Int16Array(l),c=0;c<l;c++)d[c]=this.readUint16();return d},e.prototype.readUint32Array=function(l){for(var d=new Uint32Array(l),c=0;c<l;c++)d[c]=this.readUint32();return d},e.prototype.readInt32Array=function(l){for(var d=new Int32Array(l),c=0;c<l;c++)d[c]=this.readInt32();return d},h.MP4BoxStream=e;var G=function(l,d,c){this._byteOffset=d||0,l instanceof ArrayBuffer?this.buffer=l:typeof l=="object"?(this.dataView=l,d&&(this._byteOffset+=d)):this.buffer=new ArrayBuffer(l||0),this.position=0,this.endianness=c!=null?c:G.LITTLE_ENDIAN};G.prototype={},G.prototype.getPosition=function(){return this.position},G.prototype._realloc=function(l){if(this._dynamicSize){var d=this._byteOffset+this.position+l,c=this._buffer.byteLength;if(d<=c){d>this._byteLength&&(this._byteLength=d);return}for(c<1&&(c=1);d>c;)c*=2;var t=new ArrayBuffer(c),a=new Uint8Array(this._buffer),n=new Uint8Array(t,0,a.length);n.set(a),this.buffer=t,this._byteLength=d}},G.prototype._trimAlloc=function(){if(this._byteLength!=this._buffer.byteLength){var l=new ArrayBuffer(this._byteLength),d=new Uint8Array(l),c=new Uint8Array(this._buffer,0,d.length);d.set(c),this.buffer=l}},G.BIG_ENDIAN=!1,G.LITTLE_ENDIAN=!0,G.prototype._byteLength=0,Object.defineProperty(G.prototype,"byteLength",{get:function(){return this._byteLength-this._byteOffset}}),Object.defineProperty(G.prototype,"buffer",{get:function(){return this._trimAlloc(),this._buffer},set:function(l){this._buffer=l,this._dataView=new DataView(this._buffer,this._byteOffset),this._byteLength=this._buffer.byteLength}}),Object.defineProperty(G.prototype,"byteOffset",{get:function(){return this._byteOffset},set:function(l){this._byteOffset=l,this._dataView=new DataView(this._buffer,this._byteOffset),this._byteLength=this._buffer.byteLength}}),Object.defineProperty(G.prototype,"dataView",{get:function(){return this._dataView},set:function(l){this._byteOffset=l.byteOffset,this._buffer=l.buffer,this._dataView=new DataView(this._buffer,this._byteOffset),this._byteLength=this._byteOffset+l.byteLength}}),G.prototype.seek=function(l){var d=Math.max(0,Math.min(this.byteLength,l));this.position=isNaN(d)||!isFinite(d)?0:d},G.prototype.isEof=function(){return this.position>=this._byteLength},G.prototype.mapUint8Array=function(l){this._realloc(l*1);var d=new Uint8Array(this._buffer,this.byteOffset+this.position,l);return this.position+=l*1,d},G.prototype.readInt32Array=function(l,d){l=l!=null?l:this.byteLength-this.position/4;var c=new Int32Array(l);return G.memcpy(c.buffer,0,this.buffer,this.byteOffset+this.position,l*c.BYTES_PER_ELEMENT),G.arrayToNative(c,d!=null?d:this.endianness),this.position+=c.byteLength,c},G.prototype.readInt16Array=function(l,d){l=l!=null?l:this.byteLength-this.position/2;var c=new Int16Array(l);return G.memcpy(c.buffer,0,this.buffer,this.byteOffset+this.position,l*c.BYTES_PER_ELEMENT),G.arrayToNative(c,d!=null?d:this.endianness),this.position+=c.byteLength,c},G.prototype.readInt8Array=function(l){l=l!=null?l:this.byteLength-this.position;var d=new Int8Array(l);return G.memcpy(d.buffer,0,this.buffer,this.byteOffset+this.position,l*d.BYTES_PER_ELEMENT),this.position+=d.byteLength,d},G.prototype.readUint32Array=function(l,d){l=l!=null?l:this.byteLength-this.position/4;var c=new Uint32Array(l);return G.memcpy(c.buffer,0,this.buffer,this.byteOffset+this.position,l*c.BYTES_PER_ELEMENT),G.arrayToNative(c,d!=null?d:this.endianness),this.position+=c.byteLength,c},G.prototype.readUint16Array=function(l,d){l=l!=null?l:this.byteLength-this.position/2;var c=new Uint16Array(l);return G.memcpy(c.buffer,0,this.buffer,this.byteOffset+this.position,l*c.BYTES_PER_ELEMENT),G.arrayToNative(c,d!=null?d:this.endianness),this.position+=c.byteLength,c},G.prototype.readUint8Array=function(l){l=l!=null?l:this.byteLength-this.position;var d=new Uint8Array(l);return G.memcpy(d.buffer,0,this.buffer,this.byteOffset+this.position,l*d.BYTES_PER_ELEMENT),this.position+=d.byteLength,d},G.prototype.readFloat64Array=function(l,d){l=l!=null?l:this.byteLength-this.position/8;var c=new Float64Array(l);return G.memcpy(c.buffer,0,this.buffer,this.byteOffset+this.position,l*c.BYTES_PER_ELEMENT),G.arrayToNative(c,d!=null?d:this.endianness),this.position+=c.byteLength,c},G.prototype.readFloat32Array=function(l,d){l=l!=null?l:this.byteLength-this.position/4;var c=new Float32Array(l);return G.memcpy(c.buffer,0,this.buffer,this.byteOffset+this.position,l*c.BYTES_PER_ELEMENT),G.arrayToNative(c,d!=null?d:this.endianness),this.position+=c.byteLength,c},G.prototype.readInt32=function(l){var d=this._dataView.getInt32(this.position,l!=null?l:this.endianness);return this.position+=4,d},G.prototype.readInt16=function(l){var d=this._dataView.getInt16(this.position,l!=null?l:this.endianness);return this.position+=2,d},G.prototype.readInt8=function(){var l=this._dataView.getInt8(this.position);return this.position+=1,l},G.prototype.readUint32=function(l){var d=this._dataView.getUint32(this.position,l!=null?l:this.endianness);return this.position+=4,d},G.prototype.readUint16=function(l){var d=this._dataView.getUint16(this.position,l!=null?l:this.endianness);return this.position+=2,d},G.prototype.readUint8=function(){var l=this._dataView.getUint8(this.position);return this.position+=1,l},G.prototype.readFloat32=function(l){var d=this._dataView.getFloat32(this.position,l!=null?l:this.endianness);return this.position+=4,d},G.prototype.readFloat64=function(l){var d=this._dataView.getFloat64(this.position,l!=null?l:this.endianness);return this.position+=8,d},G.endianness=new Int8Array(new Int16Array([1]).buffer)[0]>0,G.memcpy=function(l,d,c,t,a){var n=new Uint8Array(l,d,a),b=new Uint8Array(c,t,a);n.set(b)},G.arrayToNative=function(l,d){return d==this.endianness?l:this.flipArrayEndianness(l)},G.nativeToEndian=function(l,d){return this.endianness==d?l:this.flipArrayEndianness(l)},G.flipArrayEndianness=function(l){for(var d=new Uint8Array(l.buffer,l.byteOffset,l.byteLength),c=0;c<l.byteLength;c+=l.BYTES_PER_ELEMENT)for(var t=c+l.BYTES_PER_ELEMENT-1,a=c;t>a;t--,a++){var n=d[a];d[a]=d[t],d[t]=n}return l},G.prototype.failurePosition=0,String.fromCharCodeUint8=function(l){for(var d=[],c=0;c<l.length;c++)d[c]=l[c];return String.fromCharCode.apply(null,d)},G.prototype.readString=function(l,d){return d==null||d=="ASCII"?String.fromCharCodeUint8.apply(null,[this.mapUint8Array(l!=null?l:this.byteLength-this.position)]):new TextDecoder(d).decode(this.mapUint8Array(l))},G.prototype.readCString=function(l){var d=this.byteLength-this.position,c=new Uint8Array(this._buffer,this._byteOffset+this.position),t=d;l!=null&&(t=Math.min(l,d));for(var a=0;a<t&&c[a]!==0;a++);var n=String.fromCharCodeUint8.apply(null,[this.mapUint8Array(a)]);return l!=null?this.position+=t-a:a!=d&&(this.position+=1),n};var R=Math.pow(2,32);G.prototype.readInt64=function(){return this.readInt32()*R+this.readUint32()},G.prototype.readUint64=function(){return this.readUint32()*R+this.readUint32()},G.prototype.readInt64=function(){return this.readUint32()*R+this.readUint32()},G.prototype.readUint24=function(){return(this.readUint8()<<16)+(this.readUint8()<<8)+this.readUint8()},h.DataStream=G,G.prototype.save=function(l){var d=new Blob([this.buffer]);if(window.URL&&URL.createObjectURL){var c=window.URL.createObjectURL(d),t=document.createElement("a");document.body.appendChild(t),t.setAttribute("href",c),t.setAttribute("download",l),t.setAttribute("target","_self"),t.click(),window.URL.revokeObjectURL(c)}else throw"DataStream.save: Can't create object URL."},G.prototype._dynamicSize=!0,Object.defineProperty(G.prototype,"dynamicSize",{get:function(){return this._dynamicSize},set:function(l){l||this._trimAlloc(),this._dynamicSize=l}}),G.prototype.shift=function(l){var d=new ArrayBuffer(this._byteLength-l),c=new Uint8Array(d),t=new Uint8Array(this._buffer,l,c.length);c.set(t),this.buffer=d,this.position-=l},G.prototype.writeInt32Array=function(l,d){if(this._realloc(l.length*4),l instanceof Int32Array&&this.byteOffset+this.position%l.BYTES_PER_ELEMENT===0)G.memcpy(this._buffer,this.byteOffset+this.position,l.buffer,0,l.byteLength),this.mapInt32Array(l.length,d);else for(var c=0;c<l.length;c++)this.writeInt32(l[c],d)},G.prototype.writeInt16Array=function(l,d){if(this._realloc(l.length*2),l instanceof Int16Array&&this.byteOffset+this.position%l.BYTES_PER_ELEMENT===0)G.memcpy(this._buffer,this.byteOffset+this.position,l.buffer,0,l.byteLength),this.mapInt16Array(l.length,d);else for(var c=0;c<l.length;c++)this.writeInt16(l[c],d)},G.prototype.writeInt8Array=function(l){if(this._realloc(l.length*1),l instanceof Int8Array&&this.byteOffset+this.position%l.BYTES_PER_ELEMENT===0)G.memcpy(this._buffer,this.byteOffset+this.position,l.buffer,0,l.byteLength),this.mapInt8Array(l.length);else for(var d=0;d<l.length;d++)this.writeInt8(l[d])},G.prototype.writeUint32Array=function(l,d){if(this._realloc(l.length*4),l instanceof Uint32Array&&this.byteOffset+this.position%l.BYTES_PER_ELEMENT===0)G.memcpy(this._buffer,this.byteOffset+this.position,l.buffer,0,l.byteLength),this.mapUint32Array(l.length,d);else for(var c=0;c<l.length;c++)this.writeUint32(l[c],d)},G.prototype.writeUint16Array=function(l,d){if(this._realloc(l.length*2),l instanceof Uint16Array&&this.byteOffset+this.position%l.BYTES_PER_ELEMENT===0)G.memcpy(this._buffer,this.byteOffset+this.position,l.buffer,0,l.byteLength),this.mapUint16Array(l.length,d);else for(var c=0;c<l.length;c++)this.writeUint16(l[c],d)},G.prototype.writeUint8Array=function(l){if(this._realloc(l.length*1),l instanceof Uint8Array&&this.byteOffset+this.position%l.BYTES_PER_ELEMENT===0)G.memcpy(this._buffer,this.byteOffset+this.position,l.buffer,0,l.byteLength),this.mapUint8Array(l.length);else for(var d=0;d<l.length;d++)this.writeUint8(l[d])},G.prototype.writeFloat64Array=function(l,d){if(this._realloc(l.length*8),l instanceof Float64Array&&this.byteOffset+this.position%l.BYTES_PER_ELEMENT===0)G.memcpy(this._buffer,this.byteOffset+this.position,l.buffer,0,l.byteLength),this.mapFloat64Array(l.length,d);else for(var c=0;c<l.length;c++)this.writeFloat64(l[c],d)},G.prototype.writeFloat32Array=function(l,d){if(this._realloc(l.length*4),l instanceof Float32Array&&this.byteOffset+this.position%l.BYTES_PER_ELEMENT===0)G.memcpy(this._buffer,this.byteOffset+this.position,l.buffer,0,l.byteLength),this.mapFloat32Array(l.length,d);else for(var c=0;c<l.length;c++)this.writeFloat32(l[c],d)},G.prototype.writeInt32=function(l,d){this._realloc(4),this._dataView.setInt32(this.position,l,d!=null?d:this.endianness),this.position+=4},G.prototype.writeInt16=function(l,d){this._realloc(2),this._dataView.setInt16(this.position,l,d!=null?d:this.endianness),this.position+=2},G.prototype.writeInt8=function(l){this._realloc(1),this._dataView.setInt8(this.position,l),this.position+=1},G.prototype.writeUint32=function(l,d){this._realloc(4),this._dataView.setUint32(this.position,l,d!=null?d:this.endianness),this.position+=4},G.prototype.writeUint16=function(l,d){this._realloc(2),this._dataView.setUint16(this.position,l,d!=null?d:this.endianness),this.position+=2},G.prototype.writeUint8=function(l){this._realloc(1),this._dataView.setUint8(this.position,l),this.position+=1},G.prototype.writeFloat32=function(l,d){this._realloc(4),this._dataView.setFloat32(this.position,l,d!=null?d:this.endianness),this.position+=4},G.prototype.writeFloat64=function(l,d){this._realloc(8),this._dataView.setFloat64(this.position,l,d!=null?d:this.endianness),this.position+=8},G.prototype.writeUCS2String=function(l,d,c){c==null&&(c=l.length);for(var t=0;t<l.length&&t<c;t++)this.writeUint16(l.charCodeAt(t),d);for(;t<c;t++)this.writeUint16(0)},G.prototype.writeString=function(l,d,c){var t=0;if(d==null||d=="ASCII")if(c!=null){var a=Math.min(l.length,c);for(t=0;t<a;t++)this.writeUint8(l.charCodeAt(t));for(;t<c;t++)this.writeUint8(0)}else for(t=0;t<l.length;t++)this.writeUint8(l.charCodeAt(t));else this.writeUint8Array(new TextEncoder(d).encode(l.substring(0,c)))},G.prototype.writeCString=function(l,d){var c=0;if(d!=null){var t=Math.min(l.length,d);for(c=0;c<t;c++)this.writeUint8(l.charCodeAt(c));for(;c<d;c++)this.writeUint8(0)}else{for(c=0;c<l.length;c++)this.writeUint8(l.charCodeAt(c));this.writeUint8(0)}},G.prototype.writeStruct=function(l,d){for(var c=0;c<l.length;c+=2){var t=l[c+1];this.writeType(t,d[l[c]],d)}},G.prototype.writeType=function(l,d,c){var t;if(typeof l=="function")return l(this,d);if(typeof l=="object"&&!(l instanceof Array))return l.set(this,d,c);var a=null,n="ASCII",b=this.position;switch(typeof l=="string"&&/:/.test(l)&&(t=l.split(":"),l=t[0],a=parseInt(t[1])),typeof l=="string"&&/,/.test(l)&&(t=l.split(","),l=t[0],n=parseInt(t[1])),l){case"uint8":this.writeUint8(d);break;case"int8":this.writeInt8(d);break;case"uint16":this.writeUint16(d,this.endianness);break;case"int16":this.writeInt16(d,this.endianness);break;case"uint32":this.writeUint32(d,this.endianness);break;case"int32":this.writeInt32(d,this.endianness);break;case"float32":this.writeFloat32(d,this.endianness);break;case"float64":this.writeFloat64(d,this.endianness);break;case"uint16be":this.writeUint16(d,G.BIG_ENDIAN);break;case"int16be":this.writeInt16(d,G.BIG_ENDIAN);break;case"uint32be":this.writeUint32(d,G.BIG_ENDIAN);break;case"int32be":this.writeInt32(d,G.BIG_ENDIAN);break;case"float32be":this.writeFloat32(d,G.BIG_ENDIAN);break;case"float64be":this.writeFloat64(d,G.BIG_ENDIAN);break;case"uint16le":this.writeUint16(d,G.LITTLE_ENDIAN);break;case"int16le":this.writeInt16(d,G.LITTLE_ENDIAN);break;case"uint32le":this.writeUint32(d,G.LITTLE_ENDIAN);break;case"int32le":this.writeInt32(d,G.LITTLE_ENDIAN);break;case"float32le":this.writeFloat32(d,G.LITTLE_ENDIAN);break;case"float64le":this.writeFloat64(d,G.LITTLE_ENDIAN);break;case"cstring":this.writeCString(d,a);break;case"string":this.writeString(d,n,a);break;case"u16string":this.writeUCS2String(d,this.endianness,a);break;case"u16stringle":this.writeUCS2String(d,G.LITTLE_ENDIAN,a);break;case"u16stringbe":this.writeUCS2String(d,G.BIG_ENDIAN,a);break;default:if(l.length==3){for(var s=l[1],X=0;X<d.length;X++)this.writeType(s,d[X]);break}else{this.writeStruct(l,d);break}}a!=null&&(this.position=b,this._realloc(a),this.position=b+a)},G.prototype.writeUint64=function(l){var d=Math.floor(l/R);this.writeUint32(d),this.writeUint32(l&4294967295)},G.prototype.writeUint24=function(l){this.writeUint8((l&16711680)>>16),this.writeUint8((l&65280)>>8),this.writeUint8(l&255)},G.prototype.adjustUint32=function(l,d){var c=this.position;this.seek(l),this.writeUint32(d),this.seek(c)},G.prototype.mapInt32Array=function(l,d){this._realloc(l*4);var c=new Int32Array(this._buffer,this.byteOffset+this.position,l);return G.arrayToNative(c,d!=null?d:this.endianness),this.position+=l*4,c},G.prototype.mapInt16Array=function(l,d){this._realloc(l*2);var c=new Int16Array(this._buffer,this.byteOffset+this.position,l);return G.arrayToNative(c,d!=null?d:this.endianness),this.position+=l*2,c},G.prototype.mapInt8Array=function(l){this._realloc(l*1);var d=new Int8Array(this._buffer,this.byteOffset+this.position,l);return this.position+=l*1,d},G.prototype.mapUint32Array=function(l,d){this._realloc(l*4);var c=new Uint32Array(this._buffer,this.byteOffset+this.position,l);return G.arrayToNative(c,d!=null?d:this.endianness),this.position+=l*4,c},G.prototype.mapUint16Array=function(l,d){this._realloc(l*2);var c=new Uint16Array(this._buffer,this.byteOffset+this.position,l);return G.arrayToNative(c,d!=null?d:this.endianness),this.position+=l*2,c},G.prototype.mapFloat64Array=function(l,d){this._realloc(l*8);var c=new Float64Array(this._buffer,this.byteOffset+this.position,l);return G.arrayToNative(c,d!=null?d:this.endianness),this.position+=l*8,c},G.prototype.mapFloat32Array=function(l,d){this._realloc(l*4);var c=new Float32Array(this._buffer,this.byteOffset+this.position,l);return G.arrayToNative(c,d!=null?d:this.endianness),this.position+=l*4,c};var o=function(l){this.buffers=[],this.bufferIndex=-1,l&&(this.insertBuffer(l),this.bufferIndex=0)};o.prototype=new G(new ArrayBuffer,0,G.BIG_ENDIAN),o.prototype.initialized=function(){var l;return this.bufferIndex>-1?!0:this.buffers.length>0?(l=this.buffers[0],l.fileStart===0?(this.buffer=l,this.bufferIndex=0,m.debug("MultiBufferStream","Stream ready for parsing"),!0):(m.warn("MultiBufferStream","The first buffer should have a fileStart of 0"),this.logBufferLevel(),!1)):(m.warn("MultiBufferStream","No buffer to start parsing from"),this.logBufferLevel(),!1)},ArrayBuffer.concat=function(l,d){m.debug("ArrayBuffer","Trying to create a new buffer of size: "+(l.byteLength+d.byteLength));var c=new Uint8Array(l.byteLength+d.byteLength);return c.set(new Uint8Array(l),0),c.set(new Uint8Array(d),l.byteLength),c.buffer},o.prototype.reduceBuffer=function(l,d,c){var t;return t=new Uint8Array(c),t.set(new Uint8Array(l,d,c)),t.buffer.fileStart=l.fileStart+d,t.buffer.usedBytes=0,t.buffer},o.prototype.insertBuffer=function(l){for(var d=!0,c=0;c<this.buffers.length;c++){var t=this.buffers[c];if(l.fileStart<=t.fileStart){if(l.fileStart===t.fileStart)if(l.byteLength>t.byteLength){this.buffers.splice(c,1),c--;continue}else m.warn("MultiBufferStream","Buffer (fileStart: "+l.fileStart+" - Length: "+l.byteLength+") already appended, ignoring");else l.fileStart+l.byteLength<=t.fileStart||(l=this.reduceBuffer(l,0,t.fileStart-l.fileStart)),m.debug("MultiBufferStream","Appending new buffer (fileStart: "+l.fileStart+" - Length: "+l.byteLength+")"),this.buffers.splice(c,0,l),c===0&&(this.buffer=l);d=!1;break}else if(l.fileStart<t.fileStart+t.byteLength){var a=t.fileStart+t.byteLength-l.fileStart,n=l.byteLength-a;if(n>0)l=this.reduceBuffer(l,a,n);else{d=!1;break}}}d&&(m.debug("MultiBufferStream","Appending new buffer (fileStart: "+l.fileStart+" - Length: "+l.byteLength+")"),this.buffers.push(l),c===0&&(this.buffer=l))},o.prototype.logBufferLevel=function(l){var d,c,t,a,n=[],b,s="";for(t=0,a=0,d=0;d<this.buffers.length;d++)c=this.buffers[d],d===0?(b={},n.push(b),b.start=c.fileStart,b.end=c.fileStart+c.byteLength,s+="["+b.start+"-"):b.end===c.fileStart?b.end=c.fileStart+c.byteLength:(b={},b.start=c.fileStart,s+=n[n.length-1].end-1+"], ["+b.start+"-",b.end=c.fileStart+c.byteLength,n.push(b)),t+=c.usedBytes,a+=c.byteLength;n.length>0&&(s+=b.end-1+"]");var X=l?m.info:m.debug;this.buffers.length===0?X("MultiBufferStream","No more buffer in memory"):X("MultiBufferStream",""+this.buffers.length+" stored buffer(s) ("+t+"/"+a+" bytes), continuous ranges: "+s)},o.prototype.cleanBuffers=function(){var l,d;for(l=0;l<this.buffers.length;l++)d=this.buffers[l],d.usedBytes===d.byteLength&&(m.debug("MultiBufferStream","Removing buffer #"+l),this.buffers.splice(l,1),l--)},o.prototype.mergeNextBuffer=function(){var l;if(this.bufferIndex+1<this.buffers.length)if(l=this.buffers[this.bufferIndex+1],l.fileStart===this.buffer.fileStart+this.buffer.byteLength){var d=this.buffer.byteLength,c=this.buffer.usedBytes,t=this.buffer.fileStart;return this.buffers[this.bufferIndex]=ArrayBuffer.concat(this.buffer,l),this.buffer=this.buffers[this.bufferIndex],this.buffers.splice(this.bufferIndex+1,1),this.buffer.usedBytes=c,this.buffer.fileStart=t,m.debug("ISOFile","Concatenating buffer for box parsing (length: "+d+"->"+this.buffer.byteLength+")"),!0}else return!1;else return!1},o.prototype.findPosition=function(l,d,c){var t,a=null,n=-1;for(l===!0?t=0:t=this.bufferIndex;t<this.buffers.length&&(a=this.buffers[t],a.fileStart<=d);)n=t,c&&(a.fileStart+a.byteLength<=d?a.usedBytes=a.byteLength:a.usedBytes=d-a.fileStart,this.logBufferLevel()),t++;return n!==-1?(a=this.buffers[n],a.fileStart+a.byteLength>=d?(m.debug("MultiBufferStream","Found position in existing buffer #"+n),n):-1):-1},o.prototype.findEndContiguousBuf=function(l){var d,c,t,a=l!==void 0?l:this.bufferIndex;if(c=this.buffers[a],this.buffers.length>a+1)for(d=a+1;d<this.buffers.length&&(t=this.buffers[d],t.fileStart===c.fileStart+c.byteLength);d++)c=t;return c.fileStart+c.byteLength},o.prototype.getEndFilePositionAfter=function(l){var d=this.findPosition(!0,l,!1);return d!==-1?this.findEndContiguousBuf(d):l},o.prototype.addUsedBytes=function(l){this.buffer.usedBytes+=l,this.logBufferLevel()},o.prototype.setAllUsedBytes=function(){this.buffer.usedBytes=this.buffer.byteLength,this.logBufferLevel()},o.prototype.seek=function(l,d,c){var t;return t=this.findPosition(d,l,c),t!==-1?(this.buffer=this.buffers[t],this.bufferIndex=t,this.position=l-this.buffer.fileStart,m.debug("MultiBufferStream","Repositioning parser at buffer position: "+this.position),!0):(m.debug("MultiBufferStream","Position "+l+" not found in buffered data"),!1)},o.prototype.getPosition=function(){if(this.bufferIndex===-1||this.buffers[this.bufferIndex]===null)throw"Error accessing position in the MultiBufferStream";return this.buffers[this.bufferIndex].fileStart+this.position},o.prototype.getLength=function(){return this.byteLength},o.prototype.getEndPosition=function(){if(this.bufferIndex===-1||this.buffers[this.bufferIndex]===null)throw"Error accessing position in the MultiBufferStream";return this.buffers[this.bufferIndex].fileStart+this.byteLength},h.MultiBufferStream=o;var H=function(){var l=3,d=4,c=5,t=6,a=[];a[l]="ES_Descriptor",a[d]="DecoderConfigDescriptor",a[c]="DecoderSpecificInfo",a[t]="SLConfigDescriptor",this.getDescriptorName=function(s){return a[s]};var n=this,b={};return this.parseOneDescriptor=function(s){var X=0,p,V,y;for(p=s.readUint8(),y=s.readUint8();y&128;)X=(y&127)<<7,y=s.readUint8();return X+=y&127,m.debug("MPEG4DescriptorParser","Found "+(a[p]||"Descriptor "+p)+", size "+X+" at position "+s.getPosition()),a[p]?V=new b[a[p]](X):V=new b.Descriptor(X),V.parse(s),V},b.Descriptor=function(s,X){this.tag=s,this.size=X,this.descs=[]},b.Descriptor.prototype.parse=function(s){this.data=s.readUint8Array(this.size)},b.Descriptor.prototype.findDescriptor=function(s){for(var X=0;X<this.descs.length;X++)if(this.descs[X].tag==s)return this.descs[X];return null},b.Descriptor.prototype.parseRemainingDescriptors=function(s){for(var X=s.position;s.position<X+this.size;){var p=n.parseOneDescriptor(s);this.descs.push(p)}},b.ES_Descriptor=function(s){b.Descriptor.call(this,l,s)},b.ES_Descriptor.prototype=new b.Descriptor,b.ES_Descriptor.prototype.parse=function(s){if(this.ES_ID=s.readUint16(),this.flags=s.readUint8(),this.size-=3,this.flags&128?(this.dependsOn_ES_ID=s.readUint16(),this.size-=2):this.dependsOn_ES_ID=0,this.flags&64){var X=s.readUint8();this.URL=s.readString(X),this.size-=X+1}else this.URL="";this.flags&32?(this.OCR_ES_ID=s.readUint16(),this.size-=2):this.OCR_ES_ID=0,this.parseRemainingDescriptors(s)},b.ES_Descriptor.prototype.getOTI=function(s){var X=this.findDescriptor(d);return X?X.oti:0},b.ES_Descriptor.prototype.getAudioConfig=function(s){var X=this.findDescriptor(d);if(!X)return null;var p=X.findDescriptor(c);if(p&&p.data){var V=(p.data[0]&248)>>3;return V===31&&p.data.length>=2&&(V=32+((p.data[0]&7)<<3)+((p.data[1]&224)>>5)),V}else return null},b.DecoderConfigDescriptor=function(s){b.Descriptor.call(this,d,s)},b.DecoderConfigDescriptor.prototype=new b.Descriptor,b.DecoderConfigDescriptor.prototype.parse=function(s){this.oti=s.readUint8(),this.streamType=s.readUint8(),this.bufferSize=s.readUint24(),this.maxBitrate=s.readUint32(),this.avgBitrate=s.readUint32(),this.size-=13,this.parseRemainingDescriptors(s)},b.DecoderSpecificInfo=function(s){b.Descriptor.call(this,c,s)},b.DecoderSpecificInfo.prototype=new b.Descriptor,b.SLConfigDescriptor=function(s){b.Descriptor.call(this,t,s)},b.SLConfigDescriptor.prototype=new b.Descriptor,this};h.MPEG4DescriptorParser=H;var Z={ERR_INVALID_DATA:-1,ERR_NOT_ENOUGH_DATA:0,OK:1,BASIC_BOXES:["mdat","idat","free","skip","meco","strk"],FULL_BOXES:["hmhd","nmhd","iods","xml ","bxml","ipro","mere"],CONTAINER_BOXES:[["moov",["trak","pssh"]],["trak"],["edts"],["mdia"],["minf"],["dinf"],["stbl",["sgpd","sbgp"]],["mvex",["trex"]],["moof",["traf"]],["traf",["trun","sgpd","sbgp"]],["vttc"],["tref"],["iref"],["mfra",["tfra"]],["meco"],["hnti"],["hinf"],["strk"],["strd"],["sinf"],["rinf"],["schi"],["trgr"],["udta",["kind"]],["iprp",["ipma"]],["ipco"],["grpl"],["j2kH"],["etyp",["tyco"]]],boxCodes:[],fullBoxCodes:[],containerBoxCodes:[],sampleEntryCodes:{},sampleGroupEntryCodes:[],trackGroupTypes:[],UUIDBoxes:{},UUIDs:[],initialize:function(){Z.FullBox.prototype=new Z.Box,Z.ContainerBox.prototype=new Z.Box,Z.SampleEntry.prototype=new Z.Box,Z.TrackGroupTypeBox.prototype=new Z.FullBox,Z.BASIC_BOXES.forEach(function(l){Z.createBoxCtor(l)}),Z.FULL_BOXES.forEach(function(l){Z.createFullBoxCtor(l)}),Z.CONTAINER_BOXES.forEach(function(l){Z.createContainerBoxCtor(l[0],null,l[1])})},Box:function(l,d,c){this.type=l,this.size=d,this.uuid=c},FullBox:function(l,d,c){Z.Box.call(this,l,d,c),this.flags=0,this.version=0},ContainerBox:function(l,d,c){Z.Box.call(this,l,d,c),this.boxes=[]},SampleEntry:function(l,d,c,t){Z.ContainerBox.call(this,l,d),this.hdr_size=c,this.start=t},SampleGroupEntry:function(l){this.grouping_type=l},TrackGroupTypeBox:function(l,d){Z.FullBox.call(this,l,d)},createBoxCtor:function(l,d){Z.boxCodes.push(l),Z[l+"Box"]=function(c){Z.Box.call(this,l,c)},Z[l+"Box"].prototype=new Z.Box,d&&(Z[l+"Box"].prototype.parse=d)},createFullBoxCtor:function(l,d){Z[l+"Box"]=function(c){Z.FullBox.call(this,l,c)},Z[l+"Box"].prototype=new Z.FullBox,Z[l+"Box"].prototype.parse=function(c){this.parseFullHeader(c),d&&d.call(this,c)}},addSubBoxArrays:function(l){if(l){this.subBoxNames=l;for(var d=l.length,c=0;c<d;c++)this[l[c]+"s"]=[]}},createContainerBoxCtor:function(l,d,c){Z[l+"Box"]=function(t){Z.ContainerBox.call(this,l,t),Z.addSubBoxArrays.call(this,c)},Z[l+"Box"].prototype=new Z.ContainerBox,d&&(Z[l+"Box"].prototype.parse=d)},createMediaSampleEntryCtor:function(l,d,c){Z.sampleEntryCodes[l]=[],Z[l+"SampleEntry"]=function(t,a){Z.SampleEntry.call(this,t,a),Z.addSubBoxArrays.call(this,c)},Z[l+"SampleEntry"].prototype=new Z.SampleEntry,d&&(Z[l+"SampleEntry"].prototype.parse=d)},createSampleEntryCtor:function(l,d,c,t){Z.sampleEntryCodes[l].push(d),Z[d+"SampleEntry"]=function(a){Z[l+"SampleEntry"].call(this,d,a),Z.addSubBoxArrays.call(this,t)},Z[d+"SampleEntry"].prototype=new Z[l+"SampleEntry"],c&&(Z[d+"SampleEntry"].prototype.parse=c)},createEncryptedSampleEntryCtor:function(l,d,c){Z.createSampleEntryCtor.call(this,l,d,c,["sinf"])},createSampleGroupCtor:function(l,d){Z[l+"SampleGroupEntry"]=function(c){Z.SampleGroupEntry.call(this,l,c)},Z[l+"SampleGroupEntry"].prototype=new Z.SampleGroupEntry,d&&(Z[l+"SampleGroupEntry"].prototype.parse=d)},createTrackGroupCtor:function(l,d){Z[l+"TrackGroupTypeBox"]=function(c){Z.TrackGroupTypeBox.call(this,l,c)},Z[l+"TrackGroupTypeBox"].prototype=new Z.TrackGroupTypeBox,d&&(Z[l+"TrackGroupTypeBox"].prototype.parse=d)},createUUIDBox:function(l,d,c,t){Z.UUIDs.push(l),Z.UUIDBoxes[l]=function(a){d?Z.FullBox.call(this,"uuid",a,l):c?Z.ContainerBox.call(this,"uuid",a,l):Z.Box.call(this,"uuid",a,l)},Z.UUIDBoxes[l].prototype=d?new Z.FullBox:c?new Z.ContainerBox:new Z.Box,t&&(d?Z.UUIDBoxes[l].prototype.parse=function(a){this.parseFullHeader(a),t&&t.call(this,a)}:Z.UUIDBoxes[l].prototype.parse=t)}};Z.initialize(),Z.TKHD_FLAG_ENABLED=1,Z.TKHD_FLAG_IN_MOVIE=2,Z.TKHD_FLAG_IN_PREVIEW=4,Z.TFHD_FLAG_BASE_DATA_OFFSET=1,Z.TFHD_FLAG_SAMPLE_DESC=2,Z.TFHD_FLAG_SAMPLE_DUR=8,Z.TFHD_FLAG_SAMPLE_SIZE=16,Z.TFHD_FLAG_SAMPLE_FLAGS=32,Z.TFHD_FLAG_DUR_EMPTY=65536,Z.TFHD_FLAG_DEFAULT_BASE_IS_MOOF=131072,Z.TRUN_FLAGS_DATA_OFFSET=1,Z.TRUN_FLAGS_FIRST_FLAG=4,Z.TRUN_FLAGS_DURATION=256,Z.TRUN_FLAGS_SIZE=512,Z.TRUN_FLAGS_FLAGS=1024,Z.TRUN_FLAGS_CTS_OFFSET=2048,Z.Box.prototype.add=function(l){return this.addBox(new Z[l+"Box"])},Z.Box.prototype.addBox=function(l){return this.boxes.push(l),this[l.type+"s"]?this[l.type+"s"].push(l):this[l.type]=l,l},Z.Box.prototype.set=function(l,d){return this[l]=d,this},Z.Box.prototype.addEntry=function(l,d){var c=d||"entries";return this[c]||(this[c]=[]),this[c].push(l),this},h.BoxParser=Z,Z.parseUUID=function(l){return Z.parseHex16(l)},Z.parseHex16=function(l){for(var d="",c=0;c<16;c++){var t=l.readUint8().toString(16);d+=t.length===1?"0"+t:t}return d},Z.parseOneBox=function(l,d,c){var t,a=l.getPosition(),n=0,b,s;if(l.getEndPosition()-a<8)return m.debug("BoxParser","Not enough data in stream to parse the type and size of the box"),{code:Z.ERR_NOT_ENOUGH_DATA};if(c&&c<8)return m.debug("BoxParser","Not enough bytes left in the parent box to parse a new box"),{code:Z.ERR_NOT_ENOUGH_DATA};var X=l.readUint32(),p=l.readString(4),V=p;if(m.debug("BoxParser","Found box of type '"+p+"' and size "+X+" at position "+a),n=8,p=="uuid"){if(l.getEndPosition()-l.getPosition()<16||c-n<16)return l.seek(a),m.debug("BoxParser","Not enough bytes left in the parent box to parse a UUID box"),{code:Z.ERR_NOT_ENOUGH_DATA};s=Z.parseUUID(l),n+=16,V=s}if(X==1){if(l.getEndPosition()-l.getPosition()<8||c&&c-n<8)return l.seek(a),m.warn("BoxParser",'Not enough data in stream to parse the extended size of the "'+p+'" box'),{code:Z.ERR_NOT_ENOUGH_DATA};X=l.readUint64(),n+=8}else if(X===0){if(c)X=c;else if(p!=="mdat")return m.error("BoxParser","Unlimited box size not supported for type: '"+p+"'"),t=new Z.Box(p,X),{code:Z.OK,box:t,size:t.size}}return X!==0&&X<n?(m.error("BoxParser","Box of type "+p+" has an invalid size "+X+" (too small to be a box)"),{code:Z.ERR_NOT_ENOUGH_DATA,type:p,size:X,hdr_size:n,start:a}):X!==0&&c&&X>c?(m.error("BoxParser","Box of type '"+p+"' has a size "+X+" greater than its container size "+c),{code:Z.ERR_NOT_ENOUGH_DATA,type:p,size:X,hdr_size:n,start:a}):X!==0&&a+X>l.getEndPosition()?(l.seek(a),m.info("BoxParser","Not enough data in stream to parse the entire '"+p+"' box"),{code:Z.ERR_NOT_ENOUGH_DATA,type:p,size:X,hdr_size:n,start:a}):d?{code:Z.OK,type:p,size:X,hdr_size:n,start:a}:(Z[p+"Box"]?t=new Z[p+"Box"](X):p!=="uuid"?(m.warn("BoxParser","Unknown box type: '"+p+"'"),t=new Z.Box(p,X),t.has_unparsed_data=!0):Z.UUIDBoxes[s]?t=new Z.UUIDBoxes[s](X):(m.warn("BoxParser","Unknown uuid type: '"+s+"'"),t=new Z.Box(p,X),t.uuid=s,t.has_unparsed_data=!0),t.hdr_size=n,t.start=a,t.write===Z.Box.prototype.write&&t.type!=="mdat"&&(m.info("BoxParser","'"+V+"' box writing not yet implemented, keeping unparsed data in memory for later write"),t.parseDataAndRewind(l)),t.parse(l),b=l.getPosition()-(t.start+t.size),b<0?(m.warn("BoxParser","Parsing of box '"+V+"' did not read the entire indicated box data size (missing "+-b+" bytes), seeking forward"),l.seek(t.start+t.size)):b>0&&(m.error("BoxParser","Parsing of box '"+V+"' read "+b+" more bytes than the indicated box data size, seeking backwards"),t.size!==0&&l.seek(t.start+t.size)),{code:Z.OK,box:t,size:t.size})},Z.Box.prototype.parse=function(l){this.type!="mdat"?this.data=l.readUint8Array(this.size-this.hdr_size):this.size===0?l.seek(l.getEndPosition()):l.seek(this.start+this.size)},Z.Box.prototype.parseDataAndRewind=function(l){this.data=l.readUint8Array(this.size-this.hdr_size),l.position-=this.size-this.hdr_size},Z.FullBox.prototype.parseDataAndRewind=function(l){this.parseFullHeader(l),this.data=l.readUint8Array(this.size-this.hdr_size),this.hdr_size-=4,l.position-=this.size-this.hdr_size},Z.FullBox.prototype.parseFullHeader=function(l){this.version=l.readUint8(),this.flags=l.readUint24(),this.hdr_size+=4},Z.FullBox.prototype.parse=function(l){this.parseFullHeader(l),this.data=l.readUint8Array(this.size-this.hdr_size)},Z.ContainerBox.prototype.parse=function(l){for(var d,c;l.getPosition()<this.start+this.size;)if(d=Z.parseOneBox(l,!1,this.size-(l.getPosition()-this.start)),d.code===Z.OK)if(c=d.box,this.boxes.push(c),this.subBoxNames&&this.subBoxNames.indexOf(c.type)!=-1)this[this.subBoxNames[this.subBoxNames.indexOf(c.type)]+"s"].push(c);else{var t=c.type!=="uuid"?c.type:c.uuid;this[t]?m.warn("Box of type "+t+" already stored in field of this type"):this[t]=c}else return},Z.Box.prototype.parseLanguage=function(l){this.language=l.readUint16();var d=[];d[0]=this.language>>10&31,d[1]=this.language>>5&31,d[2]=this.language&31,this.languageString=String.fromCharCode(d[0]+96,d[1]+96,d[2]+96)},Z.SAMPLE_ENTRY_TYPE_VISUAL="Visual",Z.SAMPLE_ENTRY_TYPE_AUDIO="Audio",Z.SAMPLE_ENTRY_TYPE_HINT="Hint",Z.SAMPLE_ENTRY_TYPE_METADATA="Metadata",Z.SAMPLE_ENTRY_TYPE_SUBTITLE="Subtitle",Z.SAMPLE_ENTRY_TYPE_SYSTEM="System",Z.SAMPLE_ENTRY_TYPE_TEXT="Text",Z.SampleEntry.prototype.parseHeader=function(l){l.readUint8Array(6),this.data_reference_index=l.readUint16(),this.hdr_size+=8},Z.SampleEntry.prototype.parse=function(l){this.parseHeader(l),this.data=l.readUint8Array(this.size-this.hdr_size)},Z.SampleEntry.prototype.parseDataAndRewind=function(l){this.parseHeader(l),this.data=l.readUint8Array(this.size-this.hdr_size),this.hdr_size-=8,l.position-=this.size-this.hdr_size},Z.SampleEntry.prototype.parseFooter=function(l){Z.ContainerBox.prototype.parse.call(this,l)},Z.createMediaSampleEntryCtor(Z.SAMPLE_ENTRY_TYPE_HINT),Z.createMediaSampleEntryCtor(Z.SAMPLE_ENTRY_TYPE_METADATA),Z.createMediaSampleEntryCtor(Z.SAMPLE_ENTRY_TYPE_SUBTITLE),Z.createMediaSampleEntryCtor(Z.SAMPLE_ENTRY_TYPE_SYSTEM),Z.createMediaSampleEntryCtor(Z.SAMPLE_ENTRY_TYPE_TEXT),Z.createMediaSampleEntryCtor(Z.SAMPLE_ENTRY_TYPE_VISUAL,function(l){var d;this.parseHeader(l),l.readUint16(),l.readUint16(),l.readUint32Array(3),this.width=l.readUint16(),this.height=l.readUint16(),this.horizresolution=l.readUint32(),this.vertresolution=l.readUint32(),l.readUint32(),this.frame_count=l.readUint16(),d=Math.min(31,l.readUint8()),this.compressorname=l.readString(d),d<31&&l.readString(31-d),this.depth=l.readUint16(),l.readUint16(),this.parseFooter(l)}),Z.createMediaSampleEntryCtor(Z.SAMPLE_ENTRY_TYPE_AUDIO,function(l){this.parseHeader(l),l.readUint32Array(2),this.channel_count=l.readUint16(),this.samplesize=l.readUint16(),l.readUint16(),l.readUint16(),this.samplerate=l.readUint32()/65536,this.parseFooter(l)}),Z.createSampleEntryCtor(Z.SAMPLE_ENTRY_TYPE_VISUAL,"avc1"),Z.createSampleEntryCtor(Z.SAMPLE_ENTRY_TYPE_VISUAL,"avc2"),Z.createSampleEntryCtor(Z.SAMPLE_ENTRY_TYPE_VISUAL,"avc3"),Z.createSampleEntryCtor(Z.SAMPLE_ENTRY_TYPE_VISUAL,"avc4"),Z.createSampleEntryCtor(Z.SAMPLE_ENTRY_TYPE_VISUAL,"av01"),Z.createSampleEntryCtor(Z.SAMPLE_ENTRY_TYPE_VISUAL,"dav1"),Z.createSampleEntryCtor(Z.SAMPLE_ENTRY_TYPE_VISUAL,"hvc1"),Z.createSampleEntryCtor(Z.SAMPLE_ENTRY_TYPE_VISUAL,"hev1"),Z.createSampleEntryCtor(Z.SAMPLE_ENTRY_TYPE_VISUAL,"hvt1"),Z.createSampleEntryCtor(Z.SAMPLE_ENTRY_TYPE_VISUAL,"lhe1"),Z.createSampleEntryCtor(Z.SAMPLE_ENTRY_TYPE_VISUAL,"dvh1"),Z.createSampleEntryCtor(Z.SAMPLE_ENTRY_TYPE_VISUAL,"dvhe"),Z.createSampleEntryCtor(Z.SAMPLE_ENTRY_TYPE_VISUAL,"vvc1"),Z.createSampleEntryCtor(Z.SAMPLE_ENTRY_TYPE_VISUAL,"vvi1"),Z.createSampleEntryCtor(Z.SAMPLE_ENTRY_TYPE_VISUAL,"vvs1"),Z.createSampleEntryCtor(Z.SAMPLE_ENTRY_TYPE_VISUAL,"vvcN"),Z.createSampleEntryCtor(Z.SAMPLE_ENTRY_TYPE_VISUAL,"vp08"),Z.createSampleEntryCtor(Z.SAMPLE_ENTRY_TYPE_VISUAL,"vp09"),Z.createSampleEntryCtor(Z.SAMPLE_ENTRY_TYPE_VISUAL,"avs3"),Z.createSampleEntryCtor(Z.SAMPLE_ENTRY_TYPE_VISUAL,"j2ki"),Z.createSampleEntryCtor(Z.SAMPLE_ENTRY_TYPE_VISUAL,"mjp2"),Z.createSampleEntryCtor(Z.SAMPLE_ENTRY_TYPE_VISUAL,"mjpg"),Z.createSampleEntryCtor(Z.SAMPLE_ENTRY_TYPE_VISUAL,"uncv"),Z.createSampleEntryCtor(Z.SAMPLE_ENTRY_TYPE_AUDIO,"mp4a"),Z.createSampleEntryCtor(Z.SAMPLE_ENTRY_TYPE_AUDIO,"ac-3"),Z.createSampleEntryCtor(Z.SAMPLE_ENTRY_TYPE_AUDIO,"ac-4"),Z.createSampleEntryCtor(Z.SAMPLE_ENTRY_TYPE_AUDIO,"ec-3"),Z.createSampleEntryCtor(Z.SAMPLE_ENTRY_TYPE_AUDIO,"Opus"),Z.createSampleEntryCtor(Z.SAMPLE_ENTRY_TYPE_AUDIO,"mha1"),Z.createSampleEntryCtor(Z.SAMPLE_ENTRY_TYPE_AUDIO,"mha2"),Z.createSampleEntryCtor(Z.SAMPLE_ENTRY_TYPE_AUDIO,"mhm1"),Z.createSampleEntryCtor(Z.SAMPLE_ENTRY_TYPE_AUDIO,"mhm2"),Z.createEncryptedSampleEntryCtor(Z.SAMPLE_ENTRY_TYPE_VISUAL,"encv"),Z.createEncryptedSampleEntryCtor(Z.SAMPLE_ENTRY_TYPE_AUDIO,"enca"),Z.createEncryptedSampleEntryCtor(Z.SAMPLE_ENTRY_TYPE_SUBTITLE,"encu"),Z.createEncryptedSampleEntryCtor(Z.SAMPLE_ENTRY_TYPE_SYSTEM,"encs"),Z.createEncryptedSampleEntryCtor(Z.SAMPLE_ENTRY_TYPE_TEXT,"enct"),Z.createEncryptedSampleEntryCtor(Z.SAMPLE_ENTRY_TYPE_METADATA,"encm"),Z.createBoxCtor("a1lx",function(l){var d=l.readUint8()&1,c=((d&1)+1)*16;this.layer_size=[];for(var t=0;t<3;t++)c==16?this.layer_size[t]=l.readUint16():this.layer_size[t]=l.readUint32()}),Z.createBoxCtor("a1op",function(l){this.op_index=l.readUint8()}),Z.createFullBoxCtor("auxC",function(l){this.aux_type=l.readCString();var d=this.size-this.hdr_size-(this.aux_type.length+1);this.aux_subtype=l.readUint8Array(d)}),Z.createBoxCtor("av1C",function(l){var d=l.readUint8();if(d>>7&!1){m.error("av1C marker problem");return}if(this.version=d&127,this.version!==1){m.error("av1C version "+this.version+" not supported");return}if(d=l.readUint8(),this.seq_profile=d>>5&7,this.seq_level_idx_0=d&31,d=l.readUint8(),this.seq_tier_0=d>>7&1,this.high_bitdepth=d>>6&1,this.twelve_bit=d>>5&1,this.monochrome=d>>4&1,this.chroma_subsampling_x=d>>3&1,this.chroma_subsampling_y=d>>2&1,this.chroma_sample_position=d&3,d=l.readUint8(),this.reserved_1=d>>5&7,this.reserved_1!==0){m.error("av1C reserved_1 parsing problem");return}if(this.initial_presentation_delay_present=d>>4&1,this.initial_presentation_delay_present===1)this.initial_presentation_delay_minus_one=d&15;else if(this.reserved_2=d&15,this.reserved_2!==0){m.error("av1C reserved_2 parsing problem");return}var c=this.size-this.hdr_size-4;this.configOBUs=l.readUint8Array(c)}),Z.createBoxCtor("avcC",function(l){var d,c;for(this.configurationVersion=l.readUint8(),this.AVCProfileIndication=l.readUint8(),this.profile_compatibility=l.readUint8(),this.AVCLevelIndication=l.readUint8(),this.lengthSizeMinusOne=l.readUint8()&3,this.nb_SPS_nalus=l.readUint8()&31,c=this.size-this.hdr_size-6,this.SPS=[],d=0;d<this.nb_SPS_nalus;d++)this.SPS[d]={},this.SPS[d].length=l.readUint16(),this.SPS[d].nalu=l.readUint8Array(this.SPS[d].length),c-=2+this.SPS[d].length;for(this.nb_PPS_nalus=l.readUint8(),c--,this.PPS=[],d=0;d<this.nb_PPS_nalus;d++)this.PPS[d]={},this.PPS[d].length=l.readUint16(),this.PPS[d].nalu=l.readUint8Array(this.PPS[d].length),c-=2+this.PPS[d].length;c>0&&(this.ext=l.readUint8Array(c))}),Z.createBoxCtor("btrt",function(l){this.bufferSizeDB=l.readUint32(),this.maxBitrate=l.readUint32(),this.avgBitrate=l.readUint32()}),Z.createFullBoxCtor("ccst",function(l){var d=l.readUint8();this.all_ref_pics_intra=(d&128)==128,this.intra_pred_used=(d&64)==64,this.max_ref_per_pic=(d&63)>>2,l.readUint24()}),Z.createBoxCtor("cdef",function(l){var d;for(this.channel_count=l.readUint16(),this.channel_indexes=[],this.channel_types=[],this.channel_associations=[],d=0;d<this.channel_count;d++)this.channel_indexes.push(l.readUint16()),this.channel_types.push(l.readUint16()),this.channel_associations.push(l.readUint16())}),Z.createBoxCtor("clap",function(l){this.cleanApertureWidthN=l.readUint32(),this.cleanApertureWidthD=l.readUint32(),this.cleanApertureHeightN=l.readUint32(),this.cleanApertureHeightD=l.readUint32(),this.horizOffN=l.readUint32(),this.horizOffD=l.readUint32(),this.vertOffN=l.readUint32(),this.vertOffD=l.readUint32()}),Z.createBoxCtor("clli",function(l){this.max_content_light_level=l.readUint16(),this.max_pic_average_light_level=l.readUint16()}),Z.createFullBoxCtor("cmex",function(l){this.flags&1&&(this.pos_x=l.readInt32()),this.flags&2&&(this.pos_y=l.readInt32()),this.flags&4&&(this.pos_z=l.readInt32()),this.flags&8&&(this.version==0?this.flags&16?(this.quat_x=l.readInt32(),this.quat_y=l.readInt32(),this.quat_z=l.readInt32()):(this.quat_x=l.readInt16(),this.quat_y=l.readInt16(),this.quat_z=l.readInt16()):this.version==1),this.flags&32&&(this.id=l.readUint32())}),Z.createFullBoxCtor("cmin",function(l){this.focal_length_x=l.readInt32(),this.principal_point_x=l.readInt32(),this.principal_point_y=l.readInt32(),this.flags&1&&(this.focal_length_y=l.readInt32(),this.skew_factor=l.readInt32())}),Z.createBoxCtor("cmpd",function(l){for(this.component_count=l.readUint16(),this.component_types=[],this.component_type_urls=[],i=0;i<this.component_count;i++){var d=l.readUint16();this.component_types.push(d),d>=32768&&this.component_type_urls.push(l.readCString())}}),Z.createFullBoxCtor("co64",function(l){var d,c;if(d=l.readUint32(),this.chunk_offsets=[],this.version===0)for(c=0;c<d;c++)this.chunk_offsets.push(l.readUint64())}),Z.createFullBoxCtor("CoLL",function(l){this.maxCLL=l.readUint16(),this.maxFALL=l.readUint16()}),Z.createBoxCtor("colr",function(l){if(this.colour_type=l.readString(4),this.colour_type==="nclx"){this.colour_primaries=l.readUint16(),this.transfer_characteristics=l.readUint16(),this.matrix_coefficients=l.readUint16();var d=l.readUint8();this.full_range_flag=d>>7}else this.colour_type==="rICC"?this.ICC_profile=l.readUint8Array(this.size-4):this.colour_type==="prof"&&(this.ICC_profile=l.readUint8Array(this.size-4))}),Z.createFullBoxCtor("cprt",function(l){this.parseLanguage(l),this.notice=l.readCString()}),Z.createFullBoxCtor("cslg",function(l){this.version===0&&(this.compositionToDTSShift=l.readInt32(),this.leastDecodeToDisplayDelta=l.readInt32(),this.greatestDecodeToDisplayDelta=l.readInt32(),this.compositionStartTime=l.readInt32(),this.compositionEndTime=l.readInt32())}),Z.createFullBoxCtor("ctts",function(l){var d,c;if(d=l.readUint32(),this.sample_counts=[],this.sample_offsets=[],this.version===0)for(c=0;c<d;c++){this.sample_counts.push(l.readUint32());var t=l.readInt32();t<0&&m.warn("BoxParser","ctts box uses negative values without using version 1"),this.sample_offsets.push(t)}else if(this.version==1)for(c=0;c<d;c++)this.sample_counts.push(l.readUint32()),this.sample_offsets.push(l.readInt32())}),Z.createBoxCtor("dac3",function(l){var d=l.readUint8(),c=l.readUint8(),t=l.readUint8();this.fscod=d>>6,this.bsid=d>>1&31,this.bsmod=(d&1)<<2|c>>6&3,this.acmod=c>>3&7,this.lfeon=c>>2&1,this.bit_rate_code=c&3|t>>5&7}),Z.createBoxCtor("dec3",function(l){var d=l.readUint16();this.data_rate=d>>3,this.num_ind_sub=d&7,this.ind_subs=[];for(var c=0;c<this.num_ind_sub+1;c++){var t={};this.ind_subs.push(t);var a=l.readUint8(),n=l.readUint8(),b=l.readUint8();t.fscod=a>>6,t.bsid=a>>1&31,t.bsmod=(a&1)<<4|n>>4&15,t.acmod=n>>1&7,t.lfeon=n&1,t.num_dep_sub=b>>1&15,t.num_dep_sub>0&&(t.chan_loc=(b&1)<<8|l.readUint8())}}),Z.createFullBoxCtor("dfLa",function(l){var d=127,c=128,t=[],a=["STREAMINFO","PADDING","APPLICATION","SEEKTABLE","VORBIS_COMMENT","CUESHEET","PICTURE","RESERVED"];this.parseFullHeader(l);do{var n=l.readUint8(),b=Math.min(n&d,a.length-1);if(b?l.readUint8Array(l.readUint24()):(l.readUint8Array(13),this.samplerate=l.readUint32()>>12,l.readUint8Array(20)),t.push(a[b]),n&c)break}while(!0);this.numMetadataBlocks=t.length+" ("+t.join(", ")+")"}),Z.createBoxCtor("dimm",function(l){this.bytessent=l.readUint64()}),Z.createBoxCtor("dmax",function(l){this.time=l.readUint32()}),Z.createBoxCtor("dmed",function(l){this.bytessent=l.readUint64()}),Z.createBoxCtor("dOps",function(l){if(this.Version=l.readUint8(),this.OutputChannelCount=l.readUint8(),this.PreSkip=l.readUint16(),this.InputSampleRate=l.readUint32(),this.OutputGain=l.readInt16(),this.ChannelMappingFamily=l.readUint8(),this.ChannelMappingFamily!==0){this.StreamCount=l.readUint8(),this.CoupledCount=l.readUint8(),this.ChannelMapping=[];for(var d=0;d<this.OutputChannelCount;d++)this.ChannelMapping[d]=l.readUint8()}}),Z.createFullBoxCtor("dref",function(l){var d,c;this.entries=[];for(var t=l.readUint32(),a=0;a<t;a++)if(d=Z.parseOneBox(l,!1,this.size-(l.getPosition()-this.start)),d.code===Z.OK)c=d.box,this.entries.push(c);else return}),Z.createBoxCtor("drep",function(l){this.bytessent=l.readUint64()}),Z.createFullBoxCtor("elng",function(l){this.extended_language=l.readString(this.size-this.hdr_size)}),Z.createFullBoxCtor("elst",function(l){this.entries=[];for(var d=l.readUint32(),c=0;c<d;c++){var t={};this.entries.push(t),this.version===1?(t.segment_duration=l.readUint64(),t.media_time=l.readInt64()):(t.segment_duration=l.readUint32(),t.media_time=l.readInt32()),t.media_rate_integer=l.readInt16(),t.media_rate_fraction=l.readInt16()}}),Z.createFullBoxCtor("emsg",function(l){this.version==1?(this.timescale=l.readUint32(),this.presentation_time=l.readUint64(),this.event_duration=l.readUint32(),this.id=l.readUint32(),this.scheme_id_uri=l.readCString(),this.value=l.readCString()):(this.scheme_id_uri=l.readCString(),this.value=l.readCString(),this.timescale=l.readUint32(),this.presentation_time_delta=l.readUint32(),this.event_duration=l.readUint32(),this.id=l.readUint32());var d=this.size-this.hdr_size-(4*4+(this.scheme_id_uri.length+1)+(this.value.length+1));this.version==1&&(d-=4),this.message_data=l.readUint8Array(d)}),Z.createEntityToGroupCtor=function(l,d){Z[l+"Box"]=function(c){Z.FullBox.call(this,l,c)},Z[l+"Box"].prototype=new Z.FullBox,Z[l+"Box"].prototype.parse=function(c){if(this.parseFullHeader(c),d)d.call(this,c);else for(this.group_id=c.readUint32(),this.num_entities_in_group=c.readUint32(),this.entity_ids=[],i=0;i<this.num_entities_in_group;i++){var t=c.readUint32();this.entity_ids.push(t)}}},Z.createEntityToGroupCtor("aebr"),Z.createEntityToGroupCtor("afbr"),Z.createEntityToGroupCtor("albc"),Z.createEntityToGroupCtor("altr"),Z.createEntityToGroupCtor("brst"),Z.createEntityToGroupCtor("dobr"),Z.createEntityToGroupCtor("eqiv"),Z.createEntityToGroupCtor("favc"),Z.createEntityToGroupCtor("fobr"),Z.createEntityToGroupCtor("iaug"),Z.createEntityToGroupCtor("pano"),Z.createEntityToGroupCtor("slid"),Z.createEntityToGroupCtor("ster"),Z.createEntityToGroupCtor("tsyn"),Z.createEntityToGroupCtor("wbbr"),Z.createEntityToGroupCtor("prgr"),Z.createFullBoxCtor("esds",function(l){var d=l.readUint8Array(this.size-this.hdr_size);if(this.data=d,typeof H<"u"){var c=new H;this.esd=c.parseOneDescriptor(new G(d.buffer,0,G.BIG_ENDIAN))}}),Z.createBoxCtor("fiel",function(l){this.fieldCount=l.readUint8(),this.fieldOrdering=l.readUint8()}),Z.createBoxCtor("frma",function(l){this.data_format=l.readString(4)}),Z.createBoxCtor("ftyp",function(l){var d=this.size-this.hdr_size;this.major_brand=l.readString(4),this.minor_version=l.readUint32(),d-=8,this.compatible_brands=[];for(var c=0;d>=4;)this.compatible_brands[c]=l.readString(4),d-=4,c++}),Z.createFullBoxCtor("hdlr",function(l){this.version===0&&(l.readUint32(),this.handler=l.readString(4),l.readUint32Array(3),this.name=l.readString(this.size-this.hdr_size-20),this.name[this.name.length-1]==="\0"&&(this.name=this.name.slice(0,-1)))}),Z.createBoxCtor("hvcC",function(l){var d,c,t,a;this.configurationVersion=l.readUint8(),a=l.readUint8(),this.general_profile_space=a>>6,this.general_tier_flag=(a&32)>>5,this.general_profile_idc=a&31,this.general_profile_compatibility=l.readUint32(),this.general_constraint_indicator=l.readUint8Array(6),this.general_level_idc=l.readUint8(),this.min_spatial_segmentation_idc=l.readUint16()&4095,this.parallelismType=l.readUint8()&3,this.chroma_format_idc=l.readUint8()&3,this.bit_depth_luma_minus8=l.readUint8()&7,this.bit_depth_chroma_minus8=l.readUint8()&7,this.avgFrameRate=l.readUint16(),a=l.readUint8(),this.constantFrameRate=a>>6,this.numTemporalLayers=(a&13)>>3,this.temporalIdNested=(a&4)>>2,this.lengthSizeMinusOne=a&3,this.nalu_arrays=[];var n=l.readUint8();for(d=0;d<n;d++){var b=[];this.nalu_arrays.push(b),a=l.readUint8(),b.completeness=(a&128)>>7,b.nalu_type=a&63;var s=l.readUint16();for(c=0;c<s;c++){var X={};b.push(X),t=l.readUint16(),X.data=l.readUint8Array(t)}}}),Z.createFullBoxCtor("iinf",function(l){var d;this.version===0?this.entry_count=l.readUint16():this.entry_count=l.readUint32(),this.item_infos=[];for(var c=0;c<this.entry_count;c++)if(d=Z.parseOneBox(l,!1,this.size-(l.getPosition()-this.start)),d.code===Z.OK)d.box.type!=="infe"&&m.error("BoxParser","Expected 'infe' box, got "+d.box.type),this.item_infos[c]=d.box;else return}),Z.createFullBoxCtor("iloc",function(l){var d;d=l.readUint8(),this.offset_size=d>>4&15,this.length_size=d&15,d=l.readUint8(),this.base_offset_size=d>>4&15,this.version===1||this.version===2?this.index_size=d&15:this.index_size=0,this.items=[];var c=0;if(this.version<2)c=l.readUint16();else if(this.version===2)c=l.readUint32();else throw"version of iloc box not supported";for(var t=0;t<c;t++){var a={};if(this.items.push(a),this.version<2)a.item_ID=l.readUint16();else if(this.version===2)a.item_ID=l.readUint16();else throw"version of iloc box not supported";switch(this.version===1||this.version===2?a.construction_method=l.readUint16()&15:a.construction_method=0,a.data_reference_index=l.readUint16(),this.base_offset_size){case 0:a.base_offset=0;break;case 4:a.base_offset=l.readUint32();break;case 8:a.base_offset=l.readUint64();break;default:throw"Error reading base offset size"}var n=l.readUint16();a.extents=[];for(var b=0;b<n;b++){var s={};if(a.extents.push(s),this.version===1||this.version===2)switch(this.index_size){case 0:s.extent_index=0;break;case 4:s.extent_index=l.readUint32();break;case 8:s.extent_index=l.readUint64();break;default:throw"Error reading extent index"}switch(this.offset_size){case 0:s.extent_offset=0;break;case 4:s.extent_offset=l.readUint32();break;case 8:s.extent_offset=l.readUint64();break;default:throw"Error reading extent index"}switch(this.length_size){case 0:s.extent_length=0;break;case 4:s.extent_length=l.readUint32();break;case 8:s.extent_length=l.readUint64();break;default:throw"Error reading extent index"}}}}),Z.createBoxCtor("imir",function(l){var d=l.readUint8();this.reserved=d>>7,this.axis=d&1}),Z.createFullBoxCtor("infe",function(l){if((this.version===0||this.version===1)&&(this.item_ID=l.readUint16(),this.item_protection_index=l.readUint16(),this.item_name=l.readCString(),this.content_type=l.readCString(),this.content_encoding=l.readCString()),this.version===1){this.extension_type=l.readString(4),m.warn("BoxParser","Cannot parse extension type"),l.seek(this.start+this.size);return}this.version>=2&&(this.version===2?this.item_ID=l.readUint16():this.version===3&&(this.item_ID=l.readUint32()),this.item_protection_index=l.readUint16(),this.item_type=l.readString(4),this.item_name=l.readCString(),this.item_type==="mime"?(this.content_type=l.readCString(),this.content_encoding=l.readCString()):this.item_type==="uri "&&(this.item_uri_type=l.readCString()))}),Z.createFullBoxCtor("ipma",function(l){var d,c;for(entry_count=l.readUint32(),this.associations=[],d=0;d<entry_count;d++){var t={};this.associations.push(t),this.version<1?t.id=l.readUint16():t.id=l.readUint32();var a=l.readUint8();for(t.props=[],c=0;c<a;c++){var n=l.readUint8(),b={};t.props.push(b),b.essential=(n&128)>>7===1,this.flags&1?b.property_index=(n&127)<<8|l.readUint8():b.property_index=n&127}}}),Z.createFullBoxCtor("iref",function(l){var d,c;for(this.references=[];l.getPosition()<this.start+this.size;)if(d=Z.parseOneBox(l,!0,this.size-(l.getPosition()-this.start)),d.code===Z.OK)this.version===0?c=new Z.SingleItemTypeReferenceBox(d.type,d.size,d.hdr_size,d.start):c=new Z.SingleItemTypeReferenceBoxLarge(d.type,d.size,d.hdr_size,d.start),c.write===Z.Box.prototype.write&&c.type!=="mdat"&&(m.warn("BoxParser",c.type+" box writing not yet implemented, keeping unparsed data in memory for later write"),c.parseDataAndRewind(l)),c.parse(l),this.references.push(c);else return}),Z.createBoxCtor("irot",function(l){this.angle=l.readUint8()&3}),Z.createFullBoxCtor("ispe",function(l){this.image_width=l.readUint32(),this.image_height=l.readUint32()}),Z.createFullBoxCtor("kind",function(l){this.schemeURI=l.readCString(),this.value=l.readCString()}),Z.createFullBoxCtor("leva",function(l){var d=l.readUint8();this.levels=[];for(var c=0;c<d;c++){var t={};this.levels[c]=t,t.track_ID=l.readUint32();var a=l.readUint8();switch(t.padding_flag=a>>7,t.assignment_type=a&127,t.assignment_type){case 0:t.grouping_type=l.readString(4);break;case 1:t.grouping_type=l.readString(4),t.grouping_type_parameter=l.readUint32();break;case 2:break;case 3:break;case 4:t.sub_track_id=l.readUint32();break;default:m.warn("BoxParser","Unknown leva assignement type")}}}),Z.createBoxCtor("lsel",function(l){this.layer_id=l.readUint16()}),Z.createBoxCtor("maxr",function(l){this.period=l.readUint32(),this.bytes=l.readUint32()}),Z.createBoxCtor("mdcv",function(l){this.display_primaries=[],this.display_primaries[0]={},this.display_primaries[0].x=l.readUint16(),this.display_primaries[0].y=l.readUint16(),this.display_primaries[1]={},this.display_primaries[1].x=l.readUint16(),this.display_primaries[1].y=l.readUint16(),this.display_primaries[2]={},this.display_primaries[2].x=l.readUint16(),this.display_primaries[2].y=l.readUint16(),this.white_point={},this.white_point.x=l.readUint16(),this.white_point.y=l.readUint16(),this.max_display_mastering_luminance=l.readUint32(),this.min_display_mastering_luminance=l.readUint32()}),Z.createFullBoxCtor("mdhd",function(l){this.version==1?(this.creation_time=l.readUint64(),this.modification_time=l.readUint64(),this.timescale=l.readUint32(),this.duration=l.readUint64()):(this.creation_time=l.readUint32(),this.modification_time=l.readUint32(),this.timescale=l.readUint32(),this.duration=l.readUint32()),this.parseLanguage(l),l.readUint16()}),Z.createFullBoxCtor("mehd",function(l){this.flags&1&&(m.warn("BoxParser","mehd box incorrectly uses flags set to 1, converting version to 1"),this.version=1),this.version==1?this.fragment_duration=l.readUint64():this.fragment_duration=l.readUint32()}),Z.createFullBoxCtor("meta",function(l){this.boxes=[],Z.ContainerBox.prototype.parse.call(this,l)}),Z.createFullBoxCtor("mfhd",function(l){this.sequence_number=l.readUint32()}),Z.createFullBoxCtor("mfro",function(l){this._size=l.readUint32()}),Z.createFullBoxCtor("mvhd",function(l){this.version==1?(this.creation_time=l.readUint64(),this.modification_time=l.readUint64(),this.timescale=l.readUint32(),this.duration=l.readUint64()):(this.creation_time=l.readUint32(),this.modification_time=l.readUint32(),this.timescale=l.readUint32(),this.duration=l.readUint32()),this.rate=l.readUint32(),this.volume=l.readUint16()>>8,l.readUint16(),l.readUint32Array(2),this.matrix=l.readUint32Array(9),l.readUint32Array(6),this.next_track_id=l.readUint32()}),Z.createBoxCtor("npck",function(l){this.packetssent=l.readUint32()}),Z.createBoxCtor("nump",function(l){this.packetssent=l.readUint64()}),Z.createFullBoxCtor("padb",function(l){var d=l.readUint32();this.padbits=[];for(var c=0;c<Math.floor((d+1)/2);c++)this.padbits=l.readUint8()}),Z.createBoxCtor("pasp",function(l){this.hSpacing=l.readUint32(),this.vSpacing=l.readUint32()}),Z.createBoxCtor("payl",function(l){this.text=l.readString(this.size-this.hdr_size)}),Z.createBoxCtor("payt",function(l){this.payloadID=l.readUint32();var d=l.readUint8();this.rtpmap_string=l.readString(d)}),Z.createFullBoxCtor("pdin",function(l){var d=(this.size-this.hdr_size)/8;this.rate=[],this.initial_delay=[];for(var c=0;c<d;c++)this.rate[c]=l.readUint32(),this.initial_delay[c]=l.readUint32()}),Z.createFullBoxCtor("pitm",function(l){this.version===0?this.item_id=l.readUint16():this.item_id=l.readUint32()}),Z.createFullBoxCtor("pixi",function(l){var d;for(this.num_channels=l.readUint8(),this.bits_per_channels=[],d=0;d<this.num_channels;d++)this.bits_per_channels[d]=l.readUint8()}),Z.createBoxCtor("pmax",function(l){this.bytes=l.readUint32()}),Z.createFullBoxCtor("prdi",function(l){if(this.step_count=l.readUint16(),this.item_count=[],this.flags&2)for(var d=0;d<this.step_count;d++)this.item_count[d]=l.readUint16()}),Z.createFullBoxCtor("prft",function(l){this.ref_track_id=l.readUint32(),this.ntp_timestamp=l.readUint64(),this.version===0?this.media_time=l.readUint32():this.media_time=l.readUint64()}),Z.createFullBoxCtor("pssh",function(l){if(this.system_id=Z.parseHex16(l),this.version>0){var d=l.readUint32();this.kid=[];for(var c=0;c<d;c++)this.kid[c]=Z.parseHex16(l)}var t=l.readUint32();t>0&&(this.data=l.readUint8Array(t))}),Z.createFullBoxCtor("clef",function(l){this.width=l.readUint32(),this.height=l.readUint32()}),Z.createFullBoxCtor("enof",function(l){this.width=l.readUint32(),this.height=l.readUint32()}),Z.createFullBoxCtor("prof",function(l){this.width=l.readUint32(),this.height=l.readUint32()}),Z.createContainerBoxCtor("tapt",null,["clef","prof","enof"]),Z.createBoxCtor("rtp ",function(l){this.descriptionformat=l.readString(4),this.sdptext=l.readString(this.size-this.hdr_size-4)}),Z.createFullBoxCtor("saio",function(l){this.flags&1&&(this.aux_info_type=l.readUint32(),this.aux_info_type_parameter=l.readUint32());var d=l.readUint32();this.offset=[];for(var c=0;c<d;c++)this.version===0?this.offset[c]=l.readUint32():this.offset[c]=l.readUint64()}),Z.createFullBoxCtor("saiz",function(l){this.flags&1&&(this.aux_info_type=l.readUint32(),this.aux_info_type_parameter=l.readUint32()),this.default_sample_info_size=l.readUint8();var d=l.readUint32();if(this.sample_info_size=[],this.default_sample_info_size===0)for(var c=0;c<d;c++)this.sample_info_size[c]=l.readUint8()}),Z.createSampleEntryCtor(Z.SAMPLE_ENTRY_TYPE_METADATA,"mett",function(l){this.parseHeader(l),this.content_encoding=l.readCString(),this.mime_format=l.readCString(),this.parseFooter(l)}),Z.createSampleEntryCtor(Z.SAMPLE_ENTRY_TYPE_METADATA,"metx",function(l){this.parseHeader(l),this.content_encoding=l.readCString(),this.namespace=l.readCString(),this.schema_location=l.readCString(),this.parseFooter(l)}),Z.createSampleEntryCtor(Z.SAMPLE_ENTRY_TYPE_SUBTITLE,"sbtt",function(l){this.parseHeader(l),this.content_encoding=l.readCString(),this.mime_format=l.readCString(),this.parseFooter(l)}),Z.createSampleEntryCtor(Z.SAMPLE_ENTRY_TYPE_SUBTITLE,"stpp",function(l){this.parseHeader(l),this.namespace=l.readCString(),this.schema_location=l.readCString(),this.auxiliary_mime_types=l.readCString(),this.parseFooter(l)}),Z.createSampleEntryCtor(Z.SAMPLE_ENTRY_TYPE_SUBTITLE,"stxt",function(l){this.parseHeader(l),this.content_encoding=l.readCString(),this.mime_format=l.readCString(),this.parseFooter(l)}),Z.createSampleEntryCtor(Z.SAMPLE_ENTRY_TYPE_SUBTITLE,"tx3g",function(l){this.parseHeader(l),this.displayFlags=l.readUint32(),this.horizontal_justification=l.readInt8(),this.vertical_justification=l.readInt8(),this.bg_color_rgba=l.readUint8Array(4),this.box_record=l.readInt16Array(4),this.style_record=l.readUint8Array(12),this.parseFooter(l)}),Z.createSampleEntryCtor(Z.SAMPLE_ENTRY_TYPE_METADATA,"wvtt",function(l){this.parseHeader(l),this.parseFooter(l)}),Z.createSampleGroupCtor("alst",function(l){var d,c=l.readUint16();for(this.first_output_sample=l.readUint16(),this.sample_offset=[],d=0;d<c;d++)this.sample_offset[d]=l.readUint32();var t=this.description_length-4-4*c;for(this.num_output_samples=[],this.num_total_samples=[],d=0;d<t/4;d++)this.num_output_samples[d]=l.readUint16(),this.num_total_samples[d]=l.readUint16()}),Z.createSampleGroupCtor("avll",function(l){this.layerNumber=l.readUint8(),this.accurateStatisticsFlag=l.readUint8(),this.avgBitRate=l.readUint16(),this.avgFrameRate=l.readUint16()}),Z.createSampleGroupCtor("avss",function(l){this.subSequenceIdentifier=l.readUint16(),this.layerNumber=l.readUint8();var d=l.readUint8();this.durationFlag=d>>7,this.avgRateFlag=d>>6&1,this.durationFlag&&(this.duration=l.readUint32()),this.avgRateFlag&&(this.accurateStatisticsFlag=l.readUint8(),this.avgBitRate=l.readUint16(),this.avgFrameRate=l.readUint16()),this.dependency=[];for(var c=l.readUint8(),t=0;t<c;t++){var a={};this.dependency.push(a),a.subSeqDirectionFlag=l.readUint8(),a.layerNumber=l.readUint8(),a.subSequenceIdentifier=l.readUint16()}}),Z.createSampleGroupCtor("dtrt",function(l){m.warn("BoxParser","Sample Group type: "+this.grouping_type+" not fully parsed")}),Z.createSampleGroupCtor("mvif",function(l){m.warn("BoxParser","Sample Group type: "+this.grouping_type+" not fully parsed")}),Z.createSampleGroupCtor("prol",function(l){this.roll_distance=l.readInt16()}),Z.createSampleGroupCtor("rap ",function(l){var d=l.readUint8();this.num_leading_samples_known=d>>7,this.num_leading_samples=d&127}),Z.createSampleGroupCtor("rash",function(l){if(this.operation_point_count=l.readUint16(),this.description_length!==2+(this.operation_point_count===1?2:this.operation_point_count*6)+9)m.warn("BoxParser","Mismatch in "+this.grouping_type+" sample group length"),this.data=l.readUint8Array(this.description_length-2);else{if(this.operation_point_count===1)this.target_rate_share=l.readUint16();else{this.target_rate_share=[],this.available_bitrate=[];for(var d=0;d<this.operation_point_count;d++)this.available_bitrate[d]=l.readUint32(),this.target_rate_share[d]=l.readUint16()}this.maximum_bitrate=l.readUint32(),this.minimum_bitrate=l.readUint32(),this.discard_priority=l.readUint8()}}),Z.createSampleGroupCtor("roll",function(l){this.roll_distance=l.readInt16()}),Z.SampleGroupEntry.prototype.parse=function(l){m.warn("BoxParser","Unknown Sample Group type: "+this.grouping_type),this.data=l.readUint8Array(this.description_length)},Z.createSampleGroupCtor("scif",function(l){m.warn("BoxParser","Sample Group type: "+this.grouping_type+" not fully parsed")}),Z.createSampleGroupCtor("scnm",function(l){m.warn("BoxParser","Sample Group type: "+this.grouping_type+" not fully parsed")}),Z.createSampleGroupCtor("seig",function(l){this.reserved=l.readUint8();var d=l.readUint8();this.crypt_byte_block=d>>4,this.skip_byte_block=d&15,this.isProtected=l.readUint8(),this.Per_Sample_IV_Size=l.readUint8(),this.KID=Z.parseHex16(l),this.constant_IV_size=0,this.constant_IV=0,this.isProtected===1&&this.Per_Sample_IV_Size===0&&(this.constant_IV_size=l.readUint8(),this.constant_IV=l.readUint8Array(this.constant_IV_size))}),Z.createSampleGroupCtor("stsa",function(l){m.warn("BoxParser","Sample Group type: "+this.grouping_type+" not fully parsed")}),Z.createSampleGroupCtor("sync",function(l){var d=l.readUint8();this.NAL_unit_type=d&63}),Z.createSampleGroupCtor("tele",function(l){var d=l.readUint8();this.level_independently_decodable=d>>7}),Z.createSampleGroupCtor("tsas",function(l){m.warn("BoxParser","Sample Group type: "+this.grouping_type+" not fully parsed")}),Z.createSampleGroupCtor("tscl",function(l){m.warn("BoxParser","Sample Group type: "+this.grouping_type+" not fully parsed")}),Z.createSampleGroupCtor("vipr",function(l){m.warn("BoxParser","Sample Group type: "+this.grouping_type+" not fully parsed")}),Z.createFullBoxCtor("sbgp",function(l){this.grouping_type=l.readString(4),this.version===1?this.grouping_type_parameter=l.readUint32():this.grouping_type_parameter=0,this.entries=[];for(var d=l.readUint32(),c=0;c<d;c++){var t={};this.entries.push(t),t.sample_count=l.readInt32(),t.group_description_index=l.readInt32()}}),Z.createFullBoxCtor("schm",function(l){this.scheme_type=l.readString(4),this.scheme_version=l.readUint32(),this.flags&1&&(this.scheme_uri=l.readString(this.size-this.hdr_size-8))}),Z.createBoxCtor("sdp ",function(l){this.sdptext=l.readString(this.size-this.hdr_size)}),Z.createFullBoxCtor("sdtp",function(l){var d,c=this.size-this.hdr_size;this.is_leading=[],this.sample_depends_on=[],this.sample_is_depended_on=[],this.sample_has_redundancy=[];for(var t=0;t<c;t++)d=l.readUint8(),this.is_leading[t]=d>>6,this.sample_depends_on[t]=d>>4&3,this.sample_is_depended_on[t]=d>>2&3,this.sample_has_redundancy[t]=d&3}),Z.createFullBoxCtor("senc"),Z.createFullBoxCtor("sgpd",function(l){this.grouping_type=l.readString(4),m.debug("BoxParser","Found Sample Groups of type "+this.grouping_type),this.version===1?this.default_length=l.readUint32():this.default_length=0,this.version>=2&&(this.default_group_description_index=l.readUint32()),this.entries=[];for(var d=l.readUint32(),c=0;c<d;c++){var t;Z[this.grouping_type+"SampleGroupEntry"]?t=new Z[this.grouping_type+"SampleGroupEntry"](this.grouping_type):t=new Z.SampleGroupEntry(this.grouping_type),this.entries.push(t),this.version===1?this.default_length===0?t.description_length=l.readUint32():t.description_length=this.default_length:t.description_length=this.default_length,t.write===Z.SampleGroupEntry.prototype.write&&(m.info("BoxParser","SampleGroup for type "+this.grouping_type+" writing not yet implemented, keeping unparsed data in memory for later write"),t.data=l.readUint8Array(t.description_length),l.position-=t.description_length),t.parse(l)}}),Z.createFullBoxCtor("sidx",function(l){this.reference_ID=l.readUint32(),this.timescale=l.readUint32(),this.version===0?(this.earliest_presentation_time=l.readUint32(),this.first_offset=l.readUint32()):(this.earliest_presentation_time=l.readUint64(),this.first_offset=l.readUint64()),l.readUint16(),this.references=[];for(var d=l.readUint16(),c=0;c<d;c++){var t={};this.references.push(t);var a=l.readUint32();t.reference_type=a>>31&1,t.referenced_size=a&2147483647,t.subsegment_duration=l.readUint32(),a=l.readUint32(),t.starts_with_SAP=a>>31&1,t.SAP_type=a>>28&7,t.SAP_delta_time=a&268435455}}),Z.SingleItemTypeReferenceBox=function(l,d,c,t){Z.Box.call(this,l,d),this.hdr_size=c,this.start=t},Z.SingleItemTypeReferenceBox.prototype=new Z.Box,Z.SingleItemTypeReferenceBox.prototype.parse=function(l){this.from_item_ID=l.readUint16();var d=l.readUint16();this.references=[];for(var c=0;c<d;c++)this.references[c]={},this.references[c].to_item_ID=l.readUint16()},Z.SingleItemTypeReferenceBoxLarge=function(l,d,c,t){Z.Box.call(this,l,d),this.hdr_size=c,this.start=t},Z.SingleItemTypeReferenceBoxLarge.prototype=new Z.Box,Z.SingleItemTypeReferenceBoxLarge.prototype.parse=function(l){this.from_item_ID=l.readUint32();var d=l.readUint16();this.references=[];for(var c=0;c<d;c++)this.references[c]={},this.references[c].to_item_ID=l.readUint32()},Z.createFullBoxCtor("SmDm",function(l){this.primaryRChromaticity_x=l.readUint16(),this.primaryRChromaticity_y=l.readUint16(),this.primaryGChromaticity_x=l.readUint16(),this.primaryGChromaticity_y=l.readUint16(),this.primaryBChromaticity_x=l.readUint16(),this.primaryBChromaticity_y=l.readUint16(),this.whitePointChromaticity_x=l.readUint16(),this.whitePointChromaticity_y=l.readUint16(),this.luminanceMax=l.readUint32(),this.luminanceMin=l.readUint32()}),Z.createFullBoxCtor("smhd",function(l){this.balance=l.readUint16(),l.readUint16()}),Z.createFullBoxCtor("ssix",function(l){this.subsegments=[];for(var d=l.readUint32(),c=0;c<d;c++){var t={};this.subsegments.push(t),t.ranges=[];for(var a=l.readUint32(),n=0;n<a;n++){var b={};t.ranges.push(b),b.level=l.readUint8(),b.range_size=l.readUint24()}}}),Z.createFullBoxCtor("stco",function(l){var d;if(d=l.readUint32(),this.chunk_offsets=[],this.version===0)for(var c=0;c<d;c++)this.chunk_offsets.push(l.readUint32())}),Z.createFullBoxCtor("stdp",function(l){var d=(this.size-this.hdr_size)/2;this.priority=[];for(var c=0;c<d;c++)this.priority[c]=l.readUint16()}),Z.createFullBoxCtor("sthd"),Z.createFullBoxCtor("stri",function(l){this.switch_group=l.readUint16(),this.alternate_group=l.readUint16(),this.sub_track_id=l.readUint32();var d=(this.size-this.hdr_size-8)/4;this.attribute_list=[];for(var c=0;c<d;c++)this.attribute_list[c]=l.readUint32()}),Z.createFullBoxCtor("stsc",function(l){var d,c;if(d=l.readUint32(),this.first_chunk=[],this.samples_per_chunk=[],this.sample_description_index=[],this.version===0)for(c=0;c<d;c++)this.first_chunk.push(l.readUint32()),this.samples_per_chunk.push(l.readUint32()),this.sample_description_index.push(l.readUint32())}),Z.createFullBoxCtor("stsd",function(l){var d,c,t,a;for(this.entries=[],t=l.readUint32(),d=1;d<=t;d++)if(c=Z.parseOneBox(l,!0,this.size-(l.getPosition()-this.start)),c.code===Z.OK)Z[c.type+"SampleEntry"]?(a=new Z[c.type+"SampleEntry"](c.size),a.hdr_size=c.hdr_size,a.start=c.start):(m.warn("BoxParser","Unknown sample entry type: "+c.type),a=new Z.SampleEntry(c.type,c.size,c.hdr_size,c.start)),a.write===Z.SampleEntry.prototype.write&&(m.info("BoxParser","SampleEntry "+a.type+" box writing not yet implemented, keeping unparsed data in memory for later write"),a.parseDataAndRewind(l)),a.parse(l),this.entries.push(a);else return}),Z.createFullBoxCtor("stsg",function(l){this.grouping_type=l.readUint32();var d=l.readUint16();this.group_description_index=[];for(var c=0;c<d;c++)this.group_description_index[c]=l.readUint32()}),Z.createFullBoxCtor("stsh",function(l){var d,c;if(d=l.readUint32(),this.shadowed_sample_numbers=[],this.sync_sample_numbers=[],this.version===0)for(c=0;c<d;c++)this.shadowed_sample_numbers.push(l.readUint32()),this.sync_sample_numbers.push(l.readUint32())}),Z.createFullBoxCtor("stss",function(l){var d,c;if(c=l.readUint32(),this.version===0)for(this.sample_numbers=[],d=0;d<c;d++)this.sample_numbers.push(l.readUint32())}),Z.createFullBoxCtor("stsz",function(l){var d;if(this.sample_sizes=[],this.version===0)for(this.sample_size=l.readUint32(),this.sample_count=l.readUint32(),d=0;d<this.sample_count;d++)this.sample_size===0?this.sample_sizes.push(l.readUint32()):this.sample_sizes[d]=this.sample_size}),Z.createFullBoxCtor("stts",function(l){var d,c,t;if(d=l.readUint32(),this.sample_counts=[],this.sample_deltas=[],this.version===0)for(c=0;c<d;c++)this.sample_counts.push(l.readUint32()),t=l.readInt32(),t<0&&(m.warn("BoxParser","File uses negative stts sample delta, using value 1 instead, sync may be lost!"),t=1),this.sample_deltas.push(t)}),Z.createFullBoxCtor("stvi",function(l){var d=l.readUint32();this.single_view_allowed=d&3,this.stereo_scheme=l.readUint32();var c=l.readUint32();this.stereo_indication_type=l.readString(c);var t,a;for(this.boxes=[];l.getPosition()<this.start+this.size;)if(t=Z.parseOneBox(l,!1,this.size-(l.getPosition()-this.start)),t.code===Z.OK)a=t.box,this.boxes.push(a),this[a.type]=a;else return}),Z.createBoxCtor("styp",function(l){Z.ftypBox.prototype.parse.call(this,l)}),Z.createFullBoxCtor("stz2",function(l){var d,c;if(this.sample_sizes=[],this.version===0)if(this.reserved=l.readUint24(),this.field_size=l.readUint8(),c=l.readUint32(),this.field_size===4)for(d=0;d<c;d+=2){var t=l.readUint8();this.sample_sizes[d]=t>>4&15,this.sample_sizes[d+1]=t&15}else if(this.field_size===8)for(d=0;d<c;d++)this.sample_sizes[d]=l.readUint8();else if(this.field_size===16)for(d=0;d<c;d++)this.sample_sizes[d]=l.readUint16();else m.error("BoxParser","Error in length field in stz2 box")}),Z.createFullBoxCtor("subs",function(l){var d,c,t,a;for(t=l.readUint32(),this.entries=[],d=0;d<t;d++){var n={};if(this.entries[d]=n,n.sample_delta=l.readUint32(),n.subsamples=[],a=l.readUint16(),a>0)for(c=0;c<a;c++){var b={};n.subsamples.push(b),this.version==1?b.size=l.readUint32():b.size=l.readUint16(),b.priority=l.readUint8(),b.discardable=l.readUint8(),b.codec_specific_parameters=l.readUint32()}}}),Z.createFullBoxCtor("tenc",function(l){if(l.readUint8(),this.version===0)l.readUint8();else{var d=l.readUint8();this.default_crypt_byte_block=d>>4&15,this.default_skip_byte_block=d&15}this.default_isProtected=l.readUint8(),this.default_Per_Sample_IV_Size=l.readUint8(),this.default_KID=Z.parseHex16(l),this.default_isProtected===1&&this.default_Per_Sample_IV_Size===0&&(this.default_constant_IV_size=l.readUint8(),this.default_constant_IV=l.readUint8Array(this.default_constant_IV_size))}),Z.createFullBoxCtor("tfdt",function(l){this.version==1?this.baseMediaDecodeTime=l.readUint64():this.baseMediaDecodeTime=l.readUint32()}),Z.createFullBoxCtor("tfhd",function(l){var d=0;this.track_id=l.readUint32(),this.size-this.hdr_size>d&&this.flags&Z.TFHD_FLAG_BASE_DATA_OFFSET?(this.base_data_offset=l.readUint64(),d+=8):this.base_data_offset=0,this.size-this.hdr_size>d&&this.flags&Z.TFHD_FLAG_SAMPLE_DESC?(this.default_sample_description_index=l.readUint32(),d+=4):this.default_sample_description_index=0,this.size-this.hdr_size>d&&this.flags&Z.TFHD_FLAG_SAMPLE_DUR?(this.default_sample_duration=l.readUint32(),d+=4):this.default_sample_duration=0,this.size-this.hdr_size>d&&this.flags&Z.TFHD_FLAG_SAMPLE_SIZE?(this.default_sample_size=l.readUint32(),d+=4):this.default_sample_size=0,this.size-this.hdr_size>d&&this.flags&Z.TFHD_FLAG_SAMPLE_FLAGS?(this.default_sample_flags=l.readUint32(),d+=4):this.default_sample_flags=0}),Z.createFullBoxCtor("tfra",function(l){this.track_ID=l.readUint32(),l.readUint24();var d=l.readUint8();this.length_size_of_traf_num=d>>4&3,this.length_size_of_trun_num=d>>2&3,this.length_size_of_sample_num=d&3,this.entries=[];for(var c=l.readUint32(),t=0;t<c;t++)this.version===1?(this.time=l.readUint64(),this.moof_offset=l.readUint64()):(this.time=l.readUint32(),this.moof_offset=l.readUint32()),this.traf_number=l["readUint"+8*(this.length_size_of_traf_num+1)](),this.trun_number=l["readUint"+8*(this.length_size_of_trun_num+1)](),this.sample_number=l["readUint"+8*(this.length_size_of_sample_num+1)]()}),Z.createFullBoxCtor("tkhd",function(l){this.version==1?(this.creation_time=l.readUint64(),this.modification_time=l.readUint64(),this.track_id=l.readUint32(),l.readUint32(),this.duration=l.readUint64()):(this.creation_time=l.readUint32(),this.modification_time=l.readUint32(),this.track_id=l.readUint32(),l.readUint32(),this.duration=l.readUint32()),l.readUint32Array(2),this.layer=l.readInt16(),this.alternate_group=l.readInt16(),this.volume=l.readInt16()>>8,l.readUint16(),this.matrix=l.readInt32Array(9),this.width=l.readUint32(),this.height=l.readUint32()}),Z.createBoxCtor("tmax",function(l){this.time=l.readUint32()}),Z.createBoxCtor("tmin",function(l){this.time=l.readUint32()}),Z.createBoxCtor("totl",function(l){this.bytessent=l.readUint32()}),Z.createBoxCtor("tpay",function(l){this.bytessent=l.readUint32()}),Z.createBoxCtor("tpyl",function(l){this.bytessent=l.readUint64()}),Z.TrackGroupTypeBox.prototype.parse=function(l){this.parseFullHeader(l),this.track_group_id=l.readUint32()},Z.createTrackGroupCtor("msrc"),Z.TrackReferenceTypeBox=function(l,d,c,t){Z.Box.call(this,l,d),this.hdr_size=c,this.start=t},Z.TrackReferenceTypeBox.prototype=new Z.Box,Z.TrackReferenceTypeBox.prototype.parse=function(l){this.track_ids=l.readUint32Array((this.size-this.hdr_size)/4)},Z.trefBox.prototype.parse=function(l){for(var d,c;l.getPosition()<this.start+this.size;)if(d=Z.parseOneBox(l,!0,this.size-(l.getPosition()-this.start)),d.code===Z.OK)c=new Z.TrackReferenceTypeBox(d.type,d.size,d.hdr_size,d.start),c.write===Z.Box.prototype.write&&c.type!=="mdat"&&(m.info("BoxParser","TrackReference "+c.type+" box writing not yet implemented, keeping unparsed data in memory for later write"),c.parseDataAndRewind(l)),c.parse(l),this.boxes.push(c);else return},Z.createFullBoxCtor("trep",function(l){for(this.track_ID=l.readUint32(),this.boxes=[];l.getPosition()<this.start+this.size;)if(ret=Z.parseOneBox(l,!1,this.size-(l.getPosition()-this.start)),ret.code===Z.OK)box=ret.box,this.boxes.push(box);else return}),Z.createFullBoxCtor("trex",function(l){this.track_id=l.readUint32(),this.default_sample_description_index=l.readUint32(),this.default_sample_duration=l.readUint32(),this.default_sample_size=l.readUint32(),this.default_sample_flags=l.readUint32()}),Z.createBoxCtor("trpy",function(l){this.bytessent=l.readUint64()}),Z.createFullBoxCtor("trun",function(l){var d=0;if(this.sample_count=l.readUint32(),d+=4,this.size-this.hdr_size>d&&this.flags&Z.TRUN_FLAGS_DATA_OFFSET?(this.data_offset=l.readInt32(),d+=4):this.data_offset=0,this.size-this.hdr_size>d&&this.flags&Z.TRUN_FLAGS_FIRST_FLAG?(this.first_sample_flags=l.readUint32(),d+=4):this.first_sample_flags=0,this.sample_duration=[],this.sample_size=[],this.sample_flags=[],this.sample_composition_time_offset=[],this.size-this.hdr_size>d)for(var c=0;c<this.sample_count;c++)this.flags&Z.TRUN_FLAGS_DURATION&&(this.sample_duration[c]=l.readUint32()),this.flags&Z.TRUN_FLAGS_SIZE&&(this.sample_size[c]=l.readUint32()),this.flags&Z.TRUN_FLAGS_FLAGS&&(this.sample_flags[c]=l.readUint32()),this.flags&Z.TRUN_FLAGS_CTS_OFFSET&&(this.version===0?this.sample_composition_time_offset[c]=l.readUint32():this.sample_composition_time_offset[c]=l.readInt32())}),Z.createFullBoxCtor("tsel",function(l){this.switch_group=l.readUint32();var d=(this.size-this.hdr_size-4)/4;this.attribute_list=[];for(var c=0;c<d;c++)this.attribute_list[c]=l.readUint32()}),Z.createFullBoxCtor("txtC",function(l){this.config=l.readCString()}),Z.createBoxCtor("tyco",function(l){var d=(this.size-this.hdr_size)/4;this.compatible_brands=[];for(var c=0;c<d;c++)this.compatible_brands[c]=l.readString(4)}),Z.createFullBoxCtor("udes",function(l){this.lang=l.readCString(),this.name=l.readCString(),this.description=l.readCString(),this.tags=l.readCString()}),Z.createFullBoxCtor("uncC",function(l){var d;for(this.profile=l.readUint32(),this.component_count=l.readUint16(),this.component_index=[],this.component_bit_depth_minus_one=[],this.component_format=[],this.component_align_size=[],d=0;d<this.component_count;d++)this.component_index.push(l.readUint16()),this.component_bit_depth_minus_one.push(l.readUint8()),this.component_format.push(l.readUint8()),this.component_align_size.push(l.readUint8());this.sampling_type=l.readUint8(),this.interleave_type=l.readUint8(),this.block_size=l.readUint8();var c=l.readUint8();this.component_little_endian=c>>7&1,this.block_pad_lsb=c>>6&1,this.block_little_endian=c>>5&1,this.block_reversed=c>>4&1,this.pad_unknown=c>>3&1,this.pixel_size=l.readUint8(),this.row_align_size=l.readUint32(),this.tile_align_size=l.readUint32(),this.num_tile_cols_minus_one=l.readUint32(),this.num_tile_rows_minus_one=l.readUint32()}),Z.createFullBoxCtor("url ",function(l){this.flags!==1&&(this.location=l.readCString())}),Z.createFullBoxCtor("urn ",function(l){this.name=l.readCString(),this.size-this.hdr_size-this.name.length-1>0&&(this.location=l.readCString())}),Z.createUUIDBox("a5d40b30e81411ddba2f0800200c9a66",!0,!1,function(l){this.LiveServerManifest=l.readString(this.size-this.hdr_size).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#039;")}),Z.createUUIDBox("d08a4f1810f34a82b6c832d8aba183d3",!0,!1,function(l){this.system_id=Z.parseHex16(l);var d=l.readUint32();d>0&&(this.data=l.readUint8Array(d))}),Z.createUUIDBox("a2394f525a9b4f14a2446c427c648df4",!0,!1),Z.createUUIDBox("8974dbce7be74c5184f97148f9882554",!0,!1,function(l){this.default_AlgorithmID=l.readUint24(),this.default_IV_size=l.readUint8(),this.default_KID=Z.parseHex16(l)}),Z.createUUIDBox("d4807ef2ca3946958e5426cb9e46a79f",!0,!1,function(l){this.fragment_count=l.readUint8(),this.entries=[];for(var d=0;d<this.fragment_count;d++){var c={},t=0,a=0;this.version===1?(t=l.readUint64(),a=l.readUint64()):(t=l.readUint32(),a=l.readUint32()),c.absolute_time=t,c.absolute_duration=a,this.entries.push(c)}}),Z.createUUIDBox("6d1d9b0542d544e680e2141daff757b2",!0,!1,function(l){this.version===1?(this.absolute_time=l.readUint64(),this.duration=l.readUint64()):(this.absolute_time=l.readUint32(),this.duration=l.readUint32())}),Z.createFullBoxCtor("vmhd",function(l){this.graphicsmode=l.readUint16(),this.opcolor=l.readUint16Array(3)}),Z.createFullBoxCtor("vpcC",function(l){var d;this.version===1?(this.profile=l.readUint8(),this.level=l.readUint8(),d=l.readUint8(),this.bitDepth=d>>4,this.chromaSubsampling=d>>1&7,this.videoFullRangeFlag=d&1,this.colourPrimaries=l.readUint8(),this.transferCharacteristics=l.readUint8(),this.matrixCoefficients=l.readUint8(),this.codecIntializationDataSize=l.readUint16(),this.codecIntializationData=l.readUint8Array(this.codecIntializationDataSize)):(this.profile=l.readUint8(),this.level=l.readUint8(),d=l.readUint8(),this.bitDepth=d>>4&15,this.colorSpace=d&15,d=l.readUint8(),this.chromaSubsampling=d>>4&15,this.transferFunction=d>>1&7,this.videoFullRangeFlag=d&1,this.codecIntializationDataSize=l.readUint16(),this.codecIntializationData=l.readUint8Array(this.codecIntializationDataSize))}),Z.createBoxCtor("vttC",function(l){this.text=l.readString(this.size-this.hdr_size)}),Z.createFullBoxCtor("vvcC",function(l){var d,c,t={held_bits:void 0,num_held_bits:0,stream_read_1_bytes:function(W){this.held_bits=W.readUint8(),this.num_held_bits=8},stream_read_2_bytes:function(W){this.held_bits=W.readUint16(),this.num_held_bits=16},extract_bits:function(W){var J=this.held_bits>>this.num_held_bits-W&(1<<W)-1;return this.num_held_bits-=W,J}};if(t.stream_read_1_bytes(l),t.extract_bits(5),this.lengthSizeMinusOne=t.extract_bits(2),this.ptl_present_flag=t.extract_bits(1),this.ptl_present_flag){t.stream_read_2_bytes(l),this.ols_idx=t.extract_bits(9),this.num_sublayers=t.extract_bits(3),this.constant_frame_rate=t.extract_bits(2),this.chroma_format_idc=t.extract_bits(2),t.stream_read_1_bytes(l),this.bit_depth_minus8=t.extract_bits(3),t.extract_bits(5);{if(t.stream_read_2_bytes(l),t.extract_bits(2),this.num_bytes_constraint_info=t.extract_bits(6),this.general_profile_idc=t.extract_bits(7),this.general_tier_flag=t.extract_bits(1),this.general_level_idc=l.readUint8(),t.stream_read_1_bytes(l),this.ptl_frame_only_constraint_flag=t.extract_bits(1),this.ptl_multilayer_enabled_flag=t.extract_bits(1),this.general_constraint_info=new Uint8Array(this.num_bytes_constraint_info),this.num_bytes_constraint_info){for(d=0;d<this.num_bytes_constraint_info-1;d++){var a=t.extract_bits(6);t.stream_read_1_bytes(l);var n=t.extract_bits(2);this.general_constraint_info[d]=a<<2|n}this.general_constraint_info[this.num_bytes_constraint_info-1]=t.extract_bits(6)}else t.extract_bits(6);if(this.num_sublayers>1){for(t.stream_read_1_bytes(l),this.ptl_sublayer_present_mask=0,c=this.num_sublayers-2;c>=0;--c){var b=t.extract_bits(1);this.ptl_sublayer_present_mask|=b<<c}for(c=this.num_sublayers;c<=8&&this.num_sublayers>1;++c)t.extract_bits(1);for(this.sublayer_level_idc=[],c=this.num_sublayers-2;c>=0;--c)this.ptl_sublayer_present_mask&1<<c&&(this.sublayer_level_idc[c]=l.readUint8())}if(this.ptl_num_sub_profiles=l.readUint8(),this.general_sub_profile_idc=[],this.ptl_num_sub_profiles)for(d=0;d<this.ptl_num_sub_profiles;d++)this.general_sub_profile_idc.push(l.readUint32())}this.max_picture_width=l.readUint16(),this.max_picture_height=l.readUint16(),this.avg_frame_rate=l.readUint16()}var s=12,X=13;this.nalu_arrays=[];var p=l.readUint8();for(d=0;d<p;d++){var V=[];this.nalu_arrays.push(V),t.stream_read_1_bytes(l),V.completeness=t.extract_bits(1),t.extract_bits(2),V.nalu_type=t.extract_bits(5);var y=1;for(V.nalu_type!=X&&V.nalu_type!=s&&(y=l.readUint16()),c=0;c<y;c++){var r=l.readUint16();V.push({data:l.readUint8Array(r),length:r})}}}),Z.createFullBoxCtor("vvnC",function(l){var d=strm.readUint8();this.lengthSizeMinusOne=d&3}),Z.SampleEntry.prototype.isVideo=function(){return!1},Z.SampleEntry.prototype.isAudio=function(){return!1},Z.SampleEntry.prototype.isSubtitle=function(){return!1},Z.SampleEntry.prototype.isMetadata=function(){return!1},Z.SampleEntry.prototype.isHint=function(){return!1},Z.SampleEntry.prototype.getCodec=function(){return this.type.replace(".","")},Z.SampleEntry.prototype.getWidth=function(){return""},Z.SampleEntry.prototype.getHeight=function(){return""},Z.SampleEntry.prototype.getChannelCount=function(){return""},Z.SampleEntry.prototype.getSampleRate=function(){return""},Z.SampleEntry.prototype.getSampleSize=function(){return""},Z.VisualSampleEntry.prototype.isVideo=function(){return!0},Z.VisualSampleEntry.prototype.getWidth=function(){return this.width},Z.VisualSampleEntry.prototype.getHeight=function(){return this.height},Z.AudioSampleEntry.prototype.isAudio=function(){return!0},Z.AudioSampleEntry.prototype.getChannelCount=function(){return this.channel_count},Z.AudioSampleEntry.prototype.getSampleRate=function(){return this.samplerate},Z.AudioSampleEntry.prototype.getSampleSize=function(){return this.samplesize},Z.SubtitleSampleEntry.prototype.isSubtitle=function(){return!0},Z.MetadataSampleEntry.prototype.isMetadata=function(){return!0},Z.decimalToHex=function(l,d){var c=Number(l).toString(16);for(d=typeof d>"u"||d===null?d=2:d;c.length<d;)c="0"+c;return c},Z.avc1SampleEntry.prototype.getCodec=Z.avc2SampleEntry.prototype.getCodec=Z.avc3SampleEntry.prototype.getCodec=Z.avc4SampleEntry.prototype.getCodec=function(){var l=Z.SampleEntry.prototype.getCodec.call(this);return this.avcC?l+"."+Z.decimalToHex(this.avcC.AVCProfileIndication)+Z.decimalToHex(this.avcC.profile_compatibility)+Z.decimalToHex(this.avcC.AVCLevelIndication):l},Z.hev1SampleEntry.prototype.getCodec=Z.hvc1SampleEntry.prototype.getCodec=function(){var l,d=Z.SampleEntry.prototype.getCodec.call(this);if(this.hvcC){switch(d+=".",this.hvcC.general_profile_space){case 0:d+="";break;case 1:d+="A";break;case 2:d+="B";break;case 3:d+="C";break}d+=this.hvcC.general_profile_idc,d+=".";var c=this.hvcC.general_profile_compatibility,t=0;for(l=0;l<32&&(t|=c&1,l!=31);l++)t<<=1,c>>=1;d+=Z.decimalToHex(t,0),d+=".",this.hvcC.general_tier_flag===0?d+="L":d+="H",d+=this.hvcC.general_level_idc;var a=!1,n="";for(l=5;l>=0;l--)(this.hvcC.general_constraint_indicator[l]||a)&&(n="."+Z.decimalToHex(this.hvcC.general_constraint_indicator[l],0)+n,a=!0);d+=n}return d},Z.vvc1SampleEntry.prototype.getCodec=Z.vvi1SampleEntry.prototype.getCodec=function(){var l,d=Z.SampleEntry.prototype.getCodec.call(this);if(this.vvcC){d+="."+this.vvcC.general_profile_idc,this.vvcC.general_tier_flag?d+=".H":d+=".L",d+=this.vvcC.general_level_idc;var c="";if(this.vvcC.general_constraint_info){var t=[],a=0;a|=this.vvcC.ptl_frame_only_constraint<<7,a|=this.vvcC.ptl_multilayer_enabled<<6;var n;for(l=0;l<this.vvcC.general_constraint_info.length;++l)a|=this.vvcC.general_constraint_info[l]>>2&63,t.push(a),a&&(n=l),a=this.vvcC.general_constraint_info[l]>>2&3;if(n===void 0)c=".CA";else{c=".C";var b="ABCDEFGHIJKLMNOPQRSTUVWXYZ234567",s=0,X=0;for(l=0;l<=n;++l)for(s=s<<8|t[l],X+=8;X>=5;){var p=s>>X-5&31;c+=b[p],X-=5,s&=(1<<X)-1}X&&(s<<=5-X,c+=b[s&31])}}d+=c}return d},Z.mp4aSampleEntry.prototype.getCodec=function(){var l=Z.SampleEntry.prototype.getCodec.call(this);if(this.esds&&this.esds.esd){var d=this.esds.esd.getOTI(),c=this.esds.esd.getAudioConfig();return l+"."+Z.decimalToHex(d)+(c?"."+c:"")}else return l},Z.stxtSampleEntry.prototype.getCodec=function(){var l=Z.SampleEntry.prototype.getCodec.call(this);return this.mime_format?l+"."+this.mime_format:l},Z.vp08SampleEntry.prototype.getCodec=Z.vp09SampleEntry.prototype.getCodec=function(){var l=Z.SampleEntry.prototype.getCodec.call(this),d=this.vpcC.level;d==0&&(d="00");var c=this.vpcC.bitDepth;return c==8&&(c="08"),l+".0"+this.vpcC.profile+"."+d+"."+c},Z.av01SampleEntry.prototype.getCodec=function(){var l=Z.SampleEntry.prototype.getCodec.call(this),d=this.av1C.seq_level_idx_0;d<10&&(d="0"+d);var c;return this.av1C.seq_profile===2&&this.av1C.high_bitdepth===1?c=this.av1C.twelve_bit===1?"12":"10":this.av1C.seq_profile<=2&&(c=this.av1C.high_bitdepth===1?"10":"08"),l+"."+this.av1C.seq_profile+"."+d+(this.av1C.seq_tier_0?"H":"M")+"."+c},Z.Box.prototype.writeHeader=function(l,d){this.size+=8,this.size>R&&(this.size+=8),this.type==="uuid"&&(this.size+=16),m.debug("BoxWriter","Writing box "+this.type+" of size: "+this.size+" at position "+l.getPosition()+(d||"")),this.size>R?l.writeUint32(1):(this.sizePosition=l.getPosition(),l.writeUint32(this.size)),l.writeString(this.type,null,4),this.type==="uuid"&&l.writeUint8Array(this.uuid),this.size>R&&l.writeUint64(this.size)},Z.FullBox.prototype.writeHeader=function(l){this.size+=4,Z.Box.prototype.writeHeader.call(this,l," v="+this.version+" f="+this.flags),l.writeUint8(this.version),l.writeUint24(this.flags)},Z.Box.prototype.write=function(l){this.type==="mdat"?this.data&&(this.size=this.data.length,this.writeHeader(l),l.writeUint8Array(this.data)):(this.size=this.data?this.data.length:0,this.writeHeader(l),this.data&&l.writeUint8Array(this.data))},Z.ContainerBox.prototype.write=function(l){this.size=0,this.writeHeader(l);for(var d=0;d<this.boxes.length;d++)this.boxes[d]&&(this.boxes[d].write(l),this.size+=this.boxes[d].size);m.debug("BoxWriter","Adjusting box "+this.type+" with new size "+this.size),l.adjustUint32(this.sizePosition,this.size)},Z.TrackReferenceTypeBox.prototype.write=function(l){this.size=this.track_ids.length*4,this.writeHeader(l),l.writeUint32Array(this.track_ids)},Z.avcCBox.prototype.write=function(l){var d;for(this.size=7,d=0;d<this.SPS.length;d++)this.size+=2+this.SPS[d].length;for(d=0;d<this.PPS.length;d++)this.size+=2+this.PPS[d].length;for(this.ext&&(this.size+=this.ext.length),this.writeHeader(l),l.writeUint8(this.configurationVersion),l.writeUint8(this.AVCProfileIndication),l.writeUint8(this.profile_compatibility),l.writeUint8(this.AVCLevelIndication),l.writeUint8(this.lengthSizeMinusOne+252),l.writeUint8(this.SPS.length+224),d=0;d<this.SPS.length;d++)l.writeUint16(this.SPS[d].length),l.writeUint8Array(this.SPS[d].nalu);for(l.writeUint8(this.PPS.length),d=0;d<this.PPS.length;d++)l.writeUint16(this.PPS[d].length),l.writeUint8Array(this.PPS[d].nalu);this.ext&&l.writeUint8Array(this.ext)},Z.co64Box.prototype.write=function(l){var d;for(this.version=0,this.flags=0,this.size=4+8*this.chunk_offsets.length,this.writeHeader(l),l.writeUint32(this.chunk_offsets.length),d=0;d<this.chunk_offsets.length;d++)l.writeUint64(this.chunk_offsets[d])},Z.cslgBox.prototype.write=function(l){this.version=0,this.flags=0,this.size=4*5,this.writeHeader(l),l.writeInt32(this.compositionToDTSShift),l.writeInt32(this.leastDecodeToDisplayDelta),l.writeInt32(this.greatestDecodeToDisplayDelta),l.writeInt32(this.compositionStartTime),l.writeInt32(this.compositionEndTime)},Z.cttsBox.prototype.write=function(l){var d;for(this.version=0,this.flags=0,this.size=4+8*this.sample_counts.length,this.writeHeader(l),l.writeUint32(this.sample_counts.length),d=0;d<this.sample_counts.length;d++)l.writeUint32(this.sample_counts[d]),this.version===1?l.writeInt32(this.sample_offsets[d]):l.writeUint32(this.sample_offsets[d])},Z.drefBox.prototype.write=function(l){this.version=0,this.flags=0,this.size=4,this.writeHeader(l),l.writeUint32(this.entries.length);for(var d=0;d<this.entries.length;d++)this.entries[d].write(l),this.size+=this.entries[d].size;m.debug("BoxWriter","Adjusting box "+this.type+" with new size "+this.size),l.adjustUint32(this.sizePosition,this.size)},Z.elngBox.prototype.write=function(l){this.version=0,this.flags=0,this.size=this.extended_language.length,this.writeHeader(l),l.writeString(this.extended_language)},Z.elstBox.prototype.write=function(l){this.version=0,this.flags=0,this.size=4+12*this.entries.length,this.writeHeader(l),l.writeUint32(this.entries.length);for(var d=0;d<this.entries.length;d++){var c=this.entries[d];l.writeUint32(c.segment_duration),l.writeInt32(c.media_time),l.writeInt16(c.media_rate_integer),l.writeInt16(c.media_rate_fraction)}},Z.emsgBox.prototype.write=function(l){this.version=0,this.flags=0,this.size=4*4+this.message_data.length+(this.scheme_id_uri.length+1)+(this.value.length+1),this.writeHeader(l),l.writeCString(this.scheme_id_uri),l.writeCString(this.value),l.writeUint32(this.timescale),l.writeUint32(this.presentation_time_delta),l.writeUint32(this.event_duration),l.writeUint32(this.id),l.writeUint8Array(this.message_data)},Z.ftypBox.prototype.write=function(l){this.size=8+4*this.compatible_brands.length,this.writeHeader(l),l.writeString(this.major_brand,null,4),l.writeUint32(this.minor_version);for(var d=0;d<this.compatible_brands.length;d++)l.writeString(this.compatible_brands[d],null,4)},Z.hdlrBox.prototype.write=function(l){this.size=5*4+this.name.length+1,this.version=0,this.flags=0,this.writeHeader(l),l.writeUint32(0),l.writeString(this.handler,null,4),l.writeUint32(0),l.writeUint32(0),l.writeUint32(0),l.writeCString(this.name)},Z.hvcCBox.prototype.write=function(l){var d,c;for(this.size=23,d=0;d<this.nalu_arrays.length;d++)for(this.size+=3,c=0;c<this.nalu_arrays[d].length;c++)this.size+=2+this.nalu_arrays[d][c].data.length;for(this.writeHeader(l),l.writeUint8(this.configurationVersion),l.writeUint8(this.general_profile_space<<6+this.general_tier_flag<<5+this.general_profile_idc),l.writeUint32(this.general_profile_compatibility),l.writeUint8Array(this.general_constraint_indicator),l.writeUint8(this.general_level_idc),l.writeUint16(this.min_spatial_segmentation_idc+(15<<24)),l.writeUint8(this.parallelismType+252),l.writeUint8(this.chroma_format_idc+252),l.writeUint8(this.bit_depth_luma_minus8+248),l.writeUint8(this.bit_depth_chroma_minus8+248),l.writeUint16(this.avgFrameRate),l.writeUint8((this.constantFrameRate<<6)+(this.numTemporalLayers<<3)+(this.temporalIdNested<<2)+this.lengthSizeMinusOne),l.writeUint8(this.nalu_arrays.length),d=0;d<this.nalu_arrays.length;d++)for(l.writeUint8((this.nalu_arrays[d].completeness<<7)+this.nalu_arrays[d].nalu_type),l.writeUint16(this.nalu_arrays[d].length),c=0;c<this.nalu_arrays[d].length;c++)l.writeUint16(this.nalu_arrays[d][c].data.length),l.writeUint8Array(this.nalu_arrays[d][c].data)},Z.kindBox.prototype.write=function(l){this.version=0,this.flags=0,this.size=this.schemeURI.length+1+(this.value.length+1),this.writeHeader(l),l.writeCString(this.schemeURI),l.writeCString(this.value)},Z.mdhdBox.prototype.write=function(l){this.size=4*4+2*2,this.flags=0,this.version=0,this.writeHeader(l),l.writeUint32(this.creation_time),l.writeUint32(this.modification_time),l.writeUint32(this.timescale),l.writeUint32(this.duration),l.writeUint16(this.language),l.writeUint16(0)},Z.mehdBox.prototype.write=function(l){this.version=0,this.flags=0,this.size=4,this.writeHeader(l),l.writeUint32(this.fragment_duration)},Z.mfhdBox.prototype.write=function(l){this.version=0,this.flags=0,this.size=4,this.writeHeader(l),l.writeUint32(this.sequence_number)},Z.mvhdBox.prototype.write=function(l){this.version=0,this.flags=0,this.size=23*4+2*2,this.writeHeader(l),l.writeUint32(this.creation_time),l.writeUint32(this.modification_time),l.writeUint32(this.timescale),l.writeUint32(this.duration),l.writeUint32(this.rate),l.writeUint16(this.volume<<8),l.writeUint16(0),l.writeUint32(0),l.writeUint32(0),l.writeUint32Array(this.matrix),l.writeUint32(0),l.writeUint32(0),l.writeUint32(0),l.writeUint32(0),l.writeUint32(0),l.writeUint32(0),l.writeUint32(this.next_track_id)},Z.SampleEntry.prototype.writeHeader=function(l){this.size=8,Z.Box.prototype.writeHeader.call(this,l),l.writeUint8(0),l.writeUint8(0),l.writeUint8(0),l.writeUint8(0),l.writeUint8(0),l.writeUint8(0),l.writeUint16(this.data_reference_index)},Z.SampleEntry.prototype.writeFooter=function(l){for(var d=0;d<this.boxes.length;d++)this.boxes[d].write(l),this.size+=this.boxes[d].size;m.debug("BoxWriter","Adjusting box "+this.type+" with new size "+this.size),l.adjustUint32(this.sizePosition,this.size)},Z.SampleEntry.prototype.write=function(l){this.writeHeader(l),l.writeUint8Array(this.data),this.size+=this.data.length,m.debug("BoxWriter","Adjusting box "+this.type+" with new size "+this.size),l.adjustUint32(this.sizePosition,this.size)},Z.VisualSampleEntry.prototype.write=function(l){this.writeHeader(l),this.size+=2*7+6*4+32,l.writeUint16(0),l.writeUint16(0),l.writeUint32(0),l.writeUint32(0),l.writeUint32(0),l.writeUint16(this.width),l.writeUint16(this.height),l.writeUint32(this.horizresolution),l.writeUint32(this.vertresolution),l.writeUint32(0),l.writeUint16(this.frame_count),l.writeUint8(Math.min(31,this.compressorname.length)),l.writeString(this.compressorname,null,31),l.writeUint16(this.depth),l.writeInt16(-1),this.writeFooter(l)},Z.AudioSampleEntry.prototype.write=function(l){this.writeHeader(l),this.size+=2*4+3*4,l.writeUint32(0),l.writeUint32(0),l.writeUint16(this.channel_count),l.writeUint16(this.samplesize),l.writeUint16(0),l.writeUint16(0),l.writeUint32(this.samplerate<<16),this.writeFooter(l)},Z.stppSampleEntry.prototype.write=function(l){this.writeHeader(l),this.size+=this.namespace.length+1+this.schema_location.length+1+this.auxiliary_mime_types.length+1,l.writeCString(this.namespace),l.writeCString(this.schema_location),l.writeCString(this.auxiliary_mime_types),this.writeFooter(l)},Z.SampleGroupEntry.prototype.write=function(l){l.writeUint8Array(this.data)},Z.sbgpBox.prototype.write=function(l){this.version=1,this.flags=0,this.size=12+8*this.entries.length,this.writeHeader(l),l.writeString(this.grouping_type,null,4),l.writeUint32(this.grouping_type_parameter),l.writeUint32(this.entries.length);for(var d=0;d<this.entries.length;d++){var c=this.entries[d];l.writeInt32(c.sample_count),l.writeInt32(c.group_description_index)}},Z.sgpdBox.prototype.write=function(l){var d,c;for(this.flags=0,this.size=12,d=0;d<this.entries.length;d++)c=this.entries[d],this.version===1&&(this.default_length===0&&(this.size+=4),this.size+=c.data.length);for(this.writeHeader(l),l.writeString(this.grouping_type,null,4),this.version===1&&l.writeUint32(this.default_length),this.version>=2&&l.writeUint32(this.default_sample_description_index),l.writeUint32(this.entries.length),d=0;d<this.entries.length;d++)c=this.entries[d],this.version===1&&this.default_length===0&&l.writeUint32(c.description_length),c.write(l)},Z.sidxBox.prototype.write=function(l){this.version=0,this.flags=0,this.size=4*4+2+2+12*this.references.length,this.writeHeader(l),l.writeUint32(this.reference_ID),l.writeUint32(this.timescale),l.writeUint32(this.earliest_presentation_time),l.writeUint32(this.first_offset),l.writeUint16(0),l.writeUint16(this.references.length);for(var d=0;d<this.references.length;d++){var c=this.references[d];l.writeUint32(c.reference_type<<31|c.referenced_size),l.writeUint32(c.subsegment_duration),l.writeUint32(c.starts_with_SAP<<31|c.SAP_type<<28|c.SAP_delta_time)}},Z.smhdBox.prototype.write=function(l){this.version=0,this.flags=1,this.size=4,this.writeHeader(l),l.writeUint16(this.balance),l.writeUint16(0)},Z.stcoBox.prototype.write=function(l){this.version=0,this.flags=0,this.size=4+4*this.chunk_offsets.length,this.writeHeader(l),l.writeUint32(this.chunk_offsets.length),l.writeUint32Array(this.chunk_offsets)},Z.stscBox.prototype.write=function(l){var d;for(this.version=0,this.flags=0,this.size=4+12*this.first_chunk.length,this.writeHeader(l),l.writeUint32(this.first_chunk.length),d=0;d<this.first_chunk.length;d++)l.writeUint32(this.first_chunk[d]),l.writeUint32(this.samples_per_chunk[d]),l.writeUint32(this.sample_description_index[d])},Z.stsdBox.prototype.write=function(l){var d;for(this.version=0,this.flags=0,this.size=0,this.writeHeader(l),l.writeUint32(this.entries.length),this.size+=4,d=0;d<this.entries.length;d++)this.entries[d].write(l),this.size+=this.entries[d].size;m.debug("BoxWriter","Adjusting box "+this.type+" with new size "+this.size),l.adjustUint32(this.sizePosition,this.size)},Z.stshBox.prototype.write=function(l){var d;for(this.version=0,this.flags=0,this.size=4+8*this.shadowed_sample_numbers.length,this.writeHeader(l),l.writeUint32(this.shadowed_sample_numbers.length),d=0;d<this.shadowed_sample_numbers.length;d++)l.writeUint32(this.shadowed_sample_numbers[d]),l.writeUint32(this.sync_sample_numbers[d])},Z.stssBox.prototype.write=function(l){this.version=0,this.flags=0,this.size=4+4*this.sample_numbers.length,this.writeHeader(l),l.writeUint32(this.sample_numbers.length),l.writeUint32Array(this.sample_numbers)},Z.stszBox.prototype.write=function(l){var d,c=!0;if(this.version=0,this.flags=0,this.sample_sizes.length>0)for(d=0;d+1<this.sample_sizes.length;)if(this.sample_sizes[d+1]!==this.sample_sizes[0]){c=!1;break}else d++;else c=!1;this.size=8,c||(this.size+=4*this.sample_sizes.length),this.writeHeader(l),c?l.writeUint32(this.sample_sizes[0]):l.writeUint32(0),l.writeUint32(this.sample_sizes.length),c||l.writeUint32Array(this.sample_sizes)},Z.sttsBox.prototype.write=function(l){var d;for(this.version=0,this.flags=0,this.size=4+8*this.sample_counts.length,this.writeHeader(l),l.writeUint32(this.sample_counts.length),d=0;d<this.sample_counts.length;d++)l.writeUint32(this.sample_counts[d]),l.writeUint32(this.sample_deltas[d])},Z.tfdtBox.prototype.write=function(l){var d=Math.pow(2,32)-1;this.version=this.baseMediaDecodeTime>d?1:0,this.flags=0,this.size=4,this.version===1&&(this.size+=4),this.writeHeader(l),this.version===1?l.writeUint64(this.baseMediaDecodeTime):l.writeUint32(this.baseMediaDecodeTime)},Z.tfhdBox.prototype.write=function(l){this.version=0,this.size=4,this.flags&Z.TFHD_FLAG_BASE_DATA_OFFSET&&(this.size+=8),this.flags&Z.TFHD_FLAG_SAMPLE_DESC&&(this.size+=4),this.flags&Z.TFHD_FLAG_SAMPLE_DUR&&(this.size+=4),this.flags&Z.TFHD_FLAG_SAMPLE_SIZE&&(this.size+=4),this.flags&Z.TFHD_FLAG_SAMPLE_FLAGS&&(this.size+=4),this.writeHeader(l),l.writeUint32(this.track_id),this.flags&Z.TFHD_FLAG_BASE_DATA_OFFSET&&l.writeUint64(this.base_data_offset),this.flags&Z.TFHD_FLAG_SAMPLE_DESC&&l.writeUint32(this.default_sample_description_index),this.flags&Z.TFHD_FLAG_SAMPLE_DUR&&l.writeUint32(this.default_sample_duration),this.flags&Z.TFHD_FLAG_SAMPLE_SIZE&&l.writeUint32(this.default_sample_size),this.flags&Z.TFHD_FLAG_SAMPLE_FLAGS&&l.writeUint32(this.default_sample_flags)},Z.tkhdBox.prototype.write=function(l){this.version=0,this.size=4*18+2*4,this.writeHeader(l),l.writeUint32(this.creation_time),l.writeUint32(this.modification_time),l.writeUint32(this.track_id),l.writeUint32(0),l.writeUint32(this.duration),l.writeUint32(0),l.writeUint32(0),l.writeInt16(this.layer),l.writeInt16(this.alternate_group),l.writeInt16(this.volume<<8),l.writeUint16(0),l.writeInt32Array(this.matrix),l.writeUint32(this.width),l.writeUint32(this.height)},Z.trexBox.prototype.write=function(l){this.version=0,this.flags=0,this.size=4*5,this.writeHeader(l),l.writeUint32(this.track_id),l.writeUint32(this.default_sample_description_index),l.writeUint32(this.default_sample_duration),l.writeUint32(this.default_sample_size),l.writeUint32(this.default_sample_flags)},Z.trunBox.prototype.write=function(l){this.version=0,this.size=4,this.flags&Z.TRUN_FLAGS_DATA_OFFSET&&(this.size+=4),this.flags&Z.TRUN_FLAGS_FIRST_FLAG&&(this.size+=4),this.flags&Z.TRUN_FLAGS_DURATION&&(this.size+=4*this.sample_duration.length),this.flags&Z.TRUN_FLAGS_SIZE&&(this.size+=4*this.sample_size.length),this.flags&Z.TRUN_FLAGS_FLAGS&&(this.size+=4*this.sample_flags.length),this.flags&Z.TRUN_FLAGS_CTS_OFFSET&&(this.size+=4*this.sample_composition_time_offset.length),this.writeHeader(l),l.writeUint32(this.sample_count),this.flags&Z.TRUN_FLAGS_DATA_OFFSET&&(this.data_offset_position=l.getPosition(),l.writeInt32(this.data_offset)),this.flags&Z.TRUN_FLAGS_FIRST_FLAG&&l.writeUint32(this.first_sample_flags);for(var d=0;d<this.sample_count;d++)this.flags&Z.TRUN_FLAGS_DURATION&&l.writeUint32(this.sample_duration[d]),this.flags&Z.TRUN_FLAGS_SIZE&&l.writeUint32(this.sample_size[d]),this.flags&Z.TRUN_FLAGS_FLAGS&&l.writeUint32(this.sample_flags[d]),this.flags&Z.TRUN_FLAGS_CTS_OFFSET&&(this.version===0?l.writeUint32(this.sample_composition_time_offset[d]):l.writeInt32(this.sample_composition_time_offset[d]))},Z["url Box"].prototype.write=function(l){this.version=0,this.location?(this.flags=0,this.size=this.location.length+1):(this.flags=1,this.size=0),this.writeHeader(l),this.location&&l.writeCString(this.location)},Z["urn Box"].prototype.write=function(l){this.version=0,this.flags=0,this.size=this.name.length+1+(this.location?this.location.length+1:0),this.writeHeader(l),l.writeCString(this.name),this.location&&l.writeCString(this.location)},Z.vmhdBox.prototype.write=function(l){this.version=0,this.flags=1,this.size=8,this.writeHeader(l),l.writeUint16(this.graphicsmode),l.writeUint16Array(this.opcolor)},Z.cttsBox.prototype.unpack=function(l){var d,c,t;for(t=0,d=0;d<this.sample_counts.length;d++)for(c=0;c<this.sample_counts[d];c++)l[t].pts=l[t].dts+this.sample_offsets[d],t++},Z.sttsBox.prototype.unpack=function(l){var d,c,t;for(t=0,d=0;d<this.sample_counts.length;d++)for(c=0;c<this.sample_counts[d];c++)t===0?l[t].dts=0:l[t].dts=l[t-1].dts+this.sample_deltas[d],t++},Z.stcoBox.prototype.unpack=function(l){var d;for(d=0;d<this.chunk_offsets.length;d++)l[d].offset=this.chunk_offsets[d]},Z.stscBox.prototype.unpack=function(l){var d,c,t,a,n;for(a=0,n=0,d=0;d<this.first_chunk.length;d++)for(c=0;c<(d+1<this.first_chunk.length?this.first_chunk[d+1]:1/0);c++)for(n++,t=0;t<this.samples_per_chunk[d];t++){if(l[a])l[a].description_index=this.sample_description_index[d],l[a].chunk_index=n;else return;a++}},Z.stszBox.prototype.unpack=function(l){var d;for(d=0;d<this.sample_sizes.length;d++)l[d].size=this.sample_sizes[d]},Z.DIFF_BOXES_PROP_NAMES=["boxes","entries","references","subsamples","items","item_infos","extents","associations","subsegments","ranges","seekLists","seekPoints","esd","levels"],Z.DIFF_PRIMITIVE_ARRAY_PROP_NAMES=["compatible_brands","matrix","opcolor","sample_counts","sample_counts","sample_deltas","first_chunk","samples_per_chunk","sample_sizes","chunk_offsets","sample_offsets","sample_description_index","sample_duration"],Z.boxEqualFields=function(l,d){if(l&&!d)return!1;var c;for(c in l)if(!(Z.DIFF_BOXES_PROP_NAMES.indexOf(c)>-1)){if(l[c]instanceof Z.Box||d[c]instanceof Z.Box||typeof l[c]>"u"||typeof d[c]>"u"||typeof l[c]=="function"||typeof d[c]=="function"||l.subBoxNames&&l.subBoxNames.indexOf(c.slice(0,4))>-1||d.subBoxNames&&d.subBoxNames.indexOf(c.slice(0,4))>-1||c==="data"||c==="start"||c==="size"||c==="creation_time"||c==="modification_time"||Z.DIFF_PRIMITIVE_ARRAY_PROP_NAMES.indexOf(c)>-1)continue;if(l[c]!==d[c])return!1}return!0},Z.boxEqual=function(l,d){if(!Z.boxEqualFields(l,d))return!1;for(var c=0;c<Z.DIFF_BOXES_PROP_NAMES.length;c++){var t=Z.DIFF_BOXES_PROP_NAMES[c];if(l[t]&&d[t]&&!Z.boxEqual(l[t],d[t]))return!1}return!0};var K=function(){};K.prototype.parseSample=function(l){var d={},c;d.resources=[];var t=new e(l.data.buffer);if(!l.subsamples||l.subsamples.length===0)d.documentString=t.readString(l.data.length);else if(d.documentString=t.readString(l.subsamples[0].size),l.subsamples.length>1)for(c=1;c<l.subsamples.length;c++)d.resources[c]=t.readUint8Array(l.subsamples[c].size);return typeof DOMParser<"u"&&(d.document=new DOMParser().parseFromString(d.documentString,"application/xml")),d};var U=function(){};U.prototype.parseSample=function(l){var d,c=new e(l.data.buffer);return d=c.readString(l.data.length),d},U.prototype.parseConfig=function(l){var d,c=new e(l.buffer);return c.readUint32(),d=c.readCString(),d},h.XMLSubtitlein4Parser=K,h.Textin4Parser=U;var u=function(l){this.stream=l||new o,this.boxes=[],this.mdats=[],this.moofs=[],this.isProgressive=!1,this.moovStartFound=!1,this.onMoovStart=null,this.moovStartSent=!1,this.onReady=null,this.readySent=!1,this.onSegment=null,this.onSamples=null,this.onError=null,this.sampleListBuilt=!1,this.fragmentedTracks=[],this.extractedTracks=[],this.isFragmentationInitialized=!1,this.sampleProcessingStarted=!1,this.nextMoofNumber=0,this.itemListBuilt=!1,this.onSidx=null,this.sidxSent=!1};u.prototype.setSegmentOptions=function(l,d,c){var t=this.getTrackById(l);if(t){var a={};this.fragmentedTracks.push(a),a.id=l,a.user=d,a.trak=t,t.nextSample=0,a.segmentStream=null,a.nb_samples=1e3,a.rapAlignement=!0,c&&(c.nbSamples&&(a.nb_samples=c.nbSamples),c.rapAlignement&&(a.rapAlignement=c.rapAlignement))}},u.prototype.unsetSegmentOptions=function(l){for(var d=-1,c=0;c<this.fragmentedTracks.length;c++){var t=this.fragmentedTracks[c];t.id==l&&(d=c)}d>-1&&this.fragmentedTracks.splice(d,1)},u.prototype.setExtractionOptions=function(l,d,c){var t=this.getTrackById(l);if(t){var a={};this.extractedTracks.push(a),a.id=l,a.user=d,a.trak=t,t.nextSample=0,a.nb_samples=1e3,a.samples=[],c&&c.nbSamples&&(a.nb_samples=c.nbSamples)}},u.prototype.unsetExtractionOptions=function(l){for(var d=-1,c=0;c<this.extractedTracks.length;c++){var t=this.extractedTracks[c];t.id==l&&(d=c)}d>-1&&this.extractedTracks.splice(d,1)},u.prototype.parse=function(){var l,d,c=!1;if(!(this.restoreParsePosition&&!this.restoreParsePosition()))for(;;)if(this.hasIncompleteMdat&&this.hasIncompleteMdat()){if(this.processIncompleteMdat())continue;return}else if(this.saveParsePosition&&this.saveParsePosition(),l=Z.parseOneBox(this.stream,c),l.code===Z.ERR_NOT_ENOUGH_DATA)if(this.processIncompleteBox){if(this.processIncompleteBox(l))continue;return}else return;else{var t;switch(d=l.box,t=d.type!=="uuid"?d.type:d.uuid,this.boxes.push(d),t){case"mdat":this.mdats.push(d);break;case"moof":this.moofs.push(d);break;case"moov":this.moovStartFound=!0,this.mdats.length===0&&(this.isProgressive=!0);default:this[t]!==void 0&&m.warn("ISOFile","Duplicate Box of type: "+t+", overriding previous occurrence"),this[t]=d;break}this.updateUsedBytes&&this.updateUsedBytes(d,l)}},u.prototype.checkBuffer=function(l){if(l==null)throw"Buffer must be defined and non empty";if(l.fileStart===void 0)throw"Buffer must have a fileStart property";return l.byteLength===0?(m.warn("ISOFile","Ignoring empty buffer (fileStart: "+l.fileStart+")"),this.stream.logBufferLevel(),!1):(m.info("ISOFile","Processing buffer (fileStart: "+l.fileStart+")"),l.usedBytes=0,this.stream.insertBuffer(l),this.stream.logBufferLevel(),this.stream.initialized()?!0:(m.warn("ISOFile","Not ready to start parsing"),!1))},u.prototype.appendBuffer=function(l,d){var c;if(this.checkBuffer(l))return this.parse(),this.moovStartFound&&!this.moovStartSent&&(this.moovStartSent=!0,this.onMoovStart&&this.onMoovStart()),this.moov?(this.sampleListBuilt||(this.buildSampleLists(),this.sampleListBuilt=!0),this.updateSampleLists(),this.onReady&&!this.readySent&&(this.readySent=!0,this.onReady(this.getInfo())),this.processSamples(d),this.nextSeekPosition?(c=this.nextSeekPosition,this.nextSeekPosition=void 0):c=this.nextParsePosition,this.stream.getEndFilePositionAfter&&(c=this.stream.getEndFilePositionAfter(c))):this.nextParsePosition?c=this.nextParsePosition:c=0,this.sidx&&this.onSidx&&!this.sidxSent&&(this.onSidx(this.sidx),this.sidxSent=!0),this.meta&&(this.flattenItemInfo&&!this.itemListBuilt&&(this.flattenItemInfo(),this.itemListBuilt=!0),this.processItems&&this.processItems(this.onItem)),this.stream.cleanBuffers&&(m.info("ISOFile","Done processing buffer (fileStart: "+l.fileStart+") - next buffer to fetch should have a fileStart position of "+c),this.stream.logBufferLevel(),this.stream.cleanBuffers(),this.stream.logBufferLevel(!0),m.info("ISOFile","Sample data size in memory: "+this.getAllocatedSampleDataSize())),c},u.prototype.getInfo=function(){var l,d,c={},t,a,n,b,s=new Date("1904-01-01T00:00:00Z").getTime();if(this.moov)for(c.hasMoov=!0,c.duration=this.moov.mvhd.duration,c.timescale=this.moov.mvhd.timescale,c.isFragmented=this.moov.mvex!=null,c.isFragmented&&this.moov.mvex.mehd&&(c.fragment_duration=this.moov.mvex.mehd.fragment_duration),c.isProgressive=this.isProgressive,c.hasIOD=this.moov.iods!=null,c.brands=[],c.brands.push(this.ftyp.major_brand),c.brands=c.brands.concat(this.ftyp.compatible_brands),c.created=new Date(s+this.moov.mvhd.creation_time*1e3),c.modified=new Date(s+this.moov.mvhd.modification_time*1e3),c.tracks=[],c.audioTracks=[],c.videoTracks=[],c.subtitleTracks=[],c.metadataTracks=[],c.hintTracks=[],c.otherTracks=[],l=0;l<this.moov.traks.length;l++){if(t=this.moov.traks[l],b=t.mdia.minf.stbl.stsd.entries[0],a={},c.tracks.push(a),a.id=t.tkhd.track_id,a.name=t.mdia.hdlr.name,a.references=[],t.tref)for(d=0;d<t.tref.boxes.length;d++)n={},a.references.push(n),n.type=t.tref.boxes[d].type,n.track_ids=t.tref.boxes[d].track_ids;t.edts&&(a.edits=t.edts.elst.entries),a.created=new Date(s+t.tkhd.creation_time*1e3),a.modified=new Date(s+t.tkhd.modification_time*1e3),a.movie_duration=t.tkhd.duration,a.movie_timescale=c.timescale,a.layer=t.tkhd.layer,a.alternate_group=t.tkhd.alternate_group,a.volume=t.tkhd.volume,a.matrix=t.tkhd.matrix,a.track_width=t.tkhd.width/65536,a.track_height=t.tkhd.height/65536,a.timescale=t.mdia.mdhd.timescale,a.cts_shift=t.mdia.minf.stbl.cslg,a.duration=t.mdia.mdhd.duration,a.samples_duration=t.samples_duration,a.codec=b.getCodec(),a.kind=t.udta&&t.udta.kinds.length?t.udta.kinds[0]:{schemeURI:"",value:""},a.language=t.mdia.elng?t.mdia.elng.extended_language:t.mdia.mdhd.languageString,a.nb_samples=t.samples.length,a.size=t.samples_size,a.bitrate=a.size*8*a.timescale/a.samples_duration,b.isAudio()?(a.type="audio",c.audioTracks.push(a),a.audio={},a.audio.sample_rate=b.getSampleRate(),a.audio.channel_count=b.getChannelCount(),a.audio.sample_size=b.getSampleSize()):b.isVideo()?(a.type="video",c.videoTracks.push(a),a.video={},a.video.width=b.getWidth(),a.video.height=b.getHeight()):b.isSubtitle()?(a.type="subtitles",c.subtitleTracks.push(a)):b.isHint()?(a.type="metadata",c.hintTracks.push(a)):b.isMetadata()?(a.type="metadata",c.metadataTracks.push(a)):(a.type="metadata",c.otherTracks.push(a))}else c.hasMoov=!1;if(c.mime="",c.hasMoov&&c.tracks){for(c.videoTracks&&c.videoTracks.length>0?c.mime+='video/mp4; codecs="':c.audioTracks&&c.audioTracks.length>0?c.mime+='audio/mp4; codecs="':c.mime+='application/mp4; codecs="',l=0;l<c.tracks.length;l++)l!==0&&(c.mime+=","),c.mime+=c.tracks[l].codec;c.mime+='"; profiles="',c.mime+=this.ftyp.compatible_brands.join(),c.mime+='"'}return c},u.prototype.setNextSeekPositionFromSample=function(l){l&&(this.nextSeekPosition?this.nextSeekPosition=Math.min(l.offset+l.alreadyRead,this.nextSeekPosition):this.nextSeekPosition=l.offset+l.alreadyRead)},u.prototype.processSamples=function(l){var d,c;if(this.sampleProcessingStarted){if(this.isFragmentationInitialized&&this.onSegment!==null)for(d=0;d<this.fragmentedTracks.length;d++){var t=this.fragmentedTracks[d];for(c=t.trak;c.nextSample<c.samples.length&&this.sampleProcessingStarted;){m.debug("ISOFile","Creating media fragment on track #"+t.id+" for sample "+c.nextSample);var a=this.createFragment(t.id,c.nextSample,t.segmentStream);if(a)t.segmentStream=a,c.nextSample++;else break;if((c.nextSample%t.nb_samples===0||l||c.nextSample>=c.samples.length)&&(m.info("ISOFile","Sending fragmented data on track #"+t.id+" for samples ["+Math.max(0,c.nextSample-t.nb_samples)+","+(c.nextSample-1)+"]"),m.info("ISOFile","Sample data size in memory: "+this.getAllocatedSampleDataSize()),this.onSegment&&this.onSegment(t.id,t.user,t.segmentStream.buffer,c.nextSample,l||c.nextSample>=c.samples.length),t.segmentStream=null,t!==this.fragmentedTracks[d]))break}}if(this.onSamples!==null)for(d=0;d<this.extractedTracks.length;d++){var n=this.extractedTracks[d];for(c=n.trak;c.nextSample<c.samples.length&&this.sampleProcessingStarted;){m.debug("ISOFile","Exporting on track #"+n.id+" sample #"+c.nextSample);var b=this.getSample(c,c.nextSample);if(b)c.nextSample++,n.samples.push(b);else{this.setNextSeekPositionFromSample(c.samples[c.nextSample]);break}if((c.nextSample%n.nb_samples===0||c.nextSample>=c.samples.length)&&(m.debug("ISOFile","Sending samples on track #"+n.id+" for sample "+c.nextSample),this.onSamples&&this.onSamples(n.id,n.user,n.samples),n.samples=[],n!==this.extractedTracks[d]))break}}}},u.prototype.getBox=function(l){var d=this.getBoxes(l,!0);return d.length?d[0]:null},u.prototype.getBoxes=function(l,d){var c=[];return u._sweep.call(this,l,c,d),c},u._sweep=function(l,d,c){this.type&&this.type==l&&d.push(this);for(var t in this.boxes){if(d.length&&c)return;u._sweep.call(this.boxes[t],l,d,c)}},u.prototype.getTrackSamplesInfo=function(l){var d=this.getTrackById(l);if(d)return d.samples},u.prototype.getTrackSample=function(l,d){var c=this.getTrackById(l),t=this.getSample(c,d);return t},u.prototype.releaseUsedSamples=function(l,d){var c=0,t=this.getTrackById(l);t.lastValidSample||(t.lastValidSample=0);for(var a=t.lastValidSample;a<d;a++)c+=this.releaseSample(t,a);m.info("ISOFile","Track #"+l+" released samples up to "+d+" (released size: "+c+", remaining: "+this.samplesDataSize+")"),t.lastValidSample=d},u.prototype.start=function(){this.sampleProcessingStarted=!0,this.processSamples(!1)},u.prototype.stop=function(){this.sampleProcessingStarted=!1},u.prototype.flush=function(){m.info("ISOFile","Flushing remaining samples"),this.updateSampleLists(),this.processSamples(!0),this.stream.cleanBuffers(),this.stream.logBufferLevel(!0)},u.prototype.seekTrack=function(l,d,c){var t,a,n=1/0,b=0,s=0,X;if(c.samples.length===0)return m.info("ISOFile","No sample in track, cannot seek! Using time "+m.getDurationString(0,1)+" and offset: 0"),{offset:0,time:0};for(t=0;t<c.samples.length;t++){if(a=c.samples[t],t===0)s=0,X=a.timescale;else if(a.cts>l*a.timescale){s=t-1;break}d&&a.is_sync&&(b=t)}for(d&&(s=b),l=c.samples[s].cts,c.nextSample=s;c.samples[s].alreadyRead===c.samples[s].size&&c.samples[s+1];)s++;return n=c.samples[s].offset+c.samples[s].alreadyRead,m.info("ISOFile","Seeking to "+(d?"RAP":"")+" sample #"+c.nextSample+" on track "+c.tkhd.track_id+", time "+m.getDurationString(l,X)+" and offset: "+n),{offset:n,time:l/X}},u.prototype.getTrackDuration=function(l){var d;return l.samples?(d=l.samples[l.samples.length-1],(d.cts+d.duration)/d.timescale):1/0},u.prototype.seek=function(l,d){var c=this.moov,t,a,n,b={offset:1/0,time:1/0};if(this.moov){for(n=0;n<c.traks.length;n++)t=c.traks[n],!(l>this.getTrackDuration(t))&&(a=this.seekTrack(l,d,t),a.offset<b.offset&&(b.offset=a.offset),a.time<b.time&&(b.time=a.time));return m.info("ISOFile","Seeking at time "+m.getDurationString(b.time,1)+" needs a buffer with a fileStart position of "+b.offset),b.offset===1/0?b={offset:this.nextParsePosition,time:0}:b.offset=this.stream.getEndFilePositionAfter(b.offset),m.info("ISOFile","Adjusted seek position (after checking data already in buffer): "+b.offset),b}else throw"Cannot seek: moov not received!"},u.prototype.equal=function(l){for(var d=0;d<this.boxes.length&&d<l.boxes.length;){var c=this.boxes[d],t=l.boxes[d];if(!Z.boxEqual(c,t))return!1;d++}return!0},h.ISOFile=u,u.prototype.lastBoxStartPosition=0,u.prototype.parsingMdat=null,u.prototype.nextParsePosition=0,u.prototype.discardMdatData=!1,u.prototype.processIncompleteBox=function(l){var d,c,t;return l.type==="mdat"?(d=new Z[l.type+"Box"](l.size),this.parsingMdat=d,this.boxes.push(d),this.mdats.push(d),d.start=l.start,d.hdr_size=l.hdr_size,this.stream.addUsedBytes(d.hdr_size),this.lastBoxStartPosition=d.start+d.size,t=this.stream.seek(d.start+d.size,!1,this.discardMdatData),t?(this.parsingMdat=null,!0):(this.moovStartFound?this.nextParsePosition=this.stream.findEndContiguousBuf():this.nextParsePosition=d.start+d.size,!1)):(l.type==="moov"&&(this.moovStartFound=!0,this.mdats.length===0&&(this.isProgressive=!0)),c=this.stream.mergeNextBuffer?this.stream.mergeNextBuffer():!1,c?(this.nextParsePosition=this.stream.getEndPosition(),!0):(l.type?this.moovStartFound?this.nextParsePosition=this.stream.getEndPosition():this.nextParsePosition=this.stream.getPosition()+l.size:this.nextParsePosition=this.stream.getEndPosition(),!1))},u.prototype.hasIncompleteMdat=function(){return this.parsingMdat!==null},u.prototype.processIncompleteMdat=function(){var l,d;return l=this.parsingMdat,d=this.stream.seek(l.start+l.size,!1,this.discardMdatData),d?(m.debug("ISOFile","Found 'mdat' end in buffered data"),this.parsingMdat=null,!0):(this.nextParsePosition=this.stream.findEndContiguousBuf(),!1)},u.prototype.restoreParsePosition=function(){return this.stream.seek(this.lastBoxStartPosition,!0,this.discardMdatData)},u.prototype.saveParsePosition=function(){this.lastBoxStartPosition=this.stream.getPosition()},u.prototype.updateUsedBytes=function(l,d){this.stream.addUsedBytes&&(l.type==="mdat"?(this.stream.addUsedBytes(l.hdr_size),this.discardMdatData&&this.stream.addUsedBytes(l.size-l.hdr_size)):this.stream.addUsedBytes(l.size))},u.prototype.add=Z.Box.prototype.add,u.prototype.addBox=Z.Box.prototype.addBox,u.prototype.init=function(l){var d=l||{};this.add("ftyp").set("major_brand",d.brands&&d.brands[0]||"iso4").set("minor_version",0).set("compatible_brands",d.brands||["iso4"]);var c=this.add("moov");return c.add("mvhd").set("timescale",d.timescale||600).set("rate",d.rate||65536).set("creation_time",0).set("modification_time",0).set("duration",d.duration||0).set("volume",d.width?0:256).set("matrix",[65536,0,0,0,65536,0,0,0,1073741824]).set("next_track_id",1),c.add("mvex"),this},u.prototype.addTrack=function(l){this.moov||this.init(l);var d=l||{};d.width=d.width||320,d.height=d.height||320,d.id=d.id||this.moov.mvhd.next_track_id,d.type=d.type||"avc1";var c=this.moov.add("trak");this.moov.mvhd.next_track_id=d.id+1,c.add("tkhd").set("flags",Z.TKHD_FLAG_ENABLED|Z.TKHD_FLAG_IN_MOVIE|Z.TKHD_FLAG_IN_PREVIEW).set("creation_time",0).set("modification_time",0).set("track_id",d.id).set("duration",d.duration||0).set("layer",d.layer||0).set("alternate_group",0).set("volume",1).set("matrix",[0,0,0,0,0,0,0,0,0]).set("width",d.width<<16).set("height",d.height<<16);var t=c.add("mdia");t.add("mdhd").set("creation_time",0).set("modification_time",0).set("timescale",d.timescale||1).set("duration",d.media_duration||0).set("language",d.language||"und"),t.add("hdlr").set("handler",d.hdlr||"vide").set("name",d.name||"Track created with MP4Box.js"),t.add("elng").set("extended_language",d.language||"fr-FR");var a=t.add("minf");if(Z[d.type+"SampleEntry"]!==void 0){var n=new Z[d.type+"SampleEntry"];n.data_reference_index=1;var b="";for(var s in Z.sampleEntryCodes)for(var X=Z.sampleEntryCodes[s],p=0;p<X.length;p++)if(X.indexOf(d.type)>-1){b=s;break}switch(b){case"Visual":if(a.add("vmhd").set("graphicsmode",0).set("opcolor",[0,0,0]),n.set("width",d.width).set("height",d.height).set("horizresolution",72<<16).set("vertresolution",72<<16).set("frame_count",1).set("compressorname",d.type+" Compressor").set("depth",24),d.avcDecoderConfigRecord){var V=new Z.avcCBox;V.parse(new e(d.avcDecoderConfigRecord)),n.addBox(V)}else if(d.hevcDecoderConfigRecord){var y=new Z.hvcCBox;y.parse(new e(d.hevcDecoderConfigRecord)),n.addBox(y)}break;case"Audio":a.add("smhd").set("balance",d.balance||0),n.set("channel_count",d.channel_count||2).set("samplesize",d.samplesize||16).set("samplerate",d.samplerate||65536);break;case"Hint":a.add("hmhd");break;case"Subtitle":switch(a.add("sthd"),d.type){case"stpp":n.set("namespace",d.namespace||"nonamespace").set("schema_location",d.schema_location||"").set("auxiliary_mime_types",d.auxiliary_mime_types||"");break}break;case"Metadata":a.add("nmhd");break;case"System":a.add("nmhd");break;default:a.add("nmhd");break}d.description&&n.addBox(d.description),d.description_boxes&&d.description_boxes.forEach(function(W){n.addBox(W)}),a.add("dinf").add("dref").addEntry(new Z["url Box"]().set("flags",1));var r=a.add("stbl");return r.add("stsd").addEntry(n),r.add("stts").set("sample_counts",[]).set("sample_deltas",[]),r.add("stsc").set("first_chunk",[]).set("samples_per_chunk",[]).set("sample_description_index",[]),r.add("stco").set("chunk_offsets",[]),r.add("stsz").set("sample_sizes",[]),this.moov.mvex.add("trex").set("track_id",d.id).set("default_sample_description_index",d.default_sample_description_index||1).set("default_sample_duration",d.default_sample_duration||0).set("default_sample_size",d.default_sample_size||0).set("default_sample_flags",d.default_sample_flags||0),this.buildTrakSampleLists(c),d.id}},Z.Box.prototype.computeSize=function(l){var d=l||new G;d.endianness=G.BIG_ENDIAN,this.write(d)},u.prototype.addSample=function(l,d,c){var t=c||{},a={},n=this.getTrackById(l);if(n!==null){a.number=n.samples.length,a.track_id=n.tkhd.track_id,a.timescale=n.mdia.mdhd.timescale,a.description_index=t.sample_description_index?t.sample_description_index-1:0,a.description=n.mdia.minf.stbl.stsd.entries[a.description_index],a.data=d,a.size=d.byteLength,a.alreadyRead=a.size,a.duration=t.duration||1,a.cts=t.cts||0,a.dts=t.dts||0,a.is_sync=t.is_sync||!1,a.is_leading=t.is_leading||0,a.depends_on=t.depends_on||0,a.is_depended_on=t.is_depended_on||0,a.has_redundancy=t.has_redundancy||0,a.degradation_priority=t.degradation_priority||0,a.offset=0,a.subsamples=t.subsamples,n.samples.push(a),n.samples_size+=a.size,n.samples_duration+=a.duration,n.first_dts===void 0&&(n.first_dts=t.dts),this.processSamples();var b=this.createSingleSampleMoof(a);return this.addBox(b),b.computeSize(),b.trafs[0].truns[0].data_offset=b.size+8,this.add("mdat").data=new Uint8Array(d),a}},u.prototype.createSingleSampleMoof=function(l){var d=0;l.is_sync?d=1<<25:d=65536;var c=new Z.moofBox;c.add("mfhd").set("sequence_number",this.nextMoofNumber),this.nextMoofNumber++;var t=c.add("traf"),a=this.getTrackById(l.track_id);return t.add("tfhd").set("track_id",l.track_id).set("flags",Z.TFHD_FLAG_DEFAULT_BASE_IS_MOOF),t.add("tfdt").set("baseMediaDecodeTime",l.dts-(a.first_dts||0)),t.add("trun").set("flags",Z.TRUN_FLAGS_DATA_OFFSET|Z.TRUN_FLAGS_DURATION|Z.TRUN_FLAGS_SIZE|Z.TRUN_FLAGS_FLAGS|Z.TRUN_FLAGS_CTS_OFFSET).set("data_offset",0).set("first_sample_flags",0).set("sample_count",1).set("sample_duration",[l.duration]).set("sample_size",[l.size]).set("sample_flags",[d]).set("sample_composition_time_offset",[l.cts-l.dts]),c},u.prototype.lastMoofIndex=0,u.prototype.samplesDataSize=0,u.prototype.resetTables=function(){var l,d,c,t,a,n,b,s;for(this.initial_duration=this.moov.mvhd.duration,this.moov.mvhd.duration=0,l=0;l<this.moov.traks.length;l++){d=this.moov.traks[l],d.tkhd.duration=0,d.mdia.mdhd.duration=0,c=d.mdia.minf.stbl.stco||d.mdia.minf.stbl.co64,c.chunk_offsets=[],t=d.mdia.minf.stbl.stsc,t.first_chunk=[],t.samples_per_chunk=[],t.sample_description_index=[],a=d.mdia.minf.stbl.stsz||d.mdia.minf.stbl.stz2,a.sample_sizes=[],n=d.mdia.minf.stbl.stts,n.sample_counts=[],n.sample_deltas=[],b=d.mdia.minf.stbl.ctts,b&&(b.sample_counts=[],b.sample_offsets=[]),s=d.mdia.minf.stbl.stss;var X=d.mdia.minf.stbl.boxes.indexOf(s);X!=-1&&(d.mdia.minf.stbl.boxes[X]=null)}},u.initSampleGroups=function(l,d,c,t,a){var n,b,s,X;function p(V,y,r){this.grouping_type=V,this.grouping_type_parameter=y,this.sbgp=r,this.last_sample_in_run=-1,this.entry_index=-1}for(d&&(d.sample_groups_info=[]),l.sample_groups_info||(l.sample_groups_info=[]),b=0;b<c.length;b++){for(X=c[b].grouping_type+"/"+c[b].grouping_type_parameter,s=new p(c[b].grouping_type,c[b].grouping_type_parameter,c[b]),d&&(d.sample_groups_info[X]=s),l.sample_groups_info[X]||(l.sample_groups_info[X]=s),n=0;n<t.length;n++)t[n].grouping_type===c[b].grouping_type&&(s.description=t[n],s.description.used=!0);if(a)for(n=0;n<a.length;n++)a[n].grouping_type===c[b].grouping_type&&(s.fragment_description=a[n],s.fragment_description.used=!0,s.is_fragment=!0)}if(d){if(a)for(b=0;b<a.length;b++)!a[b].used&&a[b].version>=2&&(X=a[b].grouping_type+"/0",s=new p(a[b].grouping_type,0),s.is_fragment=!0,d.sample_groups_info[X]||(d.sample_groups_info[X]=s))}else for(b=0;b<t.length;b++)!t[b].used&&t[b].version>=2&&(X=t[b].grouping_type+"/0",s=new p(t[b].grouping_type,0),l.sample_groups_info[X]||(l.sample_groups_info[X]=s))},u.setSampleGroupProperties=function(l,d,c,t){var a,n;d.sample_groups=[];for(a in t)if(d.sample_groups[a]={},d.sample_groups[a].grouping_type=t[a].grouping_type,d.sample_groups[a].grouping_type_parameter=t[a].grouping_type_parameter,c>=t[a].last_sample_in_run&&(t[a].last_sample_in_run<0&&(t[a].last_sample_in_run=0),t[a].entry_index++,t[a].entry_index<=t[a].sbgp.entries.length-1&&(t[a].last_sample_in_run+=t[a].sbgp.entries[t[a].entry_index].sample_count)),t[a].entry_index<=t[a].sbgp.entries.length-1?d.sample_groups[a].group_description_index=t[a].sbgp.entries[t[a].entry_index].group_description_index:d.sample_groups[a].group_description_index=-1,d.sample_groups[a].group_description_index!==0){var b;t[a].fragment_description?b=t[a].fragment_description:b=t[a].description,d.sample_groups[a].group_description_index>0?(d.sample_groups[a].group_description_index>65535?n=(d.sample_groups[a].group_description_index>>16)-1:n=d.sample_groups[a].group_description_index-1,b&&n>=0&&(d.sample_groups[a].description=b.entries[n])):b&&b.version>=2&&b.default_group_description_index>0&&(d.sample_groups[a].description=b.entries[b.default_group_description_index-1])}},u.process_sdtp=function(l,d,c){d&&(l?(d.is_leading=l.is_leading[c],d.depends_on=l.sample_depends_on[c],d.is_depended_on=l.sample_is_depended_on[c],d.has_redundancy=l.sample_has_redundancy[c]):(d.is_leading=0,d.depends_on=0,d.is_depended_on=0,d.has_redundancy=0))},u.prototype.buildSampleLists=function(){var l,d;for(l=0;l<this.moov.traks.length;l++)d=this.moov.traks[l],this.buildTrakSampleLists(d)},u.prototype.buildTrakSampleLists=function(l){var d,c,t,a,n,b,s,X,p,V,y,r,W,J,z,ll,ml,O,C,w,el,yl,P,nl;if(l.samples=[],l.samples_duration=0,l.samples_size=0,c=l.mdia.minf.stbl.stco||l.mdia.minf.stbl.co64,t=l.mdia.minf.stbl.stsc,a=l.mdia.minf.stbl.stsz||l.mdia.minf.stbl.stz2,n=l.mdia.minf.stbl.stts,b=l.mdia.minf.stbl.ctts,s=l.mdia.minf.stbl.stss,X=l.mdia.minf.stbl.stsd,p=l.mdia.minf.stbl.subs,r=l.mdia.minf.stbl.stdp,V=l.mdia.minf.stbl.sbgps,y=l.mdia.minf.stbl.sgpds,O=-1,C=-1,w=-1,el=-1,yl=0,P=0,nl=0,u.initSampleGroups(l,null,V,y),!(typeof a>"u")){for(d=0;d<a.sample_sizes.length;d++){var L={};L.number=d,L.track_id=l.tkhd.track_id,L.timescale=l.mdia.mdhd.timescale,L.alreadyRead=0,l.samples[d]=L,L.size=a.sample_sizes[d],l.samples_size+=L.size,d===0?(J=1,W=0,L.chunk_index=J,L.chunk_run_index=W,ml=t.samples_per_chunk[W],ll=0,W+1<t.first_chunk.length?z=t.first_chunk[W+1]-1:z=1/0):d<ml?(L.chunk_index=J,L.chunk_run_index=W):(J++,L.chunk_index=J,ll=0,J<=z||(W++,W+1<t.first_chunk.length?z=t.first_chunk[W+1]-1:z=1/0),L.chunk_run_index=W,ml+=t.samples_per_chunk[W]),L.description_index=t.sample_description_index[L.chunk_run_index]-1,L.description=X.entries[L.description_index],L.offset=c.chunk_offsets[L.chunk_index-1]+ll,ll+=L.size,d>O&&(C++,O<0&&(O=0),O+=n.sample_counts[C]),d>0?(l.samples[d-1].duration=n.sample_deltas[C],l.samples_duration+=l.samples[d-1].duration,L.dts=l.samples[d-1].dts+l.samples[d-1].duration):L.dts=0,b?(d>=w&&(el++,w<0&&(w=0),w+=b.sample_counts[el]),L.cts=l.samples[d].dts+b.sample_offsets[el]):L.cts=L.dts,s?(d==s.sample_numbers[yl]-1?(L.is_sync=!0,yl++):(L.is_sync=!1,L.degradation_priority=0),p&&p.entries[P].sample_delta+nl==d+1&&(L.subsamples=p.entries[P].subsamples,nl+=p.entries[P].sample_delta,P++)):L.is_sync=!0,u.process_sdtp(l.mdia.minf.stbl.sdtp,L,L.number),r?L.degradation_priority=r.priority[d]:L.degradation_priority=0,p&&p.entries[P].sample_delta+nl==d&&(L.subsamples=p.entries[P].subsamples,nl+=p.entries[P].sample_delta),(V.length>0||y.length>0)&&u.setSampleGroupProperties(l,L,d,l.sample_groups_info)}d>0&&(l.samples[d-1].duration=Math.max(l.mdia.mdhd.duration-l.samples[d-1].dts,0),l.samples_duration+=l.samples[d-1].duration)}},u.prototype.updateSampleLists=function(){var l,d,c,t,a,n,b,s,X,p,V,y,r,W,J;if(this.moov!==void 0){for(;this.lastMoofIndex<this.moofs.length;)if(X=this.moofs[this.lastMoofIndex],this.lastMoofIndex++,X.type=="moof")for(p=X,l=0;l<p.trafs.length;l++){for(V=p.trafs[l],y=this.getTrackById(V.tfhd.track_id),r=this.getTrexById(V.tfhd.track_id),V.tfhd.flags&Z.TFHD_FLAG_SAMPLE_DESC?t=V.tfhd.default_sample_description_index:t=r?r.default_sample_description_index:1,V.tfhd.flags&Z.TFHD_FLAG_SAMPLE_DUR?a=V.tfhd.default_sample_duration:a=r?r.default_sample_duration:0,V.tfhd.flags&Z.TFHD_FLAG_SAMPLE_SIZE?n=V.tfhd.default_sample_size:n=r?r.default_sample_size:0,V.tfhd.flags&Z.TFHD_FLAG_SAMPLE_FLAGS?b=V.tfhd.default_sample_flags:b=r?r.default_sample_flags:0,V.sample_number=0,V.sbgps.length>0&&u.initSampleGroups(y,V,V.sbgps,y.mdia.minf.stbl.sgpds,V.sgpds),d=0;d<V.truns.length;d++){var z=V.truns[d];for(c=0;c<z.sample_count;c++){W={},W.moof_number=this.lastMoofIndex,W.number_in_traf=V.sample_number,V.sample_number++,W.number=y.samples.length,V.first_sample_index=y.samples.length,y.samples.push(W),W.track_id=y.tkhd.track_id,W.timescale=y.mdia.mdhd.timescale,W.description_index=t-1,W.description=y.mdia.minf.stbl.stsd.entries[W.description_index],W.size=n,z.flags&Z.TRUN_FLAGS_SIZE&&(W.size=z.sample_size[c]),y.samples_size+=W.size,W.duration=a,z.flags&Z.TRUN_FLAGS_DURATION&&(W.duration=z.sample_duration[c]),y.samples_duration+=W.duration,y.first_traf_merged||c>0?W.dts=y.samples[y.samples.length-2].dts+y.samples[y.samples.length-2].duration:(V.tfdt?W.dts=V.tfdt.baseMediaDecodeTime:W.dts=0,y.first_traf_merged=!0),W.cts=W.dts,z.flags&Z.TRUN_FLAGS_CTS_OFFSET&&(W.cts=W.dts+z.sample_composition_time_offset[c]),J=b,z.flags&Z.TRUN_FLAGS_FLAGS?J=z.sample_flags[c]:c===0&&z.flags&Z.TRUN_FLAGS_FIRST_FLAG&&(J=z.first_sample_flags),W.is_sync=!(J>>16&1),W.is_leading=J>>26&3,W.depends_on=J>>24&3,W.is_depended_on=J>>22&3,W.has_redundancy=J>>20&3,W.degradation_priority=J&65535;var ll=!!(V.tfhd.flags&Z.TFHD_FLAG_BASE_DATA_OFFSET),ml=!!(V.tfhd.flags&Z.TFHD_FLAG_DEFAULT_BASE_IS_MOOF),O=!!(z.flags&Z.TRUN_FLAGS_DATA_OFFSET),C=0;ll?C=V.tfhd.base_data_offset:ml||d===0?C=p.start:C=s,d===0&&c===0?O?W.offset=C+z.data_offset:W.offset=C:W.offset=s,s=W.offset+W.size,(V.sbgps.length>0||V.sgpds.length>0||y.mdia.minf.stbl.sbgps.length>0||y.mdia.minf.stbl.sgpds.length>0)&&u.setSampleGroupProperties(y,W,W.number_in_traf,V.sample_groups_info)}}if(V.subs){y.has_fragment_subsamples=!0;var w=V.first_sample_index;for(d=0;d<V.subs.entries.length;d++)w+=V.subs.entries[d].sample_delta,W=y.samples[w-1],W.subsamples=V.subs.entries[d].subsamples}}}},u.prototype.getSample=function(l,d){var c,t=l.samples[d];if(!this.moov)return null;if(!t.data)t.data=new Uint8Array(t.size),t.alreadyRead=0,this.samplesDataSize+=t.size,m.debug("ISOFile","Allocating sample #"+d+" on track #"+l.tkhd.track_id+" of size "+t.size+" (total: "+this.samplesDataSize+")");else if(t.alreadyRead==t.size)return t;for(;;){var a=this.stream.findPosition(!0,t.offset+t.alreadyRead,!1);if(a>-1){c=this.stream.buffers[a];var n=c.byteLength-(t.offset+t.alreadyRead-c.fileStart);if(t.size-t.alreadyRead<=n)return m.debug("ISOFile","Getting sample #"+d+" data (alreadyRead: "+t.alreadyRead+" offset: "+(t.offset+t.alreadyRead-c.fileStart)+" read size: "+(t.size-t.alreadyRead)+" full size: "+t.size+")"),G.memcpy(t.data.buffer,t.alreadyRead,c,t.offset+t.alreadyRead-c.fileStart,t.size-t.alreadyRead),c.usedBytes+=t.size-t.alreadyRead,this.stream.logBufferLevel(),t.alreadyRead=t.size,t;if(n===0)return null;m.debug("ISOFile","Getting sample #"+d+" partial data (alreadyRead: "+t.alreadyRead+" offset: "+(t.offset+t.alreadyRead-c.fileStart)+" read size: "+n+" full size: "+t.size+")"),G.memcpy(t.data.buffer,t.alreadyRead,c,t.offset+t.alreadyRead-c.fileStart,n),t.alreadyRead+=n,c.usedBytes+=n,this.stream.logBufferLevel()}else return null}},u.prototype.releaseSample=function(l,d){var c=l.samples[d];return c.data?(this.samplesDataSize-=c.size,c.data=null,c.alreadyRead=0,c.size):0},u.prototype.getAllocatedSampleDataSize=function(){return this.samplesDataSize},u.prototype.getCodecs=function(){var l,d="";for(l=0;l<this.moov.traks.length;l++){var c=this.moov.traks[l];l>0&&(d+=","),d+=c.mdia.minf.stbl.stsd.entries[0].getCodec()}return d},u.prototype.getTrexById=function(l){var d;if(!this.moov||!this.moov.mvex)return null;for(d=0;d<this.moov.mvex.trexs.length;d++){var c=this.moov.mvex.trexs[d];if(c.track_id==l)return c}return null},u.prototype.getTrackById=function(l){if(this.moov===void 0)return null;for(var d=0;d<this.moov.traks.length;d++){var c=this.moov.traks[d];if(c.tkhd.track_id==l)return c}return null},u.prototype.items=[],u.prototype.itemsDataSize=0,u.prototype.flattenItemInfo=function(){var l=this.items,d,c,t,a=this.meta;if(a!=null&&a.hdlr!==void 0&&a.iinf!==void 0){for(d=0;d<a.iinf.item_infos.length;d++)t={},t.id=a.iinf.item_infos[d].item_ID,l[t.id]=t,t.ref_to=[],t.name=a.iinf.item_infos[d].item_name,a.iinf.item_infos[d].protection_index>0&&(t.protection=a.ipro.protections[a.iinf.item_infos[d].protection_index-1]),a.iinf.item_infos[d].item_type?t.type=a.iinf.item_infos[d].item_type:t.type="mime",t.content_type=a.iinf.item_infos[d].content_type,t.content_encoding=a.iinf.item_infos[d].content_encoding;if(a.iloc)for(d=0;d<a.iloc.items.length;d++){var n=a.iloc.items[d];switch(t=l[n.item_ID],n.data_reference_index!==0&&(m.warn("Item storage with reference to other files: not supported"),t.source=a.dinf.boxes[n.data_reference_index-1]),n.construction_method){case 0:break;case 1:m.warn("Item storage with construction_method : not supported");break;case 2:m.warn("Item storage with construction_method : not supported");break}for(t.extents=[],t.size=0,c=0;c<n.extents.length;c++)t.extents[c]={},t.extents[c].offset=n.extents[c].extent_offset+n.base_offset,t.extents[c].length=n.extents[c].extent_length,t.extents[c].alreadyRead=0,t.size+=t.extents[c].length}if(a.pitm&&(l[a.pitm.item_id].primary=!0),a.iref)for(d=0;d<a.iref.references.length;d++){var b=a.iref.references[d];for(c=0;c<b.references.length;c++)l[b.from_item_ID].ref_to.push({type:b.type,id:b.references[c]})}if(a.iprp)for(var s=0;s<a.iprp.ipmas.length;s++){var X=a.iprp.ipmas[s];for(d=0;d<X.associations.length;d++){var p=X.associations[d];for(t=l[p.id],t.properties===void 0&&(t.properties={},t.properties.boxes=[]),c=0;c<p.props.length;c++){var V=p.props[c];if(V.property_index>0&&V.property_index-1<a.iprp.ipco.boxes.length){var y=a.iprp.ipco.boxes[V.property_index-1];t.properties[y.type]=y,t.properties.boxes.push(y)}}}}}},u.prototype.getItem=function(l){var d,c;if(!this.meta)return null;if(c=this.items[l],!c.data&&c.size)c.data=new Uint8Array(c.size),c.alreadyRead=0,this.itemsDataSize+=c.size,m.debug("ISOFile","Allocating item #"+l+" of size "+c.size+" (total: "+this.itemsDataSize+")");else if(c.alreadyRead===c.size)return c;for(var t=0;t<c.extents.length;t++){var a=c.extents[t];if(a.alreadyRead!==a.length){var n=this.stream.findPosition(!0,a.offset+a.alreadyRead,!1);if(n>-1){d=this.stream.buffers[n];var b=d.byteLength-(a.offset+a.alreadyRead-d.fileStart);if(a.length-a.alreadyRead<=b)m.debug("ISOFile","Getting item #"+l+" extent #"+t+" data (alreadyRead: "+a.alreadyRead+" offset: "+(a.offset+a.alreadyRead-d.fileStart)+" read size: "+(a.length-a.alreadyRead)+" full extent size: "+a.length+" full item size: "+c.size+")"),G.memcpy(c.data.buffer,c.alreadyRead,d,a.offset+a.alreadyRead-d.fileStart,a.length-a.alreadyRead),d.usedBytes+=a.length-a.alreadyRead,this.stream.logBufferLevel(),c.alreadyRead+=a.length-a.alreadyRead,a.alreadyRead=a.length;else return m.debug("ISOFile","Getting item #"+l+" extent #"+t+" partial data (alreadyRead: "+a.alreadyRead+" offset: "+(a.offset+a.alreadyRead-d.fileStart)+" read size: "+b+" full extent size: "+a.length+" full item size: "+c.size+")"),G.memcpy(c.data.buffer,c.alreadyRead,d,a.offset+a.alreadyRead-d.fileStart,b),a.alreadyRead+=b,c.alreadyRead+=b,d.usedBytes+=b,this.stream.logBufferLevel(),null}else return null}}return c.alreadyRead===c.size?c:null},u.prototype.releaseItem=function(l){var d=this.items[l];if(d.data){this.itemsDataSize-=d.size,d.data=null,d.alreadyRead=0;for(var c=0;c<d.extents.length;c++){var t=d.extents[c];t.alreadyRead=0}return d.size}else return 0},u.prototype.processItems=function(l){for(var d in this.items){var c=this.items[d];this.getItem(c.id),l&&!c.sent&&(l(c),c.sent=!0,c.data=null)}},u.prototype.hasItem=function(l){for(var d in this.items){var c=this.items[d];if(c.name===l)return c.id}return-1},u.prototype.getMetaHandler=function(){return this.meta?this.meta.hdlr.handler:null},u.prototype.getPrimaryItem=function(){return!this.meta||!this.meta.pitm?null:this.getItem(this.meta.pitm.item_id)},u.prototype.itemToFragmentedTrackFile=function(l){var d=l||{},c=null;if(d.itemId?c=this.getItem(d.itemId):c=this.getPrimaryItem(),c==null)return null;var t=new u;t.discardMdatData=!1;var a={type:c.type,description_boxes:c.properties.boxes};c.properties.ispe&&(a.width=c.properties.ispe.image_width,a.height=c.properties.ispe.image_height);var n=t.addTrack(a);return n?(t.addSample(n,c.data),t):null},u.prototype.write=function(l){for(var d=0;d<this.boxes.length;d++)this.boxes[d].write(l)},u.prototype.createFragment=function(l,d,c){var t=this.getTrackById(l),a=this.getSample(t,d);if(a==null)return this.setNextSeekPositionFromSample(t.samples[d]),null;var n=c||new G;n.endianness=G.BIG_ENDIAN;var b=this.createSingleSampleMoof(a);b.write(n),b.trafs[0].truns[0].data_offset=b.size+8,m.debug("MP4Box","Adjusting data_offset with new value "+b.trafs[0].truns[0].data_offset),n.adjustUint32(b.trafs[0].truns[0].data_offset_position,b.trafs[0].truns[0].data_offset);var s=new Z.mdatBox;return s.data=a.data,s.write(n),n},u.writeInitializationSegment=function(l,d,c,t){var a;m.debug("ISOFile","Generating initialization segment");var n=new G;n.endianness=G.BIG_ENDIAN,l.write(n);var b=d.add("mvex");for(c&&b.add("mehd").set("fragment_duration",c),a=0;a<d.traks.length;a++)b.add("trex").set("track_id",d.traks[a].tkhd.track_id).set("default_sample_description_index",1).set("default_sample_duration",t).set("default_sample_size",0).set("default_sample_flags",65536);return d.write(n),n.buffer},u.prototype.save=function(l){var d=new G;d.endianness=G.BIG_ENDIAN,this.write(d),d.save(l)},u.prototype.getBuffer=function(){var l=new G;return l.endianness=G.BIG_ENDIAN,this.write(l),l.buffer},u.prototype.initializeSegmentation=function(){var l,d,c,t;for(this.onSegment===null&&m.warn("MP4Box","No segmentation callback set!"),this.isFragmentationInitialized||(this.isFragmentationInitialized=!0,this.nextMoofNumber=0,this.resetTables()),d=[],l=0;l<this.fragmentedTracks.length;l++){var a=new Z.moovBox;a.mvhd=this.moov.mvhd,a.boxes.push(a.mvhd),c=this.getTrackById(this.fragmentedTracks[l].id),a.boxes.push(c),a.traks.push(c),t={},t.id=c.tkhd.track_id,t.user=this.fragmentedTracks[l].user,t.buffer=u.writeInitializationSegment(this.ftyp,a,this.moov.mvex&&this.moov.mvex.mehd?this.moov.mvex.mehd.fragment_duration:void 0,this.moov.traks[l].samples.length>0?this.moov.traks[l].samples[0].duration:0),d.push(t)}return d},Z.Box.prototype.printHeader=function(l){this.size+=8,this.size>R&&(this.size+=8),this.type==="uuid"&&(this.size+=16),l.log(l.indent+"size:"+this.size),l.log(l.indent+"type:"+this.type)},Z.FullBox.prototype.printHeader=function(l){this.size+=4,Z.Box.prototype.printHeader.call(this,l),l.log(l.indent+"version:"+this.version),l.log(l.indent+"flags:"+this.flags)},Z.Box.prototype.print=function(l){this.printHeader(l)},Z.ContainerBox.prototype.print=function(l){this.printHeader(l);for(var d=0;d<this.boxes.length;d++)if(this.boxes[d]){var c=l.indent;l.indent+=" ",this.boxes[d].print(l),l.indent=c}},u.prototype.print=function(l){l.indent="";for(var d=0;d<this.boxes.length;d++)this.boxes[d]&&this.boxes[d].print(l)},Z.mvhdBox.prototype.print=function(l){Z.FullBox.prototype.printHeader.call(this,l),l.log(l.indent+"creation_time: "+this.creation_time),l.log(l.indent+"modification_time: "+this.modification_time),l.log(l.indent+"timescale: "+this.timescale),l.log(l.indent+"duration: "+this.duration),l.log(l.indent+"rate: "+this.rate),l.log(l.indent+"volume: "+(this.volume>>8)),l.log(l.indent+"matrix: "+this.matrix.join(", ")),l.log(l.indent+"next_track_id: "+this.next_track_id)},Z.tkhdBox.prototype.print=function(l){Z.FullBox.prototype.printHeader.call(this,l),l.log(l.indent+"creation_time: "+this.creation_time),l.log(l.indent+"modification_time: "+this.modification_time),l.log(l.indent+"track_id: "+this.track_id),l.log(l.indent+"duration: "+this.duration),l.log(l.indent+"volume: "+(this.volume>>8)),l.log(l.indent+"matrix: "+this.matrix.join(", ")),l.log(l.indent+"layer: "+this.layer),l.log(l.indent+"alternate_group: "+this.alternate_group),l.log(l.indent+"width: "+this.width),l.log(l.indent+"height: "+this.height)};var B={};B.createFile=function(l,d){var c=l!==void 0?l:!0,t=new u(d);return t.discardMdatData=!c,t},h.createFile=B.createFile})(kl);const pl={sampleRate:48e3,channelCount:2,codec:"mp4a.40.2"};var il,v,j,tl,g,A,Wl,rl;const sl=class{constructor(h,m={}){E(this,Wl),f(this,"ready"),E(this,il,{duration:0,width:0,height:0}),E(this,v,new Float32Array),E(this,j,new Float32Array),E(this,tl,0),E(this,g,0),E(this,A,void 0),D(this,A,hl({loop:!1,volume:1},m)),this.ready=Sl(this,Wl,rl).call(this,h).then(()=>({width:0,height:0,duration:m.loop?1/0:Y(this,il).duration}))}getPCMData(){return[Y(this,v),Y(this,j)]}tick(h){return dl(this,null,function*(){if(h<Y(this,tl))throw Error("time not allow rollback");if(!Y(this,A).loop&&h>=Y(this,il).duration)return{audio:[],state:"done"};const m=h-Y(this,tl);D(this,tl,h);const e=Math.ceil(m*(pl.sampleRate/1e6)),G=Y(this,g)+e,R=Y(this,A).loop?[Ll(Y(this,v),Y(this,g),G),Ll(Y(this,j),Y(this,g),G)]:[Y(this,v).slice(Y(this,g),G),Y(this,j).slice(Y(this,g),G)];return D(this,g,G),{audio:R,state:"success"}})}destroy(){D(this,v,new Float32Array(0)),D(this,j,new Float32Array(0)),T.info("---- audioclip destroy ----")}};let fl=sl;il=new WeakMap,v=new WeakMap,j=new WeakMap,tl=new WeakMap,g=new WeakMap,A=new WeakMap,Wl=new WeakSet,rl=function(h){return dl(this,null,function*(){var R;sl.ctx==null&&(sl.ctx=new AudioContext({sampleRate:pl.sampleRate}));const m=performance.now(),e=h instanceof ReadableStream?yield Tl(h,sl.ctx):h;T.info("Audio clip decoded complete:",performance.now()-m);const G=Y(this,A).volume;if(G!==1)for(const o of e)for(let H=0;H<o.length;H+=1)o[H]*=G;Y(this,il).duration=e[0].length/pl.sampleRate*1e6,D(this,v,e[0]),D(this,j,(R=e[1])!=null?R:Y(this,v)),T.info("Audio clip convert to AudioData, time:",performance.now()-m)})},f(fl,"ctx",null);function Tl(h,m){return dl(this,null,function*(){const e=yield new Response(h).arrayBuffer();return Cl(yield m.decodeAudioData(e))})}const M=class{constructor(h,m,e,G,R){f(this,"x",0),f(this,"y",0),f(this,"w",0),f(this,"h",0),f(this,"angle",0),f(this,"master",null),this.x=h!=null?h:0,this.y=m!=null?m:0,this.w=e!=null?e:0,this.h=G!=null?G:0,this.master=R!=null?R:null}get center(){const{x:h,y:m,w:e,h:G}=this;return{x:h+e/2,y:m+G/2}}get ctrls(){const{w:h,h:m}=this,e=M.CTRL_SIZE,G=e/2,R=h/2,o=m/2,H=e*1.5,Z=H/2;return{t:new M(-G,-o-G,e,e,this),b:new M(-G,o-G,e,e,this),l:new M(-R-G,-G,e,e,this),r:new M(R-G,-G,e,e,this),lt:new M(-R-G,-o-G,e,e,this),lb:new M(-R-G,o-G,e,e,this),rt:new M(R-G,-o-G,e,e,this),rb:new M(R-G,o-G,e,e,this),rotate:new M(-Z,-o-e*2-Z,H,H,this)}}clone(){const{x:h,y:m,w:e,h:G,master:R}=this;return new M(h,m,e,G,R)}checkHit(h,m){var t,a;let{angle:e,center:G,x:R,y:o,w:H,h:Z,master:K}=this;const U=(t=K==null?void 0:K.center)!=null?t:G,u=(a=K==null?void 0:K.angle)!=null?a:e;K==null&&(R=R-U.x,o=o-U.y);const B=h-U.x,l=m-U.y;let d=B,c=l;return u!==0&&(d=B*Math.cos(u)+l*Math.sin(u),c=l*Math.cos(u)-B*Math.sin(u)),!(d<R||d>R+H||c<o||c>o+Z)}};f(M,"CTRL_SIZE",16);const Yl="dmFyIEJ0PShMLFIsRyk9PntpZighUi5oYXMoTCkpdGhyb3cgVHlwZUVycm9yKCJDYW5ub3QgIitHKX07dmFyIE49KEwsUixHKT0+KEJ0KEwsUiwicmVhZCBmcm9tIHByaXZhdGUgZmllbGQiKSxHP0cuY2FsbChMKTpSLmdldChMKSksaHQ9KEwsUixHKT0+e2lmKFIuaGFzKEwpKXRocm93IFR5cGVFcnJvcigiQ2Fubm90IGFkZCB0aGUgc2FtZSBwcml2YXRlIG1lbWJlciBtb3JlIHRoYW4gb25jZSIpO1IgaW5zdGFuY2VvZiBXZWFrU2V0P1IuYWRkKEwpOlIuc2V0KEwsRyl9LFE9KEwsUixHLGspPT4oQnQoTCxSLCJ3cml0ZSB0byBwcml2YXRlIGZpZWxkIiksaz9rLmNhbGwoTCxHKTpSLnNldChMLEcpLEcpOyhmdW5jdGlvbigpe3ZhciBydCxudCxhdCxaLG90OyJ1c2Ugc3RyaWN0Ijt2YXIgTD17fTsoZnVuY3Rpb24oXyl7dmFyIGQ9ZnVuY3Rpb24oKXt2YXIgdD1uZXcgRGF0ZSxlPTQscz0zLG49MixhPTEsbz1lLGg9e3NldExvZ0xldmVsOmZ1bmN0aW9uKGYpe2Y9PXRoaXMuZGVidWc/bz1hOmY9PXRoaXMuaW5mbz9vPW46Zj09dGhpcy53YXJuP289czooZj09dGhpcy5lcnJvcixvPWUpfSxkZWJ1ZzpmdW5jdGlvbihmLHApe2NvbnNvbGUuZGVidWc9PT12b2lkIDAmJihjb25zb2xlLmRlYnVnPWNvbnNvbGUubG9nKSxhPj1vJiZjb25zb2xlLmRlYnVnKCJbIitkLmdldER1cmF0aW9uU3RyaW5nKG5ldyBEYXRlLXQsMWUzKSsiXSIsIlsiK2YrIl0iLHApfSxsb2c6ZnVuY3Rpb24oZixwKXt0aGlzLmRlYnVnKGYubXNnKX0saW5mbzpmdW5jdGlvbihmLHApe24+PW8mJmNvbnNvbGUuaW5mbygiWyIrZC5nZXREdXJhdGlvblN0cmluZyhuZXcgRGF0ZS10LDFlMykrIl0iLCJbIitmKyJdIixwKX0sd2FybjpmdW5jdGlvbihmLHApe3M+PW8mJmNvbnNvbGUud2FybigiWyIrZC5nZXREdXJhdGlvblN0cmluZyhuZXcgRGF0ZS10LDFlMykrIl0iLCJbIitmKyJdIixwKX0sZXJyb3I6ZnVuY3Rpb24oZixwKXtlPj1vJiZjb25zb2xlLmVycm9yKCJbIitkLmdldER1cmF0aW9uU3RyaW5nKG5ldyBEYXRlLXQsMWUzKSsiXSIsIlsiK2YrIl0iLHApfX07cmV0dXJuIGh9KCk7ZC5nZXREdXJhdGlvblN0cmluZz1mdW5jdGlvbih0LGUpe3ZhciBzO2Z1bmN0aW9uIG4oZyxtKXtmb3IodmFyIHY9IiIrZyxiPXYuc3BsaXQoIi4iKTtiWzBdLmxlbmd0aDxtOyliWzBdPSIwIitiWzBdO3JldHVybiBiLmpvaW4oIi4iKX10PDA/KHM9ITAsdD0tdCk6cz0hMTt2YXIgYT1lfHwxLG89dC9hLGg9TWF0aC5mbG9vcihvLzM2MDApO28tPWgqMzYwMDt2YXIgZj1NYXRoLmZsb29yKG8vNjApO28tPWYqNjA7dmFyIHA9byoxZTM7cmV0dXJuIG89TWF0aC5mbG9vcihvKSxwLT1vKjFlMyxwPU1hdGguZmxvb3IocCksKHM/Ii0iOiIiKStoKyI6IituKGYsMikrIjoiK24obywyKSsiLiIrbihwLDMpfSxkLnByaW50UmFuZ2VzPWZ1bmN0aW9uKHQpe3ZhciBlPXQubGVuZ3RoO2lmKGU+MCl7Zm9yKHZhciBzPSIiLG49MDtuPGU7bisrKW4+MCYmKHMrPSIsIikscys9IlsiK2QuZ2V0RHVyYXRpb25TdHJpbmcodC5zdGFydChuKSkrIiwiK2QuZ2V0RHVyYXRpb25TdHJpbmcodC5lbmQobikpKyJdIjtyZXR1cm4gc31lbHNlIHJldHVybiIoZW1wdHkpIn0sXy5Mb2c9ZDt2YXIgYz1mdW5jdGlvbih0KXtpZih0IGluc3RhbmNlb2YgQXJyYXlCdWZmZXIpdGhpcy5idWZmZXI9dCx0aGlzLmRhdGF2aWV3PW5ldyBEYXRhVmlldyh0KTtlbHNlIHRocm93Ik5lZWRzIGFuIGFycmF5IGJ1ZmZlciI7dGhpcy5wb3NpdGlvbj0wfTtjLnByb3RvdHlwZS5nZXRQb3NpdGlvbj1mdW5jdGlvbigpe3JldHVybiB0aGlzLnBvc2l0aW9ufSxjLnByb3RvdHlwZS5nZXRFbmRQb3NpdGlvbj1mdW5jdGlvbigpe3JldHVybiB0aGlzLmJ1ZmZlci5ieXRlTGVuZ3RofSxjLnByb3RvdHlwZS5nZXRMZW5ndGg9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5idWZmZXIuYnl0ZUxlbmd0aH0sYy5wcm90b3R5cGUuc2Vlaz1mdW5jdGlvbih0KXt2YXIgZT1NYXRoLm1heCgwLE1hdGgubWluKHRoaXMuYnVmZmVyLmJ5dGVMZW5ndGgsdCkpO3JldHVybiB0aGlzLnBvc2l0aW9uPWlzTmFOKGUpfHwhaXNGaW5pdGUoZSk/MDplLCEwfSxjLnByb3RvdHlwZS5pc0Vvcz1mdW5jdGlvbigpe3JldHVybiB0aGlzLmdldFBvc2l0aW9uKCk+PXRoaXMuZ2V0RW5kUG9zaXRpb24oKX0sYy5wcm90b3R5cGUucmVhZEFueUludD1mdW5jdGlvbih0LGUpe3ZhciBzPTA7aWYodGhpcy5wb3NpdGlvbit0PD10aGlzLmJ1ZmZlci5ieXRlTGVuZ3RoKXtzd2l0Y2godCl7Y2FzZSAxOmU/cz10aGlzLmRhdGF2aWV3LmdldEludDgodGhpcy5wb3NpdGlvbik6cz10aGlzLmRhdGF2aWV3LmdldFVpbnQ4KHRoaXMucG9zaXRpb24pO2JyZWFrO2Nhc2UgMjplP3M9dGhpcy5kYXRhdmlldy5nZXRJbnQxNih0aGlzLnBvc2l0aW9uKTpzPXRoaXMuZGF0YXZpZXcuZ2V0VWludDE2KHRoaXMucG9zaXRpb24pO2JyZWFrO2Nhc2UgMzppZihlKXRocm93Ik5vIG1ldGhvZCBmb3IgcmVhZGluZyBzaWduZWQgMjQgYml0cyB2YWx1ZXMiO3M9dGhpcy5kYXRhdmlldy5nZXRVaW50OCh0aGlzLnBvc2l0aW9uKTw8MTYsc3w9dGhpcy5kYXRhdmlldy5nZXRVaW50OCh0aGlzLnBvc2l0aW9uKzEpPDw4LHN8PXRoaXMuZGF0YXZpZXcuZ2V0VWludDgodGhpcy5wb3NpdGlvbisyKTticmVhaztjYXNlIDQ6ZT9zPXRoaXMuZGF0YXZpZXcuZ2V0SW50MzIodGhpcy5wb3NpdGlvbik6cz10aGlzLmRhdGF2aWV3LmdldFVpbnQzMih0aGlzLnBvc2l0aW9uKTticmVhaztjYXNlIDg6aWYoZSl0aHJvdyJObyBtZXRob2QgZm9yIHJlYWRpbmcgc2lnbmVkIDY0IGJpdHMgdmFsdWVzIjtzPXRoaXMuZGF0YXZpZXcuZ2V0VWludDMyKHRoaXMucG9zaXRpb24pPDwzMixzfD10aGlzLmRhdGF2aWV3LmdldFVpbnQzMih0aGlzLnBvc2l0aW9uKzQpO2JyZWFrO2RlZmF1bHQ6dGhyb3cicmVhZEludCBtZXRob2Qgbm90IGltcGxlbWVudGVkIGZvciBzaXplOiAiK3R9cmV0dXJuIHRoaXMucG9zaXRpb24rPXQsc31lbHNlIHRocm93Ik5vdCBlbm91Z2ggYnl0ZXMgaW4gYnVmZmVyIn0sYy5wcm90b3R5cGUucmVhZFVpbnQ4PWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMucmVhZEFueUludCgxLCExKX0sYy5wcm90b3R5cGUucmVhZFVpbnQxNj1mdW5jdGlvbigpe3JldHVybiB0aGlzLnJlYWRBbnlJbnQoMiwhMSl9LGMucHJvdG90eXBlLnJlYWRVaW50MjQ9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5yZWFkQW55SW50KDMsITEpfSxjLnByb3RvdHlwZS5yZWFkVWludDMyPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMucmVhZEFueUludCg0LCExKX0sYy5wcm90b3R5cGUucmVhZFVpbnQ2ND1mdW5jdGlvbigpe3JldHVybiB0aGlzLnJlYWRBbnlJbnQoOCwhMSl9LGMucHJvdG90eXBlLnJlYWRTdHJpbmc9ZnVuY3Rpb24odCl7aWYodGhpcy5wb3NpdGlvbit0PD10aGlzLmJ1ZmZlci5ieXRlTGVuZ3RoKXtmb3IodmFyIGU9IiIscz0wO3M8dDtzKyspZSs9U3RyaW5nLmZyb21DaGFyQ29kZSh0aGlzLnJlYWRVaW50OCgpKTtyZXR1cm4gZX1lbHNlIHRocm93Ik5vdCBlbm91Z2ggYnl0ZXMgaW4gYnVmZmVyIn0sYy5wcm90b3R5cGUucmVhZENTdHJpbmc9ZnVuY3Rpb24oKXtmb3IodmFyIHQ9W107Oyl7dmFyIGU9dGhpcy5yZWFkVWludDgoKTtpZihlIT09MCl0LnB1c2goZSk7ZWxzZSBicmVha31yZXR1cm4gU3RyaW5nLmZyb21DaGFyQ29kZS5hcHBseShudWxsLHQpfSxjLnByb3RvdHlwZS5yZWFkSW50OD1mdW5jdGlvbigpe3JldHVybiB0aGlzLnJlYWRBbnlJbnQoMSwhMCl9LGMucHJvdG90eXBlLnJlYWRJbnQxNj1mdW5jdGlvbigpe3JldHVybiB0aGlzLnJlYWRBbnlJbnQoMiwhMCl9LGMucHJvdG90eXBlLnJlYWRJbnQzMj1mdW5jdGlvbigpe3JldHVybiB0aGlzLnJlYWRBbnlJbnQoNCwhMCl9LGMucHJvdG90eXBlLnJlYWRJbnQ2ND1mdW5jdGlvbigpe3JldHVybiB0aGlzLnJlYWRBbnlJbnQoOCwhMSl9LGMucHJvdG90eXBlLnJlYWRVaW50OEFycmF5PWZ1bmN0aW9uKHQpe2Zvcih2YXIgZT1uZXcgVWludDhBcnJheSh0KSxzPTA7czx0O3MrKyllW3NdPXRoaXMucmVhZFVpbnQ4KCk7cmV0dXJuIGV9LGMucHJvdG90eXBlLnJlYWRJbnQxNkFycmF5PWZ1bmN0aW9uKHQpe2Zvcih2YXIgZT1uZXcgSW50MTZBcnJheSh0KSxzPTA7czx0O3MrKyllW3NdPXRoaXMucmVhZEludDE2KCk7cmV0dXJuIGV9LGMucHJvdG90eXBlLnJlYWRVaW50MTZBcnJheT1mdW5jdGlvbih0KXtmb3IodmFyIGU9bmV3IEludDE2QXJyYXkodCkscz0wO3M8dDtzKyspZVtzXT10aGlzLnJlYWRVaW50MTYoKTtyZXR1cm4gZX0sYy5wcm90b3R5cGUucmVhZFVpbnQzMkFycmF5PWZ1bmN0aW9uKHQpe2Zvcih2YXIgZT1uZXcgVWludDMyQXJyYXkodCkscz0wO3M8dDtzKyspZVtzXT10aGlzLnJlYWRVaW50MzIoKTtyZXR1cm4gZX0sYy5wcm90b3R5cGUucmVhZEludDMyQXJyYXk9ZnVuY3Rpb24odCl7Zm9yKHZhciBlPW5ldyBJbnQzMkFycmF5KHQpLHM9MDtzPHQ7cysrKWVbc109dGhpcy5yZWFkSW50MzIoKTtyZXR1cm4gZX0sXy5NUDRCb3hTdHJlYW09Yzt2YXIgbD1mdW5jdGlvbih0LGUscyl7dGhpcy5fYnl0ZU9mZnNldD1lfHwwLHQgaW5zdGFuY2VvZiBBcnJheUJ1ZmZlcj90aGlzLmJ1ZmZlcj10OnR5cGVvZiB0PT0ib2JqZWN0Ij8odGhpcy5kYXRhVmlldz10LGUmJih0aGlzLl9ieXRlT2Zmc2V0Kz1lKSk6dGhpcy5idWZmZXI9bmV3IEFycmF5QnVmZmVyKHR8fDApLHRoaXMucG9zaXRpb249MCx0aGlzLmVuZGlhbm5lc3M9cz8/bC5MSVRUTEVfRU5ESUFOfTtsLnByb3RvdHlwZT17fSxsLnByb3RvdHlwZS5nZXRQb3NpdGlvbj1mdW5jdGlvbigpe3JldHVybiB0aGlzLnBvc2l0aW9ufSxsLnByb3RvdHlwZS5fcmVhbGxvYz1mdW5jdGlvbih0KXtpZih0aGlzLl9keW5hbWljU2l6ZSl7dmFyIGU9dGhpcy5fYnl0ZU9mZnNldCt0aGlzLnBvc2l0aW9uK3Qscz10aGlzLl9idWZmZXIuYnl0ZUxlbmd0aDtpZihlPD1zKXtlPnRoaXMuX2J5dGVMZW5ndGgmJih0aGlzLl9ieXRlTGVuZ3RoPWUpO3JldHVybn1mb3IoczwxJiYocz0xKTtlPnM7KXMqPTI7dmFyIG49bmV3IEFycmF5QnVmZmVyKHMpLGE9bmV3IFVpbnQ4QXJyYXkodGhpcy5fYnVmZmVyKSxvPW5ldyBVaW50OEFycmF5KG4sMCxhLmxlbmd0aCk7by5zZXQoYSksdGhpcy5idWZmZXI9bix0aGlzLl9ieXRlTGVuZ3RoPWV9fSxsLnByb3RvdHlwZS5fdHJpbUFsbG9jPWZ1bmN0aW9uKCl7aWYodGhpcy5fYnl0ZUxlbmd0aCE9dGhpcy5fYnVmZmVyLmJ5dGVMZW5ndGgpe3ZhciB0PW5ldyBBcnJheUJ1ZmZlcih0aGlzLl9ieXRlTGVuZ3RoKSxlPW5ldyBVaW50OEFycmF5KHQpLHM9bmV3IFVpbnQ4QXJyYXkodGhpcy5fYnVmZmVyLDAsZS5sZW5ndGgpO2Uuc2V0KHMpLHRoaXMuYnVmZmVyPXR9fSxsLkJJR19FTkRJQU49ITEsbC5MSVRUTEVfRU5ESUFOPSEwLGwucHJvdG90eXBlLl9ieXRlTGVuZ3RoPTAsT2JqZWN0LmRlZmluZVByb3BlcnR5KGwucHJvdG90eXBlLCJieXRlTGVuZ3RoIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2J5dGVMZW5ndGgtdGhpcy5fYnl0ZU9mZnNldH19KSxPYmplY3QuZGVmaW5lUHJvcGVydHkobC5wcm90b3R5cGUsImJ1ZmZlciIse2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl90cmltQWxsb2MoKSx0aGlzLl9idWZmZXJ9LHNldDpmdW5jdGlvbih0KXt0aGlzLl9idWZmZXI9dCx0aGlzLl9kYXRhVmlldz1uZXcgRGF0YVZpZXcodGhpcy5fYnVmZmVyLHRoaXMuX2J5dGVPZmZzZXQpLHRoaXMuX2J5dGVMZW5ndGg9dGhpcy5fYnVmZmVyLmJ5dGVMZW5ndGh9fSksT2JqZWN0LmRlZmluZVByb3BlcnR5KGwucHJvdG90eXBlLCJieXRlT2Zmc2V0Iix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2J5dGVPZmZzZXR9LHNldDpmdW5jdGlvbih0KXt0aGlzLl9ieXRlT2Zmc2V0PXQsdGhpcy5fZGF0YVZpZXc9bmV3IERhdGFWaWV3KHRoaXMuX2J1ZmZlcix0aGlzLl9ieXRlT2Zmc2V0KSx0aGlzLl9ieXRlTGVuZ3RoPXRoaXMuX2J1ZmZlci5ieXRlTGVuZ3RofX0pLE9iamVjdC5kZWZpbmVQcm9wZXJ0eShsLnByb3RvdHlwZSwiZGF0YVZpZXciLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fZGF0YVZpZXd9LHNldDpmdW5jdGlvbih0KXt0aGlzLl9ieXRlT2Zmc2V0PXQuYnl0ZU9mZnNldCx0aGlzLl9idWZmZXI9dC5idWZmZXIsdGhpcy5fZGF0YVZpZXc9bmV3IERhdGFWaWV3KHRoaXMuX2J1ZmZlcix0aGlzLl9ieXRlT2Zmc2V0KSx0aGlzLl9ieXRlTGVuZ3RoPXRoaXMuX2J5dGVPZmZzZXQrdC5ieXRlTGVuZ3RofX0pLGwucHJvdG90eXBlLnNlZWs9ZnVuY3Rpb24odCl7dmFyIGU9TWF0aC5tYXgoMCxNYXRoLm1pbih0aGlzLmJ5dGVMZW5ndGgsdCkpO3RoaXMucG9zaXRpb249aXNOYU4oZSl8fCFpc0Zpbml0ZShlKT8wOmV9LGwucHJvdG90eXBlLmlzRW9mPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMucG9zaXRpb24+PXRoaXMuX2J5dGVMZW5ndGh9LGwucHJvdG90eXBlLm1hcFVpbnQ4QXJyYXk9ZnVuY3Rpb24odCl7dGhpcy5fcmVhbGxvYyh0KjEpO3ZhciBlPW5ldyBVaW50OEFycmF5KHRoaXMuX2J1ZmZlcix0aGlzLmJ5dGVPZmZzZXQrdGhpcy5wb3NpdGlvbix0KTtyZXR1cm4gdGhpcy5wb3NpdGlvbis9dCoxLGV9LGwucHJvdG90eXBlLnJlYWRJbnQzMkFycmF5PWZ1bmN0aW9uKHQsZSl7dD10Pz90aGlzLmJ5dGVMZW5ndGgtdGhpcy5wb3NpdGlvbi80O3ZhciBzPW5ldyBJbnQzMkFycmF5KHQpO3JldHVybiBsLm1lbWNweShzLmJ1ZmZlciwwLHRoaXMuYnVmZmVyLHRoaXMuYnl0ZU9mZnNldCt0aGlzLnBvc2l0aW9uLHQqcy5CWVRFU19QRVJfRUxFTUVOVCksbC5hcnJheVRvTmF0aXZlKHMsZT8/dGhpcy5lbmRpYW5uZXNzKSx0aGlzLnBvc2l0aW9uKz1zLmJ5dGVMZW5ndGgsc30sbC5wcm90b3R5cGUucmVhZEludDE2QXJyYXk9ZnVuY3Rpb24odCxlKXt0PXQ/P3RoaXMuYnl0ZUxlbmd0aC10aGlzLnBvc2l0aW9uLzI7dmFyIHM9bmV3IEludDE2QXJyYXkodCk7cmV0dXJuIGwubWVtY3B5KHMuYnVmZmVyLDAsdGhpcy5idWZmZXIsdGhpcy5ieXRlT2Zmc2V0K3RoaXMucG9zaXRpb24sdCpzLkJZVEVTX1BFUl9FTEVNRU5UKSxsLmFycmF5VG9OYXRpdmUocyxlPz90aGlzLmVuZGlhbm5lc3MpLHRoaXMucG9zaXRpb24rPXMuYnl0ZUxlbmd0aCxzfSxsLnByb3RvdHlwZS5yZWFkSW50OEFycmF5PWZ1bmN0aW9uKHQpe3Q9dD8/dGhpcy5ieXRlTGVuZ3RoLXRoaXMucG9zaXRpb247dmFyIGU9bmV3IEludDhBcnJheSh0KTtyZXR1cm4gbC5tZW1jcHkoZS5idWZmZXIsMCx0aGlzLmJ1ZmZlcix0aGlzLmJ5dGVPZmZzZXQrdGhpcy5wb3NpdGlvbix0KmUuQllURVNfUEVSX0VMRU1FTlQpLHRoaXMucG9zaXRpb24rPWUuYnl0ZUxlbmd0aCxlfSxsLnByb3RvdHlwZS5yZWFkVWludDMyQXJyYXk9ZnVuY3Rpb24odCxlKXt0PXQ/P3RoaXMuYnl0ZUxlbmd0aC10aGlzLnBvc2l0aW9uLzQ7dmFyIHM9bmV3IFVpbnQzMkFycmF5KHQpO3JldHVybiBsLm1lbWNweShzLmJ1ZmZlciwwLHRoaXMuYnVmZmVyLHRoaXMuYnl0ZU9mZnNldCt0aGlzLnBvc2l0aW9uLHQqcy5CWVRFU19QRVJfRUxFTUVOVCksbC5hcnJheVRvTmF0aXZlKHMsZT8/dGhpcy5lbmRpYW5uZXNzKSx0aGlzLnBvc2l0aW9uKz1zLmJ5dGVMZW5ndGgsc30sbC5wcm90b3R5cGUucmVhZFVpbnQxNkFycmF5PWZ1bmN0aW9uKHQsZSl7dD10Pz90aGlzLmJ5dGVMZW5ndGgtdGhpcy5wb3NpdGlvbi8yO3ZhciBzPW5ldyBVaW50MTZBcnJheSh0KTtyZXR1cm4gbC5tZW1jcHkocy5idWZmZXIsMCx0aGlzLmJ1ZmZlcix0aGlzLmJ5dGVPZmZzZXQrdGhpcy5wb3NpdGlvbix0KnMuQllURVNfUEVSX0VMRU1FTlQpLGwuYXJyYXlUb05hdGl2ZShzLGU/P3RoaXMuZW5kaWFubmVzcyksdGhpcy5wb3NpdGlvbis9cy5ieXRlTGVuZ3RoLHN9LGwucHJvdG90eXBlLnJlYWRVaW50OEFycmF5PWZ1bmN0aW9uKHQpe3Q9dD8/dGhpcy5ieXRlTGVuZ3RoLXRoaXMucG9zaXRpb247dmFyIGU9bmV3IFVpbnQ4QXJyYXkodCk7cmV0dXJuIGwubWVtY3B5KGUuYnVmZmVyLDAsdGhpcy5idWZmZXIsdGhpcy5ieXRlT2Zmc2V0K3RoaXMucG9zaXRpb24sdCplLkJZVEVTX1BFUl9FTEVNRU5UKSx0aGlzLnBvc2l0aW9uKz1lLmJ5dGVMZW5ndGgsZX0sbC5wcm90b3R5cGUucmVhZEZsb2F0NjRBcnJheT1mdW5jdGlvbih0LGUpe3Q9dD8/dGhpcy5ieXRlTGVuZ3RoLXRoaXMucG9zaXRpb24vODt2YXIgcz1uZXcgRmxvYXQ2NEFycmF5KHQpO3JldHVybiBsLm1lbWNweShzLmJ1ZmZlciwwLHRoaXMuYnVmZmVyLHRoaXMuYnl0ZU9mZnNldCt0aGlzLnBvc2l0aW9uLHQqcy5CWVRFU19QRVJfRUxFTUVOVCksbC5hcnJheVRvTmF0aXZlKHMsZT8/dGhpcy5lbmRpYW5uZXNzKSx0aGlzLnBvc2l0aW9uKz1zLmJ5dGVMZW5ndGgsc30sbC5wcm90b3R5cGUucmVhZEZsb2F0MzJBcnJheT1mdW5jdGlvbih0LGUpe3Q9dD8/dGhpcy5ieXRlTGVuZ3RoLXRoaXMucG9zaXRpb24vNDt2YXIgcz1uZXcgRmxvYXQzMkFycmF5KHQpO3JldHVybiBsLm1lbWNweShzLmJ1ZmZlciwwLHRoaXMuYnVmZmVyLHRoaXMuYnl0ZU9mZnNldCt0aGlzLnBvc2l0aW9uLHQqcy5CWVRFU19QRVJfRUxFTUVOVCksbC5hcnJheVRvTmF0aXZlKHMsZT8/dGhpcy5lbmRpYW5uZXNzKSx0aGlzLnBvc2l0aW9uKz1zLmJ5dGVMZW5ndGgsc30sbC5wcm90b3R5cGUucmVhZEludDMyPWZ1bmN0aW9uKHQpe3ZhciBlPXRoaXMuX2RhdGFWaWV3LmdldEludDMyKHRoaXMucG9zaXRpb24sdD8/dGhpcy5lbmRpYW5uZXNzKTtyZXR1cm4gdGhpcy5wb3NpdGlvbis9NCxlfSxsLnByb3RvdHlwZS5yZWFkSW50MTY9ZnVuY3Rpb24odCl7dmFyIGU9dGhpcy5fZGF0YVZpZXcuZ2V0SW50MTYodGhpcy5wb3NpdGlvbix0Pz90aGlzLmVuZGlhbm5lc3MpO3JldHVybiB0aGlzLnBvc2l0aW9uKz0yLGV9LGwucHJvdG90eXBlLnJlYWRJbnQ4PWZ1bmN0aW9uKCl7dmFyIHQ9dGhpcy5fZGF0YVZpZXcuZ2V0SW50OCh0aGlzLnBvc2l0aW9uKTtyZXR1cm4gdGhpcy5wb3NpdGlvbis9MSx0fSxsLnByb3RvdHlwZS5yZWFkVWludDMyPWZ1bmN0aW9uKHQpe3ZhciBlPXRoaXMuX2RhdGFWaWV3LmdldFVpbnQzMih0aGlzLnBvc2l0aW9uLHQ/P3RoaXMuZW5kaWFubmVzcyk7cmV0dXJuIHRoaXMucG9zaXRpb24rPTQsZX0sbC5wcm90b3R5cGUucmVhZFVpbnQxNj1mdW5jdGlvbih0KXt2YXIgZT10aGlzLl9kYXRhVmlldy5nZXRVaW50MTYodGhpcy5wb3NpdGlvbix0Pz90aGlzLmVuZGlhbm5lc3MpO3JldHVybiB0aGlzLnBvc2l0aW9uKz0yLGV9LGwucHJvdG90eXBlLnJlYWRVaW50OD1mdW5jdGlvbigpe3ZhciB0PXRoaXMuX2RhdGFWaWV3LmdldFVpbnQ4KHRoaXMucG9zaXRpb24pO3JldHVybiB0aGlzLnBvc2l0aW9uKz0xLHR9LGwucHJvdG90eXBlLnJlYWRGbG9hdDMyPWZ1bmN0aW9uKHQpe3ZhciBlPXRoaXMuX2RhdGFWaWV3LmdldEZsb2F0MzIodGhpcy5wb3NpdGlvbix0Pz90aGlzLmVuZGlhbm5lc3MpO3JldHVybiB0aGlzLnBvc2l0aW9uKz00LGV9LGwucHJvdG90eXBlLnJlYWRGbG9hdDY0PWZ1bmN0aW9uKHQpe3ZhciBlPXRoaXMuX2RhdGFWaWV3LmdldEZsb2F0NjQodGhpcy5wb3NpdGlvbix0Pz90aGlzLmVuZGlhbm5lc3MpO3JldHVybiB0aGlzLnBvc2l0aW9uKz04LGV9LGwuZW5kaWFubmVzcz1uZXcgSW50OEFycmF5KG5ldyBJbnQxNkFycmF5KFsxXSkuYnVmZmVyKVswXT4wLGwubWVtY3B5PWZ1bmN0aW9uKHQsZSxzLG4sYSl7dmFyIG89bmV3IFVpbnQ4QXJyYXkodCxlLGEpLGg9bmV3IFVpbnQ4QXJyYXkocyxuLGEpO28uc2V0KGgpfSxsLmFycmF5VG9OYXRpdmU9ZnVuY3Rpb24odCxlKXtyZXR1cm4gZT09dGhpcy5lbmRpYW5uZXNzP3Q6dGhpcy5mbGlwQXJyYXlFbmRpYW5uZXNzKHQpfSxsLm5hdGl2ZVRvRW5kaWFuPWZ1bmN0aW9uKHQsZSl7cmV0dXJuIHRoaXMuZW5kaWFubmVzcz09ZT90OnRoaXMuZmxpcEFycmF5RW5kaWFubmVzcyh0KX0sbC5mbGlwQXJyYXlFbmRpYW5uZXNzPWZ1bmN0aW9uKHQpe2Zvcih2YXIgZT1uZXcgVWludDhBcnJheSh0LmJ1ZmZlcix0LmJ5dGVPZmZzZXQsdC5ieXRlTGVuZ3RoKSxzPTA7czx0LmJ5dGVMZW5ndGg7cys9dC5CWVRFU19QRVJfRUxFTUVOVClmb3IodmFyIG49cyt0LkJZVEVTX1BFUl9FTEVNRU5ULTEsYT1zO24+YTtuLS0sYSsrKXt2YXIgbz1lW2FdO2VbYV09ZVtuXSxlW25dPW99cmV0dXJuIHR9LGwucHJvdG90eXBlLmZhaWx1cmVQb3NpdGlvbj0wLFN0cmluZy5mcm9tQ2hhckNvZGVVaW50OD1mdW5jdGlvbih0KXtmb3IodmFyIGU9W10scz0wO3M8dC5sZW5ndGg7cysrKWVbc109dFtzXTtyZXR1cm4gU3RyaW5nLmZyb21DaGFyQ29kZS5hcHBseShudWxsLGUpfSxsLnByb3RvdHlwZS5yZWFkU3RyaW5nPWZ1bmN0aW9uKHQsZSl7cmV0dXJuIGU9PW51bGx8fGU9PSJBU0NJSSI/U3RyaW5nLmZyb21DaGFyQ29kZVVpbnQ4LmFwcGx5KG51bGwsW3RoaXMubWFwVWludDhBcnJheSh0Pz90aGlzLmJ5dGVMZW5ndGgtdGhpcy5wb3NpdGlvbildKTpuZXcgVGV4dERlY29kZXIoZSkuZGVjb2RlKHRoaXMubWFwVWludDhBcnJheSh0KSl9LGwucHJvdG90eXBlLnJlYWRDU3RyaW5nPWZ1bmN0aW9uKHQpe3ZhciBlPXRoaXMuYnl0ZUxlbmd0aC10aGlzLnBvc2l0aW9uLHM9bmV3IFVpbnQ4QXJyYXkodGhpcy5fYnVmZmVyLHRoaXMuX2J5dGVPZmZzZXQrdGhpcy5wb3NpdGlvbiksbj1lO3QhPW51bGwmJihuPU1hdGgubWluKHQsZSkpO2Zvcih2YXIgYT0wO2E8biYmc1thXSE9PTA7YSsrKTt2YXIgbz1TdHJpbmcuZnJvbUNoYXJDb2RlVWludDguYXBwbHkobnVsbCxbdGhpcy5tYXBVaW50OEFycmF5KGEpXSk7cmV0dXJuIHQhPW51bGw/dGhpcy5wb3NpdGlvbis9bi1hOmEhPWUmJih0aGlzLnBvc2l0aW9uKz0xKSxvfTt2YXIgUz1NYXRoLnBvdygyLDMyKTtsLnByb3RvdHlwZS5yZWFkSW50NjQ9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5yZWFkSW50MzIoKSpTK3RoaXMucmVhZFVpbnQzMigpfSxsLnByb3RvdHlwZS5yZWFkVWludDY0PWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMucmVhZFVpbnQzMigpKlMrdGhpcy5yZWFkVWludDMyKCl9LGwucHJvdG90eXBlLnJlYWRJbnQ2ND1mdW5jdGlvbigpe3JldHVybiB0aGlzLnJlYWRVaW50MzIoKSpTK3RoaXMucmVhZFVpbnQzMigpfSxsLnByb3RvdHlwZS5yZWFkVWludDI0PWZ1bmN0aW9uKCl7cmV0dXJuKHRoaXMucmVhZFVpbnQ4KCk8PDE2KSsodGhpcy5yZWFkVWludDgoKTw8OCkrdGhpcy5yZWFkVWludDgoKX0sXy5EYXRhU3RyZWFtPWwsbC5wcm90b3R5cGUuc2F2ZT1mdW5jdGlvbih0KXt2YXIgZT1uZXcgQmxvYihbdGhpcy5idWZmZXJdKTtpZih3aW5kb3cuVVJMJiZVUkwuY3JlYXRlT2JqZWN0VVJMKXt2YXIgcz13aW5kb3cuVVJMLmNyZWF0ZU9iamVjdFVSTChlKSxuPWRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoImEiKTtkb2N1bWVudC5ib2R5LmFwcGVuZENoaWxkKG4pLG4uc2V0QXR0cmlidXRlKCJocmVmIixzKSxuLnNldEF0dHJpYnV0ZSgiZG93bmxvYWQiLHQpLG4uc2V0QXR0cmlidXRlKCJ0YXJnZXQiLCJfc2VsZiIpLG4uY2xpY2soKSx3aW5kb3cuVVJMLnJldm9rZU9iamVjdFVSTChzKX1lbHNlIHRocm93IkRhdGFTdHJlYW0uc2F2ZTogQ2FuJ3QgY3JlYXRlIG9iamVjdCBVUkwuIn0sbC5wcm90b3R5cGUuX2R5bmFtaWNTaXplPSEwLE9iamVjdC5kZWZpbmVQcm9wZXJ0eShsLnByb3RvdHlwZSwiZHluYW1pY1NpemUiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fZHluYW1pY1NpemV9LHNldDpmdW5jdGlvbih0KXt0fHx0aGlzLl90cmltQWxsb2MoKSx0aGlzLl9keW5hbWljU2l6ZT10fX0pLGwucHJvdG90eXBlLnNoaWZ0PWZ1bmN0aW9uKHQpe3ZhciBlPW5ldyBBcnJheUJ1ZmZlcih0aGlzLl9ieXRlTGVuZ3RoLXQpLHM9bmV3IFVpbnQ4QXJyYXkoZSksbj1uZXcgVWludDhBcnJheSh0aGlzLl9idWZmZXIsdCxzLmxlbmd0aCk7cy5zZXQobiksdGhpcy5idWZmZXI9ZSx0aGlzLnBvc2l0aW9uLT10fSxsLnByb3RvdHlwZS53cml0ZUludDMyQXJyYXk9ZnVuY3Rpb24odCxlKXtpZih0aGlzLl9yZWFsbG9jKHQubGVuZ3RoKjQpLHQgaW5zdGFuY2VvZiBJbnQzMkFycmF5JiZ0aGlzLmJ5dGVPZmZzZXQrdGhpcy5wb3NpdGlvbiV0LkJZVEVTX1BFUl9FTEVNRU5UPT09MClsLm1lbWNweSh0aGlzLl9idWZmZXIsdGhpcy5ieXRlT2Zmc2V0K3RoaXMucG9zaXRpb24sdC5idWZmZXIsMCx0LmJ5dGVMZW5ndGgpLHRoaXMubWFwSW50MzJBcnJheSh0Lmxlbmd0aCxlKTtlbHNlIGZvcih2YXIgcz0wO3M8dC5sZW5ndGg7cysrKXRoaXMud3JpdGVJbnQzMih0W3NdLGUpfSxsLnByb3RvdHlwZS53cml0ZUludDE2QXJyYXk9ZnVuY3Rpb24odCxlKXtpZih0aGlzLl9yZWFsbG9jKHQubGVuZ3RoKjIpLHQgaW5zdGFuY2VvZiBJbnQxNkFycmF5JiZ0aGlzLmJ5dGVPZmZzZXQrdGhpcy5wb3NpdGlvbiV0LkJZVEVTX1BFUl9FTEVNRU5UPT09MClsLm1lbWNweSh0aGlzLl9idWZmZXIsdGhpcy5ieXRlT2Zmc2V0K3RoaXMucG9zaXRpb24sdC5idWZmZXIsMCx0LmJ5dGVMZW5ndGgpLHRoaXMubWFwSW50MTZBcnJheSh0Lmxlbmd0aCxlKTtlbHNlIGZvcih2YXIgcz0wO3M8dC5sZW5ndGg7cysrKXRoaXMud3JpdGVJbnQxNih0W3NdLGUpfSxsLnByb3RvdHlwZS53cml0ZUludDhBcnJheT1mdW5jdGlvbih0KXtpZih0aGlzLl9yZWFsbG9jKHQubGVuZ3RoKjEpLHQgaW5zdGFuY2VvZiBJbnQ4QXJyYXkmJnRoaXMuYnl0ZU9mZnNldCt0aGlzLnBvc2l0aW9uJXQuQllURVNfUEVSX0VMRU1FTlQ9PT0wKWwubWVtY3B5KHRoaXMuX2J1ZmZlcix0aGlzLmJ5dGVPZmZzZXQrdGhpcy5wb3NpdGlvbix0LmJ1ZmZlciwwLHQuYnl0ZUxlbmd0aCksdGhpcy5tYXBJbnQ4QXJyYXkodC5sZW5ndGgpO2Vsc2UgZm9yKHZhciBlPTA7ZTx0Lmxlbmd0aDtlKyspdGhpcy53cml0ZUludDgodFtlXSl9LGwucHJvdG90eXBlLndyaXRlVWludDMyQXJyYXk9ZnVuY3Rpb24odCxlKXtpZih0aGlzLl9yZWFsbG9jKHQubGVuZ3RoKjQpLHQgaW5zdGFuY2VvZiBVaW50MzJBcnJheSYmdGhpcy5ieXRlT2Zmc2V0K3RoaXMucG9zaXRpb24ldC5CWVRFU19QRVJfRUxFTUVOVD09PTApbC5tZW1jcHkodGhpcy5fYnVmZmVyLHRoaXMuYnl0ZU9mZnNldCt0aGlzLnBvc2l0aW9uLHQuYnVmZmVyLDAsdC5ieXRlTGVuZ3RoKSx0aGlzLm1hcFVpbnQzMkFycmF5KHQubGVuZ3RoLGUpO2Vsc2UgZm9yKHZhciBzPTA7czx0Lmxlbmd0aDtzKyspdGhpcy53cml0ZVVpbnQzMih0W3NdLGUpfSxsLnByb3RvdHlwZS53cml0ZVVpbnQxNkFycmF5PWZ1bmN0aW9uKHQsZSl7aWYodGhpcy5fcmVhbGxvYyh0Lmxlbmd0aCoyKSx0IGluc3RhbmNlb2YgVWludDE2QXJyYXkmJnRoaXMuYnl0ZU9mZnNldCt0aGlzLnBvc2l0aW9uJXQuQllURVNfUEVSX0VMRU1FTlQ9PT0wKWwubWVtY3B5KHRoaXMuX2J1ZmZlcix0aGlzLmJ5dGVPZmZzZXQrdGhpcy5wb3NpdGlvbix0LmJ1ZmZlciwwLHQuYnl0ZUxlbmd0aCksdGhpcy5tYXBVaW50MTZBcnJheSh0Lmxlbmd0aCxlKTtlbHNlIGZvcih2YXIgcz0wO3M8dC5sZW5ndGg7cysrKXRoaXMud3JpdGVVaW50MTYodFtzXSxlKX0sbC5wcm90b3R5cGUud3JpdGVVaW50OEFycmF5PWZ1bmN0aW9uKHQpe2lmKHRoaXMuX3JlYWxsb2ModC5sZW5ndGgqMSksdCBpbnN0YW5jZW9mIFVpbnQ4QXJyYXkmJnRoaXMuYnl0ZU9mZnNldCt0aGlzLnBvc2l0aW9uJXQuQllURVNfUEVSX0VMRU1FTlQ9PT0wKWwubWVtY3B5KHRoaXMuX2J1ZmZlcix0aGlzLmJ5dGVPZmZzZXQrdGhpcy5wb3NpdGlvbix0LmJ1ZmZlciwwLHQuYnl0ZUxlbmd0aCksdGhpcy5tYXBVaW50OEFycmF5KHQubGVuZ3RoKTtlbHNlIGZvcih2YXIgZT0wO2U8dC5sZW5ndGg7ZSsrKXRoaXMud3JpdGVVaW50OCh0W2VdKX0sbC5wcm90b3R5cGUud3JpdGVGbG9hdDY0QXJyYXk9ZnVuY3Rpb24odCxlKXtpZih0aGlzLl9yZWFsbG9jKHQubGVuZ3RoKjgpLHQgaW5zdGFuY2VvZiBGbG9hdDY0QXJyYXkmJnRoaXMuYnl0ZU9mZnNldCt0aGlzLnBvc2l0aW9uJXQuQllURVNfUEVSX0VMRU1FTlQ9PT0wKWwubWVtY3B5KHRoaXMuX2J1ZmZlcix0aGlzLmJ5dGVPZmZzZXQrdGhpcy5wb3NpdGlvbix0LmJ1ZmZlciwwLHQuYnl0ZUxlbmd0aCksdGhpcy5tYXBGbG9hdDY0QXJyYXkodC5sZW5ndGgsZSk7ZWxzZSBmb3IodmFyIHM9MDtzPHQubGVuZ3RoO3MrKyl0aGlzLndyaXRlRmxvYXQ2NCh0W3NdLGUpfSxsLnByb3RvdHlwZS53cml0ZUZsb2F0MzJBcnJheT1mdW5jdGlvbih0LGUpe2lmKHRoaXMuX3JlYWxsb2ModC5sZW5ndGgqNCksdCBpbnN0YW5jZW9mIEZsb2F0MzJBcnJheSYmdGhpcy5ieXRlT2Zmc2V0K3RoaXMucG9zaXRpb24ldC5CWVRFU19QRVJfRUxFTUVOVD09PTApbC5tZW1jcHkodGhpcy5fYnVmZmVyLHRoaXMuYnl0ZU9mZnNldCt0aGlzLnBvc2l0aW9uLHQuYnVmZmVyLDAsdC5ieXRlTGVuZ3RoKSx0aGlzLm1hcEZsb2F0MzJBcnJheSh0Lmxlbmd0aCxlKTtlbHNlIGZvcih2YXIgcz0wO3M8dC5sZW5ndGg7cysrKXRoaXMud3JpdGVGbG9hdDMyKHRbc10sZSl9LGwucHJvdG90eXBlLndyaXRlSW50MzI9ZnVuY3Rpb24odCxlKXt0aGlzLl9yZWFsbG9jKDQpLHRoaXMuX2RhdGFWaWV3LnNldEludDMyKHRoaXMucG9zaXRpb24sdCxlPz90aGlzLmVuZGlhbm5lc3MpLHRoaXMucG9zaXRpb24rPTR9LGwucHJvdG90eXBlLndyaXRlSW50MTY9ZnVuY3Rpb24odCxlKXt0aGlzLl9yZWFsbG9jKDIpLHRoaXMuX2RhdGFWaWV3LnNldEludDE2KHRoaXMucG9zaXRpb24sdCxlPz90aGlzLmVuZGlhbm5lc3MpLHRoaXMucG9zaXRpb24rPTJ9LGwucHJvdG90eXBlLndyaXRlSW50OD1mdW5jdGlvbih0KXt0aGlzLl9yZWFsbG9jKDEpLHRoaXMuX2RhdGFWaWV3LnNldEludDgodGhpcy5wb3NpdGlvbix0KSx0aGlzLnBvc2l0aW9uKz0xfSxsLnByb3RvdHlwZS53cml0ZVVpbnQzMj1mdW5jdGlvbih0LGUpe3RoaXMuX3JlYWxsb2MoNCksdGhpcy5fZGF0YVZpZXcuc2V0VWludDMyKHRoaXMucG9zaXRpb24sdCxlPz90aGlzLmVuZGlhbm5lc3MpLHRoaXMucG9zaXRpb24rPTR9LGwucHJvdG90eXBlLndyaXRlVWludDE2PWZ1bmN0aW9uKHQsZSl7dGhpcy5fcmVhbGxvYygyKSx0aGlzLl9kYXRhVmlldy5zZXRVaW50MTYodGhpcy5wb3NpdGlvbix0LGU/P3RoaXMuZW5kaWFubmVzcyksdGhpcy5wb3NpdGlvbis9Mn0sbC5wcm90b3R5cGUud3JpdGVVaW50OD1mdW5jdGlvbih0KXt0aGlzLl9yZWFsbG9jKDEpLHRoaXMuX2RhdGFWaWV3LnNldFVpbnQ4KHRoaXMucG9zaXRpb24sdCksdGhpcy5wb3NpdGlvbis9MX0sbC5wcm90b3R5cGUud3JpdGVGbG9hdDMyPWZ1bmN0aW9uKHQsZSl7dGhpcy5fcmVhbGxvYyg0KSx0aGlzLl9kYXRhVmlldy5zZXRGbG9hdDMyKHRoaXMucG9zaXRpb24sdCxlPz90aGlzLmVuZGlhbm5lc3MpLHRoaXMucG9zaXRpb24rPTR9LGwucHJvdG90eXBlLndyaXRlRmxvYXQ2ND1mdW5jdGlvbih0LGUpe3RoaXMuX3JlYWxsb2MoOCksdGhpcy5fZGF0YVZpZXcuc2V0RmxvYXQ2NCh0aGlzLnBvc2l0aW9uLHQsZT8/dGhpcy5lbmRpYW5uZXNzKSx0aGlzLnBvc2l0aW9uKz04fSxsLnByb3RvdHlwZS53cml0ZVVDUzJTdHJpbmc9ZnVuY3Rpb24odCxlLHMpe3M9PW51bGwmJihzPXQubGVuZ3RoKTtmb3IodmFyIG49MDtuPHQubGVuZ3RoJiZuPHM7bisrKXRoaXMud3JpdGVVaW50MTYodC5jaGFyQ29kZUF0KG4pLGUpO2Zvcig7bjxzO24rKyl0aGlzLndyaXRlVWludDE2KDApfSxsLnByb3RvdHlwZS53cml0ZVN0cmluZz1mdW5jdGlvbih0LGUscyl7dmFyIG49MDtpZihlPT1udWxsfHxlPT0iQVNDSUkiKWlmKHMhPW51bGwpe3ZhciBhPU1hdGgubWluKHQubGVuZ3RoLHMpO2ZvcihuPTA7bjxhO24rKyl0aGlzLndyaXRlVWludDgodC5jaGFyQ29kZUF0KG4pKTtmb3IoO248cztuKyspdGhpcy53cml0ZVVpbnQ4KDApfWVsc2UgZm9yKG49MDtuPHQubGVuZ3RoO24rKyl0aGlzLndyaXRlVWludDgodC5jaGFyQ29kZUF0KG4pKTtlbHNlIHRoaXMud3JpdGVVaW50OEFycmF5KG5ldyBUZXh0RW5jb2RlcihlKS5lbmNvZGUodC5zdWJzdHJpbmcoMCxzKSkpfSxsLnByb3RvdHlwZS53cml0ZUNTdHJpbmc9ZnVuY3Rpb24odCxlKXt2YXIgcz0wO2lmKGUhPW51bGwpe3ZhciBuPU1hdGgubWluKHQubGVuZ3RoLGUpO2ZvcihzPTA7czxuO3MrKyl0aGlzLndyaXRlVWludDgodC5jaGFyQ29kZUF0KHMpKTtmb3IoO3M8ZTtzKyspdGhpcy53cml0ZVVpbnQ4KDApfWVsc2V7Zm9yKHM9MDtzPHQubGVuZ3RoO3MrKyl0aGlzLndyaXRlVWludDgodC5jaGFyQ29kZUF0KHMpKTt0aGlzLndyaXRlVWludDgoMCl9fSxsLnByb3RvdHlwZS53cml0ZVN0cnVjdD1mdW5jdGlvbih0LGUpe2Zvcih2YXIgcz0wO3M8dC5sZW5ndGg7cys9Mil7dmFyIG49dFtzKzFdO3RoaXMud3JpdGVUeXBlKG4sZVt0W3NdXSxlKX19LGwucHJvdG90eXBlLndyaXRlVHlwZT1mdW5jdGlvbih0LGUscyl7dmFyIG47aWYodHlwZW9mIHQ9PSJmdW5jdGlvbiIpcmV0dXJuIHQodGhpcyxlKTtpZih0eXBlb2YgdD09Im9iamVjdCImJiEodCBpbnN0YW5jZW9mIEFycmF5KSlyZXR1cm4gdC5zZXQodGhpcyxlLHMpO3ZhciBhPW51bGwsbz0iQVNDSUkiLGg9dGhpcy5wb3NpdGlvbjtzd2l0Y2godHlwZW9mIHQ9PSJzdHJpbmciJiYvOi8udGVzdCh0KSYmKG49dC5zcGxpdCgiOiIpLHQ9blswXSxhPXBhcnNlSW50KG5bMV0pKSx0eXBlb2YgdD09InN0cmluZyImJi8sLy50ZXN0KHQpJiYobj10LnNwbGl0KCIsIiksdD1uWzBdLG89cGFyc2VJbnQoblsxXSkpLHQpe2Nhc2UidWludDgiOnRoaXMud3JpdGVVaW50OChlKTticmVhaztjYXNlImludDgiOnRoaXMud3JpdGVJbnQ4KGUpO2JyZWFrO2Nhc2UidWludDE2Ijp0aGlzLndyaXRlVWludDE2KGUsdGhpcy5lbmRpYW5uZXNzKTticmVhaztjYXNlImludDE2Ijp0aGlzLndyaXRlSW50MTYoZSx0aGlzLmVuZGlhbm5lc3MpO2JyZWFrO2Nhc2UidWludDMyIjp0aGlzLndyaXRlVWludDMyKGUsdGhpcy5lbmRpYW5uZXNzKTticmVhaztjYXNlImludDMyIjp0aGlzLndyaXRlSW50MzIoZSx0aGlzLmVuZGlhbm5lc3MpO2JyZWFrO2Nhc2UiZmxvYXQzMiI6dGhpcy53cml0ZUZsb2F0MzIoZSx0aGlzLmVuZGlhbm5lc3MpO2JyZWFrO2Nhc2UiZmxvYXQ2NCI6dGhpcy53cml0ZUZsb2F0NjQoZSx0aGlzLmVuZGlhbm5lc3MpO2JyZWFrO2Nhc2UidWludDE2YmUiOnRoaXMud3JpdGVVaW50MTYoZSxsLkJJR19FTkRJQU4pO2JyZWFrO2Nhc2UiaW50MTZiZSI6dGhpcy53cml0ZUludDE2KGUsbC5CSUdfRU5ESUFOKTticmVhaztjYXNlInVpbnQzMmJlIjp0aGlzLndyaXRlVWludDMyKGUsbC5CSUdfRU5ESUFOKTticmVhaztjYXNlImludDMyYmUiOnRoaXMud3JpdGVJbnQzMihlLGwuQklHX0VORElBTik7YnJlYWs7Y2FzZSJmbG9hdDMyYmUiOnRoaXMud3JpdGVGbG9hdDMyKGUsbC5CSUdfRU5ESUFOKTticmVhaztjYXNlImZsb2F0NjRiZSI6dGhpcy53cml0ZUZsb2F0NjQoZSxsLkJJR19FTkRJQU4pO2JyZWFrO2Nhc2UidWludDE2bGUiOnRoaXMud3JpdGVVaW50MTYoZSxsLkxJVFRMRV9FTkRJQU4pO2JyZWFrO2Nhc2UiaW50MTZsZSI6dGhpcy53cml0ZUludDE2KGUsbC5MSVRUTEVfRU5ESUFOKTticmVhaztjYXNlInVpbnQzMmxlIjp0aGlzLndyaXRlVWludDMyKGUsbC5MSVRUTEVfRU5ESUFOKTticmVhaztjYXNlImludDMybGUiOnRoaXMud3JpdGVJbnQzMihlLGwuTElUVExFX0VORElBTik7YnJlYWs7Y2FzZSJmbG9hdDMybGUiOnRoaXMud3JpdGVGbG9hdDMyKGUsbC5MSVRUTEVfRU5ESUFOKTticmVhaztjYXNlImZsb2F0NjRsZSI6dGhpcy53cml0ZUZsb2F0NjQoZSxsLkxJVFRMRV9FTkRJQU4pO2JyZWFrO2Nhc2UiY3N0cmluZyI6dGhpcy53cml0ZUNTdHJpbmcoZSxhKTticmVhaztjYXNlInN0cmluZyI6dGhpcy53cml0ZVN0cmluZyhlLG8sYSk7YnJlYWs7Y2FzZSJ1MTZzdHJpbmciOnRoaXMud3JpdGVVQ1MyU3RyaW5nKGUsdGhpcy5lbmRpYW5uZXNzLGEpO2JyZWFrO2Nhc2UidTE2c3RyaW5nbGUiOnRoaXMud3JpdGVVQ1MyU3RyaW5nKGUsbC5MSVRUTEVfRU5ESUFOLGEpO2JyZWFrO2Nhc2UidTE2c3RyaW5nYmUiOnRoaXMud3JpdGVVQ1MyU3RyaW5nKGUsbC5CSUdfRU5ESUFOLGEpO2JyZWFrO2RlZmF1bHQ6aWYodC5sZW5ndGg9PTMpe2Zvcih2YXIgZj10WzFdLHA9MDtwPGUubGVuZ3RoO3ArKyl0aGlzLndyaXRlVHlwZShmLGVbcF0pO2JyZWFrfWVsc2V7dGhpcy53cml0ZVN0cnVjdCh0LGUpO2JyZWFrfX1hIT1udWxsJiYodGhpcy5wb3NpdGlvbj1oLHRoaXMuX3JlYWxsb2MoYSksdGhpcy5wb3NpdGlvbj1oK2EpfSxsLnByb3RvdHlwZS53cml0ZVVpbnQ2ND1mdW5jdGlvbih0KXt2YXIgZT1NYXRoLmZsb29yKHQvUyk7dGhpcy53cml0ZVVpbnQzMihlKSx0aGlzLndyaXRlVWludDMyKHQmNDI5NDk2NzI5NSl9LGwucHJvdG90eXBlLndyaXRlVWludDI0PWZ1bmN0aW9uKHQpe3RoaXMud3JpdGVVaW50OCgodCYxNjcxMTY4MCk+PjE2KSx0aGlzLndyaXRlVWludDgoKHQmNjUyODApPj44KSx0aGlzLndyaXRlVWludDgodCYyNTUpfSxsLnByb3RvdHlwZS5hZGp1c3RVaW50MzI9ZnVuY3Rpb24odCxlKXt2YXIgcz10aGlzLnBvc2l0aW9uO3RoaXMuc2Vlayh0KSx0aGlzLndyaXRlVWludDMyKGUpLHRoaXMuc2VlayhzKX0sbC5wcm90b3R5cGUubWFwSW50MzJBcnJheT1mdW5jdGlvbih0LGUpe3RoaXMuX3JlYWxsb2ModCo0KTt2YXIgcz1uZXcgSW50MzJBcnJheSh0aGlzLl9idWZmZXIsdGhpcy5ieXRlT2Zmc2V0K3RoaXMucG9zaXRpb24sdCk7cmV0dXJuIGwuYXJyYXlUb05hdGl2ZShzLGU/P3RoaXMuZW5kaWFubmVzcyksdGhpcy5wb3NpdGlvbis9dCo0LHN9LGwucHJvdG90eXBlLm1hcEludDE2QXJyYXk9ZnVuY3Rpb24odCxlKXt0aGlzLl9yZWFsbG9jKHQqMik7dmFyIHM9bmV3IEludDE2QXJyYXkodGhpcy5fYnVmZmVyLHRoaXMuYnl0ZU9mZnNldCt0aGlzLnBvc2l0aW9uLHQpO3JldHVybiBsLmFycmF5VG9OYXRpdmUocyxlPz90aGlzLmVuZGlhbm5lc3MpLHRoaXMucG9zaXRpb24rPXQqMixzfSxsLnByb3RvdHlwZS5tYXBJbnQ4QXJyYXk9ZnVuY3Rpb24odCl7dGhpcy5fcmVhbGxvYyh0KjEpO3ZhciBlPW5ldyBJbnQ4QXJyYXkodGhpcy5fYnVmZmVyLHRoaXMuYnl0ZU9mZnNldCt0aGlzLnBvc2l0aW9uLHQpO3JldHVybiB0aGlzLnBvc2l0aW9uKz10KjEsZX0sbC5wcm90b3R5cGUubWFwVWludDMyQXJyYXk9ZnVuY3Rpb24odCxlKXt0aGlzLl9yZWFsbG9jKHQqNCk7dmFyIHM9bmV3IFVpbnQzMkFycmF5KHRoaXMuX2J1ZmZlcix0aGlzLmJ5dGVPZmZzZXQrdGhpcy5wb3NpdGlvbix0KTtyZXR1cm4gbC5hcnJheVRvTmF0aXZlKHMsZT8/dGhpcy5lbmRpYW5uZXNzKSx0aGlzLnBvc2l0aW9uKz10KjQsc30sbC5wcm90b3R5cGUubWFwVWludDE2QXJyYXk9ZnVuY3Rpb24odCxlKXt0aGlzLl9yZWFsbG9jKHQqMik7dmFyIHM9bmV3IFVpbnQxNkFycmF5KHRoaXMuX2J1ZmZlcix0aGlzLmJ5dGVPZmZzZXQrdGhpcy5wb3NpdGlvbix0KTtyZXR1cm4gbC5hcnJheVRvTmF0aXZlKHMsZT8/dGhpcy5lbmRpYW5uZXNzKSx0aGlzLnBvc2l0aW9uKz10KjIsc30sbC5wcm90b3R5cGUubWFwRmxvYXQ2NEFycmF5PWZ1bmN0aW9uKHQsZSl7dGhpcy5fcmVhbGxvYyh0KjgpO3ZhciBzPW5ldyBGbG9hdDY0QXJyYXkodGhpcy5fYnVmZmVyLHRoaXMuYnl0ZU9mZnNldCt0aGlzLnBvc2l0aW9uLHQpO3JldHVybiBsLmFycmF5VG9OYXRpdmUocyxlPz90aGlzLmVuZGlhbm5lc3MpLHRoaXMucG9zaXRpb24rPXQqOCxzfSxsLnByb3RvdHlwZS5tYXBGbG9hdDMyQXJyYXk9ZnVuY3Rpb24odCxlKXt0aGlzLl9yZWFsbG9jKHQqNCk7dmFyIHM9bmV3IEZsb2F0MzJBcnJheSh0aGlzLl9idWZmZXIsdGhpcy5ieXRlT2Zmc2V0K3RoaXMucG9zaXRpb24sdCk7cmV0dXJuIGwuYXJyYXlUb05hdGl2ZShzLGU/P3RoaXMuZW5kaWFubmVzcyksdGhpcy5wb3NpdGlvbis9dCo0LHN9O3ZhciBVPWZ1bmN0aW9uKHQpe3RoaXMuYnVmZmVycz1bXSx0aGlzLmJ1ZmZlckluZGV4PS0xLHQmJih0aGlzLmluc2VydEJ1ZmZlcih0KSx0aGlzLmJ1ZmZlckluZGV4PTApfTtVLnByb3RvdHlwZT1uZXcgbChuZXcgQXJyYXlCdWZmZXIsMCxsLkJJR19FTkRJQU4pLFUucHJvdG90eXBlLmluaXRpYWxpemVkPWZ1bmN0aW9uKCl7dmFyIHQ7cmV0dXJuIHRoaXMuYnVmZmVySW5kZXg+LTE/ITA6dGhpcy5idWZmZXJzLmxlbmd0aD4wPyh0PXRoaXMuYnVmZmVyc1swXSx0LmZpbGVTdGFydD09PTA/KHRoaXMuYnVmZmVyPXQsdGhpcy5idWZmZXJJbmRleD0wLGQuZGVidWcoIk11bHRpQnVmZmVyU3RyZWFtIiwiU3RyZWFtIHJlYWR5IGZvciBwYXJzaW5nIiksITApOihkLndhcm4oIk11bHRpQnVmZmVyU3RyZWFtIiwiVGhlIGZpcnN0IGJ1ZmZlciBzaG91bGQgaGF2ZSBhIGZpbGVTdGFydCBvZiAwIiksdGhpcy5sb2dCdWZmZXJMZXZlbCgpLCExKSk6KGQud2FybigiTXVsdGlCdWZmZXJTdHJlYW0iLCJObyBidWZmZXIgdG8gc3RhcnQgcGFyc2luZyBmcm9tIiksdGhpcy5sb2dCdWZmZXJMZXZlbCgpLCExKX0sQXJyYXlCdWZmZXIuY29uY2F0PWZ1bmN0aW9uKHQsZSl7ZC5kZWJ1ZygiQXJyYXlCdWZmZXIiLCJUcnlpbmcgdG8gY3JlYXRlIGEgbmV3IGJ1ZmZlciBvZiBzaXplOiAiKyh0LmJ5dGVMZW5ndGgrZS5ieXRlTGVuZ3RoKSk7dmFyIHM9bmV3IFVpbnQ4QXJyYXkodC5ieXRlTGVuZ3RoK2UuYnl0ZUxlbmd0aCk7cmV0dXJuIHMuc2V0KG5ldyBVaW50OEFycmF5KHQpLDApLHMuc2V0KG5ldyBVaW50OEFycmF5KGUpLHQuYnl0ZUxlbmd0aCkscy5idWZmZXJ9LFUucHJvdG90eXBlLnJlZHVjZUJ1ZmZlcj1mdW5jdGlvbih0LGUscyl7dmFyIG47cmV0dXJuIG49bmV3IFVpbnQ4QXJyYXkocyksbi5zZXQobmV3IFVpbnQ4QXJyYXkodCxlLHMpKSxuLmJ1ZmZlci5maWxlU3RhcnQ9dC5maWxlU3RhcnQrZSxuLmJ1ZmZlci51c2VkQnl0ZXM9MCxuLmJ1ZmZlcn0sVS5wcm90b3R5cGUuaW5zZXJ0QnVmZmVyPWZ1bmN0aW9uKHQpe2Zvcih2YXIgZT0hMCxzPTA7czx0aGlzLmJ1ZmZlcnMubGVuZ3RoO3MrKyl7dmFyIG49dGhpcy5idWZmZXJzW3NdO2lmKHQuZmlsZVN0YXJ0PD1uLmZpbGVTdGFydCl7aWYodC5maWxlU3RhcnQ9PT1uLmZpbGVTdGFydClpZih0LmJ5dGVMZW5ndGg+bi5ieXRlTGVuZ3RoKXt0aGlzLmJ1ZmZlcnMuc3BsaWNlKHMsMSkscy0tO2NvbnRpbnVlfWVsc2UgZC53YXJuKCJNdWx0aUJ1ZmZlclN0cmVhbSIsIkJ1ZmZlciAoZmlsZVN0YXJ0OiAiK3QuZmlsZVN0YXJ0KyIgLSBMZW5ndGg6ICIrdC5ieXRlTGVuZ3RoKyIpIGFscmVhZHkgYXBwZW5kZWQsIGlnbm9yaW5nIik7ZWxzZSB0LmZpbGVTdGFydCt0LmJ5dGVMZW5ndGg8PW4uZmlsZVN0YXJ0fHwodD10aGlzLnJlZHVjZUJ1ZmZlcih0LDAsbi5maWxlU3RhcnQtdC5maWxlU3RhcnQpKSxkLmRlYnVnKCJNdWx0aUJ1ZmZlclN0cmVhbSIsIkFwcGVuZGluZyBuZXcgYnVmZmVyIChmaWxlU3RhcnQ6ICIrdC5maWxlU3RhcnQrIiAtIExlbmd0aDogIit0LmJ5dGVMZW5ndGgrIikiKSx0aGlzLmJ1ZmZlcnMuc3BsaWNlKHMsMCx0KSxzPT09MCYmKHRoaXMuYnVmZmVyPXQpO2U9ITE7YnJlYWt9ZWxzZSBpZih0LmZpbGVTdGFydDxuLmZpbGVTdGFydCtuLmJ5dGVMZW5ndGgpe3ZhciBhPW4uZmlsZVN0YXJ0K24uYnl0ZUxlbmd0aC10LmZpbGVTdGFydCxvPXQuYnl0ZUxlbmd0aC1hO2lmKG8+MCl0PXRoaXMucmVkdWNlQnVmZmVyKHQsYSxvKTtlbHNle2U9ITE7YnJlYWt9fX1lJiYoZC5kZWJ1ZygiTXVsdGlCdWZmZXJTdHJlYW0iLCJBcHBlbmRpbmcgbmV3IGJ1ZmZlciAoZmlsZVN0YXJ0OiAiK3QuZmlsZVN0YXJ0KyIgLSBMZW5ndGg6ICIrdC5ieXRlTGVuZ3RoKyIpIiksdGhpcy5idWZmZXJzLnB1c2godCkscz09PTAmJih0aGlzLmJ1ZmZlcj10KSl9LFUucHJvdG90eXBlLmxvZ0J1ZmZlckxldmVsPWZ1bmN0aW9uKHQpe3ZhciBlLHMsbixhLG89W10saCxmPSIiO2ZvcihuPTAsYT0wLGU9MDtlPHRoaXMuYnVmZmVycy5sZW5ndGg7ZSsrKXM9dGhpcy5idWZmZXJzW2VdLGU9PT0wPyhoPXt9LG8ucHVzaChoKSxoLnN0YXJ0PXMuZmlsZVN0YXJ0LGguZW5kPXMuZmlsZVN0YXJ0K3MuYnl0ZUxlbmd0aCxmKz0iWyIraC5zdGFydCsiLSIpOmguZW5kPT09cy5maWxlU3RhcnQ/aC5lbmQ9cy5maWxlU3RhcnQrcy5ieXRlTGVuZ3RoOihoPXt9LGguc3RhcnQ9cy5maWxlU3RhcnQsZis9b1tvLmxlbmd0aC0xXS5lbmQtMSsiXSwgWyIraC5zdGFydCsiLSIsaC5lbmQ9cy5maWxlU3RhcnQrcy5ieXRlTGVuZ3RoLG8ucHVzaChoKSksbis9cy51c2VkQnl0ZXMsYSs9cy5ieXRlTGVuZ3RoO28ubGVuZ3RoPjAmJihmKz1oLmVuZC0xKyJdIik7dmFyIHA9dD9kLmluZm86ZC5kZWJ1Zzt0aGlzLmJ1ZmZlcnMubGVuZ3RoPT09MD9wKCJNdWx0aUJ1ZmZlclN0cmVhbSIsIk5vIG1vcmUgYnVmZmVyIGluIG1lbW9yeSIpOnAoIk11bHRpQnVmZmVyU3RyZWFtIiwiIit0aGlzLmJ1ZmZlcnMubGVuZ3RoKyIgc3RvcmVkIGJ1ZmZlcihzKSAoIituKyIvIithKyIgYnl0ZXMpLCBjb250aW51b3VzIHJhbmdlczogIitmKX0sVS5wcm90b3R5cGUuY2xlYW5CdWZmZXJzPWZ1bmN0aW9uKCl7dmFyIHQsZTtmb3IodD0wO3Q8dGhpcy5idWZmZXJzLmxlbmd0aDt0KyspZT10aGlzLmJ1ZmZlcnNbdF0sZS51c2VkQnl0ZXM9PT1lLmJ5dGVMZW5ndGgmJihkLmRlYnVnKCJNdWx0aUJ1ZmZlclN0cmVhbSIsIlJlbW92aW5nIGJ1ZmZlciAjIit0KSx0aGlzLmJ1ZmZlcnMuc3BsaWNlKHQsMSksdC0tKX0sVS5wcm90b3R5cGUubWVyZ2VOZXh0QnVmZmVyPWZ1bmN0aW9uKCl7dmFyIHQ7aWYodGhpcy5idWZmZXJJbmRleCsxPHRoaXMuYnVmZmVycy5sZW5ndGgpaWYodD10aGlzLmJ1ZmZlcnNbdGhpcy5idWZmZXJJbmRleCsxXSx0LmZpbGVTdGFydD09PXRoaXMuYnVmZmVyLmZpbGVTdGFydCt0aGlzLmJ1ZmZlci5ieXRlTGVuZ3RoKXt2YXIgZT10aGlzLmJ1ZmZlci5ieXRlTGVuZ3RoLHM9dGhpcy5idWZmZXIudXNlZEJ5dGVzLG49dGhpcy5idWZmZXIuZmlsZVN0YXJ0O3JldHVybiB0aGlzLmJ1ZmZlcnNbdGhpcy5idWZmZXJJbmRleF09QXJyYXlCdWZmZXIuY29uY2F0KHRoaXMuYnVmZmVyLHQpLHRoaXMuYnVmZmVyPXRoaXMuYnVmZmVyc1t0aGlzLmJ1ZmZlckluZGV4XSx0aGlzLmJ1ZmZlcnMuc3BsaWNlKHRoaXMuYnVmZmVySW5kZXgrMSwxKSx0aGlzLmJ1ZmZlci51c2VkQnl0ZXM9cyx0aGlzLmJ1ZmZlci5maWxlU3RhcnQ9bixkLmRlYnVnKCJJU09GaWxlIiwiQ29uY2F0ZW5hdGluZyBidWZmZXIgZm9yIGJveCBwYXJzaW5nIChsZW5ndGg6ICIrZSsiLT4iK3RoaXMuYnVmZmVyLmJ5dGVMZW5ndGgrIikiKSwhMH1lbHNlIHJldHVybiExO2Vsc2UgcmV0dXJuITF9LFUucHJvdG90eXBlLmZpbmRQb3NpdGlvbj1mdW5jdGlvbih0LGUscyl7dmFyIG4sYT1udWxsLG89LTE7Zm9yKHQ9PT0hMD9uPTA6bj10aGlzLmJ1ZmZlckluZGV4O248dGhpcy5idWZmZXJzLmxlbmd0aCYmKGE9dGhpcy5idWZmZXJzW25dLGEuZmlsZVN0YXJ0PD1lKTspe289bixzJiYoYS5maWxlU3RhcnQrYS5ieXRlTGVuZ3RoPD1lP2EudXNlZEJ5dGVzPWEuYnl0ZUxlbmd0aDphLnVzZWRCeXRlcz1lLWEuZmlsZVN0YXJ0LHRoaXMubG9nQnVmZmVyTGV2ZWwoKSk7bisrfXJldHVybiBvIT09LTE/KGE9dGhpcy5idWZmZXJzW29dLGEuZmlsZVN0YXJ0K2EuYnl0ZUxlbmd0aD49ZT8oZC5kZWJ1ZygiTXVsdGlCdWZmZXJTdHJlYW0iLCJGb3VuZCBwb3NpdGlvbiBpbiBleGlzdGluZyBidWZmZXIgIyIrbyksbyk6LTEpOi0xfSxVLnByb3RvdHlwZS5maW5kRW5kQ29udGlndW91c0J1Zj1mdW5jdGlvbih0KXt2YXIgZSxzLG4sYT10IT09dm9pZCAwP3Q6dGhpcy5idWZmZXJJbmRleDtpZihzPXRoaXMuYnVmZmVyc1thXSx0aGlzLmJ1ZmZlcnMubGVuZ3RoPmErMSlmb3IoZT1hKzE7ZTx0aGlzLmJ1ZmZlcnMubGVuZ3RoJiYobj10aGlzLmJ1ZmZlcnNbZV0sbi5maWxlU3RhcnQ9PT1zLmZpbGVTdGFydCtzLmJ5dGVMZW5ndGgpO2UrKylzPW47cmV0dXJuIHMuZmlsZVN0YXJ0K3MuYnl0ZUxlbmd0aH0sVS5wcm90b3R5cGUuZ2V0RW5kRmlsZVBvc2l0aW9uQWZ0ZXI9ZnVuY3Rpb24odCl7dmFyIGU9dGhpcy5maW5kUG9zaXRpb24oITAsdCwhMSk7cmV0dXJuIGUhPT0tMT90aGlzLmZpbmRFbmRDb250aWd1b3VzQnVmKGUpOnR9LFUucHJvdG90eXBlLmFkZFVzZWRCeXRlcz1mdW5jdGlvbih0KXt0aGlzLmJ1ZmZlci51c2VkQnl0ZXMrPXQsdGhpcy5sb2dCdWZmZXJMZXZlbCgpfSxVLnByb3RvdHlwZS5zZXRBbGxVc2VkQnl0ZXM9ZnVuY3Rpb24oKXt0aGlzLmJ1ZmZlci51c2VkQnl0ZXM9dGhpcy5idWZmZXIuYnl0ZUxlbmd0aCx0aGlzLmxvZ0J1ZmZlckxldmVsKCl9LFUucHJvdG90eXBlLnNlZWs9ZnVuY3Rpb24odCxlLHMpe3ZhciBuO3JldHVybiBuPXRoaXMuZmluZFBvc2l0aW9uKGUsdCxzKSxuIT09LTE/KHRoaXMuYnVmZmVyPXRoaXMuYnVmZmVyc1tuXSx0aGlzLmJ1ZmZlckluZGV4PW4sdGhpcy5wb3NpdGlvbj10LXRoaXMuYnVmZmVyLmZpbGVTdGFydCxkLmRlYnVnKCJNdWx0aUJ1ZmZlclN0cmVhbSIsIlJlcG9zaXRpb25pbmcgcGFyc2VyIGF0IGJ1ZmZlciBwb3NpdGlvbjogIit0aGlzLnBvc2l0aW9uKSwhMCk6KGQuZGVidWcoIk11bHRpQnVmZmVyU3RyZWFtIiwiUG9zaXRpb24gIit0KyIgbm90IGZvdW5kIGluIGJ1ZmZlcmVkIGRhdGEiKSwhMSl9LFUucHJvdG90eXBlLmdldFBvc2l0aW9uPWZ1bmN0aW9uKCl7aWYodGhpcy5idWZmZXJJbmRleD09PS0xfHx0aGlzLmJ1ZmZlcnNbdGhpcy5idWZmZXJJbmRleF09PT1udWxsKXRocm93IkVycm9yIGFjY2Vzc2luZyBwb3NpdGlvbiBpbiB0aGUgTXVsdGlCdWZmZXJTdHJlYW0iO3JldHVybiB0aGlzLmJ1ZmZlcnNbdGhpcy5idWZmZXJJbmRleF0uZmlsZVN0YXJ0K3RoaXMucG9zaXRpb259LFUucHJvdG90eXBlLmdldExlbmd0aD1mdW5jdGlvbigpe3JldHVybiB0aGlzLmJ5dGVMZW5ndGh9LFUucHJvdG90eXBlLmdldEVuZFBvc2l0aW9uPWZ1bmN0aW9uKCl7aWYodGhpcy5idWZmZXJJbmRleD09PS0xfHx0aGlzLmJ1ZmZlcnNbdGhpcy5idWZmZXJJbmRleF09PT1udWxsKXRocm93IkVycm9yIGFjY2Vzc2luZyBwb3NpdGlvbiBpbiB0aGUgTXVsdGlCdWZmZXJTdHJlYW0iO3JldHVybiB0aGlzLmJ1ZmZlcnNbdGhpcy5idWZmZXJJbmRleF0uZmlsZVN0YXJ0K3RoaXMuYnl0ZUxlbmd0aH0sXy5NdWx0aUJ1ZmZlclN0cmVhbT1VO3ZhciBBPWZ1bmN0aW9uKCl7dmFyIHQ9MyxlPTQscz01LG49NixhPVtdO2FbdF09IkVTX0Rlc2NyaXB0b3IiLGFbZV09IkRlY29kZXJDb25maWdEZXNjcmlwdG9yIixhW3NdPSJEZWNvZGVyU3BlY2lmaWNJbmZvIixhW25dPSJTTENvbmZpZ0Rlc2NyaXB0b3IiLHRoaXMuZ2V0RGVzY3JpcHRvck5hbWU9ZnVuY3Rpb24oZil7cmV0dXJuIGFbZl19O3ZhciBvPXRoaXMsaD17fTtyZXR1cm4gdGhpcy5wYXJzZU9uZURlc2NyaXB0b3I9ZnVuY3Rpb24oZil7dmFyIHA9MCxnLG0sdjtmb3IoZz1mLnJlYWRVaW50OCgpLHY9Zi5yZWFkVWludDgoKTt2JjEyODspcD0odiYxMjcpPDw3LHY9Zi5yZWFkVWludDgoKTtyZXR1cm4gcCs9diYxMjcsZC5kZWJ1ZygiTVBFRzREZXNjcmlwdG9yUGFyc2VyIiwiRm91bmQgIisoYVtnXXx8IkRlc2NyaXB0b3IgIitnKSsiLCBzaXplICIrcCsiIGF0IHBvc2l0aW9uICIrZi5nZXRQb3NpdGlvbigpKSxhW2ddP209bmV3IGhbYVtnXV0ocCk6bT1uZXcgaC5EZXNjcmlwdG9yKHApLG0ucGFyc2UoZiksbX0saC5EZXNjcmlwdG9yPWZ1bmN0aW9uKGYscCl7dGhpcy50YWc9Zix0aGlzLnNpemU9cCx0aGlzLmRlc2NzPVtdfSxoLkRlc2NyaXB0b3IucHJvdG90eXBlLnBhcnNlPWZ1bmN0aW9uKGYpe3RoaXMuZGF0YT1mLnJlYWRVaW50OEFycmF5KHRoaXMuc2l6ZSl9LGguRGVzY3JpcHRvci5wcm90b3R5cGUuZmluZERlc2NyaXB0b3I9ZnVuY3Rpb24oZil7Zm9yKHZhciBwPTA7cDx0aGlzLmRlc2NzLmxlbmd0aDtwKyspaWYodGhpcy5kZXNjc1twXS50YWc9PWYpcmV0dXJuIHRoaXMuZGVzY3NbcF07cmV0dXJuIG51bGx9LGguRGVzY3JpcHRvci5wcm90b3R5cGUucGFyc2VSZW1haW5pbmdEZXNjcmlwdG9ycz1mdW5jdGlvbihmKXtmb3IodmFyIHA9Zi5wb3NpdGlvbjtmLnBvc2l0aW9uPHArdGhpcy5zaXplOyl7dmFyIGc9by5wYXJzZU9uZURlc2NyaXB0b3IoZik7dGhpcy5kZXNjcy5wdXNoKGcpfX0saC5FU19EZXNjcmlwdG9yPWZ1bmN0aW9uKGYpe2guRGVzY3JpcHRvci5jYWxsKHRoaXMsdCxmKX0saC5FU19EZXNjcmlwdG9yLnByb3RvdHlwZT1uZXcgaC5EZXNjcmlwdG9yLGguRVNfRGVzY3JpcHRvci5wcm90b3R5cGUucGFyc2U9ZnVuY3Rpb24oZil7aWYodGhpcy5FU19JRD1mLnJlYWRVaW50MTYoKSx0aGlzLmZsYWdzPWYucmVhZFVpbnQ4KCksdGhpcy5zaXplLT0zLHRoaXMuZmxhZ3MmMTI4Pyh0aGlzLmRlcGVuZHNPbl9FU19JRD1mLnJlYWRVaW50MTYoKSx0aGlzLnNpemUtPTIpOnRoaXMuZGVwZW5kc09uX0VTX0lEPTAsdGhpcy5mbGFncyY2NCl7dmFyIHA9Zi5yZWFkVWludDgoKTt0aGlzLlVSTD1mLnJlYWRTdHJpbmcocCksdGhpcy5zaXplLT1wKzF9ZWxzZSB0aGlzLlVSTD0iIjt0aGlzLmZsYWdzJjMyPyh0aGlzLk9DUl9FU19JRD1mLnJlYWRVaW50MTYoKSx0aGlzLnNpemUtPTIpOnRoaXMuT0NSX0VTX0lEPTAsdGhpcy5wYXJzZVJlbWFpbmluZ0Rlc2NyaXB0b3JzKGYpfSxoLkVTX0Rlc2NyaXB0b3IucHJvdG90eXBlLmdldE9UST1mdW5jdGlvbihmKXt2YXIgcD10aGlzLmZpbmREZXNjcmlwdG9yKGUpO3JldHVybiBwP3Aub3RpOjB9LGguRVNfRGVzY3JpcHRvci5wcm90b3R5cGUuZ2V0QXVkaW9Db25maWc9ZnVuY3Rpb24oZil7dmFyIHA9dGhpcy5maW5kRGVzY3JpcHRvcihlKTtpZighcClyZXR1cm4gbnVsbDt2YXIgZz1wLmZpbmREZXNjcmlwdG9yKHMpO2lmKGcmJmcuZGF0YSl7dmFyIG09KGcuZGF0YVswXSYyNDgpPj4zO3JldHVybiBtPT09MzEmJmcuZGF0YS5sZW5ndGg+PTImJihtPTMyKygoZy5kYXRhWzBdJjcpPDwzKSsoKGcuZGF0YVsxXSYyMjQpPj41KSksbX1lbHNlIHJldHVybiBudWxsfSxoLkRlY29kZXJDb25maWdEZXNjcmlwdG9yPWZ1bmN0aW9uKGYpe2guRGVzY3JpcHRvci5jYWxsKHRoaXMsZSxmKX0saC5EZWNvZGVyQ29uZmlnRGVzY3JpcHRvci5wcm90b3R5cGU9bmV3IGguRGVzY3JpcHRvcixoLkRlY29kZXJDb25maWdEZXNjcmlwdG9yLnByb3RvdHlwZS5wYXJzZT1mdW5jdGlvbihmKXt0aGlzLm90aT1mLnJlYWRVaW50OCgpLHRoaXMuc3RyZWFtVHlwZT1mLnJlYWRVaW50OCgpLHRoaXMuYnVmZmVyU2l6ZT1mLnJlYWRVaW50MjQoKSx0aGlzLm1heEJpdHJhdGU9Zi5yZWFkVWludDMyKCksdGhpcy5hdmdCaXRyYXRlPWYucmVhZFVpbnQzMigpLHRoaXMuc2l6ZS09MTMsdGhpcy5wYXJzZVJlbWFpbmluZ0Rlc2NyaXB0b3JzKGYpfSxoLkRlY29kZXJTcGVjaWZpY0luZm89ZnVuY3Rpb24oZil7aC5EZXNjcmlwdG9yLmNhbGwodGhpcyxzLGYpfSxoLkRlY29kZXJTcGVjaWZpY0luZm8ucHJvdG90eXBlPW5ldyBoLkRlc2NyaXB0b3IsaC5TTENvbmZpZ0Rlc2NyaXB0b3I9ZnVuY3Rpb24oZil7aC5EZXNjcmlwdG9yLmNhbGwodGhpcyxuLGYpfSxoLlNMQ29uZmlnRGVzY3JpcHRvci5wcm90b3R5cGU9bmV3IGguRGVzY3JpcHRvcix0aGlzfTtfLk1QRUc0RGVzY3JpcHRvclBhcnNlcj1BO3ZhciByPXtFUlJfSU5WQUxJRF9EQVRBOi0xLEVSUl9OT1RfRU5PVUdIX0RBVEE6MCxPSzoxLEJBU0lDX0JPWEVTOlsibWRhdCIsImlkYXQiLCJmcmVlIiwic2tpcCIsIm1lY28iLCJzdHJrIl0sRlVMTF9CT1hFUzpbImhtaGQiLCJubWhkIiwiaW9kcyIsInhtbCAiLCJieG1sIiwiaXBybyIsIm1lcmUiXSxDT05UQUlORVJfQk9YRVM6W1sibW9vdiIsWyJ0cmFrIiwicHNzaCJdXSxbInRyYWsiXSxbImVkdHMiXSxbIm1kaWEiXSxbIm1pbmYiXSxbImRpbmYiXSxbInN0YmwiLFsic2dwZCIsInNiZ3AiXV0sWyJtdmV4IixbInRyZXgiXV0sWyJtb29mIixbInRyYWYiXV0sWyJ0cmFmIixbInRydW4iLCJzZ3BkIiwic2JncCJdXSxbInZ0dGMiXSxbInRyZWYiXSxbImlyZWYiXSxbIm1mcmEiLFsidGZyYSJdXSxbIm1lY28iXSxbImhudGkiXSxbImhpbmYiXSxbInN0cmsiXSxbInN0cmQiXSxbInNpbmYiXSxbInJpbmYiXSxbInNjaGkiXSxbInRyZ3IiXSxbInVkdGEiLFsia2luZCJdXSxbImlwcnAiLFsiaXBtYSJdXSxbImlwY28iXSxbImdycGwiXSxbImoya0giXSxbImV0eXAiLFsidHljbyJdXV0sYm94Q29kZXM6W10sZnVsbEJveENvZGVzOltdLGNvbnRhaW5lckJveENvZGVzOltdLHNhbXBsZUVudHJ5Q29kZXM6e30sc2FtcGxlR3JvdXBFbnRyeUNvZGVzOltdLHRyYWNrR3JvdXBUeXBlczpbXSxVVUlEQm94ZXM6e30sVVVJRHM6W10saW5pdGlhbGl6ZTpmdW5jdGlvbigpe3IuRnVsbEJveC5wcm90b3R5cGU9bmV3IHIuQm94LHIuQ29udGFpbmVyQm94LnByb3RvdHlwZT1uZXcgci5Cb3gsci5TYW1wbGVFbnRyeS5wcm90b3R5cGU9bmV3IHIuQm94LHIuVHJhY2tHcm91cFR5cGVCb3gucHJvdG90eXBlPW5ldyByLkZ1bGxCb3gsci5CQVNJQ19CT1hFUy5mb3JFYWNoKGZ1bmN0aW9uKHQpe3IuY3JlYXRlQm94Q3Rvcih0KX0pLHIuRlVMTF9CT1hFUy5mb3JFYWNoKGZ1bmN0aW9uKHQpe3IuY3JlYXRlRnVsbEJveEN0b3IodCl9KSxyLkNPTlRBSU5FUl9CT1hFUy5mb3JFYWNoKGZ1bmN0aW9uKHQpe3IuY3JlYXRlQ29udGFpbmVyQm94Q3Rvcih0WzBdLG51bGwsdFsxXSl9KX0sQm94OmZ1bmN0aW9uKHQsZSxzKXt0aGlzLnR5cGU9dCx0aGlzLnNpemU9ZSx0aGlzLnV1aWQ9c30sRnVsbEJveDpmdW5jdGlvbih0LGUscyl7ci5Cb3guY2FsbCh0aGlzLHQsZSxzKSx0aGlzLmZsYWdzPTAsdGhpcy52ZXJzaW9uPTB9LENvbnRhaW5lckJveDpmdW5jdGlvbih0LGUscyl7ci5Cb3guY2FsbCh0aGlzLHQsZSxzKSx0aGlzLmJveGVzPVtdfSxTYW1wbGVFbnRyeTpmdW5jdGlvbih0LGUscyxuKXtyLkNvbnRhaW5lckJveC5jYWxsKHRoaXMsdCxlKSx0aGlzLmhkcl9zaXplPXMsdGhpcy5zdGFydD1ufSxTYW1wbGVHcm91cEVudHJ5OmZ1bmN0aW9uKHQpe3RoaXMuZ3JvdXBpbmdfdHlwZT10fSxUcmFja0dyb3VwVHlwZUJveDpmdW5jdGlvbih0LGUpe3IuRnVsbEJveC5jYWxsKHRoaXMsdCxlKX0sY3JlYXRlQm94Q3RvcjpmdW5jdGlvbih0LGUpe3IuYm94Q29kZXMucHVzaCh0KSxyW3QrIkJveCJdPWZ1bmN0aW9uKHMpe3IuQm94LmNhbGwodGhpcyx0LHMpfSxyW3QrIkJveCJdLnByb3RvdHlwZT1uZXcgci5Cb3gsZSYmKHJbdCsiQm94Il0ucHJvdG90eXBlLnBhcnNlPWUpfSxjcmVhdGVGdWxsQm94Q3RvcjpmdW5jdGlvbih0LGUpe3JbdCsiQm94Il09ZnVuY3Rpb24ocyl7ci5GdWxsQm94LmNhbGwodGhpcyx0LHMpfSxyW3QrIkJveCJdLnByb3RvdHlwZT1uZXcgci5GdWxsQm94LHJbdCsiQm94Il0ucHJvdG90eXBlLnBhcnNlPWZ1bmN0aW9uKHMpe3RoaXMucGFyc2VGdWxsSGVhZGVyKHMpLGUmJmUuY2FsbCh0aGlzLHMpfX0sYWRkU3ViQm94QXJyYXlzOmZ1bmN0aW9uKHQpe2lmKHQpe3RoaXMuc3ViQm94TmFtZXM9dDtmb3IodmFyIGU9dC5sZW5ndGgscz0wO3M8ZTtzKyspdGhpc1t0W3NdKyJzIl09W119fSxjcmVhdGVDb250YWluZXJCb3hDdG9yOmZ1bmN0aW9uKHQsZSxzKXtyW3QrIkJveCJdPWZ1bmN0aW9uKG4pe3IuQ29udGFpbmVyQm94LmNhbGwodGhpcyx0LG4pLHIuYWRkU3ViQm94QXJyYXlzLmNhbGwodGhpcyxzKX0sclt0KyJCb3giXS5wcm90b3R5cGU9bmV3IHIuQ29udGFpbmVyQm94LGUmJihyW3QrIkJveCJdLnByb3RvdHlwZS5wYXJzZT1lKX0sY3JlYXRlTWVkaWFTYW1wbGVFbnRyeUN0b3I6ZnVuY3Rpb24odCxlLHMpe3Iuc2FtcGxlRW50cnlDb2Rlc1t0XT1bXSxyW3QrIlNhbXBsZUVudHJ5Il09ZnVuY3Rpb24obixhKXtyLlNhbXBsZUVudHJ5LmNhbGwodGhpcyxuLGEpLHIuYWRkU3ViQm94QXJyYXlzLmNhbGwodGhpcyxzKX0sclt0KyJTYW1wbGVFbnRyeSJdLnByb3RvdHlwZT1uZXcgci5TYW1wbGVFbnRyeSxlJiYoclt0KyJTYW1wbGVFbnRyeSJdLnByb3RvdHlwZS5wYXJzZT1lKX0sY3JlYXRlU2FtcGxlRW50cnlDdG9yOmZ1bmN0aW9uKHQsZSxzLG4pe3Iuc2FtcGxlRW50cnlDb2Rlc1t0XS5wdXNoKGUpLHJbZSsiU2FtcGxlRW50cnkiXT1mdW5jdGlvbihhKXtyW3QrIlNhbXBsZUVudHJ5Il0uY2FsbCh0aGlzLGUsYSksci5hZGRTdWJCb3hBcnJheXMuY2FsbCh0aGlzLG4pfSxyW2UrIlNhbXBsZUVudHJ5Il0ucHJvdG90eXBlPW5ldyByW3QrIlNhbXBsZUVudHJ5Il0scyYmKHJbZSsiU2FtcGxlRW50cnkiXS5wcm90b3R5cGUucGFyc2U9cyl9LGNyZWF0ZUVuY3J5cHRlZFNhbXBsZUVudHJ5Q3RvcjpmdW5jdGlvbih0LGUscyl7ci5jcmVhdGVTYW1wbGVFbnRyeUN0b3IuY2FsbCh0aGlzLHQsZSxzLFsic2luZiJdKX0sY3JlYXRlU2FtcGxlR3JvdXBDdG9yOmZ1bmN0aW9uKHQsZSl7clt0KyJTYW1wbGVHcm91cEVudHJ5Il09ZnVuY3Rpb24ocyl7ci5TYW1wbGVHcm91cEVudHJ5LmNhbGwodGhpcyx0LHMpfSxyW3QrIlNhbXBsZUdyb3VwRW50cnkiXS5wcm90b3R5cGU9bmV3IHIuU2FtcGxlR3JvdXBFbnRyeSxlJiYoclt0KyJTYW1wbGVHcm91cEVudHJ5Il0ucHJvdG90eXBlLnBhcnNlPWUpfSxjcmVhdGVUcmFja0dyb3VwQ3RvcjpmdW5jdGlvbih0LGUpe3JbdCsiVHJhY2tHcm91cFR5cGVCb3giXT1mdW5jdGlvbihzKXtyLlRyYWNrR3JvdXBUeXBlQm94LmNhbGwodGhpcyx0LHMpfSxyW3QrIlRyYWNrR3JvdXBUeXBlQm94Il0ucHJvdG90eXBlPW5ldyByLlRyYWNrR3JvdXBUeXBlQm94LGUmJihyW3QrIlRyYWNrR3JvdXBUeXBlQm94Il0ucHJvdG90eXBlLnBhcnNlPWUpfSxjcmVhdGVVVUlEQm94OmZ1bmN0aW9uKHQsZSxzLG4pe3IuVVVJRHMucHVzaCh0KSxyLlVVSURCb3hlc1t0XT1mdW5jdGlvbihhKXtlP3IuRnVsbEJveC5jYWxsKHRoaXMsInV1aWQiLGEsdCk6cz9yLkNvbnRhaW5lckJveC5jYWxsKHRoaXMsInV1aWQiLGEsdCk6ci5Cb3guY2FsbCh0aGlzLCJ1dWlkIixhLHQpfSxyLlVVSURCb3hlc1t0XS5wcm90b3R5cGU9ZT9uZXcgci5GdWxsQm94OnM/bmV3IHIuQ29udGFpbmVyQm94Om5ldyByLkJveCxuJiYoZT9yLlVVSURCb3hlc1t0XS5wcm90b3R5cGUucGFyc2U9ZnVuY3Rpb24oYSl7dGhpcy5wYXJzZUZ1bGxIZWFkZXIoYSksbiYmbi5jYWxsKHRoaXMsYSl9OnIuVVVJREJveGVzW3RdLnByb3RvdHlwZS5wYXJzZT1uKX19O3IuaW5pdGlhbGl6ZSgpLHIuVEtIRF9GTEFHX0VOQUJMRUQ9MSxyLlRLSERfRkxBR19JTl9NT1ZJRT0yLHIuVEtIRF9GTEFHX0lOX1BSRVZJRVc9NCxyLlRGSERfRkxBR19CQVNFX0RBVEFfT0ZGU0VUPTEsci5URkhEX0ZMQUdfU0FNUExFX0RFU0M9MixyLlRGSERfRkxBR19TQU1QTEVfRFVSPTgsci5URkhEX0ZMQUdfU0FNUExFX1NJWkU9MTYsci5URkhEX0ZMQUdfU0FNUExFX0ZMQUdTPTMyLHIuVEZIRF9GTEFHX0RVUl9FTVBUWT02NTUzNixyLlRGSERfRkxBR19ERUZBVUxUX0JBU0VfSVNfTU9PRj0xMzEwNzIsci5UUlVOX0ZMQUdTX0RBVEFfT0ZGU0VUPTEsci5UUlVOX0ZMQUdTX0ZJUlNUX0ZMQUc9NCxyLlRSVU5fRkxBR1NfRFVSQVRJT049MjU2LHIuVFJVTl9GTEFHU19TSVpFPTUxMixyLlRSVU5fRkxBR1NfRkxBR1M9MTAyNCxyLlRSVU5fRkxBR1NfQ1RTX09GRlNFVD0yMDQ4LHIuQm94LnByb3RvdHlwZS5hZGQ9ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXMuYWRkQm94KG5ldyByW3QrIkJveCJdKX0sci5Cb3gucHJvdG90eXBlLmFkZEJveD1mdW5jdGlvbih0KXtyZXR1cm4gdGhpcy5ib3hlcy5wdXNoKHQpLHRoaXNbdC50eXBlKyJzIl0/dGhpc1t0LnR5cGUrInMiXS5wdXNoKHQpOnRoaXNbdC50eXBlXT10LHR9LHIuQm94LnByb3RvdHlwZS5zZXQ9ZnVuY3Rpb24odCxlKXtyZXR1cm4gdGhpc1t0XT1lLHRoaXN9LHIuQm94LnByb3RvdHlwZS5hZGRFbnRyeT1mdW5jdGlvbih0LGUpe3ZhciBzPWV8fCJlbnRyaWVzIjtyZXR1cm4gdGhpc1tzXXx8KHRoaXNbc109W10pLHRoaXNbc10ucHVzaCh0KSx0aGlzfSxfLkJveFBhcnNlcj1yLHIucGFyc2VVVUlEPWZ1bmN0aW9uKHQpe3JldHVybiByLnBhcnNlSGV4MTYodCl9LHIucGFyc2VIZXgxNj1mdW5jdGlvbih0KXtmb3IodmFyIGU9IiIscz0wO3M8MTY7cysrKXt2YXIgbj10LnJlYWRVaW50OCgpLnRvU3RyaW5nKDE2KTtlKz1uLmxlbmd0aD09PTE/IjAiK246bn1yZXR1cm4gZX0sci5wYXJzZU9uZUJveD1mdW5jdGlvbih0LGUscyl7dmFyIG4sYT10LmdldFBvc2l0aW9uKCksbz0wLGgsZjtpZih0LmdldEVuZFBvc2l0aW9uKCktYTw4KXJldHVybiBkLmRlYnVnKCJCb3hQYXJzZXIiLCJOb3QgZW5vdWdoIGRhdGEgaW4gc3RyZWFtIHRvIHBhcnNlIHRoZSB0eXBlIGFuZCBzaXplIG9mIHRoZSBib3giKSx7Y29kZTpyLkVSUl9OT1RfRU5PVUdIX0RBVEF9O2lmKHMmJnM8OClyZXR1cm4gZC5kZWJ1ZygiQm94UGFyc2VyIiwiTm90IGVub3VnaCBieXRlcyBsZWZ0IGluIHRoZSBwYXJlbnQgYm94IHRvIHBhcnNlIGEgbmV3IGJveCIpLHtjb2RlOnIuRVJSX05PVF9FTk9VR0hfREFUQX07dmFyIHA9dC5yZWFkVWludDMyKCksZz10LnJlYWRTdHJpbmcoNCksbT1nO2lmKGQuZGVidWcoIkJveFBhcnNlciIsIkZvdW5kIGJveCBvZiB0eXBlICciK2crIicgYW5kIHNpemUgIitwKyIgYXQgcG9zaXRpb24gIithKSxvPTgsZz09InV1aWQiKXtpZih0LmdldEVuZFBvc2l0aW9uKCktdC5nZXRQb3NpdGlvbigpPDE2fHxzLW88MTYpcmV0dXJuIHQuc2VlayhhKSxkLmRlYnVnKCJCb3hQYXJzZXIiLCJOb3QgZW5vdWdoIGJ5dGVzIGxlZnQgaW4gdGhlIHBhcmVudCBib3ggdG8gcGFyc2UgYSBVVUlEIGJveCIpLHtjb2RlOnIuRVJSX05PVF9FTk9VR0hfREFUQX07Zj1yLnBhcnNlVVVJRCh0KSxvKz0xNixtPWZ9aWYocD09MSl7aWYodC5nZXRFbmRQb3NpdGlvbigpLXQuZ2V0UG9zaXRpb24oKTw4fHxzJiZzLW88OClyZXR1cm4gdC5zZWVrKGEpLGQud2FybigiQm94UGFyc2VyIiwnTm90IGVub3VnaCBkYXRhIGluIHN0cmVhbSB0byBwYXJzZSB0aGUgZXh0ZW5kZWQgc2l6ZSBvZiB0aGUgIicrZysnIiBib3gnKSx7Y29kZTpyLkVSUl9OT1RfRU5PVUdIX0RBVEF9O3A9dC5yZWFkVWludDY0KCksbys9OH1lbHNlIGlmKHA9PT0wKXtpZihzKXA9cztlbHNlIGlmKGchPT0ibWRhdCIpcmV0dXJuIGQuZXJyb3IoIkJveFBhcnNlciIsIlVubGltaXRlZCBib3ggc2l6ZSBub3Qgc3VwcG9ydGVkIGZvciB0eXBlOiAnIitnKyInIiksbj1uZXcgci5Cb3goZyxwKSx7Y29kZTpyLk9LLGJveDpuLHNpemU6bi5zaXplfX1yZXR1cm4gcCE9PTAmJnA8bz8oZC5lcnJvcigiQm94UGFyc2VyIiwiQm94IG9mIHR5cGUgIitnKyIgaGFzIGFuIGludmFsaWQgc2l6ZSAiK3ArIiAodG9vIHNtYWxsIHRvIGJlIGEgYm94KSIpLHtjb2RlOnIuRVJSX05PVF9FTk9VR0hfREFUQSx0eXBlOmcsc2l6ZTpwLGhkcl9zaXplOm8sc3RhcnQ6YX0pOnAhPT0wJiZzJiZwPnM/KGQuZXJyb3IoIkJveFBhcnNlciIsIkJveCBvZiB0eXBlICciK2crIicgaGFzIGEgc2l6ZSAiK3ArIiBncmVhdGVyIHRoYW4gaXRzIGNvbnRhaW5lciBzaXplICIrcykse2NvZGU6ci5FUlJfTk9UX0VOT1VHSF9EQVRBLHR5cGU6ZyxzaXplOnAsaGRyX3NpemU6byxzdGFydDphfSk6cCE9PTAmJmErcD50LmdldEVuZFBvc2l0aW9uKCk/KHQuc2VlayhhKSxkLmluZm8oIkJveFBhcnNlciIsIk5vdCBlbm91Z2ggZGF0YSBpbiBzdHJlYW0gdG8gcGFyc2UgdGhlIGVudGlyZSAnIitnKyInIGJveCIpLHtjb2RlOnIuRVJSX05PVF9FTk9VR0hfREFUQSx0eXBlOmcsc2l6ZTpwLGhkcl9zaXplOm8sc3RhcnQ6YX0pOmU/e2NvZGU6ci5PSyx0eXBlOmcsc2l6ZTpwLGhkcl9zaXplOm8sc3RhcnQ6YX06KHJbZysiQm94Il0/bj1uZXcgcltnKyJCb3giXShwKTpnIT09InV1aWQiPyhkLndhcm4oIkJveFBhcnNlciIsIlVua25vd24gYm94IHR5cGU6ICciK2crIiciKSxuPW5ldyByLkJveChnLHApLG4uaGFzX3VucGFyc2VkX2RhdGE9ITApOnIuVVVJREJveGVzW2ZdP249bmV3IHIuVVVJREJveGVzW2ZdKHApOihkLndhcm4oIkJveFBhcnNlciIsIlVua25vd24gdXVpZCB0eXBlOiAnIitmKyInIiksbj1uZXcgci5Cb3goZyxwKSxuLnV1aWQ9ZixuLmhhc191bnBhcnNlZF9kYXRhPSEwKSxuLmhkcl9zaXplPW8sbi5zdGFydD1hLG4ud3JpdGU9PT1yLkJveC5wcm90b3R5cGUud3JpdGUmJm4udHlwZSE9PSJtZGF0IiYmKGQuaW5mbygiQm94UGFyc2VyIiwiJyIrbSsiJyBib3ggd3JpdGluZyBub3QgeWV0IGltcGxlbWVudGVkLCBrZWVwaW5nIHVucGFyc2VkIGRhdGEgaW4gbWVtb3J5IGZvciBsYXRlciB3cml0ZSIpLG4ucGFyc2VEYXRhQW5kUmV3aW5kKHQpKSxuLnBhcnNlKHQpLGg9dC5nZXRQb3NpdGlvbigpLShuLnN0YXJ0K24uc2l6ZSksaDwwPyhkLndhcm4oIkJveFBhcnNlciIsIlBhcnNpbmcgb2YgYm94ICciK20rIicgZGlkIG5vdCByZWFkIHRoZSBlbnRpcmUgaW5kaWNhdGVkIGJveCBkYXRhIHNpemUgKG1pc3NpbmcgIistaCsiIGJ5dGVzKSwgc2Vla2luZyBmb3J3YXJkIiksdC5zZWVrKG4uc3RhcnQrbi5zaXplKSk6aD4wJiYoZC5lcnJvcigiQm94UGFyc2VyIiwiUGFyc2luZyBvZiBib3ggJyIrbSsiJyByZWFkICIraCsiIG1vcmUgYnl0ZXMgdGhhbiB0aGUgaW5kaWNhdGVkIGJveCBkYXRhIHNpemUsIHNlZWtpbmcgYmFja3dhcmRzIiksbi5zaXplIT09MCYmdC5zZWVrKG4uc3RhcnQrbi5zaXplKSkse2NvZGU6ci5PSyxib3g6bixzaXplOm4uc2l6ZX0pfSxyLkJveC5wcm90b3R5cGUucGFyc2U9ZnVuY3Rpb24odCl7dGhpcy50eXBlIT0ibWRhdCI/dGhpcy5kYXRhPXQucmVhZFVpbnQ4QXJyYXkodGhpcy5zaXplLXRoaXMuaGRyX3NpemUpOnRoaXMuc2l6ZT09PTA/dC5zZWVrKHQuZ2V0RW5kUG9zaXRpb24oKSk6dC5zZWVrKHRoaXMuc3RhcnQrdGhpcy5zaXplKX0sci5Cb3gucHJvdG90eXBlLnBhcnNlRGF0YUFuZFJld2luZD1mdW5jdGlvbih0KXt0aGlzLmRhdGE9dC5yZWFkVWludDhBcnJheSh0aGlzLnNpemUtdGhpcy5oZHJfc2l6ZSksdC5wb3NpdGlvbi09dGhpcy5zaXplLXRoaXMuaGRyX3NpemV9LHIuRnVsbEJveC5wcm90b3R5cGUucGFyc2VEYXRhQW5kUmV3aW5kPWZ1bmN0aW9uKHQpe3RoaXMucGFyc2VGdWxsSGVhZGVyKHQpLHRoaXMuZGF0YT10LnJlYWRVaW50OEFycmF5KHRoaXMuc2l6ZS10aGlzLmhkcl9zaXplKSx0aGlzLmhkcl9zaXplLT00LHQucG9zaXRpb24tPXRoaXMuc2l6ZS10aGlzLmhkcl9zaXplfSxyLkZ1bGxCb3gucHJvdG90eXBlLnBhcnNlRnVsbEhlYWRlcj1mdW5jdGlvbih0KXt0aGlzLnZlcnNpb249dC5yZWFkVWludDgoKSx0aGlzLmZsYWdzPXQucmVhZFVpbnQyNCgpLHRoaXMuaGRyX3NpemUrPTR9LHIuRnVsbEJveC5wcm90b3R5cGUucGFyc2U9ZnVuY3Rpb24odCl7dGhpcy5wYXJzZUZ1bGxIZWFkZXIodCksdGhpcy5kYXRhPXQucmVhZFVpbnQ4QXJyYXkodGhpcy5zaXplLXRoaXMuaGRyX3NpemUpfSxyLkNvbnRhaW5lckJveC5wcm90b3R5cGUucGFyc2U9ZnVuY3Rpb24odCl7Zm9yKHZhciBlLHM7dC5nZXRQb3NpdGlvbigpPHRoaXMuc3RhcnQrdGhpcy5zaXplOylpZihlPXIucGFyc2VPbmVCb3godCwhMSx0aGlzLnNpemUtKHQuZ2V0UG9zaXRpb24oKS10aGlzLnN0YXJ0KSksZS5jb2RlPT09ci5PSylpZihzPWUuYm94LHRoaXMuYm94ZXMucHVzaChzKSx0aGlzLnN1YkJveE5hbWVzJiZ0aGlzLnN1YkJveE5hbWVzLmluZGV4T2Yocy50eXBlKSE9LTEpdGhpc1t0aGlzLnN1YkJveE5hbWVzW3RoaXMuc3ViQm94TmFtZXMuaW5kZXhPZihzLnR5cGUpXSsicyJdLnB1c2gocyk7ZWxzZXt2YXIgbj1zLnR5cGUhPT0idXVpZCI/cy50eXBlOnMudXVpZDt0aGlzW25dP2Qud2FybigiQm94IG9mIHR5cGUgIituKyIgYWxyZWFkeSBzdG9yZWQgaW4gZmllbGQgb2YgdGhpcyB0eXBlIik6dGhpc1tuXT1zfWVsc2UgcmV0dXJufSxyLkJveC5wcm90b3R5cGUucGFyc2VMYW5ndWFnZT1mdW5jdGlvbih0KXt0aGlzLmxhbmd1YWdlPXQucmVhZFVpbnQxNigpO3ZhciBlPVtdO2VbMF09dGhpcy5sYW5ndWFnZT4+MTAmMzEsZVsxXT10aGlzLmxhbmd1YWdlPj41JjMxLGVbMl09dGhpcy5sYW5ndWFnZSYzMSx0aGlzLmxhbmd1YWdlU3RyaW5nPVN0cmluZy5mcm9tQ2hhckNvZGUoZVswXSs5NixlWzFdKzk2LGVbMl0rOTYpfSxyLlNBTVBMRV9FTlRSWV9UWVBFX1ZJU1VBTD0iVmlzdWFsIixyLlNBTVBMRV9FTlRSWV9UWVBFX0FVRElPPSJBdWRpbyIsci5TQU1QTEVfRU5UUllfVFlQRV9ISU5UPSJIaW50IixyLlNBTVBMRV9FTlRSWV9UWVBFX01FVEFEQVRBPSJNZXRhZGF0YSIsci5TQU1QTEVfRU5UUllfVFlQRV9TVUJUSVRMRT0iU3VidGl0bGUiLHIuU0FNUExFX0VOVFJZX1RZUEVfU1lTVEVNPSJTeXN0ZW0iLHIuU0FNUExFX0VOVFJZX1RZUEVfVEVYVD0iVGV4dCIsci5TYW1wbGVFbnRyeS5wcm90b3R5cGUucGFyc2VIZWFkZXI9ZnVuY3Rpb24odCl7dC5yZWFkVWludDhBcnJheSg2KSx0aGlzLmRhdGFfcmVmZXJlbmNlX2luZGV4PXQucmVhZFVpbnQxNigpLHRoaXMuaGRyX3NpemUrPTh9LHIuU2FtcGxlRW50cnkucHJvdG90eXBlLnBhcnNlPWZ1bmN0aW9uKHQpe3RoaXMucGFyc2VIZWFkZXIodCksdGhpcy5kYXRhPXQucmVhZFVpbnQ4QXJyYXkodGhpcy5zaXplLXRoaXMuaGRyX3NpemUpfSxyLlNhbXBsZUVudHJ5LnByb3RvdHlwZS5wYXJzZURhdGFBbmRSZXdpbmQ9ZnVuY3Rpb24odCl7dGhpcy5wYXJzZUhlYWRlcih0KSx0aGlzLmRhdGE9dC5yZWFkVWludDhBcnJheSh0aGlzLnNpemUtdGhpcy5oZHJfc2l6ZSksdGhpcy5oZHJfc2l6ZS09OCx0LnBvc2l0aW9uLT10aGlzLnNpemUtdGhpcy5oZHJfc2l6ZX0sci5TYW1wbGVFbnRyeS5wcm90b3R5cGUucGFyc2VGb290ZXI9ZnVuY3Rpb24odCl7ci5Db250YWluZXJCb3gucHJvdG90eXBlLnBhcnNlLmNhbGwodGhpcyx0KX0sci5jcmVhdGVNZWRpYVNhbXBsZUVudHJ5Q3RvcihyLlNBTVBMRV9FTlRSWV9UWVBFX0hJTlQpLHIuY3JlYXRlTWVkaWFTYW1wbGVFbnRyeUN0b3Ioci5TQU1QTEVfRU5UUllfVFlQRV9NRVRBREFUQSksci5jcmVhdGVNZWRpYVNhbXBsZUVudHJ5Q3RvcihyLlNBTVBMRV9FTlRSWV9UWVBFX1NVQlRJVExFKSxyLmNyZWF0ZU1lZGlhU2FtcGxlRW50cnlDdG9yKHIuU0FNUExFX0VOVFJZX1RZUEVfU1lTVEVNKSxyLmNyZWF0ZU1lZGlhU2FtcGxlRW50cnlDdG9yKHIuU0FNUExFX0VOVFJZX1RZUEVfVEVYVCksci5jcmVhdGVNZWRpYVNhbXBsZUVudHJ5Q3RvcihyLlNBTVBMRV9FTlRSWV9UWVBFX1ZJU1VBTCxmdW5jdGlvbih0KXt2YXIgZTt0aGlzLnBhcnNlSGVhZGVyKHQpLHQucmVhZFVpbnQxNigpLHQucmVhZFVpbnQxNigpLHQucmVhZFVpbnQzMkFycmF5KDMpLHRoaXMud2lkdGg9dC5yZWFkVWludDE2KCksdGhpcy5oZWlnaHQ9dC5yZWFkVWludDE2KCksdGhpcy5ob3JpenJlc29sdXRpb249dC5yZWFkVWludDMyKCksdGhpcy52ZXJ0cmVzb2x1dGlvbj10LnJlYWRVaW50MzIoKSx0LnJlYWRVaW50MzIoKSx0aGlzLmZyYW1lX2NvdW50PXQucmVhZFVpbnQxNigpLGU9TWF0aC5taW4oMzEsdC5yZWFkVWludDgoKSksdGhpcy5jb21wcmVzc29ybmFtZT10LnJlYWRTdHJpbmcoZSksZTwzMSYmdC5yZWFkU3RyaW5nKDMxLWUpLHRoaXMuZGVwdGg9dC5yZWFkVWludDE2KCksdC5yZWFkVWludDE2KCksdGhpcy5wYXJzZUZvb3Rlcih0KX0pLHIuY3JlYXRlTWVkaWFTYW1wbGVFbnRyeUN0b3Ioci5TQU1QTEVfRU5UUllfVFlQRV9BVURJTyxmdW5jdGlvbih0KXt0aGlzLnBhcnNlSGVhZGVyKHQpLHQucmVhZFVpbnQzMkFycmF5KDIpLHRoaXMuY2hhbm5lbF9jb3VudD10LnJlYWRVaW50MTYoKSx0aGlzLnNhbXBsZXNpemU9dC5yZWFkVWludDE2KCksdC5yZWFkVWludDE2KCksdC5yZWFkVWludDE2KCksdGhpcy5zYW1wbGVyYXRlPXQucmVhZFVpbnQzMigpLygxPDwxNiksdGhpcy5wYXJzZUZvb3Rlcih0KX0pLHIuY3JlYXRlU2FtcGxlRW50cnlDdG9yKHIuU0FNUExFX0VOVFJZX1RZUEVfVklTVUFMLCJhdmMxIiksci5jcmVhdGVTYW1wbGVFbnRyeUN0b3Ioci5TQU1QTEVfRU5UUllfVFlQRV9WSVNVQUwsImF2YzIiKSxyLmNyZWF0ZVNhbXBsZUVudHJ5Q3RvcihyLlNBTVBMRV9FTlRSWV9UWVBFX1ZJU1VBTCwiYXZjMyIpLHIuY3JlYXRlU2FtcGxlRW50cnlDdG9yKHIuU0FNUExFX0VOVFJZX1RZUEVfVklTVUFMLCJhdmM0Iiksci5jcmVhdGVTYW1wbGVFbnRyeUN0b3Ioci5TQU1QTEVfRU5UUllfVFlQRV9WSVNVQUwsImF2MDEiKSxyLmNyZWF0ZVNhbXBsZUVudHJ5Q3RvcihyLlNBTVBMRV9FTlRSWV9UWVBFX1ZJU1VBTCwiZGF2MSIpLHIuY3JlYXRlU2FtcGxlRW50cnlDdG9yKHIuU0FNUExFX0VOVFJZX1RZUEVfVklTVUFMLCJodmMxIiksci5jcmVhdGVTYW1wbGVFbnRyeUN0b3Ioci5TQU1QTEVfRU5UUllfVFlQRV9WSVNVQUwsImhldjEiKSxyLmNyZWF0ZVNhbXBsZUVudHJ5Q3RvcihyLlNBTVBMRV9FTlRSWV9UWVBFX1ZJU1VBTCwiaHZ0MSIpLHIuY3JlYXRlU2FtcGxlRW50cnlDdG9yKHIuU0FNUExFX0VOVFJZX1RZUEVfVklTVUFMLCJsaGUxIiksci5jcmVhdGVTYW1wbGVFbnRyeUN0b3Ioci5TQU1QTEVfRU5UUllfVFlQRV9WSVNVQUwsImR2aDEiKSxyLmNyZWF0ZVNhbXBsZUVudHJ5Q3RvcihyLlNBTVBMRV9FTlRSWV9UWVBFX1ZJU1VBTCwiZHZoZSIpLHIuY3JlYXRlU2FtcGxlRW50cnlDdG9yKHIuU0FNUExFX0VOVFJZX1RZUEVfVklTVUFMLCJ2dmMxIiksci5jcmVhdGVTYW1wbGVFbnRyeUN0b3Ioci5TQU1QTEVfRU5UUllfVFlQRV9WSVNVQUwsInZ2aTEiKSxyLmNyZWF0ZVNhbXBsZUVudHJ5Q3RvcihyLlNBTVBMRV9FTlRSWV9UWVBFX1ZJU1VBTCwidnZzMSIpLHIuY3JlYXRlU2FtcGxlRW50cnlDdG9yKHIuU0FNUExFX0VOVFJZX1RZUEVfVklTVUFMLCJ2dmNOIiksci5jcmVhdGVTYW1wbGVFbnRyeUN0b3Ioci5TQU1QTEVfRU5UUllfVFlQRV9WSVNVQUwsInZwMDgiKSxyLmNyZWF0ZVNhbXBsZUVudHJ5Q3RvcihyLlNBTVBMRV9FTlRSWV9UWVBFX1ZJU1VBTCwidnAwOSIpLHIuY3JlYXRlU2FtcGxlRW50cnlDdG9yKHIuU0FNUExFX0VOVFJZX1RZUEVfVklTVUFMLCJhdnMzIiksci5jcmVhdGVTYW1wbGVFbnRyeUN0b3Ioci5TQU1QTEVfRU5UUllfVFlQRV9WSVNVQUwsImoya2kiKSxyLmNyZWF0ZVNhbXBsZUVudHJ5Q3RvcihyLlNBTVBMRV9FTlRSWV9UWVBFX1ZJU1VBTCwibWpwMiIpLHIuY3JlYXRlU2FtcGxlRW50cnlDdG9yKHIuU0FNUExFX0VOVFJZX1RZUEVfVklTVUFMLCJtanBnIiksci5jcmVhdGVTYW1wbGVFbnRyeUN0b3Ioci5TQU1QTEVfRU5UUllfVFlQRV9WSVNVQUwsInVuY3YiKSxyLmNyZWF0ZVNhbXBsZUVudHJ5Q3RvcihyLlNBTVBMRV9FTlRSWV9UWVBFX0FVRElPLCJtcDRhIiksci5jcmVhdGVTYW1wbGVFbnRyeUN0b3Ioci5TQU1QTEVfRU5UUllfVFlQRV9BVURJTywiYWMtMyIpLHIuY3JlYXRlU2FtcGxlRW50cnlDdG9yKHIuU0FNUExFX0VOVFJZX1RZUEVfQVVESU8sImFjLTQiKSxyLmNyZWF0ZVNhbXBsZUVudHJ5Q3RvcihyLlNBTVBMRV9FTlRSWV9UWVBFX0FVRElPLCJlYy0zIiksci5jcmVhdGVTYW1wbGVFbnRyeUN0b3Ioci5TQU1QTEVfRU5UUllfVFlQRV9BVURJTywiT3B1cyIpLHIuY3JlYXRlU2FtcGxlRW50cnlDdG9yKHIuU0FNUExFX0VOVFJZX1RZUEVfQVVESU8sIm1oYTEiKSxyLmNyZWF0ZVNhbXBsZUVudHJ5Q3RvcihyLlNBTVBMRV9FTlRSWV9UWVBFX0FVRElPLCJtaGEyIiksci5jcmVhdGVTYW1wbGVFbnRyeUN0b3Ioci5TQU1QTEVfRU5UUllfVFlQRV9BVURJTywibWhtMSIpLHIuY3JlYXRlU2FtcGxlRW50cnlDdG9yKHIuU0FNUExFX0VOVFJZX1RZUEVfQVVESU8sIm1obTIiKSxyLmNyZWF0ZUVuY3J5cHRlZFNhbXBsZUVudHJ5Q3RvcihyLlNBTVBMRV9FTlRSWV9UWVBFX1ZJU1VBTCwiZW5jdiIpLHIuY3JlYXRlRW5jcnlwdGVkU2FtcGxlRW50cnlDdG9yKHIuU0FNUExFX0VOVFJZX1RZUEVfQVVESU8sImVuY2EiKSxyLmNyZWF0ZUVuY3J5cHRlZFNhbXBsZUVudHJ5Q3RvcihyLlNBTVBMRV9FTlRSWV9UWVBFX1NVQlRJVExFLCJlbmN1Iiksci5jcmVhdGVFbmNyeXB0ZWRTYW1wbGVFbnRyeUN0b3Ioci5TQU1QTEVfRU5UUllfVFlQRV9TWVNURU0sImVuY3MiKSxyLmNyZWF0ZUVuY3J5cHRlZFNhbXBsZUVudHJ5Q3RvcihyLlNBTVBMRV9FTlRSWV9UWVBFX1RFWFQsImVuY3QiKSxyLmNyZWF0ZUVuY3J5cHRlZFNhbXBsZUVudHJ5Q3RvcihyLlNBTVBMRV9FTlRSWV9UWVBFX01FVEFEQVRBLCJlbmNtIiksci5jcmVhdGVCb3hDdG9yKCJhMWx4IixmdW5jdGlvbih0KXt2YXIgZT10LnJlYWRVaW50OCgpJjEscz0oKGUmMSkrMSkqMTY7dGhpcy5sYXllcl9zaXplPVtdO2Zvcih2YXIgbj0wO248MztuKyspcz09MTY/dGhpcy5sYXllcl9zaXplW25dPXQucmVhZFVpbnQxNigpOnRoaXMubGF5ZXJfc2l6ZVtuXT10LnJlYWRVaW50MzIoKX0pLHIuY3JlYXRlQm94Q3RvcigiYTFvcCIsZnVuY3Rpb24odCl7dGhpcy5vcF9pbmRleD10LnJlYWRVaW50OCgpfSksci5jcmVhdGVGdWxsQm94Q3RvcigiYXV4QyIsZnVuY3Rpb24odCl7dGhpcy5hdXhfdHlwZT10LnJlYWRDU3RyaW5nKCk7dmFyIGU9dGhpcy5zaXplLXRoaXMuaGRyX3NpemUtKHRoaXMuYXV4X3R5cGUubGVuZ3RoKzEpO3RoaXMuYXV4X3N1YnR5cGU9dC5yZWFkVWludDhBcnJheShlKX0pLHIuY3JlYXRlQm94Q3RvcigiYXYxQyIsZnVuY3Rpb24odCl7dmFyIGU9dC5yZWFkVWludDgoKTtpZihlPj43JiExKXtkLmVycm9yKCJhdjFDIG1hcmtlciBwcm9ibGVtIik7cmV0dXJufWlmKHRoaXMudmVyc2lvbj1lJjEyNyx0aGlzLnZlcnNpb24hPT0xKXtkLmVycm9yKCJhdjFDIHZlcnNpb24gIit0aGlzLnZlcnNpb24rIiBub3Qgc3VwcG9ydGVkIik7cmV0dXJufWlmKGU9dC5yZWFkVWludDgoKSx0aGlzLnNlcV9wcm9maWxlPWU+PjUmNyx0aGlzLnNlcV9sZXZlbF9pZHhfMD1lJjMxLGU9dC5yZWFkVWludDgoKSx0aGlzLnNlcV90aWVyXzA9ZT4+NyYxLHRoaXMuaGlnaF9iaXRkZXB0aD1lPj42JjEsdGhpcy50d2VsdmVfYml0PWU+PjUmMSx0aGlzLm1vbm9jaHJvbWU9ZT4+NCYxLHRoaXMuY2hyb21hX3N1YnNhbXBsaW5nX3g9ZT4+MyYxLHRoaXMuY2hyb21hX3N1YnNhbXBsaW5nX3k9ZT4+MiYxLHRoaXMuY2hyb21hX3NhbXBsZV9wb3NpdGlvbj1lJjMsZT10LnJlYWRVaW50OCgpLHRoaXMucmVzZXJ2ZWRfMT1lPj41JjcsdGhpcy5yZXNlcnZlZF8xIT09MCl7ZC5lcnJvcigiYXYxQyByZXNlcnZlZF8xIHBhcnNpbmcgcHJvYmxlbSIpO3JldHVybn1pZih0aGlzLmluaXRpYWxfcHJlc2VudGF0aW9uX2RlbGF5X3ByZXNlbnQ9ZT4+NCYxLHRoaXMuaW5pdGlhbF9wcmVzZW50YXRpb25fZGVsYXlfcHJlc2VudD09PTEpdGhpcy5pbml0aWFsX3ByZXNlbnRhdGlvbl9kZWxheV9taW51c19vbmU9ZSYxNTtlbHNlIGlmKHRoaXMucmVzZXJ2ZWRfMj1lJjE1LHRoaXMucmVzZXJ2ZWRfMiE9PTApe2QuZXJyb3IoImF2MUMgcmVzZXJ2ZWRfMiBwYXJzaW5nIHByb2JsZW0iKTtyZXR1cm59dmFyIHM9dGhpcy5zaXplLXRoaXMuaGRyX3NpemUtNDt0aGlzLmNvbmZpZ09CVXM9dC5yZWFkVWludDhBcnJheShzKX0pLHIuY3JlYXRlQm94Q3RvcigiYXZjQyIsZnVuY3Rpb24odCl7dmFyIGUscztmb3IodGhpcy5jb25maWd1cmF0aW9uVmVyc2lvbj10LnJlYWRVaW50OCgpLHRoaXMuQVZDUHJvZmlsZUluZGljYXRpb249dC5yZWFkVWludDgoKSx0aGlzLnByb2ZpbGVfY29tcGF0aWJpbGl0eT10LnJlYWRVaW50OCgpLHRoaXMuQVZDTGV2ZWxJbmRpY2F0aW9uPXQucmVhZFVpbnQ4KCksdGhpcy5sZW5ndGhTaXplTWludXNPbmU9dC5yZWFkVWludDgoKSYzLHRoaXMubmJfU1BTX25hbHVzPXQucmVhZFVpbnQ4KCkmMzEscz10aGlzLnNpemUtdGhpcy5oZHJfc2l6ZS02LHRoaXMuU1BTPVtdLGU9MDtlPHRoaXMubmJfU1BTX25hbHVzO2UrKyl0aGlzLlNQU1tlXT17fSx0aGlzLlNQU1tlXS5sZW5ndGg9dC5yZWFkVWludDE2KCksdGhpcy5TUFNbZV0ubmFsdT10LnJlYWRVaW50OEFycmF5KHRoaXMuU1BTW2VdLmxlbmd0aCkscy09Mit0aGlzLlNQU1tlXS5sZW5ndGg7Zm9yKHRoaXMubmJfUFBTX25hbHVzPXQucmVhZFVpbnQ4KCkscy0tLHRoaXMuUFBTPVtdLGU9MDtlPHRoaXMubmJfUFBTX25hbHVzO2UrKyl0aGlzLlBQU1tlXT17fSx0aGlzLlBQU1tlXS5sZW5ndGg9dC5yZWFkVWludDE2KCksdGhpcy5QUFNbZV0ubmFsdT10LnJlYWRVaW50OEFycmF5KHRoaXMuUFBTW2VdLmxlbmd0aCkscy09Mit0aGlzLlBQU1tlXS5sZW5ndGg7cz4wJiYodGhpcy5leHQ9dC5yZWFkVWludDhBcnJheShzKSl9KSxyLmNyZWF0ZUJveEN0b3IoImJ0cnQiLGZ1bmN0aW9uKHQpe3RoaXMuYnVmZmVyU2l6ZURCPXQucmVhZFVpbnQzMigpLHRoaXMubWF4Qml0cmF0ZT10LnJlYWRVaW50MzIoKSx0aGlzLmF2Z0JpdHJhdGU9dC5yZWFkVWludDMyKCl9KSxyLmNyZWF0ZUZ1bGxCb3hDdG9yKCJjY3N0IixmdW5jdGlvbih0KXt2YXIgZT10LnJlYWRVaW50OCgpO3RoaXMuYWxsX3JlZl9waWNzX2ludHJhPShlJjEyOCk9PTEyOCx0aGlzLmludHJhX3ByZWRfdXNlZD0oZSY2NCk9PTY0LHRoaXMubWF4X3JlZl9wZXJfcGljPShlJjYzKT4+Mix0LnJlYWRVaW50MjQoKX0pLHIuY3JlYXRlQm94Q3RvcigiY2RlZiIsZnVuY3Rpb24odCl7dmFyIGU7Zm9yKHRoaXMuY2hhbm5lbF9jb3VudD10LnJlYWRVaW50MTYoKSx0aGlzLmNoYW5uZWxfaW5kZXhlcz1bXSx0aGlzLmNoYW5uZWxfdHlwZXM9W10sdGhpcy5jaGFubmVsX2Fzc29jaWF0aW9ucz1bXSxlPTA7ZTx0aGlzLmNoYW5uZWxfY291bnQ7ZSsrKXRoaXMuY2hhbm5lbF9pbmRleGVzLnB1c2godC5yZWFkVWludDE2KCkpLHRoaXMuY2hhbm5lbF90eXBlcy5wdXNoKHQucmVhZFVpbnQxNigpKSx0aGlzLmNoYW5uZWxfYXNzb2NpYXRpb25zLnB1c2godC5yZWFkVWludDE2KCkpfSksci5jcmVhdGVCb3hDdG9yKCJjbGFwIixmdW5jdGlvbih0KXt0aGlzLmNsZWFuQXBlcnR1cmVXaWR0aE49dC5yZWFkVWludDMyKCksdGhpcy5jbGVhbkFwZXJ0dXJlV2lkdGhEPXQucmVhZFVpbnQzMigpLHRoaXMuY2xlYW5BcGVydHVyZUhlaWdodE49dC5yZWFkVWludDMyKCksdGhpcy5jbGVhbkFwZXJ0dXJlSGVpZ2h0RD10LnJlYWRVaW50MzIoKSx0aGlzLmhvcml6T2ZmTj10LnJlYWRVaW50MzIoKSx0aGlzLmhvcml6T2ZmRD10LnJlYWRVaW50MzIoKSx0aGlzLnZlcnRPZmZOPXQucmVhZFVpbnQzMigpLHRoaXMudmVydE9mZkQ9dC5yZWFkVWludDMyKCl9KSxyLmNyZWF0ZUJveEN0b3IoImNsbGkiLGZ1bmN0aW9uKHQpe3RoaXMubWF4X2NvbnRlbnRfbGlnaHRfbGV2ZWw9dC5yZWFkVWludDE2KCksdGhpcy5tYXhfcGljX2F2ZXJhZ2VfbGlnaHRfbGV2ZWw9dC5yZWFkVWludDE2KCl9KSxyLmNyZWF0ZUZ1bGxCb3hDdG9yKCJjbWV4IixmdW5jdGlvbih0KXt0aGlzLmZsYWdzJjEmJih0aGlzLnBvc194PXQucmVhZEludDMyKCkpLHRoaXMuZmxhZ3MmMiYmKHRoaXMucG9zX3k9dC5yZWFkSW50MzIoKSksdGhpcy5mbGFncyY0JiYodGhpcy5wb3Nfej10LnJlYWRJbnQzMigpKSx0aGlzLmZsYWdzJjgmJih0aGlzLnZlcnNpb249PTA/dGhpcy5mbGFncyYxNj8odGhpcy5xdWF0X3g9dC5yZWFkSW50MzIoKSx0aGlzLnF1YXRfeT10LnJlYWRJbnQzMigpLHRoaXMucXVhdF96PXQucmVhZEludDMyKCkpOih0aGlzLnF1YXRfeD10LnJlYWRJbnQxNigpLHRoaXMucXVhdF95PXQucmVhZEludDE2KCksdGhpcy5xdWF0X3o9dC5yZWFkSW50MTYoKSk6dGhpcy52ZXJzaW9uPT0xKSx0aGlzLmZsYWdzJjMyJiYodGhpcy5pZD10LnJlYWRVaW50MzIoKSl9KSxyLmNyZWF0ZUZ1bGxCb3hDdG9yKCJjbWluIixmdW5jdGlvbih0KXt0aGlzLmZvY2FsX2xlbmd0aF94PXQucmVhZEludDMyKCksdGhpcy5wcmluY2lwYWxfcG9pbnRfeD10LnJlYWRJbnQzMigpLHRoaXMucHJpbmNpcGFsX3BvaW50X3k9dC5yZWFkSW50MzIoKSx0aGlzLmZsYWdzJjEmJih0aGlzLmZvY2FsX2xlbmd0aF95PXQucmVhZEludDMyKCksdGhpcy5za2V3X2ZhY3Rvcj10LnJlYWRJbnQzMigpKX0pLHIuY3JlYXRlQm94Q3RvcigiY21wZCIsZnVuY3Rpb24odCl7Zm9yKHRoaXMuY29tcG9uZW50X2NvdW50PXQucmVhZFVpbnQxNigpLHRoaXMuY29tcG9uZW50X3R5cGVzPVtdLHRoaXMuY29tcG9uZW50X3R5cGVfdXJscz1bXSxpPTA7aTx0aGlzLmNvbXBvbmVudF9jb3VudDtpKyspe3ZhciBlPXQucmVhZFVpbnQxNigpO3RoaXMuY29tcG9uZW50X3R5cGVzLnB1c2goZSksZT49MzI3NjgmJnRoaXMuY29tcG9uZW50X3R5cGVfdXJscy5wdXNoKHQucmVhZENTdHJpbmcoKSl9fSksci5jcmVhdGVGdWxsQm94Q3RvcigiY282NCIsZnVuY3Rpb24odCl7dmFyIGUscztpZihlPXQucmVhZFVpbnQzMigpLHRoaXMuY2h1bmtfb2Zmc2V0cz1bXSx0aGlzLnZlcnNpb249PT0wKWZvcihzPTA7czxlO3MrKyl0aGlzLmNodW5rX29mZnNldHMucHVzaCh0LnJlYWRVaW50NjQoKSl9KSxyLmNyZWF0ZUZ1bGxCb3hDdG9yKCJDb0xMIixmdW5jdGlvbih0KXt0aGlzLm1heENMTD10LnJlYWRVaW50MTYoKSx0aGlzLm1heEZBTEw9dC5yZWFkVWludDE2KCl9KSxyLmNyZWF0ZUJveEN0b3IoImNvbHIiLGZ1bmN0aW9uKHQpe2lmKHRoaXMuY29sb3VyX3R5cGU9dC5yZWFkU3RyaW5nKDQpLHRoaXMuY29sb3VyX3R5cGU9PT0ibmNseCIpe3RoaXMuY29sb3VyX3ByaW1hcmllcz10LnJlYWRVaW50MTYoKSx0aGlzLnRyYW5zZmVyX2NoYXJhY3RlcmlzdGljcz10LnJlYWRVaW50MTYoKSx0aGlzLm1hdHJpeF9jb2VmZmljaWVudHM9dC5yZWFkVWludDE2KCk7dmFyIGU9dC5yZWFkVWludDgoKTt0aGlzLmZ1bGxfcmFuZ2VfZmxhZz1lPj43fWVsc2UgdGhpcy5jb2xvdXJfdHlwZT09PSJySUNDIj90aGlzLklDQ19wcm9maWxlPXQucmVhZFVpbnQ4QXJyYXkodGhpcy5zaXplLTQpOnRoaXMuY29sb3VyX3R5cGU9PT0icHJvZiImJih0aGlzLklDQ19wcm9maWxlPXQucmVhZFVpbnQ4QXJyYXkodGhpcy5zaXplLTQpKX0pLHIuY3JlYXRlRnVsbEJveEN0b3IoImNwcnQiLGZ1bmN0aW9uKHQpe3RoaXMucGFyc2VMYW5ndWFnZSh0KSx0aGlzLm5vdGljZT10LnJlYWRDU3RyaW5nKCl9KSxyLmNyZWF0ZUZ1bGxCb3hDdG9yKCJjc2xnIixmdW5jdGlvbih0KXt0aGlzLnZlcnNpb249PT0wJiYodGhpcy5jb21wb3NpdGlvblRvRFRTU2hpZnQ9dC5yZWFkSW50MzIoKSx0aGlzLmxlYXN0RGVjb2RlVG9EaXNwbGF5RGVsdGE9dC5yZWFkSW50MzIoKSx0aGlzLmdyZWF0ZXN0RGVjb2RlVG9EaXNwbGF5RGVsdGE9dC5yZWFkSW50MzIoKSx0aGlzLmNvbXBvc2l0aW9uU3RhcnRUaW1lPXQucmVhZEludDMyKCksdGhpcy5jb21wb3NpdGlvbkVuZFRpbWU9dC5yZWFkSW50MzIoKSl9KSxyLmNyZWF0ZUZ1bGxCb3hDdG9yKCJjdHRzIixmdW5jdGlvbih0KXt2YXIgZSxzO2lmKGU9dC5yZWFkVWludDMyKCksdGhpcy5zYW1wbGVfY291bnRzPVtdLHRoaXMuc2FtcGxlX29mZnNldHM9W10sdGhpcy52ZXJzaW9uPT09MClmb3Iocz0wO3M8ZTtzKyspe3RoaXMuc2FtcGxlX2NvdW50cy5wdXNoKHQucmVhZFVpbnQzMigpKTt2YXIgbj10LnJlYWRJbnQzMigpO248MCYmZC53YXJuKCJCb3hQYXJzZXIiLCJjdHRzIGJveCB1c2VzIG5lZ2F0aXZlIHZhbHVlcyB3aXRob3V0IHVzaW5nIHZlcnNpb24gMSIpLHRoaXMuc2FtcGxlX29mZnNldHMucHVzaChuKX1lbHNlIGlmKHRoaXMudmVyc2lvbj09MSlmb3Iocz0wO3M8ZTtzKyspdGhpcy5zYW1wbGVfY291bnRzLnB1c2godC5yZWFkVWludDMyKCkpLHRoaXMuc2FtcGxlX29mZnNldHMucHVzaCh0LnJlYWRJbnQzMigpKX0pLHIuY3JlYXRlQm94Q3RvcigiZGFjMyIsZnVuY3Rpb24odCl7dmFyIGU9dC5yZWFkVWludDgoKSxzPXQucmVhZFVpbnQ4KCksbj10LnJlYWRVaW50OCgpO3RoaXMuZnNjb2Q9ZT4+Nix0aGlzLmJzaWQ9ZT4+MSYzMSx0aGlzLmJzbW9kPShlJjEpPDwyfHM+PjYmMyx0aGlzLmFjbW9kPXM+PjMmNyx0aGlzLmxmZW9uPXM+PjImMSx0aGlzLmJpdF9yYXRlX2NvZGU9cyYzfG4+PjUmN30pLHIuY3JlYXRlQm94Q3RvcigiZGVjMyIsZnVuY3Rpb24odCl7dmFyIGU9dC5yZWFkVWludDE2KCk7dGhpcy5kYXRhX3JhdGU9ZT4+Myx0aGlzLm51bV9pbmRfc3ViPWUmNyx0aGlzLmluZF9zdWJzPVtdO2Zvcih2YXIgcz0wO3M8dGhpcy5udW1faW5kX3N1YisxO3MrKyl7dmFyIG49e307dGhpcy5pbmRfc3Vicy5wdXNoKG4pO3ZhciBhPXQucmVhZFVpbnQ4KCksbz10LnJlYWRVaW50OCgpLGg9dC5yZWFkVWludDgoKTtuLmZzY29kPWE+PjYsbi5ic2lkPWE+PjEmMzEsbi5ic21vZD0oYSYxKTw8NHxvPj40JjE1LG4uYWNtb2Q9bz4+MSY3LG4ubGZlb249byYxLG4ubnVtX2RlcF9zdWI9aD4+MSYxNSxuLm51bV9kZXBfc3ViPjAmJihuLmNoYW5fbG9jPShoJjEpPDw4fHQucmVhZFVpbnQ4KCkpfX0pLHIuY3JlYXRlRnVsbEJveEN0b3IoImRmTGEiLGZ1bmN0aW9uKHQpe3ZhciBlPTEyNyxzPTEyOCxuPVtdLGE9WyJTVFJFQU1JTkZPIiwiUEFERElORyIsIkFQUExJQ0FUSU9OIiwiU0VFS1RBQkxFIiwiVk9SQklTX0NPTU1FTlQiLCJDVUVTSEVFVCIsIlBJQ1RVUkUiLCJSRVNFUlZFRCJdO3RoaXMucGFyc2VGdWxsSGVhZGVyKHQpO2Rve3ZhciBvPXQucmVhZFVpbnQ4KCksaD1NYXRoLm1pbihvJmUsYS5sZW5ndGgtMSk7aWYoaD90LnJlYWRVaW50OEFycmF5KHQucmVhZFVpbnQyNCgpKToodC5yZWFkVWludDhBcnJheSgxMyksdGhpcy5zYW1wbGVyYXRlPXQucmVhZFVpbnQzMigpPj4xMix0LnJlYWRVaW50OEFycmF5KDIwKSksbi5wdXNoKGFbaF0pLG8mcylicmVha313aGlsZSghMCk7dGhpcy5udW1NZXRhZGF0YUJsb2Nrcz1uLmxlbmd0aCsiICgiK24uam9pbigiLCAiKSsiKSJ9KSxyLmNyZWF0ZUJveEN0b3IoImRpbW0iLGZ1bmN0aW9uKHQpe3RoaXMuYnl0ZXNzZW50PXQucmVhZFVpbnQ2NCgpfSksci5jcmVhdGVCb3hDdG9yKCJkbWF4IixmdW5jdGlvbih0KXt0aGlzLnRpbWU9dC5yZWFkVWludDMyKCl9KSxyLmNyZWF0ZUJveEN0b3IoImRtZWQiLGZ1bmN0aW9uKHQpe3RoaXMuYnl0ZXNzZW50PXQucmVhZFVpbnQ2NCgpfSksci5jcmVhdGVCb3hDdG9yKCJkT3BzIixmdW5jdGlvbih0KXtpZih0aGlzLlZlcnNpb249dC5yZWFkVWludDgoKSx0aGlzLk91dHB1dENoYW5uZWxDb3VudD10LnJlYWRVaW50OCgpLHRoaXMuUHJlU2tpcD10LnJlYWRVaW50MTYoKSx0aGlzLklucHV0U2FtcGxlUmF0ZT10LnJlYWRVaW50MzIoKSx0aGlzLk91dHB1dEdhaW49dC5yZWFkSW50MTYoKSx0aGlzLkNoYW5uZWxNYXBwaW5nRmFtaWx5PXQucmVhZFVpbnQ4KCksdGhpcy5DaGFubmVsTWFwcGluZ0ZhbWlseSE9PTApe3RoaXMuU3RyZWFtQ291bnQ9dC5yZWFkVWludDgoKSx0aGlzLkNvdXBsZWRDb3VudD10LnJlYWRVaW50OCgpLHRoaXMuQ2hhbm5lbE1hcHBpbmc9W107Zm9yKHZhciBlPTA7ZTx0aGlzLk91dHB1dENoYW5uZWxDb3VudDtlKyspdGhpcy5DaGFubmVsTWFwcGluZ1tlXT10LnJlYWRVaW50OCgpfX0pLHIuY3JlYXRlRnVsbEJveEN0b3IoImRyZWYiLGZ1bmN0aW9uKHQpe3ZhciBlLHM7dGhpcy5lbnRyaWVzPVtdO2Zvcih2YXIgbj10LnJlYWRVaW50MzIoKSxhPTA7YTxuO2ErKylpZihlPXIucGFyc2VPbmVCb3godCwhMSx0aGlzLnNpemUtKHQuZ2V0UG9zaXRpb24oKS10aGlzLnN0YXJ0KSksZS5jb2RlPT09ci5PSylzPWUuYm94LHRoaXMuZW50cmllcy5wdXNoKHMpO2Vsc2UgcmV0dXJufSksci5jcmVhdGVCb3hDdG9yKCJkcmVwIixmdW5jdGlvbih0KXt0aGlzLmJ5dGVzc2VudD10LnJlYWRVaW50NjQoKX0pLHIuY3JlYXRlRnVsbEJveEN0b3IoImVsbmciLGZ1bmN0aW9uKHQpe3RoaXMuZXh0ZW5kZWRfbGFuZ3VhZ2U9dC5yZWFkU3RyaW5nKHRoaXMuc2l6ZS10aGlzLmhkcl9zaXplKX0pLHIuY3JlYXRlRnVsbEJveEN0b3IoImVsc3QiLGZ1bmN0aW9uKHQpe3RoaXMuZW50cmllcz1bXTtmb3IodmFyIGU9dC5yZWFkVWludDMyKCkscz0wO3M8ZTtzKyspe3ZhciBuPXt9O3RoaXMuZW50cmllcy5wdXNoKG4pLHRoaXMudmVyc2lvbj09PTE/KG4uc2VnbWVudF9kdXJhdGlvbj10LnJlYWRVaW50NjQoKSxuLm1lZGlhX3RpbWU9dC5yZWFkSW50NjQoKSk6KG4uc2VnbWVudF9kdXJhdGlvbj10LnJlYWRVaW50MzIoKSxuLm1lZGlhX3RpbWU9dC5yZWFkSW50MzIoKSksbi5tZWRpYV9yYXRlX2ludGVnZXI9dC5yZWFkSW50MTYoKSxuLm1lZGlhX3JhdGVfZnJhY3Rpb249dC5yZWFkSW50MTYoKX19KSxyLmNyZWF0ZUZ1bGxCb3hDdG9yKCJlbXNnIixmdW5jdGlvbih0KXt0aGlzLnZlcnNpb249PTE/KHRoaXMudGltZXNjYWxlPXQucmVhZFVpbnQzMigpLHRoaXMucHJlc2VudGF0aW9uX3RpbWU9dC5yZWFkVWludDY0KCksdGhpcy5ldmVudF9kdXJhdGlvbj10LnJlYWRVaW50MzIoKSx0aGlzLmlkPXQucmVhZFVpbnQzMigpLHRoaXMuc2NoZW1lX2lkX3VyaT10LnJlYWRDU3RyaW5nKCksdGhpcy52YWx1ZT10LnJlYWRDU3RyaW5nKCkpOih0aGlzLnNjaGVtZV9pZF91cmk9dC5yZWFkQ1N0cmluZygpLHRoaXMudmFsdWU9dC5yZWFkQ1N0cmluZygpLHRoaXMudGltZXNjYWxlPXQucmVhZFVpbnQzMigpLHRoaXMucHJlc2VudGF0aW9uX3RpbWVfZGVsdGE9dC5yZWFkVWludDMyKCksdGhpcy5ldmVudF9kdXJhdGlvbj10LnJlYWRVaW50MzIoKSx0aGlzLmlkPXQucmVhZFVpbnQzMigpKTt2YXIgZT10aGlzLnNpemUtdGhpcy5oZHJfc2l6ZS0oNCo0Kyh0aGlzLnNjaGVtZV9pZF91cmkubGVuZ3RoKzEpKyh0aGlzLnZhbHVlLmxlbmd0aCsxKSk7dGhpcy52ZXJzaW9uPT0xJiYoZS09NCksdGhpcy5tZXNzYWdlX2RhdGE9dC5yZWFkVWludDhBcnJheShlKX0pLHIuY3JlYXRlRW50aXR5VG9Hcm91cEN0b3I9ZnVuY3Rpb24odCxlKXtyW3QrIkJveCJdPWZ1bmN0aW9uKHMpe3IuRnVsbEJveC5jYWxsKHRoaXMsdCxzKX0sclt0KyJCb3giXS5wcm90b3R5cGU9bmV3IHIuRnVsbEJveCxyW3QrIkJveCJdLnByb3RvdHlwZS5wYXJzZT1mdW5jdGlvbihzKXtpZih0aGlzLnBhcnNlRnVsbEhlYWRlcihzKSxlKWUuY2FsbCh0aGlzLHMpO2Vsc2UgZm9yKHRoaXMuZ3JvdXBfaWQ9cy5yZWFkVWludDMyKCksdGhpcy5udW1fZW50aXRpZXNfaW5fZ3JvdXA9cy5yZWFkVWludDMyKCksdGhpcy5lbnRpdHlfaWRzPVtdLGk9MDtpPHRoaXMubnVtX2VudGl0aWVzX2luX2dyb3VwO2krKyl7dmFyIG49cy5yZWFkVWludDMyKCk7dGhpcy5lbnRpdHlfaWRzLnB1c2gobil9fX0sci5jcmVhdGVFbnRpdHlUb0dyb3VwQ3RvcigiYWViciIpLHIuY3JlYXRlRW50aXR5VG9Hcm91cEN0b3IoImFmYnIiKSxyLmNyZWF0ZUVudGl0eVRvR3JvdXBDdG9yKCJhbGJjIiksci5jcmVhdGVFbnRpdHlUb0dyb3VwQ3RvcigiYWx0ciIpLHIuY3JlYXRlRW50aXR5VG9Hcm91cEN0b3IoImJyc3QiKSxyLmNyZWF0ZUVudGl0eVRvR3JvdXBDdG9yKCJkb2JyIiksci5jcmVhdGVFbnRpdHlUb0dyb3VwQ3RvcigiZXFpdiIpLHIuY3JlYXRlRW50aXR5VG9Hcm91cEN0b3IoImZhdmMiKSxyLmNyZWF0ZUVudGl0eVRvR3JvdXBDdG9yKCJmb2JyIiksci5jcmVhdGVFbnRpdHlUb0dyb3VwQ3RvcigiaWF1ZyIpLHIuY3JlYXRlRW50aXR5VG9Hcm91cEN0b3IoInBhbm8iKSxyLmNyZWF0ZUVudGl0eVRvR3JvdXBDdG9yKCJzbGlkIiksci5jcmVhdGVFbnRpdHlUb0dyb3VwQ3Rvcigic3RlciIpLHIuY3JlYXRlRW50aXR5VG9Hcm91cEN0b3IoInRzeW4iKSxyLmNyZWF0ZUVudGl0eVRvR3JvdXBDdG9yKCJ3YmJyIiksci5jcmVhdGVFbnRpdHlUb0dyb3VwQ3RvcigicHJnciIpLHIuY3JlYXRlRnVsbEJveEN0b3IoImVzZHMiLGZ1bmN0aW9uKHQpe3ZhciBlPXQucmVhZFVpbnQ4QXJyYXkodGhpcy5zaXplLXRoaXMuaGRyX3NpemUpO2lmKHRoaXMuZGF0YT1lLHR5cGVvZiBBPCJ1Iil7dmFyIHM9bmV3IEE7dGhpcy5lc2Q9cy5wYXJzZU9uZURlc2NyaXB0b3IobmV3IGwoZS5idWZmZXIsMCxsLkJJR19FTkRJQU4pKX19KSxyLmNyZWF0ZUJveEN0b3IoImZpZWwiLGZ1bmN0aW9uKHQpe3RoaXMuZmllbGRDb3VudD10LnJlYWRVaW50OCgpLHRoaXMuZmllbGRPcmRlcmluZz10LnJlYWRVaW50OCgpfSksci5jcmVhdGVCb3hDdG9yKCJmcm1hIixmdW5jdGlvbih0KXt0aGlzLmRhdGFfZm9ybWF0PXQucmVhZFN0cmluZyg0KX0pLHIuY3JlYXRlQm94Q3RvcigiZnR5cCIsZnVuY3Rpb24odCl7dmFyIGU9dGhpcy5zaXplLXRoaXMuaGRyX3NpemU7dGhpcy5tYWpvcl9icmFuZD10LnJlYWRTdHJpbmcoNCksdGhpcy5taW5vcl92ZXJzaW9uPXQucmVhZFVpbnQzMigpLGUtPTgsdGhpcy5jb21wYXRpYmxlX2JyYW5kcz1bXTtmb3IodmFyIHM9MDtlPj00Oyl0aGlzLmNvbXBhdGlibGVfYnJhbmRzW3NdPXQucmVhZFN0cmluZyg0KSxlLT00LHMrK30pLHIuY3JlYXRlRnVsbEJveEN0b3IoImhkbHIiLGZ1bmN0aW9uKHQpe3RoaXMudmVyc2lvbj09PTAmJih0LnJlYWRVaW50MzIoKSx0aGlzLmhhbmRsZXI9dC5yZWFkU3RyaW5nKDQpLHQucmVhZFVpbnQzMkFycmF5KDMpLHRoaXMubmFtZT10LnJlYWRTdHJpbmcodGhpcy5zaXplLXRoaXMuaGRyX3NpemUtMjApLHRoaXMubmFtZVt0aGlzLm5hbWUubGVuZ3RoLTFdPT09IlwwIiYmKHRoaXMubmFtZT10aGlzLm5hbWUuc2xpY2UoMCwtMSkpKX0pLHIuY3JlYXRlQm94Q3RvcigiaHZjQyIsZnVuY3Rpb24odCl7dmFyIGUscyxuLGE7dGhpcy5jb25maWd1cmF0aW9uVmVyc2lvbj10LnJlYWRVaW50OCgpLGE9dC5yZWFkVWludDgoKSx0aGlzLmdlbmVyYWxfcHJvZmlsZV9zcGFjZT1hPj42LHRoaXMuZ2VuZXJhbF90aWVyX2ZsYWc9KGEmMzIpPj41LHRoaXMuZ2VuZXJhbF9wcm9maWxlX2lkYz1hJjMxLHRoaXMuZ2VuZXJhbF9wcm9maWxlX2NvbXBhdGliaWxpdHk9dC5yZWFkVWludDMyKCksdGhpcy5nZW5lcmFsX2NvbnN0cmFpbnRfaW5kaWNhdG9yPXQucmVhZFVpbnQ4QXJyYXkoNiksdGhpcy5nZW5lcmFsX2xldmVsX2lkYz10LnJlYWRVaW50OCgpLHRoaXMubWluX3NwYXRpYWxfc2VnbWVudGF0aW9uX2lkYz10LnJlYWRVaW50MTYoKSY0MDk1LHRoaXMucGFyYWxsZWxpc21UeXBlPXQucmVhZFVpbnQ4KCkmMyx0aGlzLmNocm9tYV9mb3JtYXRfaWRjPXQucmVhZFVpbnQ4KCkmMyx0aGlzLmJpdF9kZXB0aF9sdW1hX21pbnVzOD10LnJlYWRVaW50OCgpJjcsdGhpcy5iaXRfZGVwdGhfY2hyb21hX21pbnVzOD10LnJlYWRVaW50OCgpJjcsdGhpcy5hdmdGcmFtZVJhdGU9dC5yZWFkVWludDE2KCksYT10LnJlYWRVaW50OCgpLHRoaXMuY29uc3RhbnRGcmFtZVJhdGU9YT4+Nix0aGlzLm51bVRlbXBvcmFsTGF5ZXJzPShhJjEzKT4+Myx0aGlzLnRlbXBvcmFsSWROZXN0ZWQ9KGEmNCk+PjIsdGhpcy5sZW5ndGhTaXplTWludXNPbmU9YSYzLHRoaXMubmFsdV9hcnJheXM9W107dmFyIG89dC5yZWFkVWludDgoKTtmb3IoZT0wO2U8bztlKyspe3ZhciBoPVtdO3RoaXMubmFsdV9hcnJheXMucHVzaChoKSxhPXQucmVhZFVpbnQ4KCksaC5jb21wbGV0ZW5lc3M9KGEmMTI4KT4+NyxoLm5hbHVfdHlwZT1hJjYzO3ZhciBmPXQucmVhZFVpbnQxNigpO2ZvcihzPTA7czxmO3MrKyl7dmFyIHA9e307aC5wdXNoKHApLG49dC5yZWFkVWludDE2KCkscC5kYXRhPXQucmVhZFVpbnQ4QXJyYXkobil9fX0pLHIuY3JlYXRlRnVsbEJveEN0b3IoImlpbmYiLGZ1bmN0aW9uKHQpe3ZhciBlO3RoaXMudmVyc2lvbj09PTA/dGhpcy5lbnRyeV9jb3VudD10LnJlYWRVaW50MTYoKTp0aGlzLmVudHJ5X2NvdW50PXQucmVhZFVpbnQzMigpLHRoaXMuaXRlbV9pbmZvcz1bXTtmb3IodmFyIHM9MDtzPHRoaXMuZW50cnlfY291bnQ7cysrKWlmKGU9ci5wYXJzZU9uZUJveCh0LCExLHRoaXMuc2l6ZS0odC5nZXRQb3NpdGlvbigpLXRoaXMuc3RhcnQpKSxlLmNvZGU9PT1yLk9LKWUuYm94LnR5cGUhPT0iaW5mZSImJmQuZXJyb3IoIkJveFBhcnNlciIsIkV4cGVjdGVkICdpbmZlJyBib3gsIGdvdCAiK2UuYm94LnR5cGUpLHRoaXMuaXRlbV9pbmZvc1tzXT1lLmJveDtlbHNlIHJldHVybn0pLHIuY3JlYXRlRnVsbEJveEN0b3IoImlsb2MiLGZ1bmN0aW9uKHQpe3ZhciBlO2U9dC5yZWFkVWludDgoKSx0aGlzLm9mZnNldF9zaXplPWU+PjQmMTUsdGhpcy5sZW5ndGhfc2l6ZT1lJjE1LGU9dC5yZWFkVWludDgoKSx0aGlzLmJhc2Vfb2Zmc2V0X3NpemU9ZT4+NCYxNSx0aGlzLnZlcnNpb249PT0xfHx0aGlzLnZlcnNpb249PT0yP3RoaXMuaW5kZXhfc2l6ZT1lJjE1OnRoaXMuaW5kZXhfc2l6ZT0wLHRoaXMuaXRlbXM9W107dmFyIHM9MDtpZih0aGlzLnZlcnNpb248MilzPXQucmVhZFVpbnQxNigpO2Vsc2UgaWYodGhpcy52ZXJzaW9uPT09MilzPXQucmVhZFVpbnQzMigpO2Vsc2UgdGhyb3cidmVyc2lvbiBvZiBpbG9jIGJveCBub3Qgc3VwcG9ydGVkIjtmb3IodmFyIG49MDtuPHM7bisrKXt2YXIgYT17fTtpZih0aGlzLml0ZW1zLnB1c2goYSksdGhpcy52ZXJzaW9uPDIpYS5pdGVtX0lEPXQucmVhZFVpbnQxNigpO2Vsc2UgaWYodGhpcy52ZXJzaW9uPT09MilhLml0ZW1fSUQ9dC5yZWFkVWludDE2KCk7ZWxzZSB0aHJvdyJ2ZXJzaW9uIG9mIGlsb2MgYm94IG5vdCBzdXBwb3J0ZWQiO3N3aXRjaCh0aGlzLnZlcnNpb249PT0xfHx0aGlzLnZlcnNpb249PT0yP2EuY29uc3RydWN0aW9uX21ldGhvZD10LnJlYWRVaW50MTYoKSYxNTphLmNvbnN0cnVjdGlvbl9tZXRob2Q9MCxhLmRhdGFfcmVmZXJlbmNlX2luZGV4PXQucmVhZFVpbnQxNigpLHRoaXMuYmFzZV9vZmZzZXRfc2l6ZSl7Y2FzZSAwOmEuYmFzZV9vZmZzZXQ9MDticmVhaztjYXNlIDQ6YS5iYXNlX29mZnNldD10LnJlYWRVaW50MzIoKTticmVhaztjYXNlIDg6YS5iYXNlX29mZnNldD10LnJlYWRVaW50NjQoKTticmVhaztkZWZhdWx0OnRocm93IkVycm9yIHJlYWRpbmcgYmFzZSBvZmZzZXQgc2l6ZSJ9dmFyIG89dC5yZWFkVWludDE2KCk7YS5leHRlbnRzPVtdO2Zvcih2YXIgaD0wO2g8bztoKyspe3ZhciBmPXt9O2lmKGEuZXh0ZW50cy5wdXNoKGYpLHRoaXMudmVyc2lvbj09PTF8fHRoaXMudmVyc2lvbj09PTIpc3dpdGNoKHRoaXMuaW5kZXhfc2l6ZSl7Y2FzZSAwOmYuZXh0ZW50X2luZGV4PTA7YnJlYWs7Y2FzZSA0OmYuZXh0ZW50X2luZGV4PXQucmVhZFVpbnQzMigpO2JyZWFrO2Nhc2UgODpmLmV4dGVudF9pbmRleD10LnJlYWRVaW50NjQoKTticmVhaztkZWZhdWx0OnRocm93IkVycm9yIHJlYWRpbmcgZXh0ZW50IGluZGV4In1zd2l0Y2godGhpcy5vZmZzZXRfc2l6ZSl7Y2FzZSAwOmYuZXh0ZW50X29mZnNldD0wO2JyZWFrO2Nhc2UgNDpmLmV4dGVudF9vZmZzZXQ9dC5yZWFkVWludDMyKCk7YnJlYWs7Y2FzZSA4OmYuZXh0ZW50X29mZnNldD10LnJlYWRVaW50NjQoKTticmVhaztkZWZhdWx0OnRocm93IkVycm9yIHJlYWRpbmcgZXh0ZW50IGluZGV4In1zd2l0Y2godGhpcy5sZW5ndGhfc2l6ZSl7Y2FzZSAwOmYuZXh0ZW50X2xlbmd0aD0wO2JyZWFrO2Nhc2UgNDpmLmV4dGVudF9sZW5ndGg9dC5yZWFkVWludDMyKCk7YnJlYWs7Y2FzZSA4OmYuZXh0ZW50X2xlbmd0aD10LnJlYWRVaW50NjQoKTticmVhaztkZWZhdWx0OnRocm93IkVycm9yIHJlYWRpbmcgZXh0ZW50IGluZGV4In19fX0pLHIuY3JlYXRlQm94Q3RvcigiaW1pciIsZnVuY3Rpb24odCl7dmFyIGU9dC5yZWFkVWludDgoKTt0aGlzLnJlc2VydmVkPWU+PjcsdGhpcy5heGlzPWUmMX0pLHIuY3JlYXRlRnVsbEJveEN0b3IoImluZmUiLGZ1bmN0aW9uKHQpe2lmKCh0aGlzLnZlcnNpb249PT0wfHx0aGlzLnZlcnNpb249PT0xKSYmKHRoaXMuaXRlbV9JRD10LnJlYWRVaW50MTYoKSx0aGlzLml0ZW1fcHJvdGVjdGlvbl9pbmRleD10LnJlYWRVaW50MTYoKSx0aGlzLml0ZW1fbmFtZT10LnJlYWRDU3RyaW5nKCksdGhpcy5jb250ZW50X3R5cGU9dC5yZWFkQ1N0cmluZygpLHRoaXMuY29udGVudF9lbmNvZGluZz10LnJlYWRDU3RyaW5nKCkpLHRoaXMudmVyc2lvbj09PTEpe3RoaXMuZXh0ZW5zaW9uX3R5cGU9dC5yZWFkU3RyaW5nKDQpLGQud2FybigiQm94UGFyc2VyIiwiQ2Fubm90IHBhcnNlIGV4dGVuc2lvbiB0eXBlIiksdC5zZWVrKHRoaXMuc3RhcnQrdGhpcy5zaXplKTtyZXR1cm59dGhpcy52ZXJzaW9uPj0yJiYodGhpcy52ZXJzaW9uPT09Mj90aGlzLml0ZW1fSUQ9dC5yZWFkVWludDE2KCk6dGhpcy52ZXJzaW9uPT09MyYmKHRoaXMuaXRlbV9JRD10LnJlYWRVaW50MzIoKSksdGhpcy5pdGVtX3Byb3RlY3Rpb25faW5kZXg9dC5yZWFkVWludDE2KCksdGhpcy5pdGVtX3R5cGU9dC5yZWFkU3RyaW5nKDQpLHRoaXMuaXRlbV9uYW1lPXQucmVhZENTdHJpbmcoKSx0aGlzLml0ZW1fdHlwZT09PSJtaW1lIj8odGhpcy5jb250ZW50X3R5cGU9dC5yZWFkQ1N0cmluZygpLHRoaXMuY29udGVudF9lbmNvZGluZz10LnJlYWRDU3RyaW5nKCkpOnRoaXMuaXRlbV90eXBlPT09InVyaSAiJiYodGhpcy5pdGVtX3VyaV90eXBlPXQucmVhZENTdHJpbmcoKSkpfSksci5jcmVhdGVGdWxsQm94Q3RvcigiaXBtYSIsZnVuY3Rpb24odCl7dmFyIGUscztmb3IoZW50cnlfY291bnQ9dC5yZWFkVWludDMyKCksdGhpcy5hc3NvY2lhdGlvbnM9W10sZT0wO2U8ZW50cnlfY291bnQ7ZSsrKXt2YXIgbj17fTt0aGlzLmFzc29jaWF0aW9ucy5wdXNoKG4pLHRoaXMudmVyc2lvbjwxP24uaWQ9dC5yZWFkVWludDE2KCk6bi5pZD10LnJlYWRVaW50MzIoKTt2YXIgYT10LnJlYWRVaW50OCgpO2ZvcihuLnByb3BzPVtdLHM9MDtzPGE7cysrKXt2YXIgbz10LnJlYWRVaW50OCgpLGg9e307bi5wcm9wcy5wdXNoKGgpLGguZXNzZW50aWFsPShvJjEyOCk+Pjc9PT0xLHRoaXMuZmxhZ3MmMT9oLnByb3BlcnR5X2luZGV4PShvJjEyNyk8PDh8dC5yZWFkVWludDgoKTpoLnByb3BlcnR5X2luZGV4PW8mMTI3fX19KSxyLmNyZWF0ZUZ1bGxCb3hDdG9yKCJpcmVmIixmdW5jdGlvbih0KXt2YXIgZSxzO2Zvcih0aGlzLnJlZmVyZW5jZXM9W107dC5nZXRQb3NpdGlvbigpPHRoaXMuc3RhcnQrdGhpcy5zaXplOylpZihlPXIucGFyc2VPbmVCb3godCwhMCx0aGlzLnNpemUtKHQuZ2V0UG9zaXRpb24oKS10aGlzLnN0YXJ0KSksZS5jb2RlPT09ci5PSyl0aGlzLnZlcnNpb249PT0wP3M9bmV3IHIuU2luZ2xlSXRlbVR5cGVSZWZlcmVuY2VCb3goZS50eXBlLGUuc2l6ZSxlLmhkcl9zaXplLGUuc3RhcnQpOnM9bmV3IHIuU2luZ2xlSXRlbVR5cGVSZWZlcmVuY2VCb3hMYXJnZShlLnR5cGUsZS5zaXplLGUuaGRyX3NpemUsZS5zdGFydCkscy53cml0ZT09PXIuQm94LnByb3RvdHlwZS53cml0ZSYmcy50eXBlIT09Im1kYXQiJiYoZC53YXJuKCJCb3hQYXJzZXIiLHMudHlwZSsiIGJveCB3cml0aW5nIG5vdCB5ZXQgaW1wbGVtZW50ZWQsIGtlZXBpbmcgdW5wYXJzZWQgZGF0YSBpbiBtZW1vcnkgZm9yIGxhdGVyIHdyaXRlIikscy5wYXJzZURhdGFBbmRSZXdpbmQodCkpLHMucGFyc2UodCksdGhpcy5yZWZlcmVuY2VzLnB1c2gocyk7ZWxzZSByZXR1cm59KSxyLmNyZWF0ZUJveEN0b3IoImlyb3QiLGZ1bmN0aW9uKHQpe3RoaXMuYW5nbGU9dC5yZWFkVWludDgoKSYzfSksci5jcmVhdGVGdWxsQm94Q3RvcigiaXNwZSIsZnVuY3Rpb24odCl7dGhpcy5pbWFnZV93aWR0aD10LnJlYWRVaW50MzIoKSx0aGlzLmltYWdlX2hlaWdodD10LnJlYWRVaW50MzIoKX0pLHIuY3JlYXRlRnVsbEJveEN0b3IoImtpbmQiLGZ1bmN0aW9uKHQpe3RoaXMuc2NoZW1lVVJJPXQucmVhZENTdHJpbmcoKSx0aGlzLnZhbHVlPXQucmVhZENTdHJpbmcoKX0pLHIuY3JlYXRlRnVsbEJveEN0b3IoImxldmEiLGZ1bmN0aW9uKHQpe3ZhciBlPXQucmVhZFVpbnQ4KCk7dGhpcy5sZXZlbHM9W107Zm9yKHZhciBzPTA7czxlO3MrKyl7dmFyIG49e307dGhpcy5sZXZlbHNbc109bixuLnRyYWNrX0lEPXQucmVhZFVpbnQzMigpO3ZhciBhPXQucmVhZFVpbnQ4KCk7c3dpdGNoKG4ucGFkZGluZ19mbGFnPWE+Pjcsbi5hc3NpZ25tZW50X3R5cGU9YSYxMjcsbi5hc3NpZ25tZW50X3R5cGUpe2Nhc2UgMDpuLmdyb3VwaW5nX3R5cGU9dC5yZWFkU3RyaW5nKDQpO2JyZWFrO2Nhc2UgMTpuLmdyb3VwaW5nX3R5cGU9dC5yZWFkU3RyaW5nKDQpLG4uZ3JvdXBpbmdfdHlwZV9wYXJhbWV0ZXI9dC5yZWFkVWludDMyKCk7YnJlYWs7Y2FzZSAyOmJyZWFrO2Nhc2UgMzpicmVhaztjYXNlIDQ6bi5zdWJfdHJhY2tfaWQ9dC5yZWFkVWludDMyKCk7YnJlYWs7ZGVmYXVsdDpkLndhcm4oIkJveFBhcnNlciIsIlVua25vd24gbGV2YSBhc3NpZ25lbWVudCB0eXBlIil9fX0pLHIuY3JlYXRlQm94Q3RvcigibHNlbCIsZnVuY3Rpb24odCl7dGhpcy5sYXllcl9pZD10LnJlYWRVaW50MTYoKX0pLHIuY3JlYXRlQm94Q3RvcigibWF4ciIsZnVuY3Rpb24odCl7dGhpcy5wZXJpb2Q9dC5yZWFkVWludDMyKCksdGhpcy5ieXRlcz10LnJlYWRVaW50MzIoKX0pLHIuY3JlYXRlQm94Q3RvcigibWRjdiIsZnVuY3Rpb24odCl7dGhpcy5kaXNwbGF5X3ByaW1hcmllcz1bXSx0aGlzLmRpc3BsYXlfcHJpbWFyaWVzWzBdPXt9LHRoaXMuZGlzcGxheV9wcmltYXJpZXNbMF0ueD10LnJlYWRVaW50MTYoKSx0aGlzLmRpc3BsYXlfcHJpbWFyaWVzWzBdLnk9dC5yZWFkVWludDE2KCksdGhpcy5kaXNwbGF5X3ByaW1hcmllc1sxXT17fSx0aGlzLmRpc3BsYXlfcHJpbWFyaWVzWzFdLng9dC5yZWFkVWludDE2KCksdGhpcy5kaXNwbGF5X3ByaW1hcmllc1sxXS55PXQucmVhZFVpbnQxNigpLHRoaXMuZGlzcGxheV9wcmltYXJpZXNbMl09e30sdGhpcy5kaXNwbGF5X3ByaW1hcmllc1syXS54PXQucmVhZFVpbnQxNigpLHRoaXMuZGlzcGxheV9wcmltYXJpZXNbMl0ueT10LnJlYWRVaW50MTYoKSx0aGlzLndoaXRlX3BvaW50PXt9LHRoaXMud2hpdGVfcG9pbnQueD10LnJlYWRVaW50MTYoKSx0aGlzLndoaXRlX3BvaW50Lnk9dC5yZWFkVWludDE2KCksdGhpcy5tYXhfZGlzcGxheV9tYXN0ZXJpbmdfbHVtaW5hbmNlPXQucmVhZFVpbnQzMigpLHRoaXMubWluX2Rpc3BsYXlfbWFzdGVyaW5nX2x1bWluYW5jZT10LnJlYWRVaW50MzIoKX0pLHIuY3JlYXRlRnVsbEJveEN0b3IoIm1kaGQiLGZ1bmN0aW9uKHQpe3RoaXMudmVyc2lvbj09MT8odGhpcy5jcmVhdGlvbl90aW1lPXQucmVhZFVpbnQ2NCgpLHRoaXMubW9kaWZpY2F0aW9uX3RpbWU9dC5yZWFkVWludDY0KCksdGhpcy50aW1lc2NhbGU9dC5yZWFkVWludDMyKCksdGhpcy5kdXJhdGlvbj10LnJlYWRVaW50NjQoKSk6KHRoaXMuY3JlYXRpb25fdGltZT10LnJlYWRVaW50MzIoKSx0aGlzLm1vZGlmaWNhdGlvbl90aW1lPXQucmVhZFVpbnQzMigpLHRoaXMudGltZXNjYWxlPXQucmVhZFVpbnQzMigpLHRoaXMuZHVyYXRpb249dC5yZWFkVWludDMyKCkpLHRoaXMucGFyc2VMYW5ndWFnZSh0KSx0LnJlYWRVaW50MTYoKX0pLHIuY3JlYXRlRnVsbEJveEN0b3IoIm1laGQiLGZ1bmN0aW9uKHQpe3RoaXMuZmxhZ3MmMSYmKGQud2FybigiQm94UGFyc2VyIiwibWVoZCBib3ggaW5jb3JyZWN0bHkgdXNlcyBmbGFncyBzZXQgdG8gMSwgY29udmVydGluZyB2ZXJzaW9uIHRvIDEiKSx0aGlzLnZlcnNpb249MSksdGhpcy52ZXJzaW9uPT0xP3RoaXMuZnJhZ21lbnRfZHVyYXRpb249dC5yZWFkVWludDY0KCk6dGhpcy5mcmFnbWVudF9kdXJhdGlvbj10LnJlYWRVaW50MzIoKX0pLHIuY3JlYXRlRnVsbEJveEN0b3IoIm1ldGEiLGZ1bmN0aW9uKHQpe3RoaXMuYm94ZXM9W10sci5Db250YWluZXJCb3gucHJvdG90eXBlLnBhcnNlLmNhbGwodGhpcyx0KX0pLHIuY3JlYXRlRnVsbEJveEN0b3IoIm1maGQiLGZ1bmN0aW9uKHQpe3RoaXMuc2VxdWVuY2VfbnVtYmVyPXQucmVhZFVpbnQzMigpfSksci5jcmVhdGVGdWxsQm94Q3RvcigibWZybyIsZnVuY3Rpb24odCl7dGhpcy5fc2l6ZT10LnJlYWRVaW50MzIoKX0pLHIuY3JlYXRlRnVsbEJveEN0b3IoIm12aGQiLGZ1bmN0aW9uKHQpe3RoaXMudmVyc2lvbj09MT8odGhpcy5jcmVhdGlvbl90aW1lPXQucmVhZFVpbnQ2NCgpLHRoaXMubW9kaWZpY2F0aW9uX3RpbWU9dC5yZWFkVWludDY0KCksdGhpcy50aW1lc2NhbGU9dC5yZWFkVWludDMyKCksdGhpcy5kdXJhdGlvbj10LnJlYWRVaW50NjQoKSk6KHRoaXMuY3JlYXRpb25fdGltZT10LnJlYWRVaW50MzIoKSx0aGlzLm1vZGlmaWNhdGlvbl90aW1lPXQucmVhZFVpbnQzMigpLHRoaXMudGltZXNjYWxlPXQucmVhZFVpbnQzMigpLHRoaXMuZHVyYXRpb249dC5yZWFkVWludDMyKCkpLHRoaXMucmF0ZT10LnJlYWRVaW50MzIoKSx0aGlzLnZvbHVtZT10LnJlYWRVaW50MTYoKT4+OCx0LnJlYWRVaW50MTYoKSx0LnJlYWRVaW50MzJBcnJheSgyKSx0aGlzLm1hdHJpeD10LnJlYWRVaW50MzJBcnJheSg5KSx0LnJlYWRVaW50MzJBcnJheSg2KSx0aGlzLm5leHRfdHJhY2tfaWQ9dC5yZWFkVWludDMyKCl9KSxyLmNyZWF0ZUJveEN0b3IoIm5wY2siLGZ1bmN0aW9uKHQpe3RoaXMucGFja2V0c3NlbnQ9dC5yZWFkVWludDMyKCl9KSxyLmNyZWF0ZUJveEN0b3IoIm51bXAiLGZ1bmN0aW9uKHQpe3RoaXMucGFja2V0c3NlbnQ9dC5yZWFkVWludDY0KCl9KSxyLmNyZWF0ZUZ1bGxCb3hDdG9yKCJwYWRiIixmdW5jdGlvbih0KXt2YXIgZT10LnJlYWRVaW50MzIoKTt0aGlzLnBhZGJpdHM9W107Zm9yKHZhciBzPTA7czxNYXRoLmZsb29yKChlKzEpLzIpO3MrKyl0aGlzLnBhZGJpdHM9dC5yZWFkVWludDgoKX0pLHIuY3JlYXRlQm94Q3RvcigicGFzcCIsZnVuY3Rpb24odCl7dGhpcy5oU3BhY2luZz10LnJlYWRVaW50MzIoKSx0aGlzLnZTcGFjaW5nPXQucmVhZFVpbnQzMigpfSksci5jcmVhdGVCb3hDdG9yKCJwYXlsIixmdW5jdGlvbih0KXt0aGlzLnRleHQ9dC5yZWFkU3RyaW5nKHRoaXMuc2l6ZS10aGlzLmhkcl9zaXplKX0pLHIuY3JlYXRlQm94Q3RvcigicGF5dCIsZnVuY3Rpb24odCl7dGhpcy5wYXlsb2FkSUQ9dC5yZWFkVWludDMyKCk7dmFyIGU9dC5yZWFkVWludDgoKTt0aGlzLnJ0cG1hcF9zdHJpbmc9dC5yZWFkU3RyaW5nKGUpfSksci5jcmVhdGVGdWxsQm94Q3RvcigicGRpbiIsZnVuY3Rpb24odCl7dmFyIGU9KHRoaXMuc2l6ZS10aGlzLmhkcl9zaXplKS84O3RoaXMucmF0ZT1bXSx0aGlzLmluaXRpYWxfZGVsYXk9W107Zm9yKHZhciBzPTA7czxlO3MrKyl0aGlzLnJhdGVbc109dC5yZWFkVWludDMyKCksdGhpcy5pbml0aWFsX2RlbGF5W3NdPXQucmVhZFVpbnQzMigpfSksci5jcmVhdGVGdWxsQm94Q3RvcigicGl0bSIsZnVuY3Rpb24odCl7dGhpcy52ZXJzaW9uPT09MD90aGlzLml0ZW1faWQ9dC5yZWFkVWludDE2KCk6dGhpcy5pdGVtX2lkPXQucmVhZFVpbnQzMigpfSksci5jcmVhdGVGdWxsQm94Q3RvcigicGl4aSIsZnVuY3Rpb24odCl7dmFyIGU7Zm9yKHRoaXMubnVtX2NoYW5uZWxzPXQucmVhZFVpbnQ4KCksdGhpcy5iaXRzX3Blcl9jaGFubmVscz1bXSxlPTA7ZTx0aGlzLm51bV9jaGFubmVscztlKyspdGhpcy5iaXRzX3Blcl9jaGFubmVsc1tlXT10LnJlYWRVaW50OCgpfSksci5jcmVhdGVCb3hDdG9yKCJwbWF4IixmdW5jdGlvbih0KXt0aGlzLmJ5dGVzPXQucmVhZFVpbnQzMigpfSksci5jcmVhdGVGdWxsQm94Q3RvcigicHJkaSIsZnVuY3Rpb24odCl7aWYodGhpcy5zdGVwX2NvdW50PXQucmVhZFVpbnQxNigpLHRoaXMuaXRlbV9jb3VudD1bXSx0aGlzLmZsYWdzJjIpZm9yKHZhciBlPTA7ZTx0aGlzLnN0ZXBfY291bnQ7ZSsrKXRoaXMuaXRlbV9jb3VudFtlXT10LnJlYWRVaW50MTYoKX0pLHIuY3JlYXRlRnVsbEJveEN0b3IoInByZnQiLGZ1bmN0aW9uKHQpe3RoaXMucmVmX3RyYWNrX2lkPXQucmVhZFVpbnQzMigpLHRoaXMubnRwX3RpbWVzdGFtcD10LnJlYWRVaW50NjQoKSx0aGlzLnZlcnNpb249PT0wP3RoaXMubWVkaWFfdGltZT10LnJlYWRVaW50MzIoKTp0aGlzLm1lZGlhX3RpbWU9dC5yZWFkVWludDY0KCl9KSxyLmNyZWF0ZUZ1bGxCb3hDdG9yKCJwc3NoIixmdW5jdGlvbih0KXtpZih0aGlzLnN5c3RlbV9pZD1yLnBhcnNlSGV4MTYodCksdGhpcy52ZXJzaW9uPjApe3ZhciBlPXQucmVhZFVpbnQzMigpO3RoaXMua2lkPVtdO2Zvcih2YXIgcz0wO3M8ZTtzKyspdGhpcy5raWRbc109ci5wYXJzZUhleDE2KHQpfXZhciBuPXQucmVhZFVpbnQzMigpO24+MCYmKHRoaXMuZGF0YT10LnJlYWRVaW50OEFycmF5KG4pKX0pLHIuY3JlYXRlRnVsbEJveEN0b3IoImNsZWYiLGZ1bmN0aW9uKHQpe3RoaXMud2lkdGg9dC5yZWFkVWludDMyKCksdGhpcy5oZWlnaHQ9dC5yZWFkVWludDMyKCl9KSxyLmNyZWF0ZUZ1bGxCb3hDdG9yKCJlbm9mIixmdW5jdGlvbih0KXt0aGlzLndpZHRoPXQucmVhZFVpbnQzMigpLHRoaXMuaGVpZ2h0PXQucmVhZFVpbnQzMigpfSksci5jcmVhdGVGdWxsQm94Q3RvcigicHJvZiIsZnVuY3Rpb24odCl7dGhpcy53aWR0aD10LnJlYWRVaW50MzIoKSx0aGlzLmhlaWdodD10LnJlYWRVaW50MzIoKX0pLHIuY3JlYXRlQ29udGFpbmVyQm94Q3RvcigidGFwdCIsbnVsbCxbImNsZWYiLCJwcm9mIiwiZW5vZiJdKSxyLmNyZWF0ZUJveEN0b3IoInJ0cCAiLGZ1bmN0aW9uKHQpe3RoaXMuZGVzY3JpcHRpb25mb3JtYXQ9dC5yZWFkU3RyaW5nKDQpLHRoaXMuc2RwdGV4dD10LnJlYWRTdHJpbmcodGhpcy5zaXplLXRoaXMuaGRyX3NpemUtNCl9KSxyLmNyZWF0ZUZ1bGxCb3hDdG9yKCJzYWlvIixmdW5jdGlvbih0KXt0aGlzLmZsYWdzJjEmJih0aGlzLmF1eF9pbmZvX3R5cGU9dC5yZWFkVWludDMyKCksdGhpcy5hdXhfaW5mb190eXBlX3BhcmFtZXRlcj10LnJlYWRVaW50MzIoKSk7dmFyIGU9dC5yZWFkVWludDMyKCk7dGhpcy5vZmZzZXQ9W107Zm9yKHZhciBzPTA7czxlO3MrKyl0aGlzLnZlcnNpb249PT0wP3RoaXMub2Zmc2V0W3NdPXQucmVhZFVpbnQzMigpOnRoaXMub2Zmc2V0W3NdPXQucmVhZFVpbnQ2NCgpfSksci5jcmVhdGVGdWxsQm94Q3Rvcigic2FpeiIsZnVuY3Rpb24odCl7dGhpcy5mbGFncyYxJiYodGhpcy5hdXhfaW5mb190eXBlPXQucmVhZFVpbnQzMigpLHRoaXMuYXV4X2luZm9fdHlwZV9wYXJhbWV0ZXI9dC5yZWFkVWludDMyKCkpLHRoaXMuZGVmYXVsdF9zYW1wbGVfaW5mb19zaXplPXQucmVhZFVpbnQ4KCk7dmFyIGU9dC5yZWFkVWludDMyKCk7aWYodGhpcy5zYW1wbGVfaW5mb19zaXplPVtdLHRoaXMuZGVmYXVsdF9zYW1wbGVfaW5mb19zaXplPT09MClmb3IodmFyIHM9MDtzPGU7cysrKXRoaXMuc2FtcGxlX2luZm9fc2l6ZVtzXT10LnJlYWRVaW50OCgpfSksci5jcmVhdGVTYW1wbGVFbnRyeUN0b3Ioci5TQU1QTEVfRU5UUllfVFlQRV9NRVRBREFUQSwibWV0dCIsZnVuY3Rpb24odCl7dGhpcy5wYXJzZUhlYWRlcih0KSx0aGlzLmNvbnRlbnRfZW5jb2Rpbmc9dC5yZWFkQ1N0cmluZygpLHRoaXMubWltZV9mb3JtYXQ9dC5yZWFkQ1N0cmluZygpLHRoaXMucGFyc2VGb290ZXIodCl9KSxyLmNyZWF0ZVNhbXBsZUVudHJ5Q3RvcihyLlNBTVBMRV9FTlRSWV9UWVBFX01FVEFEQVRBLCJtZXR4IixmdW5jdGlvbih0KXt0aGlzLnBhcnNlSGVhZGVyKHQpLHRoaXMuY29udGVudF9lbmNvZGluZz10LnJlYWRDU3RyaW5nKCksdGhpcy5uYW1lc3BhY2U9dC5yZWFkQ1N0cmluZygpLHRoaXMuc2NoZW1hX2xvY2F0aW9uPXQucmVhZENTdHJpbmcoKSx0aGlzLnBhcnNlRm9vdGVyKHQpfSksci5jcmVhdGVTYW1wbGVFbnRyeUN0b3Ioci5TQU1QTEVfRU5UUllfVFlQRV9TVUJUSVRMRSwic2J0dCIsZnVuY3Rpb24odCl7dGhpcy5wYXJzZUhlYWRlcih0KSx0aGlzLmNvbnRlbnRfZW5jb2Rpbmc9dC5yZWFkQ1N0cmluZygpLHRoaXMubWltZV9mb3JtYXQ9dC5yZWFkQ1N0cmluZygpLHRoaXMucGFyc2VGb290ZXIodCl9KSxyLmNyZWF0ZVNhbXBsZUVudHJ5Q3RvcihyLlNBTVBMRV9FTlRSWV9UWVBFX1NVQlRJVExFLCJzdHBwIixmdW5jdGlvbih0KXt0aGlzLnBhcnNlSGVhZGVyKHQpLHRoaXMubmFtZXNwYWNlPXQucmVhZENTdHJpbmcoKSx0aGlzLnNjaGVtYV9sb2NhdGlvbj10LnJlYWRDU3RyaW5nKCksdGhpcy5hdXhpbGlhcnlfbWltZV90eXBlcz10LnJlYWRDU3RyaW5nKCksdGhpcy5wYXJzZUZvb3Rlcih0KX0pLHIuY3JlYXRlU2FtcGxlRW50cnlDdG9yKHIuU0FNUExFX0VOVFJZX1RZUEVfU1VCVElUTEUsInN0eHQiLGZ1bmN0aW9uKHQpe3RoaXMucGFyc2VIZWFkZXIodCksdGhpcy5jb250ZW50X2VuY29kaW5nPXQucmVhZENTdHJpbmcoKSx0aGlzLm1pbWVfZm9ybWF0PXQucmVhZENTdHJpbmcoKSx0aGlzLnBhcnNlRm9vdGVyKHQpfSksci5jcmVhdGVTYW1wbGVFbnRyeUN0b3Ioci5TQU1QTEVfRU5UUllfVFlQRV9TVUJUSVRMRSwidHgzZyIsZnVuY3Rpb24odCl7dGhpcy5wYXJzZUhlYWRlcih0KSx0aGlzLmRpc3BsYXlGbGFncz10LnJlYWRVaW50MzIoKSx0aGlzLmhvcml6b250YWxfanVzdGlmaWNhdGlvbj10LnJlYWRJbnQ4KCksdGhpcy52ZXJ0aWNhbF9qdXN0aWZpY2F0aW9uPXQucmVhZEludDgoKSx0aGlzLmJnX2NvbG9yX3JnYmE9dC5yZWFkVWludDhBcnJheSg0KSx0aGlzLmJveF9yZWNvcmQ9dC5yZWFkSW50MTZBcnJheSg0KSx0aGlzLnN0eWxlX3JlY29yZD10LnJlYWRVaW50OEFycmF5KDEyKSx0aGlzLnBhcnNlRm9vdGVyKHQpfSksci5jcmVhdGVTYW1wbGVFbnRyeUN0b3Ioci5TQU1QTEVfRU5UUllfVFlQRV9NRVRBREFUQSwid3Z0dCIsZnVuY3Rpb24odCl7dGhpcy5wYXJzZUhlYWRlcih0KSx0aGlzLnBhcnNlRm9vdGVyKHQpfSksci5jcmVhdGVTYW1wbGVHcm91cEN0b3IoImFsc3QiLGZ1bmN0aW9uKHQpe3ZhciBlLHM9dC5yZWFkVWludDE2KCk7Zm9yKHRoaXMuZmlyc3Rfb3V0cHV0X3NhbXBsZT10LnJlYWRVaW50MTYoKSx0aGlzLnNhbXBsZV9vZmZzZXQ9W10sZT0wO2U8cztlKyspdGhpcy5zYW1wbGVfb2Zmc2V0W2VdPXQucmVhZFVpbnQzMigpO3ZhciBuPXRoaXMuZGVzY3JpcHRpb25fbGVuZ3RoLTQtNCpzO2Zvcih0aGlzLm51bV9vdXRwdXRfc2FtcGxlcz1bXSx0aGlzLm51bV90b3RhbF9zYW1wbGVzPVtdLGU9MDtlPG4vNDtlKyspdGhpcy5udW1fb3V0cHV0X3NhbXBsZXNbZV09dC5yZWFkVWludDE2KCksdGhpcy5udW1fdG90YWxfc2FtcGxlc1tlXT10LnJlYWRVaW50MTYoKX0pLHIuY3JlYXRlU2FtcGxlR3JvdXBDdG9yKCJhdmxsIixmdW5jdGlvbih0KXt0aGlzLmxheWVyTnVtYmVyPXQucmVhZFVpbnQ4KCksdGhpcy5hY2N1cmF0ZVN0YXRpc3RpY3NGbGFnPXQucmVhZFVpbnQ4KCksdGhpcy5hdmdCaXRSYXRlPXQucmVhZFVpbnQxNigpLHRoaXMuYXZnRnJhbWVSYXRlPXQucmVhZFVpbnQxNigpfSksci5jcmVhdGVTYW1wbGVHcm91cEN0b3IoImF2c3MiLGZ1bmN0aW9uKHQpe3RoaXMuc3ViU2VxdWVuY2VJZGVudGlmaWVyPXQucmVhZFVpbnQxNigpLHRoaXMubGF5ZXJOdW1iZXI9dC5yZWFkVWludDgoKTt2YXIgZT10LnJlYWRVaW50OCgpO3RoaXMuZHVyYXRpb25GbGFnPWU+PjcsdGhpcy5hdmdSYXRlRmxhZz1lPj42JjEsdGhpcy5kdXJhdGlvbkZsYWcmJih0aGlzLmR1cmF0aW9uPXQucmVhZFVpbnQzMigpKSx0aGlzLmF2Z1JhdGVGbGFnJiYodGhpcy5hY2N1cmF0ZVN0YXRpc3RpY3NGbGFnPXQucmVhZFVpbnQ4KCksdGhpcy5hdmdCaXRSYXRlPXQucmVhZFVpbnQxNigpLHRoaXMuYXZnRnJhbWVSYXRlPXQucmVhZFVpbnQxNigpKSx0aGlzLmRlcGVuZGVuY3k9W107Zm9yKHZhciBzPXQucmVhZFVpbnQ4KCksbj0wO248cztuKyspe3ZhciBhPXt9O3RoaXMuZGVwZW5kZW5jeS5wdXNoKGEpLGEuc3ViU2VxRGlyZWN0aW9uRmxhZz10LnJlYWRVaW50OCgpLGEubGF5ZXJOdW1iZXI9dC5yZWFkVWludDgoKSxhLnN1YlNlcXVlbmNlSWRlbnRpZmllcj10LnJlYWRVaW50MTYoKX19KSxyLmNyZWF0ZVNhbXBsZUdyb3VwQ3RvcigiZHRydCIsZnVuY3Rpb24odCl7ZC53YXJuKCJCb3hQYXJzZXIiLCJTYW1wbGUgR3JvdXAgdHlwZTogIit0aGlzLmdyb3VwaW5nX3R5cGUrIiBub3QgZnVsbHkgcGFyc2VkIil9KSxyLmNyZWF0ZVNhbXBsZUdyb3VwQ3RvcigibXZpZiIsZnVuY3Rpb24odCl7ZC53YXJuKCJCb3hQYXJzZXIiLCJTYW1wbGUgR3JvdXAgdHlwZTogIit0aGlzLmdyb3VwaW5nX3R5cGUrIiBub3QgZnVsbHkgcGFyc2VkIil9KSxyLmNyZWF0ZVNhbXBsZUdyb3VwQ3RvcigicHJvbCIsZnVuY3Rpb24odCl7dGhpcy5yb2xsX2Rpc3RhbmNlPXQucmVhZEludDE2KCl9KSxyLmNyZWF0ZVNhbXBsZUdyb3VwQ3RvcigicmFwICIsZnVuY3Rpb24odCl7dmFyIGU9dC5yZWFkVWludDgoKTt0aGlzLm51bV9sZWFkaW5nX3NhbXBsZXNfa25vd249ZT4+Nyx0aGlzLm51bV9sZWFkaW5nX3NhbXBsZXM9ZSYxMjd9KSxyLmNyZWF0ZVNhbXBsZUdyb3VwQ3RvcigicmFzaCIsZnVuY3Rpb24odCl7aWYodGhpcy5vcGVyYXRpb25fcG9pbnRfY291bnQ9dC5yZWFkVWludDE2KCksdGhpcy5kZXNjcmlwdGlvbl9sZW5ndGghPT0yKyh0aGlzLm9wZXJhdGlvbl9wb2ludF9jb3VudD09PTE/Mjp0aGlzLm9wZXJhdGlvbl9wb2ludF9jb3VudCo2KSs5KWQud2FybigiQm94UGFyc2VyIiwiTWlzbWF0Y2ggaW4gIit0aGlzLmdyb3VwaW5nX3R5cGUrIiBzYW1wbGUgZ3JvdXAgbGVuZ3RoIiksdGhpcy5kYXRhPXQucmVhZFVpbnQ4QXJyYXkodGhpcy5kZXNjcmlwdGlvbl9sZW5ndGgtMik7ZWxzZXtpZih0aGlzLm9wZXJhdGlvbl9wb2ludF9jb3VudD09PTEpdGhpcy50YXJnZXRfcmF0ZV9zaGFyZT10LnJlYWRVaW50MTYoKTtlbHNle3RoaXMudGFyZ2V0X3JhdGVfc2hhcmU9W10sdGhpcy5hdmFpbGFibGVfYml0cmF0ZT1bXTtmb3IodmFyIGU9MDtlPHRoaXMub3BlcmF0aW9uX3BvaW50X2NvdW50O2UrKyl0aGlzLmF2YWlsYWJsZV9iaXRyYXRlW2VdPXQucmVhZFVpbnQzMigpLHRoaXMudGFyZ2V0X3JhdGVfc2hhcmVbZV09dC5yZWFkVWludDE2KCl9dGhpcy5tYXhpbXVtX2JpdHJhdGU9dC5yZWFkVWludDMyKCksdGhpcy5taW5pbXVtX2JpdHJhdGU9dC5yZWFkVWludDMyKCksdGhpcy5kaXNjYXJkX3ByaW9yaXR5PXQucmVhZFVpbnQ4KCl9fSksci5jcmVhdGVTYW1wbGVHcm91cEN0b3IoInJvbGwiLGZ1bmN0aW9uKHQpe3RoaXMucm9sbF9kaXN0YW5jZT10LnJlYWRJbnQxNigpfSksci5TYW1wbGVHcm91cEVudHJ5LnByb3RvdHlwZS5wYXJzZT1mdW5jdGlvbih0KXtkLndhcm4oIkJveFBhcnNlciIsIlVua25vd24gU2FtcGxlIEdyb3VwIHR5cGU6ICIrdGhpcy5ncm91cGluZ190eXBlKSx0aGlzLmRhdGE9dC5yZWFkVWludDhBcnJheSh0aGlzLmRlc2NyaXB0aW9uX2xlbmd0aCl9LHIuY3JlYXRlU2FtcGxlR3JvdXBDdG9yKCJzY2lmIixmdW5jdGlvbih0KXtkLndhcm4oIkJveFBhcnNlciIsIlNhbXBsZSBHcm91cCB0eXBlOiAiK3RoaXMuZ3JvdXBpbmdfdHlwZSsiIG5vdCBmdWxseSBwYXJzZWQiKX0pLHIuY3JlYXRlU2FtcGxlR3JvdXBDdG9yKCJzY25tIixmdW5jdGlvbih0KXtkLndhcm4oIkJveFBhcnNlciIsIlNhbXBsZSBHcm91cCB0eXBlOiAiK3RoaXMuZ3JvdXBpbmdfdHlwZSsiIG5vdCBmdWxseSBwYXJzZWQiKX0pLHIuY3JlYXRlU2FtcGxlR3JvdXBDdG9yKCJzZWlnIixmdW5jdGlvbih0KXt0aGlzLnJlc2VydmVkPXQucmVhZFVpbnQ4KCk7dmFyIGU9dC5yZWFkVWludDgoKTt0aGlzLmNyeXB0X2J5dGVfYmxvY2s9ZT4+NCx0aGlzLnNraXBfYnl0ZV9ibG9jaz1lJjE1LHRoaXMuaXNQcm90ZWN0ZWQ9dC5yZWFkVWludDgoKSx0aGlzLlBlcl9TYW1wbGVfSVZfU2l6ZT10LnJlYWRVaW50OCgpLHRoaXMuS0lEPXIucGFyc2VIZXgxNih0KSx0aGlzLmNvbnN0YW50X0lWX3NpemU9MCx0aGlzLmNvbnN0YW50X0lWPTAsdGhpcy5pc1Byb3RlY3RlZD09PTEmJnRoaXMuUGVyX1NhbXBsZV9JVl9TaXplPT09MCYmKHRoaXMuY29uc3RhbnRfSVZfc2l6ZT10LnJlYWRVaW50OCgpLHRoaXMuY29uc3RhbnRfSVY9dC5yZWFkVWludDhBcnJheSh0aGlzLmNvbnN0YW50X0lWX3NpemUpKX0pLHIuY3JlYXRlU2FtcGxlR3JvdXBDdG9yKCJzdHNhIixmdW5jdGlvbih0KXtkLndhcm4oIkJveFBhcnNlciIsIlNhbXBsZSBHcm91cCB0eXBlOiAiK3RoaXMuZ3JvdXBpbmdfdHlwZSsiIG5vdCBmdWxseSBwYXJzZWQiKX0pLHIuY3JlYXRlU2FtcGxlR3JvdXBDdG9yKCJzeW5jIixmdW5jdGlvbih0KXt2YXIgZT10LnJlYWRVaW50OCgpO3RoaXMuTkFMX3VuaXRfdHlwZT1lJjYzfSksci5jcmVhdGVTYW1wbGVHcm91cEN0b3IoInRlbGUiLGZ1bmN0aW9uKHQpe3ZhciBlPXQucmVhZFVpbnQ4KCk7dGhpcy5sZXZlbF9pbmRlcGVuZGVudGx5X2RlY29kYWJsZT1lPj43fSksci5jcmVhdGVTYW1wbGVHcm91cEN0b3IoInRzYXMiLGZ1bmN0aW9uKHQpe2Qud2FybigiQm94UGFyc2VyIiwiU2FtcGxlIEdyb3VwIHR5cGU6ICIrdGhpcy5ncm91cGluZ190eXBlKyIgbm90IGZ1bGx5IHBhcnNlZCIpfSksci5jcmVhdGVTYW1wbGVHcm91cEN0b3IoInRzY2wiLGZ1bmN0aW9uKHQpe2Qud2FybigiQm94UGFyc2VyIiwiU2FtcGxlIEdyb3VwIHR5cGU6ICIrdGhpcy5ncm91cGluZ190eXBlKyIgbm90IGZ1bGx5IHBhcnNlZCIpfSksci5jcmVhdGVTYW1wbGVHcm91cEN0b3IoInZpcHIiLGZ1bmN0aW9uKHQpe2Qud2FybigiQm94UGFyc2VyIiwiU2FtcGxlIEdyb3VwIHR5cGU6ICIrdGhpcy5ncm91cGluZ190eXBlKyIgbm90IGZ1bGx5IHBhcnNlZCIpfSksci5jcmVhdGVGdWxsQm94Q3Rvcigic2JncCIsZnVuY3Rpb24odCl7dGhpcy5ncm91cGluZ190eXBlPXQucmVhZFN0cmluZyg0KSx0aGlzLnZlcnNpb249PT0xP3RoaXMuZ3JvdXBpbmdfdHlwZV9wYXJhbWV0ZXI9dC5yZWFkVWludDMyKCk6dGhpcy5ncm91cGluZ190eXBlX3BhcmFtZXRlcj0wLHRoaXMuZW50cmllcz1bXTtmb3IodmFyIGU9dC5yZWFkVWludDMyKCkscz0wO3M8ZTtzKyspe3ZhciBuPXt9O3RoaXMuZW50cmllcy5wdXNoKG4pLG4uc2FtcGxlX2NvdW50PXQucmVhZEludDMyKCksbi5ncm91cF9kZXNjcmlwdGlvbl9pbmRleD10LnJlYWRJbnQzMigpfX0pLHIuY3JlYXRlRnVsbEJveEN0b3IoInNjaG0iLGZ1bmN0aW9uKHQpe3RoaXMuc2NoZW1lX3R5cGU9dC5yZWFkU3RyaW5nKDQpLHRoaXMuc2NoZW1lX3ZlcnNpb249dC5yZWFkVWludDMyKCksdGhpcy5mbGFncyYxJiYodGhpcy5zY2hlbWVfdXJpPXQucmVhZFN0cmluZyh0aGlzLnNpemUtdGhpcy5oZHJfc2l6ZS04KSl9KSxyLmNyZWF0ZUJveEN0b3IoInNkcCAiLGZ1bmN0aW9uKHQpe3RoaXMuc2RwdGV4dD10LnJlYWRTdHJpbmcodGhpcy5zaXplLXRoaXMuaGRyX3NpemUpfSksci5jcmVhdGVGdWxsQm94Q3Rvcigic2R0cCIsZnVuY3Rpb24odCl7dmFyIGUscz10aGlzLnNpemUtdGhpcy5oZHJfc2l6ZTt0aGlzLmlzX2xlYWRpbmc9W10sdGhpcy5zYW1wbGVfZGVwZW5kc19vbj1bXSx0aGlzLnNhbXBsZV9pc19kZXBlbmRlZF9vbj1bXSx0aGlzLnNhbXBsZV9oYXNfcmVkdW5kYW5jeT1bXTtmb3IodmFyIG49MDtuPHM7bisrKWU9dC5yZWFkVWludDgoKSx0aGlzLmlzX2xlYWRpbmdbbl09ZT4+Nix0aGlzLnNhbXBsZV9kZXBlbmRzX29uW25dPWU+PjQmMyx0aGlzLnNhbXBsZV9pc19kZXBlbmRlZF9vbltuXT1lPj4yJjMsdGhpcy5zYW1wbGVfaGFzX3JlZHVuZGFuY3lbbl09ZSYzfSksci5jcmVhdGVGdWxsQm94Q3Rvcigic2VuYyIpLHIuY3JlYXRlRnVsbEJveEN0b3IoInNncGQiLGZ1bmN0aW9uKHQpe3RoaXMuZ3JvdXBpbmdfdHlwZT10LnJlYWRTdHJpbmcoNCksZC5kZWJ1ZygiQm94UGFyc2VyIiwiRm91bmQgU2FtcGxlIEdyb3VwcyBvZiB0eXBlICIrdGhpcy5ncm91cGluZ190eXBlKSx0aGlzLnZlcnNpb249PT0xP3RoaXMuZGVmYXVsdF9sZW5ndGg9dC5yZWFkVWludDMyKCk6dGhpcy5kZWZhdWx0X2xlbmd0aD0wLHRoaXMudmVyc2lvbj49MiYmKHRoaXMuZGVmYXVsdF9ncm91cF9kZXNjcmlwdGlvbl9pbmRleD10LnJlYWRVaW50MzIoKSksdGhpcy5lbnRyaWVzPVtdO2Zvcih2YXIgZT10LnJlYWRVaW50MzIoKSxzPTA7czxlO3MrKyl7dmFyIG47clt0aGlzLmdyb3VwaW5nX3R5cGUrIlNhbXBsZUdyb3VwRW50cnkiXT9uPW5ldyByW3RoaXMuZ3JvdXBpbmdfdHlwZSsiU2FtcGxlR3JvdXBFbnRyeSJdKHRoaXMuZ3JvdXBpbmdfdHlwZSk6bj1uZXcgci5TYW1wbGVHcm91cEVudHJ5KHRoaXMuZ3JvdXBpbmdfdHlwZSksdGhpcy5lbnRyaWVzLnB1c2gobiksdGhpcy52ZXJzaW9uPT09MT90aGlzLmRlZmF1bHRfbGVuZ3RoPT09MD9uLmRlc2NyaXB0aW9uX2xlbmd0aD10LnJlYWRVaW50MzIoKTpuLmRlc2NyaXB0aW9uX2xlbmd0aD10aGlzLmRlZmF1bHRfbGVuZ3RoOm4uZGVzY3JpcHRpb25fbGVuZ3RoPXRoaXMuZGVmYXVsdF9sZW5ndGgsbi53cml0ZT09PXIuU2FtcGxlR3JvdXBFbnRyeS5wcm90b3R5cGUud3JpdGUmJihkLmluZm8oIkJveFBhcnNlciIsIlNhbXBsZUdyb3VwIGZvciB0eXBlICIrdGhpcy5ncm91cGluZ190eXBlKyIgd3JpdGluZyBub3QgeWV0IGltcGxlbWVudGVkLCBrZWVwaW5nIHVucGFyc2VkIGRhdGEgaW4gbWVtb3J5IGZvciBsYXRlciB3cml0ZSIpLG4uZGF0YT10LnJlYWRVaW50OEFycmF5KG4uZGVzY3JpcHRpb25fbGVuZ3RoKSx0LnBvc2l0aW9uLT1uLmRlc2NyaXB0aW9uX2xlbmd0aCksbi5wYXJzZSh0KX19KSxyLmNyZWF0ZUZ1bGxCb3hDdG9yKCJzaWR4IixmdW5jdGlvbih0KXt0aGlzLnJlZmVyZW5jZV9JRD10LnJlYWRVaW50MzIoKSx0aGlzLnRpbWVzY2FsZT10LnJlYWRVaW50MzIoKSx0aGlzLnZlcnNpb249PT0wPyh0aGlzLmVhcmxpZXN0X3ByZXNlbnRhdGlvbl90aW1lPXQucmVhZFVpbnQzMigpLHRoaXMuZmlyc3Rfb2Zmc2V0PXQucmVhZFVpbnQzMigpKToodGhpcy5lYXJsaWVzdF9wcmVzZW50YXRpb25fdGltZT10LnJlYWRVaW50NjQoKSx0aGlzLmZpcnN0X29mZnNldD10LnJlYWRVaW50NjQoKSksdC5yZWFkVWludDE2KCksdGhpcy5yZWZlcmVuY2VzPVtdO2Zvcih2YXIgZT10LnJlYWRVaW50MTYoKSxzPTA7czxlO3MrKyl7dmFyIG49e307dGhpcy5yZWZlcmVuY2VzLnB1c2gobik7dmFyIGE9dC5yZWFkVWludDMyKCk7bi5yZWZlcmVuY2VfdHlwZT1hPj4zMSYxLG4ucmVmZXJlbmNlZF9zaXplPWEmMjE0NzQ4MzY0NyxuLnN1YnNlZ21lbnRfZHVyYXRpb249dC5yZWFkVWludDMyKCksYT10LnJlYWRVaW50MzIoKSxuLnN0YXJ0c193aXRoX1NBUD1hPj4zMSYxLG4uU0FQX3R5cGU9YT4+MjgmNyxuLlNBUF9kZWx0YV90aW1lPWEmMjY4NDM1NDU1fX0pLHIuU2luZ2xlSXRlbVR5cGVSZWZlcmVuY2VCb3g9ZnVuY3Rpb24odCxlLHMsbil7ci5Cb3guY2FsbCh0aGlzLHQsZSksdGhpcy5oZHJfc2l6ZT1zLHRoaXMuc3RhcnQ9bn0sci5TaW5nbGVJdGVtVHlwZVJlZmVyZW5jZUJveC5wcm90b3R5cGU9bmV3IHIuQm94LHIuU2luZ2xlSXRlbVR5cGVSZWZlcmVuY2VCb3gucHJvdG90eXBlLnBhcnNlPWZ1bmN0aW9uKHQpe3RoaXMuZnJvbV9pdGVtX0lEPXQucmVhZFVpbnQxNigpO3ZhciBlPXQucmVhZFVpbnQxNigpO3RoaXMucmVmZXJlbmNlcz1bXTtmb3IodmFyIHM9MDtzPGU7cysrKXRoaXMucmVmZXJlbmNlc1tzXT17fSx0aGlzLnJlZmVyZW5jZXNbc10udG9faXRlbV9JRD10LnJlYWRVaW50MTYoKX0sci5TaW5nbGVJdGVtVHlwZVJlZmVyZW5jZUJveExhcmdlPWZ1bmN0aW9uKHQsZSxzLG4pe3IuQm94LmNhbGwodGhpcyx0LGUpLHRoaXMuaGRyX3NpemU9cyx0aGlzLnN0YXJ0PW59LHIuU2luZ2xlSXRlbVR5cGVSZWZlcmVuY2VCb3hMYXJnZS5wcm90b3R5cGU9bmV3IHIuQm94LHIuU2luZ2xlSXRlbVR5cGVSZWZlcmVuY2VCb3hMYXJnZS5wcm90b3R5cGUucGFyc2U9ZnVuY3Rpb24odCl7dGhpcy5mcm9tX2l0ZW1fSUQ9dC5yZWFkVWludDMyKCk7dmFyIGU9dC5yZWFkVWludDE2KCk7dGhpcy5yZWZlcmVuY2VzPVtdO2Zvcih2YXIgcz0wO3M8ZTtzKyspdGhpcy5yZWZlcmVuY2VzW3NdPXt9LHRoaXMucmVmZXJlbmNlc1tzXS50b19pdGVtX0lEPXQucmVhZFVpbnQzMigpfSxyLmNyZWF0ZUZ1bGxCb3hDdG9yKCJTbURtIixmdW5jdGlvbih0KXt0aGlzLnByaW1hcnlSQ2hyb21hdGljaXR5X3g9dC5yZWFkVWludDE2KCksdGhpcy5wcmltYXJ5UkNocm9tYXRpY2l0eV95PXQucmVhZFVpbnQxNigpLHRoaXMucHJpbWFyeUdDaHJvbWF0aWNpdHlfeD10LnJlYWRVaW50MTYoKSx0aGlzLnByaW1hcnlHQ2hyb21hdGljaXR5X3k9dC5yZWFkVWludDE2KCksdGhpcy5wcmltYXJ5QkNocm9tYXRpY2l0eV94PXQucmVhZFVpbnQxNigpLHRoaXMucHJpbWFyeUJDaHJvbWF0aWNpdHlfeT10LnJlYWRVaW50MTYoKSx0aGlzLndoaXRlUG9pbnRDaHJvbWF0aWNpdHlfeD10LnJlYWRVaW50MTYoKSx0aGlzLndoaXRlUG9pbnRDaHJvbWF0aWNpdHlfeT10LnJlYWRVaW50MTYoKSx0aGlzLmx1bWluYW5jZU1heD10LnJlYWRVaW50MzIoKSx0aGlzLmx1bWluYW5jZU1pbj10LnJlYWRVaW50MzIoKX0pLHIuY3JlYXRlRnVsbEJveEN0b3IoInNtaGQiLGZ1bmN0aW9uKHQpe3RoaXMuYmFsYW5jZT10LnJlYWRVaW50MTYoKSx0LnJlYWRVaW50MTYoKX0pLHIuY3JlYXRlRnVsbEJveEN0b3IoInNzaXgiLGZ1bmN0aW9uKHQpe3RoaXMuc3Vic2VnbWVudHM9W107Zm9yKHZhciBlPXQucmVhZFVpbnQzMigpLHM9MDtzPGU7cysrKXt2YXIgbj17fTt0aGlzLnN1YnNlZ21lbnRzLnB1c2gobiksbi5yYW5nZXM9W107Zm9yKHZhciBhPXQucmVhZFVpbnQzMigpLG89MDtvPGE7bysrKXt2YXIgaD17fTtuLnJhbmdlcy5wdXNoKGgpLGgubGV2ZWw9dC5yZWFkVWludDgoKSxoLnJhbmdlX3NpemU9dC5yZWFkVWludDI0KCl9fX0pLHIuY3JlYXRlRnVsbEJveEN0b3IoInN0Y28iLGZ1bmN0aW9uKHQpe3ZhciBlO2lmKGU9dC5yZWFkVWludDMyKCksdGhpcy5jaHVua19vZmZzZXRzPVtdLHRoaXMudmVyc2lvbj09PTApZm9yKHZhciBzPTA7czxlO3MrKyl0aGlzLmNodW5rX29mZnNldHMucHVzaCh0LnJlYWRVaW50MzIoKSl9KSxyLmNyZWF0ZUZ1bGxCb3hDdG9yKCJzdGRwIixmdW5jdGlvbih0KXt2YXIgZT0odGhpcy5zaXplLXRoaXMuaGRyX3NpemUpLzI7dGhpcy5wcmlvcml0eT1bXTtmb3IodmFyIHM9MDtzPGU7cysrKXRoaXMucHJpb3JpdHlbc109dC5yZWFkVWludDE2KCl9KSxyLmNyZWF0ZUZ1bGxCb3hDdG9yKCJzdGhkIiksci5jcmVhdGVGdWxsQm94Q3Rvcigic3RyaSIsZnVuY3Rpb24odCl7dGhpcy5zd2l0Y2hfZ3JvdXA9dC5yZWFkVWludDE2KCksdGhpcy5hbHRlcm5hdGVfZ3JvdXA9dC5yZWFkVWludDE2KCksdGhpcy5zdWJfdHJhY2tfaWQ9dC5yZWFkVWludDMyKCk7dmFyIGU9KHRoaXMuc2l6ZS10aGlzLmhkcl9zaXplLTgpLzQ7dGhpcy5hdHRyaWJ1dGVfbGlzdD1bXTtmb3IodmFyIHM9MDtzPGU7cysrKXRoaXMuYXR0cmlidXRlX2xpc3Rbc109dC5yZWFkVWludDMyKCl9KSxyLmNyZWF0ZUZ1bGxCb3hDdG9yKCJzdHNjIixmdW5jdGlvbih0KXt2YXIgZSxzO2lmKGU9dC5yZWFkVWludDMyKCksdGhpcy5maXJzdF9jaHVuaz1bXSx0aGlzLnNhbXBsZXNfcGVyX2NodW5rPVtdLHRoaXMuc2FtcGxlX2Rlc2NyaXB0aW9uX2luZGV4PVtdLHRoaXMudmVyc2lvbj09PTApZm9yKHM9MDtzPGU7cysrKXRoaXMuZmlyc3RfY2h1bmsucHVzaCh0LnJlYWRVaW50MzIoKSksdGhpcy5zYW1wbGVzX3Blcl9jaHVuay5wdXNoKHQucmVhZFVpbnQzMigpKSx0aGlzLnNhbXBsZV9kZXNjcmlwdGlvbl9pbmRleC5wdXNoKHQucmVhZFVpbnQzMigpKX0pLHIuY3JlYXRlRnVsbEJveEN0b3IoInN0c2QiLGZ1bmN0aW9uKHQpe3ZhciBlLHMsbixhO2Zvcih0aGlzLmVudHJpZXM9W10sbj10LnJlYWRVaW50MzIoKSxlPTE7ZTw9bjtlKyspaWYocz1yLnBhcnNlT25lQm94KHQsITAsdGhpcy5zaXplLSh0LmdldFBvc2l0aW9uKCktdGhpcy5zdGFydCkpLHMuY29kZT09PXIuT0spcltzLnR5cGUrIlNhbXBsZUVudHJ5Il0/KGE9bmV3IHJbcy50eXBlKyJTYW1wbGVFbnRyeSJdKHMuc2l6ZSksYS5oZHJfc2l6ZT1zLmhkcl9zaXplLGEuc3RhcnQ9cy5zdGFydCk6KGQud2FybigiQm94UGFyc2VyIiwiVW5rbm93biBzYW1wbGUgZW50cnkgdHlwZTogIitzLnR5cGUpLGE9bmV3IHIuU2FtcGxlRW50cnkocy50eXBlLHMuc2l6ZSxzLmhkcl9zaXplLHMuc3RhcnQpKSxhLndyaXRlPT09ci5TYW1wbGVFbnRyeS5wcm90b3R5cGUud3JpdGUmJihkLmluZm8oIkJveFBhcnNlciIsIlNhbXBsZUVudHJ5ICIrYS50eXBlKyIgYm94IHdyaXRpbmcgbm90IHlldCBpbXBsZW1lbnRlZCwga2VlcGluZyB1bnBhcnNlZCBkYXRhIGluIG1lbW9yeSBmb3IgbGF0ZXIgd3JpdGUiKSxhLnBhcnNlRGF0YUFuZFJld2luZCh0KSksYS5wYXJzZSh0KSx0aGlzLmVudHJpZXMucHVzaChhKTtlbHNlIHJldHVybn0pLHIuY3JlYXRlRnVsbEJveEN0b3IoInN0c2ciLGZ1bmN0aW9uKHQpe3RoaXMuZ3JvdXBpbmdfdHlwZT10LnJlYWRVaW50MzIoKTt2YXIgZT10LnJlYWRVaW50MTYoKTt0aGlzLmdyb3VwX2Rlc2NyaXB0aW9uX2luZGV4PVtdO2Zvcih2YXIgcz0wO3M8ZTtzKyspdGhpcy5ncm91cF9kZXNjcmlwdGlvbl9pbmRleFtzXT10LnJlYWRVaW50MzIoKX0pLHIuY3JlYXRlRnVsbEJveEN0b3IoInN0c2giLGZ1bmN0aW9uKHQpe3ZhciBlLHM7aWYoZT10LnJlYWRVaW50MzIoKSx0aGlzLnNoYWRvd2VkX3NhbXBsZV9udW1iZXJzPVtdLHRoaXMuc3luY19zYW1wbGVfbnVtYmVycz1bXSx0aGlzLnZlcnNpb249PT0wKWZvcihzPTA7czxlO3MrKyl0aGlzLnNoYWRvd2VkX3NhbXBsZV9udW1iZXJzLnB1c2godC5yZWFkVWludDMyKCkpLHRoaXMuc3luY19zYW1wbGVfbnVtYmVycy5wdXNoKHQucmVhZFVpbnQzMigpKX0pLHIuY3JlYXRlRnVsbEJveEN0b3IoInN0c3MiLGZ1bmN0aW9uKHQpe3ZhciBlLHM7aWYocz10LnJlYWRVaW50MzIoKSx0aGlzLnZlcnNpb249PT0wKWZvcih0aGlzLnNhbXBsZV9udW1iZXJzPVtdLGU9MDtlPHM7ZSsrKXRoaXMuc2FtcGxlX251bWJlcnMucHVzaCh0LnJlYWRVaW50MzIoKSl9KSxyLmNyZWF0ZUZ1bGxCb3hDdG9yKCJzdHN6IixmdW5jdGlvbih0KXt2YXIgZTtpZih0aGlzLnNhbXBsZV9zaXplcz1bXSx0aGlzLnZlcnNpb249PT0wKWZvcih0aGlzLnNhbXBsZV9zaXplPXQucmVhZFVpbnQzMigpLHRoaXMuc2FtcGxlX2NvdW50PXQucmVhZFVpbnQzMigpLGU9MDtlPHRoaXMuc2FtcGxlX2NvdW50O2UrKyl0aGlzLnNhbXBsZV9zaXplPT09MD90aGlzLnNhbXBsZV9zaXplcy5wdXNoKHQucmVhZFVpbnQzMigpKTp0aGlzLnNhbXBsZV9zaXplc1tlXT10aGlzLnNhbXBsZV9zaXplfSksci5jcmVhdGVGdWxsQm94Q3Rvcigic3R0cyIsZnVuY3Rpb24odCl7dmFyIGUscyxuO2lmKGU9dC5yZWFkVWludDMyKCksdGhpcy5zYW1wbGVfY291bnRzPVtdLHRoaXMuc2FtcGxlX2RlbHRhcz1bXSx0aGlzLnZlcnNpb249PT0wKWZvcihzPTA7czxlO3MrKyl0aGlzLnNhbXBsZV9jb3VudHMucHVzaCh0LnJlYWRVaW50MzIoKSksbj10LnJlYWRJbnQzMigpLG48MCYmKGQud2FybigiQm94UGFyc2VyIiwiRmlsZSB1c2VzIG5lZ2F0aXZlIHN0dHMgc2FtcGxlIGRlbHRhLCB1c2luZyB2YWx1ZSAxIGluc3RlYWQsIHN5bmMgbWF5IGJlIGxvc3QhIiksbj0xKSx0aGlzLnNhbXBsZV9kZWx0YXMucHVzaChuKX0pLHIuY3JlYXRlRnVsbEJveEN0b3IoInN0dmkiLGZ1bmN0aW9uKHQpe3ZhciBlPXQucmVhZFVpbnQzMigpO3RoaXMuc2luZ2xlX3ZpZXdfYWxsb3dlZD1lJjMsdGhpcy5zdGVyZW9fc2NoZW1lPXQucmVhZFVpbnQzMigpO3ZhciBzPXQucmVhZFVpbnQzMigpO3RoaXMuc3RlcmVvX2luZGljYXRpb25fdHlwZT10LnJlYWRTdHJpbmcocyk7dmFyIG4sYTtmb3IodGhpcy5ib3hlcz1bXTt0LmdldFBvc2l0aW9uKCk8dGhpcy5zdGFydCt0aGlzLnNpemU7KWlmKG49ci5wYXJzZU9uZUJveCh0LCExLHRoaXMuc2l6ZS0odC5nZXRQb3NpdGlvbigpLXRoaXMuc3RhcnQpKSxuLmNvZGU9PT1yLk9LKWE9bi5ib3gsdGhpcy5ib3hlcy5wdXNoKGEpLHRoaXNbYS50eXBlXT1hO2Vsc2UgcmV0dXJufSksci5jcmVhdGVCb3hDdG9yKCJzdHlwIixmdW5jdGlvbih0KXtyLmZ0eXBCb3gucHJvdG90eXBlLnBhcnNlLmNhbGwodGhpcyx0KX0pLHIuY3JlYXRlRnVsbEJveEN0b3IoInN0ejIiLGZ1bmN0aW9uKHQpe3ZhciBlLHM7aWYodGhpcy5zYW1wbGVfc2l6ZXM9W10sdGhpcy52ZXJzaW9uPT09MClpZih0aGlzLnJlc2VydmVkPXQucmVhZFVpbnQyNCgpLHRoaXMuZmllbGRfc2l6ZT10LnJlYWRVaW50OCgpLHM9dC5yZWFkVWludDMyKCksdGhpcy5maWVsZF9zaXplPT09NClmb3IoZT0wO2U8cztlKz0yKXt2YXIgbj10LnJlYWRVaW50OCgpO3RoaXMuc2FtcGxlX3NpemVzW2VdPW4+PjQmMTUsdGhpcy5zYW1wbGVfc2l6ZXNbZSsxXT1uJjE1fWVsc2UgaWYodGhpcy5maWVsZF9zaXplPT09OClmb3IoZT0wO2U8cztlKyspdGhpcy5zYW1wbGVfc2l6ZXNbZV09dC5yZWFkVWludDgoKTtlbHNlIGlmKHRoaXMuZmllbGRfc2l6ZT09PTE2KWZvcihlPTA7ZTxzO2UrKyl0aGlzLnNhbXBsZV9zaXplc1tlXT10LnJlYWRVaW50MTYoKTtlbHNlIGQuZXJyb3IoIkJveFBhcnNlciIsIkVycm9yIGluIGxlbmd0aCBmaWVsZCBpbiBzdHoyIGJveCIpfSksci5jcmVhdGVGdWxsQm94Q3Rvcigic3VicyIsZnVuY3Rpb24odCl7dmFyIGUscyxuLGE7Zm9yKG49dC5yZWFkVWludDMyKCksdGhpcy5lbnRyaWVzPVtdLGU9MDtlPG47ZSsrKXt2YXIgbz17fTtpZih0aGlzLmVudHJpZXNbZV09byxvLnNhbXBsZV9kZWx0YT10LnJlYWRVaW50MzIoKSxvLnN1YnNhbXBsZXM9W10sYT10LnJlYWRVaW50MTYoKSxhPjApZm9yKHM9MDtzPGE7cysrKXt2YXIgaD17fTtvLnN1YnNhbXBsZXMucHVzaChoKSx0aGlzLnZlcnNpb249PTE/aC5zaXplPXQucmVhZFVpbnQzMigpOmguc2l6ZT10LnJlYWRVaW50MTYoKSxoLnByaW9yaXR5PXQucmVhZFVpbnQ4KCksaC5kaXNjYXJkYWJsZT10LnJlYWRVaW50OCgpLGguY29kZWNfc3BlY2lmaWNfcGFyYW1ldGVycz10LnJlYWRVaW50MzIoKX19fSksci5jcmVhdGVGdWxsQm94Q3RvcigidGVuYyIsZnVuY3Rpb24odCl7aWYodC5yZWFkVWludDgoKSx0aGlzLnZlcnNpb249PT0wKXQucmVhZFVpbnQ4KCk7ZWxzZXt2YXIgZT10LnJlYWRVaW50OCgpO3RoaXMuZGVmYXVsdF9jcnlwdF9ieXRlX2Jsb2NrPWU+PjQmMTUsdGhpcy5kZWZhdWx0X3NraXBfYnl0ZV9ibG9jaz1lJjE1fXRoaXMuZGVmYXVsdF9pc1Byb3RlY3RlZD10LnJlYWRVaW50OCgpLHRoaXMuZGVmYXVsdF9QZXJfU2FtcGxlX0lWX1NpemU9dC5yZWFkVWludDgoKSx0aGlzLmRlZmF1bHRfS0lEPXIucGFyc2VIZXgxNih0KSx0aGlzLmRlZmF1bHRfaXNQcm90ZWN0ZWQ9PT0xJiZ0aGlzLmRlZmF1bHRfUGVyX1NhbXBsZV9JVl9TaXplPT09MCYmKHRoaXMuZGVmYXVsdF9jb25zdGFudF9JVl9zaXplPXQucmVhZFVpbnQ4KCksdGhpcy5kZWZhdWx0X2NvbnN0YW50X0lWPXQucmVhZFVpbnQ4QXJyYXkodGhpcy5kZWZhdWx0X2NvbnN0YW50X0lWX3NpemUpKX0pLHIuY3JlYXRlRnVsbEJveEN0b3IoInRmZHQiLGZ1bmN0aW9uKHQpe3RoaXMudmVyc2lvbj09MT90aGlzLmJhc2VNZWRpYURlY29kZVRpbWU9dC5yZWFkVWludDY0KCk6dGhpcy5iYXNlTWVkaWFEZWNvZGVUaW1lPXQucmVhZFVpbnQzMigpfSksci5jcmVhdGVGdWxsQm94Q3RvcigidGZoZCIsZnVuY3Rpb24odCl7dmFyIGU9MDt0aGlzLnRyYWNrX2lkPXQucmVhZFVpbnQzMigpLHRoaXMuc2l6ZS10aGlzLmhkcl9zaXplPmUmJnRoaXMuZmxhZ3Mmci5URkhEX0ZMQUdfQkFTRV9EQVRBX09GRlNFVD8odGhpcy5iYXNlX2RhdGFfb2Zmc2V0PXQucmVhZFVpbnQ2NCgpLGUrPTgpOnRoaXMuYmFzZV9kYXRhX29mZnNldD0wLHRoaXMuc2l6ZS10aGlzLmhkcl9zaXplPmUmJnRoaXMuZmxhZ3Mmci5URkhEX0ZMQUdfU0FNUExFX0RFU0M/KHRoaXMuZGVmYXVsdF9zYW1wbGVfZGVzY3JpcHRpb25faW5kZXg9dC5yZWFkVWludDMyKCksZSs9NCk6dGhpcy5kZWZhdWx0X3NhbXBsZV9kZXNjcmlwdGlvbl9pbmRleD0wLHRoaXMuc2l6ZS10aGlzLmhkcl9zaXplPmUmJnRoaXMuZmxhZ3Mmci5URkhEX0ZMQUdfU0FNUExFX0RVUj8odGhpcy5kZWZhdWx0X3NhbXBsZV9kdXJhdGlvbj10LnJlYWRVaW50MzIoKSxlKz00KTp0aGlzLmRlZmF1bHRfc2FtcGxlX2R1cmF0aW9uPTAsdGhpcy5zaXplLXRoaXMuaGRyX3NpemU+ZSYmdGhpcy5mbGFncyZyLlRGSERfRkxBR19TQU1QTEVfU0laRT8odGhpcy5kZWZhdWx0X3NhbXBsZV9zaXplPXQucmVhZFVpbnQzMigpLGUrPTQpOnRoaXMuZGVmYXVsdF9zYW1wbGVfc2l6ZT0wLHRoaXMuc2l6ZS10aGlzLmhkcl9zaXplPmUmJnRoaXMuZmxhZ3Mmci5URkhEX0ZMQUdfU0FNUExFX0ZMQUdTPyh0aGlzLmRlZmF1bHRfc2FtcGxlX2ZsYWdzPXQucmVhZFVpbnQzMigpLGUrPTQpOnRoaXMuZGVmYXVsdF9zYW1wbGVfZmxhZ3M9MH0pLHIuY3JlYXRlRnVsbEJveEN0b3IoInRmcmEiLGZ1bmN0aW9uKHQpe3RoaXMudHJhY2tfSUQ9dC5yZWFkVWludDMyKCksdC5yZWFkVWludDI0KCk7dmFyIGU9dC5yZWFkVWludDgoKTt0aGlzLmxlbmd0aF9zaXplX29mX3RyYWZfbnVtPWU+PjQmMyx0aGlzLmxlbmd0aF9zaXplX29mX3RydW5fbnVtPWU+PjImMyx0aGlzLmxlbmd0aF9zaXplX29mX3NhbXBsZV9udW09ZSYzLHRoaXMuZW50cmllcz1bXTtmb3IodmFyIHM9dC5yZWFkVWludDMyKCksbj0wO248cztuKyspdGhpcy52ZXJzaW9uPT09MT8odGhpcy50aW1lPXQucmVhZFVpbnQ2NCgpLHRoaXMubW9vZl9vZmZzZXQ9dC5yZWFkVWludDY0KCkpOih0aGlzLnRpbWU9dC5yZWFkVWludDMyKCksdGhpcy5tb29mX29mZnNldD10LnJlYWRVaW50MzIoKSksdGhpcy50cmFmX251bWJlcj10WyJyZWFkVWludCIrOCoodGhpcy5sZW5ndGhfc2l6ZV9vZl90cmFmX251bSsxKV0oKSx0aGlzLnRydW5fbnVtYmVyPXRbInJlYWRVaW50Iis4Kih0aGlzLmxlbmd0aF9zaXplX29mX3RydW5fbnVtKzEpXSgpLHRoaXMuc2FtcGxlX251bWJlcj10WyJyZWFkVWludCIrOCoodGhpcy5sZW5ndGhfc2l6ZV9vZl9zYW1wbGVfbnVtKzEpXSgpfSksci5jcmVhdGVGdWxsQm94Q3RvcigidGtoZCIsZnVuY3Rpb24odCl7dGhpcy52ZXJzaW9uPT0xPyh0aGlzLmNyZWF0aW9uX3RpbWU9dC5yZWFkVWludDY0KCksdGhpcy5tb2RpZmljYXRpb25fdGltZT10LnJlYWRVaW50NjQoKSx0aGlzLnRyYWNrX2lkPXQucmVhZFVpbnQzMigpLHQucmVhZFVpbnQzMigpLHRoaXMuZHVyYXRpb249dC5yZWFkVWludDY0KCkpOih0aGlzLmNyZWF0aW9uX3RpbWU9dC5yZWFkVWludDMyKCksdGhpcy5tb2RpZmljYXRpb25fdGltZT10LnJlYWRVaW50MzIoKSx0aGlzLnRyYWNrX2lkPXQucmVhZFVpbnQzMigpLHQucmVhZFVpbnQzMigpLHRoaXMuZHVyYXRpb249dC5yZWFkVWludDMyKCkpLHQucmVhZFVpbnQzMkFycmF5KDIpLHRoaXMubGF5ZXI9dC5yZWFkSW50MTYoKSx0aGlzLmFsdGVybmF0ZV9ncm91cD10LnJlYWRJbnQxNigpLHRoaXMudm9sdW1lPXQucmVhZEludDE2KCk+PjgsdC5yZWFkVWludDE2KCksdGhpcy5tYXRyaXg9dC5yZWFkSW50MzJBcnJheSg5KSx0aGlzLndpZHRoPXQucmVhZFVpbnQzMigpLHRoaXMuaGVpZ2h0PXQucmVhZFVpbnQzMigpfSksci5jcmVhdGVCb3hDdG9yKCJ0bWF4IixmdW5jdGlvbih0KXt0aGlzLnRpbWU9dC5yZWFkVWludDMyKCl9KSxyLmNyZWF0ZUJveEN0b3IoInRtaW4iLGZ1bmN0aW9uKHQpe3RoaXMudGltZT10LnJlYWRVaW50MzIoKX0pLHIuY3JlYXRlQm94Q3RvcigidG90bCIsZnVuY3Rpb24odCl7dGhpcy5ieXRlc3NlbnQ9dC5yZWFkVWludDMyKCl9KSxyLmNyZWF0ZUJveEN0b3IoInRwYXkiLGZ1bmN0aW9uKHQpe3RoaXMuYnl0ZXNzZW50PXQucmVhZFVpbnQzMigpfSksci5jcmVhdGVCb3hDdG9yKCJ0cHlsIixmdW5jdGlvbih0KXt0aGlzLmJ5dGVzc2VudD10LnJlYWRVaW50NjQoKX0pLHIuVHJhY2tHcm91cFR5cGVCb3gucHJvdG90eXBlLnBhcnNlPWZ1bmN0aW9uKHQpe3RoaXMucGFyc2VGdWxsSGVhZGVyKHQpLHRoaXMudHJhY2tfZ3JvdXBfaWQ9dC5yZWFkVWludDMyKCl9LHIuY3JlYXRlVHJhY2tHcm91cEN0b3IoIm1zcmMiKSxyLlRyYWNrUmVmZXJlbmNlVHlwZUJveD1mdW5jdGlvbih0LGUscyxuKXtyLkJveC5jYWxsKHRoaXMsdCxlKSx0aGlzLmhkcl9zaXplPXMsdGhpcy5zdGFydD1ufSxyLlRyYWNrUmVmZXJlbmNlVHlwZUJveC5wcm90b3R5cGU9bmV3IHIuQm94LHIuVHJhY2tSZWZlcmVuY2VUeXBlQm94LnByb3RvdHlwZS5wYXJzZT1mdW5jdGlvbih0KXt0aGlzLnRyYWNrX2lkcz10LnJlYWRVaW50MzJBcnJheSgodGhpcy5zaXplLXRoaXMuaGRyX3NpemUpLzQpfSxyLnRyZWZCb3gucHJvdG90eXBlLnBhcnNlPWZ1bmN0aW9uKHQpe2Zvcih2YXIgZSxzO3QuZ2V0UG9zaXRpb24oKTx0aGlzLnN0YXJ0K3RoaXMuc2l6ZTspaWYoZT1yLnBhcnNlT25lQm94KHQsITAsdGhpcy5zaXplLSh0LmdldFBvc2l0aW9uKCktdGhpcy5zdGFydCkpLGUuY29kZT09PXIuT0spcz1uZXcgci5UcmFja1JlZmVyZW5jZVR5cGVCb3goZS50eXBlLGUuc2l6ZSxlLmhkcl9zaXplLGUuc3RhcnQpLHMud3JpdGU9PT1yLkJveC5wcm90b3R5cGUud3JpdGUmJnMudHlwZSE9PSJtZGF0IiYmKGQuaW5mbygiQm94UGFyc2VyIiwiVHJhY2tSZWZlcmVuY2UgIitzLnR5cGUrIiBib3ggd3JpdGluZyBub3QgeWV0IGltcGxlbWVudGVkLCBrZWVwaW5nIHVucGFyc2VkIGRhdGEgaW4gbWVtb3J5IGZvciBsYXRlciB3cml0ZSIpLHMucGFyc2VEYXRhQW5kUmV3aW5kKHQpKSxzLnBhcnNlKHQpLHRoaXMuYm94ZXMucHVzaChzKTtlbHNlIHJldHVybn0sci5jcmVhdGVGdWxsQm94Q3RvcigidHJlcCIsZnVuY3Rpb24odCl7Zm9yKHRoaXMudHJhY2tfSUQ9dC5yZWFkVWludDMyKCksdGhpcy5ib3hlcz1bXTt0LmdldFBvc2l0aW9uKCk8dGhpcy5zdGFydCt0aGlzLnNpemU7KWlmKHJldD1yLnBhcnNlT25lQm94KHQsITEsdGhpcy5zaXplLSh0LmdldFBvc2l0aW9uKCktdGhpcy5zdGFydCkpLHJldC5jb2RlPT09ci5PSylib3g9cmV0LmJveCx0aGlzLmJveGVzLnB1c2goYm94KTtlbHNlIHJldHVybn0pLHIuY3JlYXRlRnVsbEJveEN0b3IoInRyZXgiLGZ1bmN0aW9uKHQpe3RoaXMudHJhY2tfaWQ9dC5yZWFkVWludDMyKCksdGhpcy5kZWZhdWx0X3NhbXBsZV9kZXNjcmlwdGlvbl9pbmRleD10LnJlYWRVaW50MzIoKSx0aGlzLmRlZmF1bHRfc2FtcGxlX2R1cmF0aW9uPXQucmVhZFVpbnQzMigpLHRoaXMuZGVmYXVsdF9zYW1wbGVfc2l6ZT10LnJlYWRVaW50MzIoKSx0aGlzLmRlZmF1bHRfc2FtcGxlX2ZsYWdzPXQucmVhZFVpbnQzMigpfSksci5jcmVhdGVCb3hDdG9yKCJ0cnB5IixmdW5jdGlvbih0KXt0aGlzLmJ5dGVzc2VudD10LnJlYWRVaW50NjQoKX0pLHIuY3JlYXRlRnVsbEJveEN0b3IoInRydW4iLGZ1bmN0aW9uKHQpe3ZhciBlPTA7aWYodGhpcy5zYW1wbGVfY291bnQ9dC5yZWFkVWludDMyKCksZSs9NCx0aGlzLnNpemUtdGhpcy5oZHJfc2l6ZT5lJiZ0aGlzLmZsYWdzJnIuVFJVTl9GTEFHU19EQVRBX09GRlNFVD8odGhpcy5kYXRhX29mZnNldD10LnJlYWRJbnQzMigpLGUrPTQpOnRoaXMuZGF0YV9vZmZzZXQ9MCx0aGlzLnNpemUtdGhpcy5oZHJfc2l6ZT5lJiZ0aGlzLmZsYWdzJnIuVFJVTl9GTEFHU19GSVJTVF9GTEFHPyh0aGlzLmZpcnN0X3NhbXBsZV9mbGFncz10LnJlYWRVaW50MzIoKSxlKz00KTp0aGlzLmZpcnN0X3NhbXBsZV9mbGFncz0wLHRoaXMuc2FtcGxlX2R1cmF0aW9uPVtdLHRoaXMuc2FtcGxlX3NpemU9W10sdGhpcy5zYW1wbGVfZmxhZ3M9W10sdGhpcy5zYW1wbGVfY29tcG9zaXRpb25fdGltZV9vZmZzZXQ9W10sdGhpcy5zaXplLXRoaXMuaGRyX3NpemU+ZSlmb3IodmFyIHM9MDtzPHRoaXMuc2FtcGxlX2NvdW50O3MrKyl0aGlzLmZsYWdzJnIuVFJVTl9GTEFHU19EVVJBVElPTiYmKHRoaXMuc2FtcGxlX2R1cmF0aW9uW3NdPXQucmVhZFVpbnQzMigpKSx0aGlzLmZsYWdzJnIuVFJVTl9GTEFHU19TSVpFJiYodGhpcy5zYW1wbGVfc2l6ZVtzXT10LnJlYWRVaW50MzIoKSksdGhpcy5mbGFncyZyLlRSVU5fRkxBR1NfRkxBR1MmJih0aGlzLnNhbXBsZV9mbGFnc1tzXT10LnJlYWRVaW50MzIoKSksdGhpcy5mbGFncyZyLlRSVU5fRkxBR1NfQ1RTX09GRlNFVCYmKHRoaXMudmVyc2lvbj09PTA/dGhpcy5zYW1wbGVfY29tcG9zaXRpb25fdGltZV9vZmZzZXRbc109dC5yZWFkVWludDMyKCk6dGhpcy5zYW1wbGVfY29tcG9zaXRpb25fdGltZV9vZmZzZXRbc109dC5yZWFkSW50MzIoKSl9KSxyLmNyZWF0ZUZ1bGxCb3hDdG9yKCJ0c2VsIixmdW5jdGlvbih0KXt0aGlzLnN3aXRjaF9ncm91cD10LnJlYWRVaW50MzIoKTt2YXIgZT0odGhpcy5zaXplLXRoaXMuaGRyX3NpemUtNCkvNDt0aGlzLmF0dHJpYnV0ZV9saXN0PVtdO2Zvcih2YXIgcz0wO3M8ZTtzKyspdGhpcy5hdHRyaWJ1dGVfbGlzdFtzXT10LnJlYWRVaW50MzIoKX0pLHIuY3JlYXRlRnVsbEJveEN0b3IoInR4dEMiLGZ1bmN0aW9uKHQpe3RoaXMuY29uZmlnPXQucmVhZENTdHJpbmcoKX0pLHIuY3JlYXRlQm94Q3RvcigidHljbyIsZnVuY3Rpb24odCl7dmFyIGU9KHRoaXMuc2l6ZS10aGlzLmhkcl9zaXplKS80O3RoaXMuY29tcGF0aWJsZV9icmFuZHM9W107Zm9yKHZhciBzPTA7czxlO3MrKyl0aGlzLmNvbXBhdGlibGVfYnJhbmRzW3NdPXQucmVhZFN0cmluZyg0KX0pLHIuY3JlYXRlRnVsbEJveEN0b3IoInVkZXMiLGZ1bmN0aW9uKHQpe3RoaXMubGFuZz10LnJlYWRDU3RyaW5nKCksdGhpcy5uYW1lPXQucmVhZENTdHJpbmcoKSx0aGlzLmRlc2NyaXB0aW9uPXQucmVhZENTdHJpbmcoKSx0aGlzLnRhZ3M9dC5yZWFkQ1N0cmluZygpfSksci5jcmVhdGVGdWxsQm94Q3RvcigidW5jQyIsZnVuY3Rpb24odCl7dmFyIGU7Zm9yKHRoaXMucHJvZmlsZT10LnJlYWRVaW50MzIoKSx0aGlzLmNvbXBvbmVudF9jb3VudD10LnJlYWRVaW50MTYoKSx0aGlzLmNvbXBvbmVudF9pbmRleD1bXSx0aGlzLmNvbXBvbmVudF9iaXRfZGVwdGhfbWludXNfb25lPVtdLHRoaXMuY29tcG9uZW50X2Zvcm1hdD1bXSx0aGlzLmNvbXBvbmVudF9hbGlnbl9zaXplPVtdLGU9MDtlPHRoaXMuY29tcG9uZW50X2NvdW50O2UrKyl0aGlzLmNvbXBvbmVudF9pbmRleC5wdXNoKHQucmVhZFVpbnQxNigpKSx0aGlzLmNvbXBvbmVudF9iaXRfZGVwdGhfbWludXNfb25lLnB1c2godC5yZWFkVWludDgoKSksdGhpcy5jb21wb25lbnRfZm9ybWF0LnB1c2godC5yZWFkVWludDgoKSksdGhpcy5jb21wb25lbnRfYWxpZ25fc2l6ZS5wdXNoKHQucmVhZFVpbnQ4KCkpO3RoaXMuc2FtcGxpbmdfdHlwZT10LnJlYWRVaW50OCgpLHRoaXMuaW50ZXJsZWF2ZV90eXBlPXQucmVhZFVpbnQ4KCksdGhpcy5ibG9ja19zaXplPXQucmVhZFVpbnQ4KCk7dmFyIHM9dC5yZWFkVWludDgoKTt0aGlzLmNvbXBvbmVudF9saXR0bGVfZW5kaWFuPXM+PjcmMSx0aGlzLmJsb2NrX3BhZF9sc2I9cz4+NiYxLHRoaXMuYmxvY2tfbGl0dGxlX2VuZGlhbj1zPj41JjEsdGhpcy5ibG9ja19yZXZlcnNlZD1zPj40JjEsdGhpcy5wYWRfdW5rbm93bj1zPj4zJjEsdGhpcy5waXhlbF9zaXplPXQucmVhZFVpbnQ4KCksdGhpcy5yb3dfYWxpZ25fc2l6ZT10LnJlYWRVaW50MzIoKSx0aGlzLnRpbGVfYWxpZ25fc2l6ZT10LnJlYWRVaW50MzIoKSx0aGlzLm51bV90aWxlX2NvbHNfbWludXNfb25lPXQucmVhZFVpbnQzMigpLHRoaXMubnVtX3RpbGVfcm93c19taW51c19vbmU9dC5yZWFkVWludDMyKCl9KSxyLmNyZWF0ZUZ1bGxCb3hDdG9yKCJ1cmwgIixmdW5jdGlvbih0KXt0aGlzLmZsYWdzIT09MSYmKHRoaXMubG9jYXRpb249dC5yZWFkQ1N0cmluZygpKX0pLHIuY3JlYXRlRnVsbEJveEN0b3IoInVybiAiLGZ1bmN0aW9uKHQpe3RoaXMubmFtZT10LnJlYWRDU3RyaW5nKCksdGhpcy5zaXplLXRoaXMuaGRyX3NpemUtdGhpcy5uYW1lLmxlbmd0aC0xPjAmJih0aGlzLmxvY2F0aW9uPXQucmVhZENTdHJpbmcoKSl9KSxyLmNyZWF0ZVVVSURCb3goImE1ZDQwYjMwZTgxNDExZGRiYTJmMDgwMDIwMGM5YTY2IiwhMCwhMSxmdW5jdGlvbih0KXt0aGlzLkxpdmVTZXJ2ZXJNYW5pZmVzdD10LnJlYWRTdHJpbmcodGhpcy5zaXplLXRoaXMuaGRyX3NpemUpLnJlcGxhY2UoLyYvZywiJmFtcDsiKS5yZXBsYWNlKC88L2csIiZsdDsiKS5yZXBsYWNlKC8+L2csIiZndDsiKS5yZXBsYWNlKC8iL2csIiZxdW90OyIpLnJlcGxhY2UoLycvZywiJiMwMzk7Iil9KSxyLmNyZWF0ZVVVSURCb3goImQwOGE0ZjE4MTBmMzRhODJiNmM4MzJkOGFiYTE4M2QzIiwhMCwhMSxmdW5jdGlvbih0KXt0aGlzLnN5c3RlbV9pZD1yLnBhcnNlSGV4MTYodCk7dmFyIGU9dC5yZWFkVWludDMyKCk7ZT4wJiYodGhpcy5kYXRhPXQucmVhZFVpbnQ4QXJyYXkoZSkpfSksci5jcmVhdGVVVUlEQm94KCJhMjM5NGY1MjVhOWI0ZjE0YTI0NDZjNDI3YzY0OGRmNCIsITAsITEpLHIuY3JlYXRlVVVJREJveCgiODk3NGRiY2U3YmU3NGM1MTg0Zjk3MTQ4Zjk4ODI1NTQiLCEwLCExLGZ1bmN0aW9uKHQpe3RoaXMuZGVmYXVsdF9BbGdvcml0aG1JRD10LnJlYWRVaW50MjQoKSx0aGlzLmRlZmF1bHRfSVZfc2l6ZT10LnJlYWRVaW50OCgpLHRoaXMuZGVmYXVsdF9LSUQ9ci5wYXJzZUhleDE2KHQpfSksci5jcmVhdGVVVUlEQm94KCJkNDgwN2VmMmNhMzk0Njk1OGU1NDI2Y2I5ZTQ2YTc5ZiIsITAsITEsZnVuY3Rpb24odCl7dGhpcy5mcmFnbWVudF9jb3VudD10LnJlYWRVaW50OCgpLHRoaXMuZW50cmllcz1bXTtmb3IodmFyIGU9MDtlPHRoaXMuZnJhZ21lbnRfY291bnQ7ZSsrKXt2YXIgcz17fSxuPTAsYT0wO3RoaXMudmVyc2lvbj09PTE/KG49dC5yZWFkVWludDY0KCksYT10LnJlYWRVaW50NjQoKSk6KG49dC5yZWFkVWludDMyKCksYT10LnJlYWRVaW50MzIoKSkscy5hYnNvbHV0ZV90aW1lPW4scy5hYnNvbHV0ZV9kdXJhdGlvbj1hLHRoaXMuZW50cmllcy5wdXNoKHMpfX0pLHIuY3JlYXRlVVVJREJveCgiNmQxZDliMDU0MmQ1NDRlNjgwZTIxNDFkYWZmNzU3YjIiLCEwLCExLGZ1bmN0aW9uKHQpe3RoaXMudmVyc2lvbj09PTE/KHRoaXMuYWJzb2x1dGVfdGltZT10LnJlYWRVaW50NjQoKSx0aGlzLmR1cmF0aW9uPXQucmVhZFVpbnQ2NCgpKToodGhpcy5hYnNvbHV0ZV90aW1lPXQucmVhZFVpbnQzMigpLHRoaXMuZHVyYXRpb249dC5yZWFkVWludDMyKCkpfSksci5jcmVhdGVGdWxsQm94Q3Rvcigidm1oZCIsZnVuY3Rpb24odCl7dGhpcy5ncmFwaGljc21vZGU9dC5yZWFkVWludDE2KCksdGhpcy5vcGNvbG9yPXQucmVhZFVpbnQxNkFycmF5KDMpfSksci5jcmVhdGVGdWxsQm94Q3RvcigidnBjQyIsZnVuY3Rpb24odCl7dmFyIGU7dGhpcy52ZXJzaW9uPT09MT8odGhpcy5wcm9maWxlPXQucmVhZFVpbnQ4KCksdGhpcy5sZXZlbD10LnJlYWRVaW50OCgpLGU9dC5yZWFkVWludDgoKSx0aGlzLmJpdERlcHRoPWU+PjQsdGhpcy5jaHJvbWFTdWJzYW1wbGluZz1lPj4xJjcsdGhpcy52aWRlb0Z1bGxSYW5nZUZsYWc9ZSYxLHRoaXMuY29sb3VyUHJpbWFyaWVzPXQucmVhZFVpbnQ4KCksdGhpcy50cmFuc2ZlckNoYXJhY3RlcmlzdGljcz10LnJlYWRVaW50OCgpLHRoaXMubWF0cml4Q29lZmZpY2llbnRzPXQucmVhZFVpbnQ4KCksdGhpcy5jb2RlY0ludGlhbGl6YXRpb25EYXRhU2l6ZT10LnJlYWRVaW50MTYoKSx0aGlzLmNvZGVjSW50aWFsaXphdGlvbkRhdGE9dC5yZWFkVWludDhBcnJheSh0aGlzLmNvZGVjSW50aWFsaXphdGlvbkRhdGFTaXplKSk6KHRoaXMucHJvZmlsZT10LnJlYWRVaW50OCgpLHRoaXMubGV2ZWw9dC5yZWFkVWludDgoKSxlPXQucmVhZFVpbnQ4KCksdGhpcy5iaXREZXB0aD1lPj40JjE1LHRoaXMuY29sb3JTcGFjZT1lJjE1LGU9dC5yZWFkVWludDgoKSx0aGlzLmNocm9tYVN1YnNhbXBsaW5nPWU+PjQmMTUsdGhpcy50cmFuc2ZlckZ1bmN0aW9uPWU+PjEmNyx0aGlzLnZpZGVvRnVsbFJhbmdlRmxhZz1lJjEsdGhpcy5jb2RlY0ludGlhbGl6YXRpb25EYXRhU2l6ZT10LnJlYWRVaW50MTYoKSx0aGlzLmNvZGVjSW50aWFsaXphdGlvbkRhdGE9dC5yZWFkVWludDhBcnJheSh0aGlzLmNvZGVjSW50aWFsaXphdGlvbkRhdGFTaXplKSl9KSxyLmNyZWF0ZUJveEN0b3IoInZ0dEMiLGZ1bmN0aW9uKHQpe3RoaXMudGV4dD10LnJlYWRTdHJpbmcodGhpcy5zaXplLXRoaXMuaGRyX3NpemUpfSksci5jcmVhdGVGdWxsQm94Q3RvcigidnZjQyIsZnVuY3Rpb24odCl7dmFyIGUscyxuPXtoZWxkX2JpdHM6dm9pZCAwLG51bV9oZWxkX2JpdHM6MCxzdHJlYW1fcmVhZF8xX2J5dGVzOmZ1bmN0aW9uKHkpe3RoaXMuaGVsZF9iaXRzPXkucmVhZFVpbnQ4KCksdGhpcy5udW1faGVsZF9iaXRzPTh9LHN0cmVhbV9yZWFkXzJfYnl0ZXM6ZnVuY3Rpb24oeSl7dGhpcy5oZWxkX2JpdHM9eS5yZWFkVWludDE2KCksdGhpcy5udW1faGVsZF9iaXRzPTE2fSxleHRyYWN0X2JpdHM6ZnVuY3Rpb24oeSl7dmFyIEU9dGhpcy5oZWxkX2JpdHM+PnRoaXMubnVtX2hlbGRfYml0cy15JigxPDx5KS0xO3JldHVybiB0aGlzLm51bV9oZWxkX2JpdHMtPXksRX19O2lmKG4uc3RyZWFtX3JlYWRfMV9ieXRlcyh0KSxuLmV4dHJhY3RfYml0cyg1KSx0aGlzLmxlbmd0aFNpemVNaW51c09uZT1uLmV4dHJhY3RfYml0cygyKSx0aGlzLnB0bF9wcmVzZW50X2ZsYWc9bi5leHRyYWN0X2JpdHMoMSksdGhpcy5wdGxfcHJlc2VudF9mbGFnKXtuLnN0cmVhbV9yZWFkXzJfYnl0ZXModCksdGhpcy5vbHNfaWR4PW4uZXh0cmFjdF9iaXRzKDkpLHRoaXMubnVtX3N1YmxheWVycz1uLmV4dHJhY3RfYml0cygzKSx0aGlzLmNvbnN0YW50X2ZyYW1lX3JhdGU9bi5leHRyYWN0X2JpdHMoMiksdGhpcy5jaHJvbWFfZm9ybWF0X2lkYz1uLmV4dHJhY3RfYml0cygyKSxuLnN0cmVhbV9yZWFkXzFfYnl0ZXModCksdGhpcy5iaXRfZGVwdGhfbWludXM4PW4uZXh0cmFjdF9iaXRzKDMpLG4uZXh0cmFjdF9iaXRzKDUpO3tpZihuLnN0cmVhbV9yZWFkXzJfYnl0ZXModCksbi5leHRyYWN0X2JpdHMoMiksdGhpcy5udW1fYnl0ZXNfY29uc3RyYWludF9pbmZvPW4uZXh0cmFjdF9iaXRzKDYpLHRoaXMuZ2VuZXJhbF9wcm9maWxlX2lkYz1uLmV4dHJhY3RfYml0cyg3KSx0aGlzLmdlbmVyYWxfdGllcl9mbGFnPW4uZXh0cmFjdF9iaXRzKDEpLHRoaXMuZ2VuZXJhbF9sZXZlbF9pZGM9dC5yZWFkVWludDgoKSxuLnN0cmVhbV9yZWFkXzFfYnl0ZXModCksdGhpcy5wdGxfZnJhbWVfb25seV9jb25zdHJhaW50X2ZsYWc9bi5leHRyYWN0X2JpdHMoMSksdGhpcy5wdGxfbXVsdGlsYXllcl9lbmFibGVkX2ZsYWc9bi5leHRyYWN0X2JpdHMoMSksdGhpcy5nZW5lcmFsX2NvbnN0cmFpbnRfaW5mbz1uZXcgVWludDhBcnJheSh0aGlzLm51bV9ieXRlc19jb25zdHJhaW50X2luZm8pLHRoaXMubnVtX2J5dGVzX2NvbnN0cmFpbnRfaW5mbyl7Zm9yKGU9MDtlPHRoaXMubnVtX2J5dGVzX2NvbnN0cmFpbnRfaW5mby0xO2UrKyl7dmFyIGE9bi5leHRyYWN0X2JpdHMoNik7bi5zdHJlYW1fcmVhZF8xX2J5dGVzKHQpO3ZhciBvPW4uZXh0cmFjdF9iaXRzKDIpO3RoaXMuZ2VuZXJhbF9jb25zdHJhaW50X2luZm9bZV09YTw8MnxvfXRoaXMuZ2VuZXJhbF9jb25zdHJhaW50X2luZm9bdGhpcy5udW1fYnl0ZXNfY29uc3RyYWludF9pbmZvLTFdPW4uZXh0cmFjdF9iaXRzKDYpfWVsc2Ugbi5leHRyYWN0X2JpdHMoNik7aWYodGhpcy5udW1fc3VibGF5ZXJzPjEpe2ZvcihuLnN0cmVhbV9yZWFkXzFfYnl0ZXModCksdGhpcy5wdGxfc3VibGF5ZXJfcHJlc2VudF9tYXNrPTAscz10aGlzLm51bV9zdWJsYXllcnMtMjtzPj0wOy0tcyl7dmFyIGg9bi5leHRyYWN0X2JpdHMoMSk7dGhpcy5wdGxfc3VibGF5ZXJfcHJlc2VudF9tYXNrfD1oPDxzfWZvcihzPXRoaXMubnVtX3N1YmxheWVycztzPD04JiZ0aGlzLm51bV9zdWJsYXllcnM+MTsrK3Mpbi5leHRyYWN0X2JpdHMoMSk7Zm9yKHRoaXMuc3VibGF5ZXJfbGV2ZWxfaWRjPVtdLHM9dGhpcy5udW1fc3VibGF5ZXJzLTI7cz49MDstLXMpdGhpcy5wdGxfc3VibGF5ZXJfcHJlc2VudF9tYXNrJjE8PHMmJih0aGlzLnN1YmxheWVyX2xldmVsX2lkY1tzXT10LnJlYWRVaW50OCgpKX1pZih0aGlzLnB0bF9udW1fc3ViX3Byb2ZpbGVzPXQucmVhZFVpbnQ4KCksdGhpcy5nZW5lcmFsX3N1Yl9wcm9maWxlX2lkYz1bXSx0aGlzLnB0bF9udW1fc3ViX3Byb2ZpbGVzKWZvcihlPTA7ZTx0aGlzLnB0bF9udW1fc3ViX3Byb2ZpbGVzO2UrKyl0aGlzLmdlbmVyYWxfc3ViX3Byb2ZpbGVfaWRjLnB1c2godC5yZWFkVWludDMyKCkpfXRoaXMubWF4X3BpY3R1cmVfd2lkdGg9dC5yZWFkVWludDE2KCksdGhpcy5tYXhfcGljdHVyZV9oZWlnaHQ9dC5yZWFkVWludDE2KCksdGhpcy5hdmdfZnJhbWVfcmF0ZT10LnJlYWRVaW50MTYoKX12YXIgZj0xMixwPTEzO3RoaXMubmFsdV9hcnJheXM9W107dmFyIGc9dC5yZWFkVWludDgoKTtmb3IoZT0wO2U8ZztlKyspe3ZhciBtPVtdO3RoaXMubmFsdV9hcnJheXMucHVzaChtKSxuLnN0cmVhbV9yZWFkXzFfYnl0ZXModCksbS5jb21wbGV0ZW5lc3M9bi5leHRyYWN0X2JpdHMoMSksbi5leHRyYWN0X2JpdHMoMiksbS5uYWx1X3R5cGU9bi5leHRyYWN0X2JpdHMoNSk7dmFyIHY9MTtmb3IobS5uYWx1X3R5cGUhPXAmJm0ubmFsdV90eXBlIT1mJiYodj10LnJlYWRVaW50MTYoKSkscz0wO3M8djtzKyspe3ZhciBiPXQucmVhZFVpbnQxNigpO20ucHVzaCh7ZGF0YTp0LnJlYWRVaW50OEFycmF5KGIpLGxlbmd0aDpifSl9fX0pLHIuY3JlYXRlRnVsbEJveEN0b3IoInZ2bkMiLGZ1bmN0aW9uKHQpe3ZhciBlPXN0cm0ucmVhZFVpbnQ4KCk7dGhpcy5sZW5ndGhTaXplTWludXNPbmU9ZSYzfSksci5TYW1wbGVFbnRyeS5wcm90b3R5cGUuaXNWaWRlbz1mdW5jdGlvbigpe3JldHVybiExfSxyLlNhbXBsZUVudHJ5LnByb3RvdHlwZS5pc0F1ZGlvPWZ1bmN0aW9uKCl7cmV0dXJuITF9LHIuU2FtcGxlRW50cnkucHJvdG90eXBlLmlzU3VidGl0bGU9ZnVuY3Rpb24oKXtyZXR1cm4hMX0sci5TYW1wbGVFbnRyeS5wcm90b3R5cGUuaXNNZXRhZGF0YT1mdW5jdGlvbigpe3JldHVybiExfSxyLlNhbXBsZUVudHJ5LnByb3RvdHlwZS5pc0hpbnQ9ZnVuY3Rpb24oKXtyZXR1cm4hMX0sci5TYW1wbGVFbnRyeS5wcm90b3R5cGUuZ2V0Q29kZWM9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy50eXBlLnJlcGxhY2UoIi4iLCIiKX0sci5TYW1wbGVFbnRyeS5wcm90b3R5cGUuZ2V0V2lkdGg9ZnVuY3Rpb24oKXtyZXR1cm4iIn0sci5TYW1wbGVFbnRyeS5wcm90b3R5cGUuZ2V0SGVpZ2h0PWZ1bmN0aW9uKCl7cmV0dXJuIiJ9LHIuU2FtcGxlRW50cnkucHJvdG90eXBlLmdldENoYW5uZWxDb3VudD1mdW5jdGlvbigpe3JldHVybiIifSxyLlNhbXBsZUVudHJ5LnByb3RvdHlwZS5nZXRTYW1wbGVSYXRlPWZ1bmN0aW9uKCl7cmV0dXJuIiJ9LHIuU2FtcGxlRW50cnkucHJvdG90eXBlLmdldFNhbXBsZVNpemU9ZnVuY3Rpb24oKXtyZXR1cm4iIn0sci5WaXN1YWxTYW1wbGVFbnRyeS5wcm90b3R5cGUuaXNWaWRlbz1mdW5jdGlvbigpe3JldHVybiEwfSxyLlZpc3VhbFNhbXBsZUVudHJ5LnByb3RvdHlwZS5nZXRXaWR0aD1mdW5jdGlvbigpe3JldHVybiB0aGlzLndpZHRofSxyLlZpc3VhbFNhbXBsZUVudHJ5LnByb3RvdHlwZS5nZXRIZWlnaHQ9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5oZWlnaHR9LHIuQXVkaW9TYW1wbGVFbnRyeS5wcm90b3R5cGUuaXNBdWRpbz1mdW5jdGlvbigpe3JldHVybiEwfSxyLkF1ZGlvU2FtcGxlRW50cnkucHJvdG90eXBlLmdldENoYW5uZWxDb3VudD1mdW5jdGlvbigpe3JldHVybiB0aGlzLmNoYW5uZWxfY291bnR9LHIuQXVkaW9TYW1wbGVFbnRyeS5wcm90b3R5cGUuZ2V0U2FtcGxlUmF0ZT1mdW5jdGlvbigpe3JldHVybiB0aGlzLnNhbXBsZXJhdGV9LHIuQXVkaW9TYW1wbGVFbnRyeS5wcm90b3R5cGUuZ2V0U2FtcGxlU2l6ZT1mdW5jdGlvbigpe3JldHVybiB0aGlzLnNhbXBsZXNpemV9LHIuU3VidGl0bGVTYW1wbGVFbnRyeS5wcm90b3R5cGUuaXNTdWJ0aXRsZT1mdW5jdGlvbigpe3JldHVybiEwfSxyLk1ldGFkYXRhU2FtcGxlRW50cnkucHJvdG90eXBlLmlzTWV0YWRhdGE9ZnVuY3Rpb24oKXtyZXR1cm4hMH0sci5kZWNpbWFsVG9IZXg9ZnVuY3Rpb24odCxlKXt2YXIgcz1OdW1iZXIodCkudG9TdHJpbmcoMTYpO2ZvcihlPXR5cGVvZiBlPiJ1Inx8ZT09PW51bGw/ZT0yOmU7cy5sZW5ndGg8ZTspcz0iMCIrcztyZXR1cm4gc30sci5hdmMxU2FtcGxlRW50cnkucHJvdG90eXBlLmdldENvZGVjPXIuYXZjMlNhbXBsZUVudHJ5LnByb3RvdHlwZS5nZXRDb2RlYz1yLmF2YzNTYW1wbGVFbnRyeS5wcm90b3R5cGUuZ2V0Q29kZWM9ci5hdmM0U2FtcGxlRW50cnkucHJvdG90eXBlLmdldENvZGVjPWZ1bmN0aW9uKCl7dmFyIHQ9ci5TYW1wbGVFbnRyeS5wcm90b3R5cGUuZ2V0Q29kZWMuY2FsbCh0aGlzKTtyZXR1cm4gdGhpcy5hdmNDP3QrIi4iK3IuZGVjaW1hbFRvSGV4KHRoaXMuYXZjQy5BVkNQcm9maWxlSW5kaWNhdGlvbikrci5kZWNpbWFsVG9IZXgodGhpcy5hdmNDLnByb2ZpbGVfY29tcGF0aWJpbGl0eSkrci5kZWNpbWFsVG9IZXgodGhpcy5hdmNDLkFWQ0xldmVsSW5kaWNhdGlvbik6dH0sci5oZXYxU2FtcGxlRW50cnkucHJvdG90eXBlLmdldENvZGVjPXIuaHZjMVNhbXBsZUVudHJ5LnByb3RvdHlwZS5nZXRDb2RlYz1mdW5jdGlvbigpe3ZhciB0LGU9ci5TYW1wbGVFbnRyeS5wcm90b3R5cGUuZ2V0Q29kZWMuY2FsbCh0aGlzKTtpZih0aGlzLmh2Y0Mpe3N3aXRjaChlKz0iLiIsdGhpcy5odmNDLmdlbmVyYWxfcHJvZmlsZV9zcGFjZSl7Y2FzZSAwOmUrPSIiO2JyZWFrO2Nhc2UgMTplKz0iQSI7YnJlYWs7Y2FzZSAyOmUrPSJCIjticmVhaztjYXNlIDM6ZSs9IkMiO2JyZWFrfWUrPXRoaXMuaHZjQy5nZW5lcmFsX3Byb2ZpbGVfaWRjLGUrPSIuIjt2YXIgcz10aGlzLmh2Y0MuZ2VuZXJhbF9wcm9maWxlX2NvbXBhdGliaWxpdHksbj0wO2Zvcih0PTA7dDwzMiYmKG58PXMmMSx0IT0zMSk7dCsrKW48PD0xLHM+Pj0xO2UrPXIuZGVjaW1hbFRvSGV4KG4sMCksZSs9Ii4iLHRoaXMuaHZjQy5nZW5lcmFsX3RpZXJfZmxhZz09PTA/ZSs9IkwiOmUrPSJIIixlKz10aGlzLmh2Y0MuZ2VuZXJhbF9sZXZlbF9pZGM7dmFyIGE9ITEsbz0iIjtmb3IodD01O3Q+PTA7dC0tKSh0aGlzLmh2Y0MuZ2VuZXJhbF9jb25zdHJhaW50X2luZGljYXRvclt0XXx8YSkmJihvPSIuIityLmRlY2ltYWxUb0hleCh0aGlzLmh2Y0MuZ2VuZXJhbF9jb25zdHJhaW50X2luZGljYXRvclt0XSwwKStvLGE9ITApO2UrPW99cmV0dXJuIGV9LHIudnZjMVNhbXBsZUVudHJ5LnByb3RvdHlwZS5nZXRDb2RlYz1yLnZ2aTFTYW1wbGVFbnRyeS5wcm90b3R5cGUuZ2V0Q29kZWM9ZnVuY3Rpb24oKXt2YXIgdCxlPXIuU2FtcGxlRW50cnkucHJvdG90eXBlLmdldENvZGVjLmNhbGwodGhpcyk7aWYodGhpcy52dmNDKXtlKz0iLiIrdGhpcy52dmNDLmdlbmVyYWxfcHJvZmlsZV9pZGMsdGhpcy52dmNDLmdlbmVyYWxfdGllcl9mbGFnP2UrPSIuSCI6ZSs9Ii5MIixlKz10aGlzLnZ2Y0MuZ2VuZXJhbF9sZXZlbF9pZGM7dmFyIHM9IiI7aWYodGhpcy52dmNDLmdlbmVyYWxfY29uc3RyYWludF9pbmZvKXt2YXIgbj1bXSxhPTA7YXw9dGhpcy52dmNDLnB0bF9mcmFtZV9vbmx5X2NvbnN0cmFpbnQ8PDcsYXw9dGhpcy52dmNDLnB0bF9tdWx0aWxheWVyX2VuYWJsZWQ8PDY7dmFyIG87Zm9yKHQ9MDt0PHRoaXMudnZjQy5nZW5lcmFsX2NvbnN0cmFpbnRfaW5mby5sZW5ndGg7Kyt0KWF8PXRoaXMudnZjQy5nZW5lcmFsX2NvbnN0cmFpbnRfaW5mb1t0XT4+MiY2MyxuLnB1c2goYSksYSYmKG89dCksYT10aGlzLnZ2Y0MuZ2VuZXJhbF9jb25zdHJhaW50X2luZm9bdF0+PjImMztpZihvPT09dm9pZCAwKXM9Ii5DQSI7ZWxzZXtzPSIuQyI7dmFyIGg9IkFCQ0RFRkdISUpLTE1OT1BRUlNUVVZXWFlaMjM0NTY3IixmPTAscD0wO2Zvcih0PTA7dDw9bzsrK3QpZm9yKGY9Zjw8OHxuW3RdLHArPTg7cD49NTspe3ZhciBnPWY+PnAtNSYzMTtzKz1oW2ddLHAtPTUsZiY9KDE8PHApLTF9cCYmKGY8PD01LXAscys9aFtmJjMxXSl9fWUrPXN9cmV0dXJuIGV9LHIubXA0YVNhbXBsZUVudHJ5LnByb3RvdHlwZS5nZXRDb2RlYz1mdW5jdGlvbigpe3ZhciB0PXIuU2FtcGxlRW50cnkucHJvdG90eXBlLmdldENvZGVjLmNhbGwodGhpcyk7aWYodGhpcy5lc2RzJiZ0aGlzLmVzZHMuZXNkKXt2YXIgZT10aGlzLmVzZHMuZXNkLmdldE9USSgpLHM9dGhpcy5lc2RzLmVzZC5nZXRBdWRpb0NvbmZpZygpO3JldHVybiB0KyIuIityLmRlY2ltYWxUb0hleChlKSsocz8iLiIrczoiIil9ZWxzZSByZXR1cm4gdH0sci5zdHh0U2FtcGxlRW50cnkucHJvdG90eXBlLmdldENvZGVjPWZ1bmN0aW9uKCl7dmFyIHQ9ci5TYW1wbGVFbnRyeS5wcm90b3R5cGUuZ2V0Q29kZWMuY2FsbCh0aGlzKTtyZXR1cm4gdGhpcy5taW1lX2Zvcm1hdD90KyIuIit0aGlzLm1pbWVfZm9ybWF0OnR9LHIudnAwOFNhbXBsZUVudHJ5LnByb3RvdHlwZS5nZXRDb2RlYz1yLnZwMDlTYW1wbGVFbnRyeS5wcm90b3R5cGUuZ2V0Q29kZWM9ZnVuY3Rpb24oKXt2YXIgdD1yLlNhbXBsZUVudHJ5LnByb3RvdHlwZS5nZXRDb2RlYy5jYWxsKHRoaXMpLGU9dGhpcy52cGNDLmxldmVsO2U9PTAmJihlPSIwMCIpO3ZhciBzPXRoaXMudnBjQy5iaXREZXB0aDtyZXR1cm4gcz09OCYmKHM9IjA4IiksdCsiLjAiK3RoaXMudnBjQy5wcm9maWxlKyIuIitlKyIuIitzfSxyLmF2MDFTYW1wbGVFbnRyeS5wcm90b3R5cGUuZ2V0Q29kZWM9ZnVuY3Rpb24oKXt2YXIgdD1yLlNhbXBsZUVudHJ5LnByb3RvdHlwZS5nZXRDb2RlYy5jYWxsKHRoaXMpLGU9dGhpcy5hdjFDLnNlcV9sZXZlbF9pZHhfMDtlPDEwJiYoZT0iMCIrZSk7dmFyIHM7cmV0dXJuIHRoaXMuYXYxQy5zZXFfcHJvZmlsZT09PTImJnRoaXMuYXYxQy5oaWdoX2JpdGRlcHRoPT09MT9zPXRoaXMuYXYxQy50d2VsdmVfYml0PT09MT8iMTIiOiIxMCI6dGhpcy5hdjFDLnNlcV9wcm9maWxlPD0yJiYocz10aGlzLmF2MUMuaGlnaF9iaXRkZXB0aD09PTE/IjEwIjoiMDgiKSx0KyIuIit0aGlzLmF2MUMuc2VxX3Byb2ZpbGUrIi4iK2UrKHRoaXMuYXYxQy5zZXFfdGllcl8wPyJIIjoiTSIpKyIuIitzfSxyLkJveC5wcm90b3R5cGUud3JpdGVIZWFkZXI9ZnVuY3Rpb24odCxlKXt0aGlzLnNpemUrPTgsdGhpcy5zaXplPlMmJih0aGlzLnNpemUrPTgpLHRoaXMudHlwZT09PSJ1dWlkIiYmKHRoaXMuc2l6ZSs9MTYpLGQuZGVidWcoIkJveFdyaXRlciIsIldyaXRpbmcgYm94ICIrdGhpcy50eXBlKyIgb2Ygc2l6ZTogIit0aGlzLnNpemUrIiBhdCBwb3NpdGlvbiAiK3QuZ2V0UG9zaXRpb24oKSsoZXx8IiIpKSx0aGlzLnNpemU+Uz90LndyaXRlVWludDMyKDEpOih0aGlzLnNpemVQb3NpdGlvbj10LmdldFBvc2l0aW9uKCksdC53cml0ZVVpbnQzMih0aGlzLnNpemUpKSx0LndyaXRlU3RyaW5nKHRoaXMudHlwZSxudWxsLDQpLHRoaXMudHlwZT09PSJ1dWlkIiYmdC53cml0ZVVpbnQ4QXJyYXkodGhpcy51dWlkKSx0aGlzLnNpemU+UyYmdC53cml0ZVVpbnQ2NCh0aGlzLnNpemUpfSxyLkZ1bGxCb3gucHJvdG90eXBlLndyaXRlSGVhZGVyPWZ1bmN0aW9uKHQpe3RoaXMuc2l6ZSs9NCxyLkJveC5wcm90b3R5cGUud3JpdGVIZWFkZXIuY2FsbCh0aGlzLHQsIiB2PSIrdGhpcy52ZXJzaW9uKyIgZj0iK3RoaXMuZmxhZ3MpLHQud3JpdGVVaW50OCh0aGlzLnZlcnNpb24pLHQud3JpdGVVaW50MjQodGhpcy5mbGFncyl9LHIuQm94LnByb3RvdHlwZS53cml0ZT1mdW5jdGlvbih0KXt0aGlzLnR5cGU9PT0ibWRhdCI/dGhpcy5kYXRhJiYodGhpcy5zaXplPXRoaXMuZGF0YS5sZW5ndGgsdGhpcy53cml0ZUhlYWRlcih0KSx0LndyaXRlVWludDhBcnJheSh0aGlzLmRhdGEpKToodGhpcy5zaXplPXRoaXMuZGF0YT90aGlzLmRhdGEubGVuZ3RoOjAsdGhpcy53cml0ZUhlYWRlcih0KSx0aGlzLmRhdGEmJnQud3JpdGVVaW50OEFycmF5KHRoaXMuZGF0YSkpfSxyLkNvbnRhaW5lckJveC5wcm90b3R5cGUud3JpdGU9ZnVuY3Rpb24odCl7dGhpcy5zaXplPTAsdGhpcy53cml0ZUhlYWRlcih0KTtmb3IodmFyIGU9MDtlPHRoaXMuYm94ZXMubGVuZ3RoO2UrKyl0aGlzLmJveGVzW2VdJiYodGhpcy5ib3hlc1tlXS53cml0ZSh0KSx0aGlzLnNpemUrPXRoaXMuYm94ZXNbZV0uc2l6ZSk7ZC5kZWJ1ZygiQm94V3JpdGVyIiwiQWRqdXN0aW5nIGJveCAiK3RoaXMudHlwZSsiIHdpdGggbmV3IHNpemUgIit0aGlzLnNpemUpLHQuYWRqdXN0VWludDMyKHRoaXMuc2l6ZVBvc2l0aW9uLHRoaXMuc2l6ZSl9LHIuVHJhY2tSZWZlcmVuY2VUeXBlQm94LnByb3RvdHlwZS53cml0ZT1mdW5jdGlvbih0KXt0aGlzLnNpemU9dGhpcy50cmFja19pZHMubGVuZ3RoKjQsdGhpcy53cml0ZUhlYWRlcih0KSx0LndyaXRlVWludDMyQXJyYXkodGhpcy50cmFja19pZHMpfSxyLmF2Y0NCb3gucHJvdG90eXBlLndyaXRlPWZ1bmN0aW9uKHQpe3ZhciBlO2Zvcih0aGlzLnNpemU9NyxlPTA7ZTx0aGlzLlNQUy5sZW5ndGg7ZSsrKXRoaXMuc2l6ZSs9Mit0aGlzLlNQU1tlXS5sZW5ndGg7Zm9yKGU9MDtlPHRoaXMuUFBTLmxlbmd0aDtlKyspdGhpcy5zaXplKz0yK3RoaXMuUFBTW2VdLmxlbmd0aDtmb3IodGhpcy5leHQmJih0aGlzLnNpemUrPXRoaXMuZXh0Lmxlbmd0aCksdGhpcy53cml0ZUhlYWRlcih0KSx0LndyaXRlVWludDgodGhpcy5jb25maWd1cmF0aW9uVmVyc2lvbiksdC53cml0ZVVpbnQ4KHRoaXMuQVZDUHJvZmlsZUluZGljYXRpb24pLHQud3JpdGVVaW50OCh0aGlzLnByb2ZpbGVfY29tcGF0aWJpbGl0eSksdC53cml0ZVVpbnQ4KHRoaXMuQVZDTGV2ZWxJbmRpY2F0aW9uKSx0LndyaXRlVWludDgodGhpcy5sZW5ndGhTaXplTWludXNPbmUrKDYzPDwyKSksdC53cml0ZVVpbnQ4KHRoaXMuU1BTLmxlbmd0aCsoNzw8NSkpLGU9MDtlPHRoaXMuU1BTLmxlbmd0aDtlKyspdC53cml0ZVVpbnQxNih0aGlzLlNQU1tlXS5sZW5ndGgpLHQud3JpdGVVaW50OEFycmF5KHRoaXMuU1BTW2VdLm5hbHUpO2Zvcih0LndyaXRlVWludDgodGhpcy5QUFMubGVuZ3RoKSxlPTA7ZTx0aGlzLlBQUy5sZW5ndGg7ZSsrKXQud3JpdGVVaW50MTYodGhpcy5QUFNbZV0ubGVuZ3RoKSx0LndyaXRlVWludDhBcnJheSh0aGlzLlBQU1tlXS5uYWx1KTt0aGlzLmV4dCYmdC53cml0ZVVpbnQ4QXJyYXkodGhpcy5leHQpfSxyLmNvNjRCb3gucHJvdG90eXBlLndyaXRlPWZ1bmN0aW9uKHQpe3ZhciBlO2Zvcih0aGlzLnZlcnNpb249MCx0aGlzLmZsYWdzPTAsdGhpcy5zaXplPTQrOCp0aGlzLmNodW5rX29mZnNldHMubGVuZ3RoLHRoaXMud3JpdGVIZWFkZXIodCksdC53cml0ZVVpbnQzMih0aGlzLmNodW5rX29mZnNldHMubGVuZ3RoKSxlPTA7ZTx0aGlzLmNodW5rX29mZnNldHMubGVuZ3RoO2UrKyl0LndyaXRlVWludDY0KHRoaXMuY2h1bmtfb2Zmc2V0c1tlXSl9LHIuY3NsZ0JveC5wcm90b3R5cGUud3JpdGU9ZnVuY3Rpb24odCl7dGhpcy52ZXJzaW9uPTAsdGhpcy5mbGFncz0wLHRoaXMuc2l6ZT00KjUsdGhpcy53cml0ZUhlYWRlcih0KSx0LndyaXRlSW50MzIodGhpcy5jb21wb3NpdGlvblRvRFRTU2hpZnQpLHQud3JpdGVJbnQzMih0aGlzLmxlYXN0RGVjb2RlVG9EaXNwbGF5RGVsdGEpLHQud3JpdGVJbnQzMih0aGlzLmdyZWF0ZXN0RGVjb2RlVG9EaXNwbGF5RGVsdGEpLHQud3JpdGVJbnQzMih0aGlzLmNvbXBvc2l0aW9uU3RhcnRUaW1lKSx0LndyaXRlSW50MzIodGhpcy5jb21wb3NpdGlvbkVuZFRpbWUpfSxyLmN0dHNCb3gucHJvdG90eXBlLndyaXRlPWZ1bmN0aW9uKHQpe3ZhciBlO2Zvcih0aGlzLnZlcnNpb249MCx0aGlzLmZsYWdzPTAsdGhpcy5zaXplPTQrOCp0aGlzLnNhbXBsZV9jb3VudHMubGVuZ3RoLHRoaXMud3JpdGVIZWFkZXIodCksdC53cml0ZVVpbnQzMih0aGlzLnNhbXBsZV9jb3VudHMubGVuZ3RoKSxlPTA7ZTx0aGlzLnNhbXBsZV9jb3VudHMubGVuZ3RoO2UrKyl0LndyaXRlVWludDMyKHRoaXMuc2FtcGxlX2NvdW50c1tlXSksdGhpcy52ZXJzaW9uPT09MT90LndyaXRlSW50MzIodGhpcy5zYW1wbGVfb2Zmc2V0c1tlXSk6dC53cml0ZVVpbnQzMih0aGlzLnNhbXBsZV9vZmZzZXRzW2VdKX0sci5kcmVmQm94LnByb3RvdHlwZS53cml0ZT1mdW5jdGlvbih0KXt0aGlzLnZlcnNpb249MCx0aGlzLmZsYWdzPTAsdGhpcy5zaXplPTQsdGhpcy53cml0ZUhlYWRlcih0KSx0LndyaXRlVWludDMyKHRoaXMuZW50cmllcy5sZW5ndGgpO2Zvcih2YXIgZT0wO2U8dGhpcy5lbnRyaWVzLmxlbmd0aDtlKyspdGhpcy5lbnRyaWVzW2VdLndyaXRlKHQpLHRoaXMuc2l6ZSs9dGhpcy5lbnRyaWVzW2VdLnNpemU7ZC5kZWJ1ZygiQm94V3JpdGVyIiwiQWRqdXN0aW5nIGJveCAiK3RoaXMudHlwZSsiIHdpdGggbmV3IHNpemUgIit0aGlzLnNpemUpLHQuYWRqdXN0VWludDMyKHRoaXMuc2l6ZVBvc2l0aW9uLHRoaXMuc2l6ZSl9LHIuZWxuZ0JveC5wcm90b3R5cGUud3JpdGU9ZnVuY3Rpb24odCl7dGhpcy52ZXJzaW9uPTAsdGhpcy5mbGFncz0wLHRoaXMuc2l6ZT10aGlzLmV4dGVuZGVkX2xhbmd1YWdlLmxlbmd0aCx0aGlzLndyaXRlSGVhZGVyKHQpLHQud3JpdGVTdHJpbmcodGhpcy5leHRlbmRlZF9sYW5ndWFnZSl9LHIuZWxzdEJveC5wcm90b3R5cGUud3JpdGU9ZnVuY3Rpb24odCl7dGhpcy52ZXJzaW9uPTAsdGhpcy5mbGFncz0wLHRoaXMuc2l6ZT00KzEyKnRoaXMuZW50cmllcy5sZW5ndGgsdGhpcy53cml0ZUhlYWRlcih0KSx0LndyaXRlVWludDMyKHRoaXMuZW50cmllcy5sZW5ndGgpO2Zvcih2YXIgZT0wO2U8dGhpcy5lbnRyaWVzLmxlbmd0aDtlKyspe3ZhciBzPXRoaXMuZW50cmllc1tlXTt0LndyaXRlVWludDMyKHMuc2VnbWVudF9kdXJhdGlvbiksdC53cml0ZUludDMyKHMubWVkaWFfdGltZSksdC53cml0ZUludDE2KHMubWVkaWFfcmF0ZV9pbnRlZ2VyKSx0LndyaXRlSW50MTYocy5tZWRpYV9yYXRlX2ZyYWN0aW9uKX19LHIuZW1zZ0JveC5wcm90b3R5cGUud3JpdGU9ZnVuY3Rpb24odCl7dGhpcy52ZXJzaW9uPTAsdGhpcy5mbGFncz0wLHRoaXMuc2l6ZT00KjQrdGhpcy5tZXNzYWdlX2RhdGEubGVuZ3RoKyh0aGlzLnNjaGVtZV9pZF91cmkubGVuZ3RoKzEpKyh0aGlzLnZhbHVlLmxlbmd0aCsxKSx0aGlzLndyaXRlSGVhZGVyKHQpLHQud3JpdGVDU3RyaW5nKHRoaXMuc2NoZW1lX2lkX3VyaSksdC53cml0ZUNTdHJpbmcodGhpcy52YWx1ZSksdC53cml0ZVVpbnQzMih0aGlzLnRpbWVzY2FsZSksdC53cml0ZVVpbnQzMih0aGlzLnByZXNlbnRhdGlvbl90aW1lX2RlbHRhKSx0LndyaXRlVWludDMyKHRoaXMuZXZlbnRfZHVyYXRpb24pLHQud3JpdGVVaW50MzIodGhpcy5pZCksdC53cml0ZVVpbnQ4QXJyYXkodGhpcy5tZXNzYWdlX2RhdGEpfSxyLmZ0eXBCb3gucHJvdG90eXBlLndyaXRlPWZ1bmN0aW9uKHQpe3RoaXMuc2l6ZT04KzQqdGhpcy5jb21wYXRpYmxlX2JyYW5kcy5sZW5ndGgsdGhpcy53cml0ZUhlYWRlcih0KSx0LndyaXRlU3RyaW5nKHRoaXMubWFqb3JfYnJhbmQsbnVsbCw0KSx0LndyaXRlVWludDMyKHRoaXMubWlub3JfdmVyc2lvbik7Zm9yKHZhciBlPTA7ZTx0aGlzLmNvbXBhdGlibGVfYnJhbmRzLmxlbmd0aDtlKyspdC53cml0ZVN0cmluZyh0aGlzLmNvbXBhdGlibGVfYnJhbmRzW2VdLG51bGwsNCl9LHIuaGRsckJveC5wcm90b3R5cGUud3JpdGU9ZnVuY3Rpb24odCl7dGhpcy5zaXplPTUqNCt0aGlzLm5hbWUubGVuZ3RoKzEsdGhpcy52ZXJzaW9uPTAsdGhpcy5mbGFncz0wLHRoaXMud3JpdGVIZWFkZXIodCksdC53cml0ZVVpbnQzMigwKSx0LndyaXRlU3RyaW5nKHRoaXMuaGFuZGxlcixudWxsLDQpLHQud3JpdGVVaW50MzIoMCksdC53cml0ZVVpbnQzMigwKSx0LndyaXRlVWludDMyKDApLHQud3JpdGVDU3RyaW5nKHRoaXMubmFtZSl9LHIuaHZjQ0JveC5wcm90b3R5cGUud3JpdGU9ZnVuY3Rpb24odCl7dmFyIGUscztmb3IodGhpcy5zaXplPTIzLGU9MDtlPHRoaXMubmFsdV9hcnJheXMubGVuZ3RoO2UrKylmb3IodGhpcy5zaXplKz0zLHM9MDtzPHRoaXMubmFsdV9hcnJheXNbZV0ubGVuZ3RoO3MrKyl0aGlzLnNpemUrPTIrdGhpcy5uYWx1X2FycmF5c1tlXVtzXS5kYXRhLmxlbmd0aDtmb3IodGhpcy53cml0ZUhlYWRlcih0KSx0LndyaXRlVWludDgodGhpcy5jb25maWd1cmF0aW9uVmVyc2lvbiksdC53cml0ZVVpbnQ4KHRoaXMuZ2VuZXJhbF9wcm9maWxlX3NwYWNlPDw2K3RoaXMuZ2VuZXJhbF90aWVyX2ZsYWc8PDUrdGhpcy5nZW5lcmFsX3Byb2ZpbGVfaWRjKSx0LndyaXRlVWludDMyKHRoaXMuZ2VuZXJhbF9wcm9maWxlX2NvbXBhdGliaWxpdHkpLHQud3JpdGVVaW50OEFycmF5KHRoaXMuZ2VuZXJhbF9jb25zdHJhaW50X2luZGljYXRvciksdC53cml0ZVVpbnQ4KHRoaXMuZ2VuZXJhbF9sZXZlbF9pZGMpLHQud3JpdGVVaW50MTYodGhpcy5taW5fc3BhdGlhbF9zZWdtZW50YXRpb25faWRjKygxNTw8MjQpKSx0LndyaXRlVWludDgodGhpcy5wYXJhbGxlbGlzbVR5cGUrKDYzPDwyKSksdC53cml0ZVVpbnQ4KHRoaXMuY2hyb21hX2Zvcm1hdF9pZGMrKDYzPDwyKSksdC53cml0ZVVpbnQ4KHRoaXMuYml0X2RlcHRoX2x1bWFfbWludXM4KygzMTw8MykpLHQud3JpdGVVaW50OCh0aGlzLmJpdF9kZXB0aF9jaHJvbWFfbWludXM4KygzMTw8MykpLHQud3JpdGVVaW50MTYodGhpcy5hdmdGcmFtZVJhdGUpLHQud3JpdGVVaW50OCgodGhpcy5jb25zdGFudEZyYW1lUmF0ZTw8NikrKHRoaXMubnVtVGVtcG9yYWxMYXllcnM8PDMpKyh0aGlzLnRlbXBvcmFsSWROZXN0ZWQ8PDIpK3RoaXMubGVuZ3RoU2l6ZU1pbnVzT25lKSx0LndyaXRlVWludDgodGhpcy5uYWx1X2FycmF5cy5sZW5ndGgpLGU9MDtlPHRoaXMubmFsdV9hcnJheXMubGVuZ3RoO2UrKylmb3IodC53cml0ZVVpbnQ4KCh0aGlzLm5hbHVfYXJyYXlzW2VdLmNvbXBsZXRlbmVzczw8NykrdGhpcy5uYWx1X2FycmF5c1tlXS5uYWx1X3R5cGUpLHQud3JpdGVVaW50MTYodGhpcy5uYWx1X2FycmF5c1tlXS5sZW5ndGgpLHM9MDtzPHRoaXMubmFsdV9hcnJheXNbZV0ubGVuZ3RoO3MrKyl0LndyaXRlVWludDE2KHRoaXMubmFsdV9hcnJheXNbZV1bc10uZGF0YS5sZW5ndGgpLHQud3JpdGVVaW50OEFycmF5KHRoaXMubmFsdV9hcnJheXNbZV1bc10uZGF0YSl9LHIua2luZEJveC5wcm90b3R5cGUud3JpdGU9ZnVuY3Rpb24odCl7dGhpcy52ZXJzaW9uPTAsdGhpcy5mbGFncz0wLHRoaXMuc2l6ZT10aGlzLnNjaGVtZVVSSS5sZW5ndGgrMSsodGhpcy52YWx1ZS5sZW5ndGgrMSksdGhpcy53cml0ZUhlYWRlcih0KSx0LndyaXRlQ1N0cmluZyh0aGlzLnNjaGVtZVVSSSksdC53cml0ZUNTdHJpbmcodGhpcy52YWx1ZSl9LHIubWRoZEJveC5wcm90b3R5cGUud3JpdGU9ZnVuY3Rpb24odCl7dGhpcy5zaXplPTQqNCsyKjIsdGhpcy5mbGFncz0wLHRoaXMudmVyc2lvbj0wLHRoaXMud3JpdGVIZWFkZXIodCksdC53cml0ZVVpbnQzMih0aGlzLmNyZWF0aW9uX3RpbWUpLHQud3JpdGVVaW50MzIodGhpcy5tb2RpZmljYXRpb25fdGltZSksdC53cml0ZVVpbnQzMih0aGlzLnRpbWVzY2FsZSksdC53cml0ZVVpbnQzMih0aGlzLmR1cmF0aW9uKSx0LndyaXRlVWludDE2KHRoaXMubGFuZ3VhZ2UpLHQud3JpdGVVaW50MTYoMCl9LHIubWVoZEJveC5wcm90b3R5cGUud3JpdGU9ZnVuY3Rpb24odCl7dGhpcy52ZXJzaW9uPTAsdGhpcy5mbGFncz0wLHRoaXMuc2l6ZT00LHRoaXMud3JpdGVIZWFkZXIodCksdC53cml0ZVVpbnQzMih0aGlzLmZyYWdtZW50X2R1cmF0aW9uKX0sci5tZmhkQm94LnByb3RvdHlwZS53cml0ZT1mdW5jdGlvbih0KXt0aGlzLnZlcnNpb249MCx0aGlzLmZsYWdzPTAsdGhpcy5zaXplPTQsdGhpcy53cml0ZUhlYWRlcih0KSx0LndyaXRlVWludDMyKHRoaXMuc2VxdWVuY2VfbnVtYmVyKX0sci5tdmhkQm94LnByb3RvdHlwZS53cml0ZT1mdW5jdGlvbih0KXt0aGlzLnZlcnNpb249MCx0aGlzLmZsYWdzPTAsdGhpcy5zaXplPTIzKjQrMioyLHRoaXMud3JpdGVIZWFkZXIodCksdC53cml0ZVVpbnQzMih0aGlzLmNyZWF0aW9uX3RpbWUpLHQud3JpdGVVaW50MzIodGhpcy5tb2RpZmljYXRpb25fdGltZSksdC53cml0ZVVpbnQzMih0aGlzLnRpbWVzY2FsZSksdC53cml0ZVVpbnQzMih0aGlzLmR1cmF0aW9uKSx0LndyaXRlVWludDMyKHRoaXMucmF0ZSksdC53cml0ZVVpbnQxNih0aGlzLnZvbHVtZTw8OCksdC53cml0ZVVpbnQxNigwKSx0LndyaXRlVWludDMyKDApLHQud3JpdGVVaW50MzIoMCksdC53cml0ZVVpbnQzMkFycmF5KHRoaXMubWF0cml4KSx0LndyaXRlVWludDMyKDApLHQud3JpdGVVaW50MzIoMCksdC53cml0ZVVpbnQzMigwKSx0LndyaXRlVWludDMyKDApLHQud3JpdGVVaW50MzIoMCksdC53cml0ZVVpbnQzMigwKSx0LndyaXRlVWludDMyKHRoaXMubmV4dF90cmFja19pZCl9LHIuU2FtcGxlRW50cnkucHJvdG90eXBlLndyaXRlSGVhZGVyPWZ1bmN0aW9uKHQpe3RoaXMuc2l6ZT04LHIuQm94LnByb3RvdHlwZS53cml0ZUhlYWRlci5jYWxsKHRoaXMsdCksdC53cml0ZVVpbnQ4KDApLHQud3JpdGVVaW50OCgwKSx0LndyaXRlVWludDgoMCksdC53cml0ZVVpbnQ4KDApLHQud3JpdGVVaW50OCgwKSx0LndyaXRlVWludDgoMCksdC53cml0ZVVpbnQxNih0aGlzLmRhdGFfcmVmZXJlbmNlX2luZGV4KX0sci5TYW1wbGVFbnRyeS5wcm90b3R5cGUud3JpdGVGb290ZXI9ZnVuY3Rpb24odCl7Zm9yKHZhciBlPTA7ZTx0aGlzLmJveGVzLmxlbmd0aDtlKyspdGhpcy5ib3hlc1tlXS53cml0ZSh0KSx0aGlzLnNpemUrPXRoaXMuYm94ZXNbZV0uc2l6ZTtkLmRlYnVnKCJCb3hXcml0ZXIiLCJBZGp1c3RpbmcgYm94ICIrdGhpcy50eXBlKyIgd2l0aCBuZXcgc2l6ZSAiK3RoaXMuc2l6ZSksdC5hZGp1c3RVaW50MzIodGhpcy5zaXplUG9zaXRpb24sdGhpcy5zaXplKX0sci5TYW1wbGVFbnRyeS5wcm90b3R5cGUud3JpdGU9ZnVuY3Rpb24odCl7dGhpcy53cml0ZUhlYWRlcih0KSx0LndyaXRlVWludDhBcnJheSh0aGlzLmRhdGEpLHRoaXMuc2l6ZSs9dGhpcy5kYXRhLmxlbmd0aCxkLmRlYnVnKCJCb3hXcml0ZXIiLCJBZGp1c3RpbmcgYm94ICIrdGhpcy50eXBlKyIgd2l0aCBuZXcgc2l6ZSAiK3RoaXMuc2l6ZSksdC5hZGp1c3RVaW50MzIodGhpcy5zaXplUG9zaXRpb24sdGhpcy5zaXplKX0sci5WaXN1YWxTYW1wbGVFbnRyeS5wcm90b3R5cGUud3JpdGU9ZnVuY3Rpb24odCl7dGhpcy53cml0ZUhlYWRlcih0KSx0aGlzLnNpemUrPTIqNys2KjQrMzIsdC53cml0ZVVpbnQxNigwKSx0LndyaXRlVWludDE2KDApLHQud3JpdGVVaW50MzIoMCksdC53cml0ZVVpbnQzMigwKSx0LndyaXRlVWludDMyKDApLHQud3JpdGVVaW50MTYodGhpcy53aWR0aCksdC53cml0ZVVpbnQxNih0aGlzLmhlaWdodCksdC53cml0ZVVpbnQzMih0aGlzLmhvcml6cmVzb2x1dGlvbiksdC53cml0ZVVpbnQzMih0aGlzLnZlcnRyZXNvbHV0aW9uKSx0LndyaXRlVWludDMyKDApLHQud3JpdGVVaW50MTYodGhpcy5mcmFtZV9jb3VudCksdC53cml0ZVVpbnQ4KE1hdGgubWluKDMxLHRoaXMuY29tcHJlc3Nvcm5hbWUubGVuZ3RoKSksdC53cml0ZVN0cmluZyh0aGlzLmNvbXByZXNzb3JuYW1lLG51bGwsMzEpLHQud3JpdGVVaW50MTYodGhpcy5kZXB0aCksdC53cml0ZUludDE2KC0xKSx0aGlzLndyaXRlRm9vdGVyKHQpfSxyLkF1ZGlvU2FtcGxlRW50cnkucHJvdG90eXBlLndyaXRlPWZ1bmN0aW9uKHQpe3RoaXMud3JpdGVIZWFkZXIodCksdGhpcy5zaXplKz0yKjQrMyo0LHQud3JpdGVVaW50MzIoMCksdC53cml0ZVVpbnQzMigwKSx0LndyaXRlVWludDE2KHRoaXMuY2hhbm5lbF9jb3VudCksdC53cml0ZVVpbnQxNih0aGlzLnNhbXBsZXNpemUpLHQud3JpdGVVaW50MTYoMCksdC53cml0ZVVpbnQxNigwKSx0LndyaXRlVWludDMyKHRoaXMuc2FtcGxlcmF0ZTw8MTYpLHRoaXMud3JpdGVGb290ZXIodCl9LHIuc3RwcFNhbXBsZUVudHJ5LnByb3RvdHlwZS53cml0ZT1mdW5jdGlvbih0KXt0aGlzLndyaXRlSGVhZGVyKHQpLHRoaXMuc2l6ZSs9dGhpcy5uYW1lc3BhY2UubGVuZ3RoKzErdGhpcy5zY2hlbWFfbG9jYXRpb24ubGVuZ3RoKzErdGhpcy5hdXhpbGlhcnlfbWltZV90eXBlcy5sZW5ndGgrMSx0LndyaXRlQ1N0cmluZyh0aGlzLm5hbWVzcGFjZSksdC53cml0ZUNTdHJpbmcodGhpcy5zY2hlbWFfbG9jYXRpb24pLHQud3JpdGVDU3RyaW5nKHRoaXMuYXV4aWxpYXJ5X21pbWVfdHlwZXMpLHRoaXMud3JpdGVGb290ZXIodCl9LHIuU2FtcGxlR3JvdXBFbnRyeS5wcm90b3R5cGUud3JpdGU9ZnVuY3Rpb24odCl7dC53cml0ZVVpbnQ4QXJyYXkodGhpcy5kYXRhKX0sci5zYmdwQm94LnByb3RvdHlwZS53cml0ZT1mdW5jdGlvbih0KXt0aGlzLnZlcnNpb249MSx0aGlzLmZsYWdzPTAsdGhpcy5zaXplPTEyKzgqdGhpcy5lbnRyaWVzLmxlbmd0aCx0aGlzLndyaXRlSGVhZGVyKHQpLHQud3JpdGVTdHJpbmcodGhpcy5ncm91cGluZ190eXBlLG51bGwsNCksdC53cml0ZVVpbnQzMih0aGlzLmdyb3VwaW5nX3R5cGVfcGFyYW1ldGVyKSx0LndyaXRlVWludDMyKHRoaXMuZW50cmllcy5sZW5ndGgpO2Zvcih2YXIgZT0wO2U8dGhpcy5lbnRyaWVzLmxlbmd0aDtlKyspe3ZhciBzPXRoaXMuZW50cmllc1tlXTt0LndyaXRlSW50MzIocy5zYW1wbGVfY291bnQpLHQud3JpdGVJbnQzMihzLmdyb3VwX2Rlc2NyaXB0aW9uX2luZGV4KX19LHIuc2dwZEJveC5wcm90b3R5cGUud3JpdGU9ZnVuY3Rpb24odCl7dmFyIGUscztmb3IodGhpcy5mbGFncz0wLHRoaXMuc2l6ZT0xMixlPTA7ZTx0aGlzLmVudHJpZXMubGVuZ3RoO2UrKylzPXRoaXMuZW50cmllc1tlXSx0aGlzLnZlcnNpb249PT0xJiYodGhpcy5kZWZhdWx0X2xlbmd0aD09PTAmJih0aGlzLnNpemUrPTQpLHRoaXMuc2l6ZSs9cy5kYXRhLmxlbmd0aCk7Zm9yKHRoaXMud3JpdGVIZWFkZXIodCksdC53cml0ZVN0cmluZyh0aGlzLmdyb3VwaW5nX3R5cGUsbnVsbCw0KSx0aGlzLnZlcnNpb249PT0xJiZ0LndyaXRlVWludDMyKHRoaXMuZGVmYXVsdF9sZW5ndGgpLHRoaXMudmVyc2lvbj49MiYmdC53cml0ZVVpbnQzMih0aGlzLmRlZmF1bHRfc2FtcGxlX2Rlc2NyaXB0aW9uX2luZGV4KSx0LndyaXRlVWludDMyKHRoaXMuZW50cmllcy5sZW5ndGgpLGU9MDtlPHRoaXMuZW50cmllcy5sZW5ndGg7ZSsrKXM9dGhpcy5lbnRyaWVzW2VdLHRoaXMudmVyc2lvbj09PTEmJnRoaXMuZGVmYXVsdF9sZW5ndGg9PT0wJiZ0LndyaXRlVWludDMyKHMuZGVzY3JpcHRpb25fbGVuZ3RoKSxzLndyaXRlKHQpfSxyLnNpZHhCb3gucHJvdG90eXBlLndyaXRlPWZ1bmN0aW9uKHQpe3RoaXMudmVyc2lvbj0wLHRoaXMuZmxhZ3M9MCx0aGlzLnNpemU9NCo0KzIrMisxMip0aGlzLnJlZmVyZW5jZXMubGVuZ3RoLHRoaXMud3JpdGVIZWFkZXIodCksdC53cml0ZVVpbnQzMih0aGlzLnJlZmVyZW5jZV9JRCksdC53cml0ZVVpbnQzMih0aGlzLnRpbWVzY2FsZSksdC53cml0ZVVpbnQzMih0aGlzLmVhcmxpZXN0X3ByZXNlbnRhdGlvbl90aW1lKSx0LndyaXRlVWludDMyKHRoaXMuZmlyc3Rfb2Zmc2V0KSx0LndyaXRlVWludDE2KDApLHQud3JpdGVVaW50MTYodGhpcy5yZWZlcmVuY2VzLmxlbmd0aCk7Zm9yKHZhciBlPTA7ZTx0aGlzLnJlZmVyZW5jZXMubGVuZ3RoO2UrKyl7dmFyIHM9dGhpcy5yZWZlcmVuY2VzW2VdO3Qud3JpdGVVaW50MzIocy5yZWZlcmVuY2VfdHlwZTw8MzF8cy5yZWZlcmVuY2VkX3NpemUpLHQud3JpdGVVaW50MzIocy5zdWJzZWdtZW50X2R1cmF0aW9uKSx0LndyaXRlVWludDMyKHMuc3RhcnRzX3dpdGhfU0FQPDwzMXxzLlNBUF90eXBlPDwyOHxzLlNBUF9kZWx0YV90aW1lKX19LHIuc21oZEJveC5wcm90b3R5cGUud3JpdGU9ZnVuY3Rpb24odCl7dGhpcy52ZXJzaW9uPTAsdGhpcy5mbGFncz0xLHRoaXMuc2l6ZT00LHRoaXMud3JpdGVIZWFkZXIodCksdC53cml0ZVVpbnQxNih0aGlzLmJhbGFuY2UpLHQud3JpdGVVaW50MTYoMCl9LHIuc3Rjb0JveC5wcm90b3R5cGUud3JpdGU9ZnVuY3Rpb24odCl7dGhpcy52ZXJzaW9uPTAsdGhpcy5mbGFncz0wLHRoaXMuc2l6ZT00KzQqdGhpcy5jaHVua19vZmZzZXRzLmxlbmd0aCx0aGlzLndyaXRlSGVhZGVyKHQpLHQud3JpdGVVaW50MzIodGhpcy5jaHVua19vZmZzZXRzLmxlbmd0aCksdC53cml0ZVVpbnQzMkFycmF5KHRoaXMuY2h1bmtfb2Zmc2V0cyl9LHIuc3RzY0JveC5wcm90b3R5cGUud3JpdGU9ZnVuY3Rpb24odCl7dmFyIGU7Zm9yKHRoaXMudmVyc2lvbj0wLHRoaXMuZmxhZ3M9MCx0aGlzLnNpemU9NCsxMip0aGlzLmZpcnN0X2NodW5rLmxlbmd0aCx0aGlzLndyaXRlSGVhZGVyKHQpLHQud3JpdGVVaW50MzIodGhpcy5maXJzdF9jaHVuay5sZW5ndGgpLGU9MDtlPHRoaXMuZmlyc3RfY2h1bmsubGVuZ3RoO2UrKyl0LndyaXRlVWludDMyKHRoaXMuZmlyc3RfY2h1bmtbZV0pLHQud3JpdGVVaW50MzIodGhpcy5zYW1wbGVzX3Blcl9jaHVua1tlXSksdC53cml0ZVVpbnQzMih0aGlzLnNhbXBsZV9kZXNjcmlwdGlvbl9pbmRleFtlXSl9LHIuc3RzZEJveC5wcm90b3R5cGUud3JpdGU9ZnVuY3Rpb24odCl7dmFyIGU7Zm9yKHRoaXMudmVyc2lvbj0wLHRoaXMuZmxhZ3M9MCx0aGlzLnNpemU9MCx0aGlzLndyaXRlSGVhZGVyKHQpLHQud3JpdGVVaW50MzIodGhpcy5lbnRyaWVzLmxlbmd0aCksdGhpcy5zaXplKz00LGU9MDtlPHRoaXMuZW50cmllcy5sZW5ndGg7ZSsrKXRoaXMuZW50cmllc1tlXS53cml0ZSh0KSx0aGlzLnNpemUrPXRoaXMuZW50cmllc1tlXS5zaXplO2QuZGVidWcoIkJveFdyaXRlciIsIkFkanVzdGluZyBib3ggIit0aGlzLnR5cGUrIiB3aXRoIG5ldyBzaXplICIrdGhpcy5zaXplKSx0LmFkanVzdFVpbnQzMih0aGlzLnNpemVQb3NpdGlvbix0aGlzLnNpemUpfSxyLnN0c2hCb3gucHJvdG90eXBlLndyaXRlPWZ1bmN0aW9uKHQpe3ZhciBlO2Zvcih0aGlzLnZlcnNpb249MCx0aGlzLmZsYWdzPTAsdGhpcy5zaXplPTQrOCp0aGlzLnNoYWRvd2VkX3NhbXBsZV9udW1iZXJzLmxlbmd0aCx0aGlzLndyaXRlSGVhZGVyKHQpLHQud3JpdGVVaW50MzIodGhpcy5zaGFkb3dlZF9zYW1wbGVfbnVtYmVycy5sZW5ndGgpLGU9MDtlPHRoaXMuc2hhZG93ZWRfc2FtcGxlX251bWJlcnMubGVuZ3RoO2UrKyl0LndyaXRlVWludDMyKHRoaXMuc2hhZG93ZWRfc2FtcGxlX251bWJlcnNbZV0pLHQud3JpdGVVaW50MzIodGhpcy5zeW5jX3NhbXBsZV9udW1iZXJzW2VdKX0sci5zdHNzQm94LnByb3RvdHlwZS53cml0ZT1mdW5jdGlvbih0KXt0aGlzLnZlcnNpb249MCx0aGlzLmZsYWdzPTAsdGhpcy5zaXplPTQrNCp0aGlzLnNhbXBsZV9udW1iZXJzLmxlbmd0aCx0aGlzLndyaXRlSGVhZGVyKHQpLHQud3JpdGVVaW50MzIodGhpcy5zYW1wbGVfbnVtYmVycy5sZW5ndGgpLHQud3JpdGVVaW50MzJBcnJheSh0aGlzLnNhbXBsZV9udW1iZXJzKX0sci5zdHN6Qm94LnByb3RvdHlwZS53cml0ZT1mdW5jdGlvbih0KXt2YXIgZSxzPSEwO2lmKHRoaXMudmVyc2lvbj0wLHRoaXMuZmxhZ3M9MCx0aGlzLnNhbXBsZV9zaXplcy5sZW5ndGg+MClmb3IoZT0wO2UrMTx0aGlzLnNhbXBsZV9zaXplcy5sZW5ndGg7KWlmKHRoaXMuc2FtcGxlX3NpemVzW2UrMV0hPT10aGlzLnNhbXBsZV9zaXplc1swXSl7cz0hMTticmVha31lbHNlIGUrKztlbHNlIHM9ITE7dGhpcy5zaXplPTgsc3x8KHRoaXMuc2l6ZSs9NCp0aGlzLnNhbXBsZV9zaXplcy5sZW5ndGgpLHRoaXMud3JpdGVIZWFkZXIodCkscz90LndyaXRlVWludDMyKHRoaXMuc2FtcGxlX3NpemVzWzBdKTp0LndyaXRlVWludDMyKDApLHQud3JpdGVVaW50MzIodGhpcy5zYW1wbGVfc2l6ZXMubGVuZ3RoKSxzfHx0LndyaXRlVWludDMyQXJyYXkodGhpcy5zYW1wbGVfc2l6ZXMpfSxyLnN0dHNCb3gucHJvdG90eXBlLndyaXRlPWZ1bmN0aW9uKHQpe3ZhciBlO2Zvcih0aGlzLnZlcnNpb249MCx0aGlzLmZsYWdzPTAsdGhpcy5zaXplPTQrOCp0aGlzLnNhbXBsZV9jb3VudHMubGVuZ3RoLHRoaXMud3JpdGVIZWFkZXIodCksdC53cml0ZVVpbnQzMih0aGlzLnNhbXBsZV9jb3VudHMubGVuZ3RoKSxlPTA7ZTx0aGlzLnNhbXBsZV9jb3VudHMubGVuZ3RoO2UrKyl0LndyaXRlVWludDMyKHRoaXMuc2FtcGxlX2NvdW50c1tlXSksdC53cml0ZVVpbnQzMih0aGlzLnNhbXBsZV9kZWx0YXNbZV0pfSxyLnRmZHRCb3gucHJvdG90eXBlLndyaXRlPWZ1bmN0aW9uKHQpe3ZhciBlPU1hdGgucG93KDIsMzIpLTE7dGhpcy52ZXJzaW9uPXRoaXMuYmFzZU1lZGlhRGVjb2RlVGltZT5lPzE6MCx0aGlzLmZsYWdzPTAsdGhpcy5zaXplPTQsdGhpcy52ZXJzaW9uPT09MSYmKHRoaXMuc2l6ZSs9NCksdGhpcy53cml0ZUhlYWRlcih0KSx0aGlzLnZlcnNpb249PT0xP3Qud3JpdGVVaW50NjQodGhpcy5iYXNlTWVkaWFEZWNvZGVUaW1lKTp0LndyaXRlVWludDMyKHRoaXMuYmFzZU1lZGlhRGVjb2RlVGltZSl9LHIudGZoZEJveC5wcm90b3R5cGUud3JpdGU9ZnVuY3Rpb24odCl7dGhpcy52ZXJzaW9uPTAsdGhpcy5zaXplPTQsdGhpcy5mbGFncyZyLlRGSERfRkxBR19CQVNFX0RBVEFfT0ZGU0VUJiYodGhpcy5zaXplKz04KSx0aGlzLmZsYWdzJnIuVEZIRF9GTEFHX1NBTVBMRV9ERVNDJiYodGhpcy5zaXplKz00KSx0aGlzLmZsYWdzJnIuVEZIRF9GTEFHX1NBTVBMRV9EVVImJih0aGlzLnNpemUrPTQpLHRoaXMuZmxhZ3Mmci5URkhEX0ZMQUdfU0FNUExFX1NJWkUmJih0aGlzLnNpemUrPTQpLHRoaXMuZmxhZ3Mmci5URkhEX0ZMQUdfU0FNUExFX0ZMQUdTJiYodGhpcy5zaXplKz00KSx0aGlzLndyaXRlSGVhZGVyKHQpLHQud3JpdGVVaW50MzIodGhpcy50cmFja19pZCksdGhpcy5mbGFncyZyLlRGSERfRkxBR19CQVNFX0RBVEFfT0ZGU0VUJiZ0LndyaXRlVWludDY0KHRoaXMuYmFzZV9kYXRhX29mZnNldCksdGhpcy5mbGFncyZyLlRGSERfRkxBR19TQU1QTEVfREVTQyYmdC53cml0ZVVpbnQzMih0aGlzLmRlZmF1bHRfc2FtcGxlX2Rlc2NyaXB0aW9uX2luZGV4KSx0aGlzLmZsYWdzJnIuVEZIRF9GTEFHX1NBTVBMRV9EVVImJnQud3JpdGVVaW50MzIodGhpcy5kZWZhdWx0X3NhbXBsZV9kdXJhdGlvbiksdGhpcy5mbGFncyZyLlRGSERfRkxBR19TQU1QTEVfU0laRSYmdC53cml0ZVVpbnQzMih0aGlzLmRlZmF1bHRfc2FtcGxlX3NpemUpLHRoaXMuZmxhZ3Mmci5URkhEX0ZMQUdfU0FNUExFX0ZMQUdTJiZ0LndyaXRlVWludDMyKHRoaXMuZGVmYXVsdF9zYW1wbGVfZmxhZ3MpfSxyLnRraGRCb3gucHJvdG90eXBlLndyaXRlPWZ1bmN0aW9uKHQpe3RoaXMudmVyc2lvbj0wLHRoaXMuc2l6ZT00KjE4KzIqNCx0aGlzLndyaXRlSGVhZGVyKHQpLHQud3JpdGVVaW50MzIodGhpcy5jcmVhdGlvbl90aW1lKSx0LndyaXRlVWludDMyKHRoaXMubW9kaWZpY2F0aW9uX3RpbWUpLHQud3JpdGVVaW50MzIodGhpcy50cmFja19pZCksdC53cml0ZVVpbnQzMigwKSx0LndyaXRlVWludDMyKHRoaXMuZHVyYXRpb24pLHQud3JpdGVVaW50MzIoMCksdC53cml0ZVVpbnQzMigwKSx0LndyaXRlSW50MTYodGhpcy5sYXllciksdC53cml0ZUludDE2KHRoaXMuYWx0ZXJuYXRlX2dyb3VwKSx0LndyaXRlSW50MTYodGhpcy52b2x1bWU8PDgpLHQud3JpdGVVaW50MTYoMCksdC53cml0ZUludDMyQXJyYXkodGhpcy5tYXRyaXgpLHQud3JpdGVVaW50MzIodGhpcy53aWR0aCksdC53cml0ZVVpbnQzMih0aGlzLmhlaWdodCl9LHIudHJleEJveC5wcm90b3R5cGUud3JpdGU9ZnVuY3Rpb24odCl7dGhpcy52ZXJzaW9uPTAsdGhpcy5mbGFncz0wLHRoaXMuc2l6ZT00KjUsdGhpcy53cml0ZUhlYWRlcih0KSx0LndyaXRlVWludDMyKHRoaXMudHJhY2tfaWQpLHQud3JpdGVVaW50MzIodGhpcy5kZWZhdWx0X3NhbXBsZV9kZXNjcmlwdGlvbl9pbmRleCksdC53cml0ZVVpbnQzMih0aGlzLmRlZmF1bHRfc2FtcGxlX2R1cmF0aW9uKSx0LndyaXRlVWludDMyKHRoaXMuZGVmYXVsdF9zYW1wbGVfc2l6ZSksdC53cml0ZVVpbnQzMih0aGlzLmRlZmF1bHRfc2FtcGxlX2ZsYWdzKX0sci50cnVuQm94LnByb3RvdHlwZS53cml0ZT1mdW5jdGlvbih0KXt0aGlzLnZlcnNpb249MCx0aGlzLnNpemU9NCx0aGlzLmZsYWdzJnIuVFJVTl9GTEFHU19EQVRBX09GRlNFVCYmKHRoaXMuc2l6ZSs9NCksdGhpcy5mbGFncyZyLlRSVU5fRkxBR1NfRklSU1RfRkxBRyYmKHRoaXMuc2l6ZSs9NCksdGhpcy5mbGFncyZyLlRSVU5fRkxBR1NfRFVSQVRJT04mJih0aGlzLnNpemUrPTQqdGhpcy5zYW1wbGVfZHVyYXRpb24ubGVuZ3RoKSx0aGlzLmZsYWdzJnIuVFJVTl9GTEFHU19TSVpFJiYodGhpcy5zaXplKz00KnRoaXMuc2FtcGxlX3NpemUubGVuZ3RoKSx0aGlzLmZsYWdzJnIuVFJVTl9GTEFHU19GTEFHUyYmKHRoaXMuc2l6ZSs9NCp0aGlzLnNhbXBsZV9mbGFncy5sZW5ndGgpLHRoaXMuZmxhZ3Mmci5UUlVOX0ZMQUdTX0NUU19PRkZTRVQmJih0aGlzLnNpemUrPTQqdGhpcy5zYW1wbGVfY29tcG9zaXRpb25fdGltZV9vZmZzZXQubGVuZ3RoKSx0aGlzLndyaXRlSGVhZGVyKHQpLHQud3JpdGVVaW50MzIodGhpcy5zYW1wbGVfY291bnQpLHRoaXMuZmxhZ3Mmci5UUlVOX0ZMQUdTX0RBVEFfT0ZGU0VUJiYodGhpcy5kYXRhX29mZnNldF9wb3NpdGlvbj10LmdldFBvc2l0aW9uKCksdC53cml0ZUludDMyKHRoaXMuZGF0YV9vZmZzZXQpKSx0aGlzLmZsYWdzJnIuVFJVTl9GTEFHU19GSVJTVF9GTEFHJiZ0LndyaXRlVWludDMyKHRoaXMuZmlyc3Rfc2FtcGxlX2ZsYWdzKTtmb3IodmFyIGU9MDtlPHRoaXMuc2FtcGxlX2NvdW50O2UrKyl0aGlzLmZsYWdzJnIuVFJVTl9GTEFHU19EVVJBVElPTiYmdC53cml0ZVVpbnQzMih0aGlzLnNhbXBsZV9kdXJhdGlvbltlXSksdGhpcy5mbGFncyZyLlRSVU5fRkxBR1NfU0laRSYmdC53cml0ZVVpbnQzMih0aGlzLnNhbXBsZV9zaXplW2VdKSx0aGlzLmZsYWdzJnIuVFJVTl9GTEFHU19GTEFHUyYmdC53cml0ZVVpbnQzMih0aGlzLnNhbXBsZV9mbGFnc1tlXSksdGhpcy5mbGFncyZyLlRSVU5fRkxBR1NfQ1RTX09GRlNFVCYmKHRoaXMudmVyc2lvbj09PTA/dC53cml0ZVVpbnQzMih0aGlzLnNhbXBsZV9jb21wb3NpdGlvbl90aW1lX29mZnNldFtlXSk6dC53cml0ZUludDMyKHRoaXMuc2FtcGxlX2NvbXBvc2l0aW9uX3RpbWVfb2Zmc2V0W2VdKSl9LHJbInVybCBCb3giXS5wcm90b3R5cGUud3JpdGU9ZnVuY3Rpb24odCl7dGhpcy52ZXJzaW9uPTAsdGhpcy5sb2NhdGlvbj8odGhpcy5mbGFncz0wLHRoaXMuc2l6ZT10aGlzLmxvY2F0aW9uLmxlbmd0aCsxKToodGhpcy5mbGFncz0xLHRoaXMuc2l6ZT0wKSx0aGlzLndyaXRlSGVhZGVyKHQpLHRoaXMubG9jYXRpb24mJnQud3JpdGVDU3RyaW5nKHRoaXMubG9jYXRpb24pfSxyWyJ1cm4gQm94Il0ucHJvdG90eXBlLndyaXRlPWZ1bmN0aW9uKHQpe3RoaXMudmVyc2lvbj0wLHRoaXMuZmxhZ3M9MCx0aGlzLnNpemU9dGhpcy5uYW1lLmxlbmd0aCsxKyh0aGlzLmxvY2F0aW9uP3RoaXMubG9jYXRpb24ubGVuZ3RoKzE6MCksdGhpcy53cml0ZUhlYWRlcih0KSx0LndyaXRlQ1N0cmluZyh0aGlzLm5hbWUpLHRoaXMubG9jYXRpb24mJnQud3JpdGVDU3RyaW5nKHRoaXMubG9jYXRpb24pfSxyLnZtaGRCb3gucHJvdG90eXBlLndyaXRlPWZ1bmN0aW9uKHQpe3RoaXMudmVyc2lvbj0wLHRoaXMuZmxhZ3M9MSx0aGlzLnNpemU9OCx0aGlzLndyaXRlSGVhZGVyKHQpLHQud3JpdGVVaW50MTYodGhpcy5ncmFwaGljc21vZGUpLHQud3JpdGVVaW50MTZBcnJheSh0aGlzLm9wY29sb3IpfSxyLmN0dHNCb3gucHJvdG90eXBlLnVucGFjaz1mdW5jdGlvbih0KXt2YXIgZSxzLG47Zm9yKG49MCxlPTA7ZTx0aGlzLnNhbXBsZV9jb3VudHMubGVuZ3RoO2UrKylmb3Iocz0wO3M8dGhpcy5zYW1wbGVfY291bnRzW2VdO3MrKyl0W25dLnB0cz10W25dLmR0cyt0aGlzLnNhbXBsZV9vZmZzZXRzW2VdLG4rK30sci5zdHRzQm94LnByb3RvdHlwZS51bnBhY2s9ZnVuY3Rpb24odCl7dmFyIGUscyxuO2ZvcihuPTAsZT0wO2U8dGhpcy5zYW1wbGVfY291bnRzLmxlbmd0aDtlKyspZm9yKHM9MDtzPHRoaXMuc2FtcGxlX2NvdW50c1tlXTtzKyspbj09PTA/dFtuXS5kdHM9MDp0W25dLmR0cz10W24tMV0uZHRzK3RoaXMuc2FtcGxlX2RlbHRhc1tlXSxuKyt9LHIuc3Rjb0JveC5wcm90b3R5cGUudW5wYWNrPWZ1bmN0aW9uKHQpe3ZhciBlO2ZvcihlPTA7ZTx0aGlzLmNodW5rX29mZnNldHMubGVuZ3RoO2UrKyl0W2VdLm9mZnNldD10aGlzLmNodW5rX29mZnNldHNbZV19LHIuc3RzY0JveC5wcm90b3R5cGUudW5wYWNrPWZ1bmN0aW9uKHQpe3ZhciBlLHMsbixhLG87Zm9yKGE9MCxvPTAsZT0wO2U8dGhpcy5maXJzdF9jaHVuay5sZW5ndGg7ZSsrKWZvcihzPTA7czwoZSsxPHRoaXMuZmlyc3RfY2h1bmsubGVuZ3RoP3RoaXMuZmlyc3RfY2h1bmtbZSsxXToxLzApO3MrKylmb3IobysrLG49MDtuPHRoaXMuc2FtcGxlc19wZXJfY2h1bmtbZV07bisrKXtpZih0W2FdKXRbYV0uZGVzY3JpcHRpb25faW5kZXg9dGhpcy5zYW1wbGVfZGVzY3JpcHRpb25faW5kZXhbZV0sdFthXS5jaHVua19pbmRleD1vO2Vsc2UgcmV0dXJuO2ErK319LHIuc3RzekJveC5wcm90b3R5cGUudW5wYWNrPWZ1bmN0aW9uKHQpe3ZhciBlO2ZvcihlPTA7ZTx0aGlzLnNhbXBsZV9zaXplcy5sZW5ndGg7ZSsrKXRbZV0uc2l6ZT10aGlzLnNhbXBsZV9zaXplc1tlXX0sci5ESUZGX0JPWEVTX1BST1BfTkFNRVM9WyJib3hlcyIsImVudHJpZXMiLCJyZWZlcmVuY2VzIiwic3Vic2FtcGxlcyIsIml0ZW1zIiwiaXRlbV9pbmZvcyIsImV4dGVudHMiLCJhc3NvY2lhdGlvbnMiLCJzdWJzZWdtZW50cyIsInJhbmdlcyIsInNlZWtMaXN0cyIsInNlZWtQb2ludHMiLCJlc2QiLCJsZXZlbHMiXSxyLkRJRkZfUFJJTUlUSVZFX0FSUkFZX1BST1BfTkFNRVM9WyJjb21wYXRpYmxlX2JyYW5kcyIsIm1hdHJpeCIsIm9wY29sb3IiLCJzYW1wbGVfY291bnRzIiwic2FtcGxlX2NvdW50cyIsInNhbXBsZV9kZWx0YXMiLCJmaXJzdF9jaHVuayIsInNhbXBsZXNfcGVyX2NodW5rIiwic2FtcGxlX3NpemVzIiwiY2h1bmtfb2Zmc2V0cyIsInNhbXBsZV9vZmZzZXRzIiwic2FtcGxlX2Rlc2NyaXB0aW9uX2luZGV4Iiwic2FtcGxlX2R1cmF0aW9uIl0sci5ib3hFcXVhbEZpZWxkcz1mdW5jdGlvbih0LGUpe2lmKHQmJiFlKXJldHVybiExO3ZhciBzO2ZvcihzIGluIHQpaWYoIShyLkRJRkZfQk9YRVNfUFJPUF9OQU1FUy5pbmRleE9mKHMpPi0xKSl7aWYodFtzXWluc3RhbmNlb2Ygci5Cb3h8fGVbc11pbnN0YW5jZW9mIHIuQm94KWNvbnRpbnVlO2lmKHR5cGVvZiB0W3NdPiJ1Inx8dHlwZW9mIGVbc10+InUiKWNvbnRpbnVlO2lmKHR5cGVvZiB0W3NdPT0iZnVuY3Rpb24ifHx0eXBlb2YgZVtzXT09ImZ1bmN0aW9uIiljb250aW51ZTtpZih0LnN1YkJveE5hbWVzJiZ0LnN1YkJveE5hbWVzLmluZGV4T2Yocy5zbGljZSgwLDQpKT4tMXx8ZS5zdWJCb3hOYW1lcyYmZS5zdWJCb3hOYW1lcy5pbmRleE9mKHMuc2xpY2UoMCw0KSk+LTEpY29udGludWU7aWYocz09PSJkYXRhInx8cz09PSJzdGFydCJ8fHM9PT0ic2l6ZSJ8fHM9PT0iY3JlYXRpb25fdGltZSJ8fHM9PT0ibW9kaWZpY2F0aW9uX3RpbWUiKWNvbnRpbnVlO2lmKHIuRElGRl9QUklNSVRJVkVfQVJSQVlfUFJPUF9OQU1FUy5pbmRleE9mKHMpPi0xKWNvbnRpbnVlO2lmKHRbc10hPT1lW3NdKXJldHVybiExfXJldHVybiEwfSxyLmJveEVxdWFsPWZ1bmN0aW9uKHQsZSl7aWYoIXIuYm94RXF1YWxGaWVsZHModCxlKSlyZXR1cm4hMTtmb3IodmFyIHM9MDtzPHIuRElGRl9CT1hFU19QUk9QX05BTUVTLmxlbmd0aDtzKyspe3ZhciBuPXIuRElGRl9CT1hFU19QUk9QX05BTUVTW3NdO2lmKHRbbl0mJmVbbl0mJiFyLmJveEVxdWFsKHRbbl0sZVtuXSkpcmV0dXJuITF9cmV0dXJuITB9O3ZhciB6PWZ1bmN0aW9uKCl7fTt6LnByb3RvdHlwZS5wYXJzZVNhbXBsZT1mdW5jdGlvbih0KXt2YXIgZT17fSxzO2UucmVzb3VyY2VzPVtdO3ZhciBuPW5ldyBjKHQuZGF0YS5idWZmZXIpO2lmKCF0LnN1YnNhbXBsZXN8fHQuc3Vic2FtcGxlcy5sZW5ndGg9PT0wKWUuZG9jdW1lbnRTdHJpbmc9bi5yZWFkU3RyaW5nKHQuZGF0YS5sZW5ndGgpO2Vsc2UgaWYoZS5kb2N1bWVudFN0cmluZz1uLnJlYWRTdHJpbmcodC5zdWJzYW1wbGVzWzBdLnNpemUpLHQuc3Vic2FtcGxlcy5sZW5ndGg+MSlmb3Iocz0xO3M8dC5zdWJzYW1wbGVzLmxlbmd0aDtzKyspZS5yZXNvdXJjZXNbc109bi5yZWFkVWludDhBcnJheSh0LnN1YnNhbXBsZXNbc10uc2l6ZSk7cmV0dXJuIHR5cGVvZiBET01QYXJzZXI8InUiJiYoZS5kb2N1bWVudD1uZXcgRE9NUGFyc2VyKCkucGFyc2VGcm9tU3RyaW5nKGUuZG9jdW1lbnRTdHJpbmcsImFwcGxpY2F0aW9uL3htbCIpKSxlfTt2YXIgQj1mdW5jdGlvbigpe307Qi5wcm90b3R5cGUucGFyc2VTYW1wbGU9ZnVuY3Rpb24odCl7dmFyIGUscz1uZXcgYyh0LmRhdGEuYnVmZmVyKTtyZXR1cm4gZT1zLnJlYWRTdHJpbmcodC5kYXRhLmxlbmd0aCksZX0sQi5wcm90b3R5cGUucGFyc2VDb25maWc9ZnVuY3Rpb24odCl7dmFyIGUscz1uZXcgYyh0LmJ1ZmZlcik7cmV0dXJuIHMucmVhZFVpbnQzMigpLGU9cy5yZWFkQ1N0cmluZygpLGV9LF8uWE1MU3VidGl0bGVpbjRQYXJzZXI9eixfLlRleHRpbjRQYXJzZXI9Qjt2YXIgdT1mdW5jdGlvbih0KXt0aGlzLnN0cmVhbT10fHxuZXcgVSx0aGlzLmJveGVzPVtdLHRoaXMubWRhdHM9W10sdGhpcy5tb29mcz1bXSx0aGlzLmlzUHJvZ3Jlc3NpdmU9ITEsdGhpcy5tb292U3RhcnRGb3VuZD0hMSx0aGlzLm9uTW9vdlN0YXJ0PW51bGwsdGhpcy5tb292U3RhcnRTZW50PSExLHRoaXMub25SZWFkeT1udWxsLHRoaXMucmVhZHlTZW50PSExLHRoaXMub25TZWdtZW50PW51bGwsdGhpcy5vblNhbXBsZXM9bnVsbCx0aGlzLm9uRXJyb3I9bnVsbCx0aGlzLnNhbXBsZUxpc3RCdWlsdD0hMSx0aGlzLmZyYWdtZW50ZWRUcmFja3M9W10sdGhpcy5leHRyYWN0ZWRUcmFja3M9W10sdGhpcy5pc0ZyYWdtZW50YXRpb25Jbml0aWFsaXplZD0hMSx0aGlzLnNhbXBsZVByb2Nlc3NpbmdTdGFydGVkPSExLHRoaXMubmV4dE1vb2ZOdW1iZXI9MCx0aGlzLml0ZW1MaXN0QnVpbHQ9ITEsdGhpcy5vblNpZHg9bnVsbCx0aGlzLnNpZHhTZW50PSExfTt1LnByb3RvdHlwZS5zZXRTZWdtZW50T3B0aW9ucz1mdW5jdGlvbih0LGUscyl7dmFyIG49dGhpcy5nZXRUcmFja0J5SWQodCk7aWYobil7dmFyIGE9e307dGhpcy5mcmFnbWVudGVkVHJhY2tzLnB1c2goYSksYS5pZD10LGEudXNlcj1lLGEudHJhaz1uLG4ubmV4dFNhbXBsZT0wLGEuc2VnbWVudFN0cmVhbT1udWxsLGEubmJfc2FtcGxlcz0xZTMsYS5yYXBBbGlnbmVtZW50PSEwLHMmJihzLm5iU2FtcGxlcyYmKGEubmJfc2FtcGxlcz1zLm5iU2FtcGxlcykscy5yYXBBbGlnbmVtZW50JiYoYS5yYXBBbGlnbmVtZW50PXMucmFwQWxpZ25lbWVudCkpfX0sdS5wcm90b3R5cGUudW5zZXRTZWdtZW50T3B0aW9ucz1mdW5jdGlvbih0KXtmb3IodmFyIGU9LTEscz0wO3M8dGhpcy5mcmFnbWVudGVkVHJhY2tzLmxlbmd0aDtzKyspe3ZhciBuPXRoaXMuZnJhZ21lbnRlZFRyYWNrc1tzXTtuLmlkPT10JiYoZT1zKX1lPi0xJiZ0aGlzLmZyYWdtZW50ZWRUcmFja3Muc3BsaWNlKGUsMSl9LHUucHJvdG90eXBlLnNldEV4dHJhY3Rpb25PcHRpb25zPWZ1bmN0aW9uKHQsZSxzKXt2YXIgbj10aGlzLmdldFRyYWNrQnlJZCh0KTtpZihuKXt2YXIgYT17fTt0aGlzLmV4dHJhY3RlZFRyYWNrcy5wdXNoKGEpLGEuaWQ9dCxhLnVzZXI9ZSxhLnRyYWs9bixuLm5leHRTYW1wbGU9MCxhLm5iX3NhbXBsZXM9MWUzLGEuc2FtcGxlcz1bXSxzJiZzLm5iU2FtcGxlcyYmKGEubmJfc2FtcGxlcz1zLm5iU2FtcGxlcyl9fSx1LnByb3RvdHlwZS51bnNldEV4dHJhY3Rpb25PcHRpb25zPWZ1bmN0aW9uKHQpe2Zvcih2YXIgZT0tMSxzPTA7czx0aGlzLmV4dHJhY3RlZFRyYWNrcy5sZW5ndGg7cysrKXt2YXIgbj10aGlzLmV4dHJhY3RlZFRyYWNrc1tzXTtuLmlkPT10JiYoZT1zKX1lPi0xJiZ0aGlzLmV4dHJhY3RlZFRyYWNrcy5zcGxpY2UoZSwxKX0sdS5wcm90b3R5cGUucGFyc2U9ZnVuY3Rpb24oKXt2YXIgdCxlLHM9ITE7aWYoISh0aGlzLnJlc3RvcmVQYXJzZVBvc2l0aW9uJiYhdGhpcy5yZXN0b3JlUGFyc2VQb3NpdGlvbigpKSlmb3IoOzspaWYodGhpcy5oYXNJbmNvbXBsZXRlTWRhdCYmdGhpcy5oYXNJbmNvbXBsZXRlTWRhdCgpKXtpZih0aGlzLnByb2Nlc3NJbmNvbXBsZXRlTWRhdCgpKWNvbnRpbnVlO3JldHVybn1lbHNlIGlmKHRoaXMuc2F2ZVBhcnNlUG9zaXRpb24mJnRoaXMuc2F2ZVBhcnNlUG9zaXRpb24oKSx0PXIucGFyc2VPbmVCb3godGhpcy5zdHJlYW0scyksdC5jb2RlPT09ci5FUlJfTk9UX0VOT1VHSF9EQVRBKWlmKHRoaXMucHJvY2Vzc0luY29tcGxldGVCb3gpe2lmKHRoaXMucHJvY2Vzc0luY29tcGxldGVCb3godCkpY29udGludWU7cmV0dXJufWVsc2UgcmV0dXJuO2Vsc2V7dmFyIG47c3dpdGNoKGU9dC5ib3gsbj1lLnR5cGUhPT0idXVpZCI/ZS50eXBlOmUudXVpZCx0aGlzLmJveGVzLnB1c2goZSksbil7Y2FzZSJtZGF0Ijp0aGlzLm1kYXRzLnB1c2goZSk7YnJlYWs7Y2FzZSJtb29mIjp0aGlzLm1vb2ZzLnB1c2goZSk7YnJlYWs7Y2FzZSJtb292Ijp0aGlzLm1vb3ZTdGFydEZvdW5kPSEwLHRoaXMubWRhdHMubGVuZ3RoPT09MCYmKHRoaXMuaXNQcm9ncmVzc2l2ZT0hMCk7ZGVmYXVsdDp0aGlzW25dIT09dm9pZCAwJiZkLndhcm4oIklTT0ZpbGUiLCJEdXBsaWNhdGUgQm94IG9mIHR5cGU6ICIrbisiLCBvdmVycmlkaW5nIHByZXZpb3VzIG9jY3VycmVuY2UiKSx0aGlzW25dPWU7YnJlYWt9dGhpcy51cGRhdGVVc2VkQnl0ZXMmJnRoaXMudXBkYXRlVXNlZEJ5dGVzKGUsdCl9fSx1LnByb3RvdHlwZS5jaGVja0J1ZmZlcj1mdW5jdGlvbih0KXtpZih0PT1udWxsKXRocm93IkJ1ZmZlciBtdXN0IGJlIGRlZmluZWQgYW5kIG5vbiBlbXB0eSI7aWYodC5maWxlU3RhcnQ9PT12b2lkIDApdGhyb3ciQnVmZmVyIG11c3QgaGF2ZSBhIGZpbGVTdGFydCBwcm9wZXJ0eSI7cmV0dXJuIHQuYnl0ZUxlbmd0aD09PTA/KGQud2FybigiSVNPRmlsZSIsIklnbm9yaW5nIGVtcHR5IGJ1ZmZlciAoZmlsZVN0YXJ0OiAiK3QuZmlsZVN0YXJ0KyIpIiksdGhpcy5zdHJlYW0ubG9nQnVmZmVyTGV2ZWwoKSwhMSk6KGQuaW5mbygiSVNPRmlsZSIsIlByb2Nlc3NpbmcgYnVmZmVyIChmaWxlU3RhcnQ6ICIrdC5maWxlU3RhcnQrIikiKSx0LnVzZWRCeXRlcz0wLHRoaXMuc3RyZWFtLmluc2VydEJ1ZmZlcih0KSx0aGlzLnN0cmVhbS5sb2dCdWZmZXJMZXZlbCgpLHRoaXMuc3RyZWFtLmluaXRpYWxpemVkKCk/ITA6KGQud2FybigiSVNPRmlsZSIsIk5vdCByZWFkeSB0byBzdGFydCBwYXJzaW5nIiksITEpKX0sdS5wcm90b3R5cGUuYXBwZW5kQnVmZmVyPWZ1bmN0aW9uKHQsZSl7dmFyIHM7aWYodGhpcy5jaGVja0J1ZmZlcih0KSlyZXR1cm4gdGhpcy5wYXJzZSgpLHRoaXMubW9vdlN0YXJ0Rm91bmQmJiF0aGlzLm1vb3ZTdGFydFNlbnQmJih0aGlzLm1vb3ZTdGFydFNlbnQ9ITAsdGhpcy5vbk1vb3ZTdGFydCYmdGhpcy5vbk1vb3ZTdGFydCgpKSx0aGlzLm1vb3Y/KHRoaXMuc2FtcGxlTGlzdEJ1aWx0fHwodGhpcy5idWlsZFNhbXBsZUxpc3RzKCksdGhpcy5zYW1wbGVMaXN0QnVpbHQ9ITApLHRoaXMudXBkYXRlU2FtcGxlTGlzdHMoKSx0aGlzLm9uUmVhZHkmJiF0aGlzLnJlYWR5U2VudCYmKHRoaXMucmVhZHlTZW50PSEwLHRoaXMub25SZWFkeSh0aGlzLmdldEluZm8oKSkpLHRoaXMucHJvY2Vzc1NhbXBsZXMoZSksdGhpcy5uZXh0U2Vla1Bvc2l0aW9uPyhzPXRoaXMubmV4dFNlZWtQb3NpdGlvbix0aGlzLm5leHRTZWVrUG9zaXRpb249dm9pZCAwKTpzPXRoaXMubmV4dFBhcnNlUG9zaXRpb24sdGhpcy5zdHJlYW0uZ2V0RW5kRmlsZVBvc2l0aW9uQWZ0ZXImJihzPXRoaXMuc3RyZWFtLmdldEVuZEZpbGVQb3NpdGlvbkFmdGVyKHMpKSk6dGhpcy5uZXh0UGFyc2VQb3NpdGlvbj9zPXRoaXMubmV4dFBhcnNlUG9zaXRpb246cz0wLHRoaXMuc2lkeCYmdGhpcy5vblNpZHgmJiF0aGlzLnNpZHhTZW50JiYodGhpcy5vblNpZHgodGhpcy5zaWR4KSx0aGlzLnNpZHhTZW50PSEwKSx0aGlzLm1ldGEmJih0aGlzLmZsYXR0ZW5JdGVtSW5mbyYmIXRoaXMuaXRlbUxpc3RCdWlsdCYmKHRoaXMuZmxhdHRlbkl0ZW1JbmZvKCksdGhpcy5pdGVtTGlzdEJ1aWx0PSEwKSx0aGlzLnByb2Nlc3NJdGVtcyYmdGhpcy5wcm9jZXNzSXRlbXModGhpcy5vbkl0ZW0pKSx0aGlzLnN0cmVhbS5jbGVhbkJ1ZmZlcnMmJihkLmluZm8oIklTT0ZpbGUiLCJEb25lIHByb2Nlc3NpbmcgYnVmZmVyIChmaWxlU3RhcnQ6ICIrdC5maWxlU3RhcnQrIikgLSBuZXh0IGJ1ZmZlciB0byBmZXRjaCBzaG91bGQgaGF2ZSBhIGZpbGVTdGFydCBwb3NpdGlvbiBvZiAiK3MpLHRoaXMuc3RyZWFtLmxvZ0J1ZmZlckxldmVsKCksdGhpcy5zdHJlYW0uY2xlYW5CdWZmZXJzKCksdGhpcy5zdHJlYW0ubG9nQnVmZmVyTGV2ZWwoITApLGQuaW5mbygiSVNPRmlsZSIsIlNhbXBsZSBkYXRhIHNpemUgaW4gbWVtb3J5OiAiK3RoaXMuZ2V0QWxsb2NhdGVkU2FtcGxlRGF0YVNpemUoKSkpLHN9LHUucHJvdG90eXBlLmdldEluZm89ZnVuY3Rpb24oKXt2YXIgdCxlLHM9e30sbixhLG8saCxmPW5ldyBEYXRlKCIxOTA0LTAxLTAxVDAwOjAwOjAwWiIpLmdldFRpbWUoKTtpZih0aGlzLm1vb3YpZm9yKHMuaGFzTW9vdj0hMCxzLmR1cmF0aW9uPXRoaXMubW9vdi5tdmhkLmR1cmF0aW9uLHMudGltZXNjYWxlPXRoaXMubW9vdi5tdmhkLnRpbWVzY2FsZSxzLmlzRnJhZ21lbnRlZD10aGlzLm1vb3YubXZleCE9bnVsbCxzLmlzRnJhZ21lbnRlZCYmdGhpcy5tb292Lm12ZXgubWVoZCYmKHMuZnJhZ21lbnRfZHVyYXRpb249dGhpcy5tb292Lm12ZXgubWVoZC5mcmFnbWVudF9kdXJhdGlvbikscy5pc1Byb2dyZXNzaXZlPXRoaXMuaXNQcm9ncmVzc2l2ZSxzLmhhc0lPRD10aGlzLm1vb3YuaW9kcyE9bnVsbCxzLmJyYW5kcz1bXSxzLmJyYW5kcy5wdXNoKHRoaXMuZnR5cC5tYWpvcl9icmFuZCkscy5icmFuZHM9cy5icmFuZHMuY29uY2F0KHRoaXMuZnR5cC5jb21wYXRpYmxlX2JyYW5kcykscy5jcmVhdGVkPW5ldyBEYXRlKGYrdGhpcy5tb292Lm12aGQuY3JlYXRpb25fdGltZSoxZTMpLHMubW9kaWZpZWQ9bmV3IERhdGUoZit0aGlzLm1vb3YubXZoZC5tb2RpZmljYXRpb25fdGltZSoxZTMpLHMudHJhY2tzPVtdLHMuYXVkaW9UcmFja3M9W10scy52aWRlb1RyYWNrcz1bXSxzLnN1YnRpdGxlVHJhY2tzPVtdLHMubWV0YWRhdGFUcmFja3M9W10scy5oaW50VHJhY2tzPVtdLHMub3RoZXJUcmFja3M9W10sdD0wO3Q8dGhpcy5tb292LnRyYWtzLmxlbmd0aDt0Kyspe2lmKG49dGhpcy5tb292LnRyYWtzW3RdLGg9bi5tZGlhLm1pbmYuc3RibC5zdHNkLmVudHJpZXNbMF0sYT17fSxzLnRyYWNrcy5wdXNoKGEpLGEuaWQ9bi50a2hkLnRyYWNrX2lkLGEubmFtZT1uLm1kaWEuaGRsci5uYW1lLGEucmVmZXJlbmNlcz1bXSxuLnRyZWYpZm9yKGU9MDtlPG4udHJlZi5ib3hlcy5sZW5ndGg7ZSsrKW89e30sYS5yZWZlcmVuY2VzLnB1c2gobyksby50eXBlPW4udHJlZi5ib3hlc1tlXS50eXBlLG8udHJhY2tfaWRzPW4udHJlZi5ib3hlc1tlXS50cmFja19pZHM7bi5lZHRzJiYoYS5lZGl0cz1uLmVkdHMuZWxzdC5lbnRyaWVzKSxhLmNyZWF0ZWQ9bmV3IERhdGUoZituLnRraGQuY3JlYXRpb25fdGltZSoxZTMpLGEubW9kaWZpZWQ9bmV3IERhdGUoZituLnRraGQubW9kaWZpY2F0aW9uX3RpbWUqMWUzKSxhLm1vdmllX2R1cmF0aW9uPW4udGtoZC5kdXJhdGlvbixhLm1vdmllX3RpbWVzY2FsZT1zLnRpbWVzY2FsZSxhLmxheWVyPW4udGtoZC5sYXllcixhLmFsdGVybmF0ZV9ncm91cD1uLnRraGQuYWx0ZXJuYXRlX2dyb3VwLGEudm9sdW1lPW4udGtoZC52b2x1bWUsYS5tYXRyaXg9bi50a2hkLm1hdHJpeCxhLnRyYWNrX3dpZHRoPW4udGtoZC53aWR0aC8oMTw8MTYpLGEudHJhY2tfaGVpZ2h0PW4udGtoZC5oZWlnaHQvKDE8PDE2KSxhLnRpbWVzY2FsZT1uLm1kaWEubWRoZC50aW1lc2NhbGUsYS5jdHNfc2hpZnQ9bi5tZGlhLm1pbmYuc3RibC5jc2xnLGEuZHVyYXRpb249bi5tZGlhLm1kaGQuZHVyYXRpb24sYS5zYW1wbGVzX2R1cmF0aW9uPW4uc2FtcGxlc19kdXJhdGlvbixhLmNvZGVjPWguZ2V0Q29kZWMoKSxhLmtpbmQ9bi51ZHRhJiZuLnVkdGEua2luZHMubGVuZ3RoP24udWR0YS5raW5kc1swXTp7c2NoZW1lVVJJOiIiLHZhbHVlOiIifSxhLmxhbmd1YWdlPW4ubWRpYS5lbG5nP24ubWRpYS5lbG5nLmV4dGVuZGVkX2xhbmd1YWdlOm4ubWRpYS5tZGhkLmxhbmd1YWdlU3RyaW5nLGEubmJfc2FtcGxlcz1uLnNhbXBsZXMubGVuZ3RoLGEuc2l6ZT1uLnNhbXBsZXNfc2l6ZSxhLmJpdHJhdGU9YS5zaXplKjgqYS50aW1lc2NhbGUvYS5zYW1wbGVzX2R1cmF0aW9uLGguaXNBdWRpbygpPyhhLnR5cGU9ImF1ZGlvIixzLmF1ZGlvVHJhY2tzLnB1c2goYSksYS5hdWRpbz17fSxhLmF1ZGlvLnNhbXBsZV9yYXRlPWguZ2V0U2FtcGxlUmF0ZSgpLGEuYXVkaW8uY2hhbm5lbF9jb3VudD1oLmdldENoYW5uZWxDb3VudCgpLGEuYXVkaW8uc2FtcGxlX3NpemU9aC5nZXRTYW1wbGVTaXplKCkpOmguaXNWaWRlbygpPyhhLnR5cGU9InZpZGVvIixzLnZpZGVvVHJhY2tzLnB1c2goYSksYS52aWRlbz17fSxhLnZpZGVvLndpZHRoPWguZ2V0V2lkdGgoKSxhLnZpZGVvLmhlaWdodD1oLmdldEhlaWdodCgpKTpoLmlzU3VidGl0bGUoKT8oYS50eXBlPSJzdWJ0aXRsZXMiLHMuc3VidGl0bGVUcmFja3MucHVzaChhKSk6aC5pc0hpbnQoKT8oYS50eXBlPSJtZXRhZGF0YSIscy5oaW50VHJhY2tzLnB1c2goYSkpOmguaXNNZXRhZGF0YSgpPyhhLnR5cGU9Im1ldGFkYXRhIixzLm1ldGFkYXRhVHJhY2tzLnB1c2goYSkpOihhLnR5cGU9Im1ldGFkYXRhIixzLm90aGVyVHJhY2tzLnB1c2goYSkpfWVsc2Ugcy5oYXNNb292PSExO2lmKHMubWltZT0iIixzLmhhc01vb3YmJnMudHJhY2tzKXtmb3Iocy52aWRlb1RyYWNrcyYmcy52aWRlb1RyYWNrcy5sZW5ndGg+MD9zLm1pbWUrPSd2aWRlby9tcDQ7IGNvZGVjcz0iJzpzLmF1ZGlvVHJhY2tzJiZzLmF1ZGlvVHJhY2tzLmxlbmd0aD4wP3MubWltZSs9J2F1ZGlvL21wNDsgY29kZWNzPSInOnMubWltZSs9J2FwcGxpY2F0aW9uL21wNDsgY29kZWNzPSInLHQ9MDt0PHMudHJhY2tzLmxlbmd0aDt0KyspdCE9PTAmJihzLm1pbWUrPSIsIikscy5taW1lKz1zLnRyYWNrc1t0XS5jb2RlYztzLm1pbWUrPSciOyBwcm9maWxlcz0iJyxzLm1pbWUrPXRoaXMuZnR5cC5jb21wYXRpYmxlX2JyYW5kcy5qb2luKCkscy5taW1lKz0nIid9cmV0dXJuIHN9LHUucHJvdG90eXBlLnNldE5leHRTZWVrUG9zaXRpb25Gcm9tU2FtcGxlPWZ1bmN0aW9uKHQpe3QmJih0aGlzLm5leHRTZWVrUG9zaXRpb24/dGhpcy5uZXh0U2Vla1Bvc2l0aW9uPU1hdGgubWluKHQub2Zmc2V0K3QuYWxyZWFkeVJlYWQsdGhpcy5uZXh0U2Vla1Bvc2l0aW9uKTp0aGlzLm5leHRTZWVrUG9zaXRpb249dC5vZmZzZXQrdC5hbHJlYWR5UmVhZCl9LHUucHJvdG90eXBlLnByb2Nlc3NTYW1wbGVzPWZ1bmN0aW9uKHQpe3ZhciBlLHM7aWYodGhpcy5zYW1wbGVQcm9jZXNzaW5nU3RhcnRlZCl7aWYodGhpcy5pc0ZyYWdtZW50YXRpb25Jbml0aWFsaXplZCYmdGhpcy5vblNlZ21lbnQhPT1udWxsKWZvcihlPTA7ZTx0aGlzLmZyYWdtZW50ZWRUcmFja3MubGVuZ3RoO2UrKyl7dmFyIG49dGhpcy5mcmFnbWVudGVkVHJhY2tzW2VdO2ZvcihzPW4udHJhaztzLm5leHRTYW1wbGU8cy5zYW1wbGVzLmxlbmd0aCYmdGhpcy5zYW1wbGVQcm9jZXNzaW5nU3RhcnRlZDspe2QuZGVidWcoIklTT0ZpbGUiLCJDcmVhdGluZyBtZWRpYSBmcmFnbWVudCBvbiB0cmFjayAjIituLmlkKyIgZm9yIHNhbXBsZSAiK3MubmV4dFNhbXBsZSk7dmFyIGE9dGhpcy5jcmVhdGVGcmFnbWVudChuLmlkLHMubmV4dFNhbXBsZSxuLnNlZ21lbnRTdHJlYW0pO2lmKGEpbi5zZWdtZW50U3RyZWFtPWEscy5uZXh0U2FtcGxlKys7ZWxzZSBicmVhaztpZigocy5uZXh0U2FtcGxlJW4ubmJfc2FtcGxlcz09PTB8fHR8fHMubmV4dFNhbXBsZT49cy5zYW1wbGVzLmxlbmd0aCkmJihkLmluZm8oIklTT0ZpbGUiLCJTZW5kaW5nIGZyYWdtZW50ZWQgZGF0YSBvbiB0cmFjayAjIituLmlkKyIgZm9yIHNhbXBsZXMgWyIrTWF0aC5tYXgoMCxzLm5leHRTYW1wbGUtbi5uYl9zYW1wbGVzKSsiLCIrKHMubmV4dFNhbXBsZS0xKSsiXSIpLGQuaW5mbygiSVNPRmlsZSIsIlNhbXBsZSBkYXRhIHNpemUgaW4gbWVtb3J5OiAiK3RoaXMuZ2V0QWxsb2NhdGVkU2FtcGxlRGF0YVNpemUoKSksdGhpcy5vblNlZ21lbnQmJnRoaXMub25TZWdtZW50KG4uaWQsbi51c2VyLG4uc2VnbWVudFN0cmVhbS5idWZmZXIscy5uZXh0U2FtcGxlLHR8fHMubmV4dFNhbXBsZT49cy5zYW1wbGVzLmxlbmd0aCksbi5zZWdtZW50U3RyZWFtPW51bGwsbiE9PXRoaXMuZnJhZ21lbnRlZFRyYWNrc1tlXSkpYnJlYWt9fWlmKHRoaXMub25TYW1wbGVzIT09bnVsbClmb3IoZT0wO2U8dGhpcy5leHRyYWN0ZWRUcmFja3MubGVuZ3RoO2UrKyl7dmFyIG89dGhpcy5leHRyYWN0ZWRUcmFja3NbZV07Zm9yKHM9by50cmFrO3MubmV4dFNhbXBsZTxzLnNhbXBsZXMubGVuZ3RoJiZ0aGlzLnNhbXBsZVByb2Nlc3NpbmdTdGFydGVkOyl7ZC5kZWJ1ZygiSVNPRmlsZSIsIkV4cG9ydGluZyBvbiB0cmFjayAjIitvLmlkKyIgc2FtcGxlICMiK3MubmV4dFNhbXBsZSk7dmFyIGg9dGhpcy5nZXRTYW1wbGUocyxzLm5leHRTYW1wbGUpO2lmKGgpcy5uZXh0U2FtcGxlKyssby5zYW1wbGVzLnB1c2goaCk7ZWxzZXt0aGlzLnNldE5leHRTZWVrUG9zaXRpb25Gcm9tU2FtcGxlKHMuc2FtcGxlc1tzLm5leHRTYW1wbGVdKTticmVha31pZigocy5uZXh0U2FtcGxlJW8ubmJfc2FtcGxlcz09PTB8fHMubmV4dFNhbXBsZT49cy5zYW1wbGVzLmxlbmd0aCkmJihkLmRlYnVnKCJJU09GaWxlIiwiU2VuZGluZyBzYW1wbGVzIG9uIHRyYWNrICMiK28uaWQrIiBmb3Igc2FtcGxlICIrcy5uZXh0U2FtcGxlKSx0aGlzLm9uU2FtcGxlcyYmdGhpcy5vblNhbXBsZXMoby5pZCxvLnVzZXIsby5zYW1wbGVzKSxvLnNhbXBsZXM9W10sbyE9PXRoaXMuZXh0cmFjdGVkVHJhY2tzW2VdKSlicmVha319fX0sdS5wcm90b3R5cGUuZ2V0Qm94PWZ1bmN0aW9uKHQpe3ZhciBlPXRoaXMuZ2V0Qm94ZXModCwhMCk7cmV0dXJuIGUubGVuZ3RoP2VbMF06bnVsbH0sdS5wcm90b3R5cGUuZ2V0Qm94ZXM9ZnVuY3Rpb24odCxlKXt2YXIgcz1bXTtyZXR1cm4gdS5fc3dlZXAuY2FsbCh0aGlzLHQscyxlKSxzfSx1Ll9zd2VlcD1mdW5jdGlvbih0LGUscyl7dGhpcy50eXBlJiZ0aGlzLnR5cGU9PXQmJmUucHVzaCh0aGlzKTtmb3IodmFyIG4gaW4gdGhpcy5ib3hlcyl7aWYoZS5sZW5ndGgmJnMpcmV0dXJuO3UuX3N3ZWVwLmNhbGwodGhpcy5ib3hlc1tuXSx0LGUscyl9fSx1LnByb3RvdHlwZS5nZXRUcmFja1NhbXBsZXNJbmZvPWZ1bmN0aW9uKHQpe3ZhciBlPXRoaXMuZ2V0VHJhY2tCeUlkKHQpO2lmKGUpcmV0dXJuIGUuc2FtcGxlc30sdS5wcm90b3R5cGUuZ2V0VHJhY2tTYW1wbGU9ZnVuY3Rpb24odCxlKXt2YXIgcz10aGlzLmdldFRyYWNrQnlJZCh0KSxuPXRoaXMuZ2V0U2FtcGxlKHMsZSk7cmV0dXJuIG59LHUucHJvdG90eXBlLnJlbGVhc2VVc2VkU2FtcGxlcz1mdW5jdGlvbih0LGUpe3ZhciBzPTAsbj10aGlzLmdldFRyYWNrQnlJZCh0KTtuLmxhc3RWYWxpZFNhbXBsZXx8KG4ubGFzdFZhbGlkU2FtcGxlPTApO2Zvcih2YXIgYT1uLmxhc3RWYWxpZFNhbXBsZTthPGU7YSsrKXMrPXRoaXMucmVsZWFzZVNhbXBsZShuLGEpO2QuaW5mbygiSVNPRmlsZSIsIlRyYWNrICMiK3QrIiByZWxlYXNlZCBzYW1wbGVzIHVwIHRvICIrZSsiIChyZWxlYXNlZCBzaXplOiAiK3MrIiwgcmVtYWluaW5nOiAiK3RoaXMuc2FtcGxlc0RhdGFTaXplKyIpIiksbi5sYXN0VmFsaWRTYW1wbGU9ZX0sdS5wcm90b3R5cGUuc3RhcnQ9ZnVuY3Rpb24oKXt0aGlzLnNhbXBsZVByb2Nlc3NpbmdTdGFydGVkPSEwLHRoaXMucHJvY2Vzc1NhbXBsZXMoITEpfSx1LnByb3RvdHlwZS5zdG9wPWZ1bmN0aW9uKCl7dGhpcy5zYW1wbGVQcm9jZXNzaW5nU3RhcnRlZD0hMX0sdS5wcm90b3R5cGUuZmx1c2g9ZnVuY3Rpb24oKXtkLmluZm8oIklTT0ZpbGUiLCJGbHVzaGluZyByZW1haW5pbmcgc2FtcGxlcyIpLHRoaXMudXBkYXRlU2FtcGxlTGlzdHMoKSx0aGlzLnByb2Nlc3NTYW1wbGVzKCEwKSx0aGlzLnN0cmVhbS5jbGVhbkJ1ZmZlcnMoKSx0aGlzLnN0cmVhbS5sb2dCdWZmZXJMZXZlbCghMCl9LHUucHJvdG90eXBlLnNlZWtUcmFjaz1mdW5jdGlvbih0LGUscyl7dmFyIG4sYSxvPTEvMCxoPTAsZj0wLHA7aWYocy5zYW1wbGVzLmxlbmd0aD09PTApcmV0dXJuIGQuaW5mbygiSVNPRmlsZSIsIk5vIHNhbXBsZSBpbiB0cmFjaywgY2Fubm90IHNlZWshIFVzaW5nIHRpbWUgIitkLmdldER1cmF0aW9uU3RyaW5nKDAsMSkrIiBhbmQgb2Zmc2V0OiAwIikse29mZnNldDowLHRpbWU6MH07Zm9yKG49MDtuPHMuc2FtcGxlcy5sZW5ndGg7bisrKXtpZihhPXMuc2FtcGxlc1tuXSxuPT09MClmPTAscD1hLnRpbWVzY2FsZTtlbHNlIGlmKGEuY3RzPnQqYS50aW1lc2NhbGUpe2Y9bi0xO2JyZWFrfWUmJmEuaXNfc3luYyYmKGg9bil9Zm9yKGUmJihmPWgpLHQ9cy5zYW1wbGVzW2ZdLmN0cyxzLm5leHRTYW1wbGU9ZjtzLnNhbXBsZXNbZl0uYWxyZWFkeVJlYWQ9PT1zLnNhbXBsZXNbZl0uc2l6ZSYmcy5zYW1wbGVzW2YrMV07KWYrKztyZXR1cm4gbz1zLnNhbXBsZXNbZl0ub2Zmc2V0K3Muc2FtcGxlc1tmXS5hbHJlYWR5UmVhZCxkLmluZm8oIklTT0ZpbGUiLCJTZWVraW5nIHRvICIrKGU/IlJBUCI6IiIpKyIgc2FtcGxlICMiK3MubmV4dFNhbXBsZSsiIG9uIHRyYWNrICIrcy50a2hkLnRyYWNrX2lkKyIsIHRpbWUgIitkLmdldER1cmF0aW9uU3RyaW5nKHQscCkrIiBhbmQgb2Zmc2V0OiAiK28pLHtvZmZzZXQ6byx0aW1lOnQvcH19LHUucHJvdG90eXBlLmdldFRyYWNrRHVyYXRpb249ZnVuY3Rpb24odCl7dmFyIGU7cmV0dXJuIHQuc2FtcGxlcz8oZT10LnNhbXBsZXNbdC5zYW1wbGVzLmxlbmd0aC0xXSwoZS5jdHMrZS5kdXJhdGlvbikvZS50aW1lc2NhbGUpOjEvMH0sdS5wcm90b3R5cGUuc2Vlaz1mdW5jdGlvbih0LGUpe3ZhciBzPXRoaXMubW9vdixuLGEsbyxoPXtvZmZzZXQ6MS8wLHRpbWU6MS8wfTtpZih0aGlzLm1vb3Ype2ZvcihvPTA7bzxzLnRyYWtzLmxlbmd0aDtvKyspbj1zLnRyYWtzW29dLCEodD50aGlzLmdldFRyYWNrRHVyYXRpb24obikpJiYoYT10aGlzLnNlZWtUcmFjayh0LGUsbiksYS5vZmZzZXQ8aC5vZmZzZXQmJihoLm9mZnNldD1hLm9mZnNldCksYS50aW1lPGgudGltZSYmKGgudGltZT1hLnRpbWUpKTtyZXR1cm4gZC5pbmZvKCJJU09GaWxlIiwiU2Vla2luZyBhdCB0aW1lICIrZC5nZXREdXJhdGlvblN0cmluZyhoLnRpbWUsMSkrIiBuZWVkcyBhIGJ1ZmZlciB3aXRoIGEgZmlsZVN0YXJ0IHBvc2l0aW9uIG9mICIraC5vZmZzZXQpLGgub2Zmc2V0PT09MS8wP2g9e29mZnNldDp0aGlzLm5leHRQYXJzZVBvc2l0aW9uLHRpbWU6MH06aC5vZmZzZXQ9dGhpcy5zdHJlYW0uZ2V0RW5kRmlsZVBvc2l0aW9uQWZ0ZXIoaC5vZmZzZXQpLGQuaW5mbygiSVNPRmlsZSIsIkFkanVzdGVkIHNlZWsgcG9zaXRpb24gKGFmdGVyIGNoZWNraW5nIGRhdGEgYWxyZWFkeSBpbiBidWZmZXIpOiAiK2gub2Zmc2V0KSxofWVsc2UgdGhyb3ciQ2Fubm90IHNlZWs6IG1vb3Ygbm90IHJlY2VpdmVkISJ9LHUucHJvdG90eXBlLmVxdWFsPWZ1bmN0aW9uKHQpe2Zvcih2YXIgZT0wO2U8dGhpcy5ib3hlcy5sZW5ndGgmJmU8dC5ib3hlcy5sZW5ndGg7KXt2YXIgcz10aGlzLmJveGVzW2VdLG49dC5ib3hlc1tlXTtpZighci5ib3hFcXVhbChzLG4pKXJldHVybiExO2UrK31yZXR1cm4hMH0sXy5JU09GaWxlPXUsdS5wcm90b3R5cGUubGFzdEJveFN0YXJ0UG9zaXRpb249MCx1LnByb3RvdHlwZS5wYXJzaW5nTWRhdD1udWxsLHUucHJvdG90eXBlLm5leHRQYXJzZVBvc2l0aW9uPTAsdS5wcm90b3R5cGUuZGlzY2FyZE1kYXREYXRhPSExLHUucHJvdG90eXBlLnByb2Nlc3NJbmNvbXBsZXRlQm94PWZ1bmN0aW9uKHQpe3ZhciBlLHMsbjtyZXR1cm4gdC50eXBlPT09Im1kYXQiPyhlPW5ldyByW3QudHlwZSsiQm94Il0odC5zaXplKSx0aGlzLnBhcnNpbmdNZGF0PWUsdGhpcy5ib3hlcy5wdXNoKGUpLHRoaXMubWRhdHMucHVzaChlKSxlLnN0YXJ0PXQuc3RhcnQsZS5oZHJfc2l6ZT10Lmhkcl9zaXplLHRoaXMuc3RyZWFtLmFkZFVzZWRCeXRlcyhlLmhkcl9zaXplKSx0aGlzLmxhc3RCb3hTdGFydFBvc2l0aW9uPWUuc3RhcnQrZS5zaXplLG49dGhpcy5zdHJlYW0uc2VlayhlLnN0YXJ0K2Uuc2l6ZSwhMSx0aGlzLmRpc2NhcmRNZGF0RGF0YSksbj8odGhpcy5wYXJzaW5nTWRhdD1udWxsLCEwKToodGhpcy5tb292U3RhcnRGb3VuZD90aGlzLm5leHRQYXJzZVBvc2l0aW9uPXRoaXMuc3RyZWFtLmZpbmRFbmRDb250aWd1b3VzQnVmKCk6dGhpcy5uZXh0UGFyc2VQb3NpdGlvbj1lLnN0YXJ0K2Uuc2l6ZSwhMSkpOih0LnR5cGU9PT0ibW9vdiImJih0aGlzLm1vb3ZTdGFydEZvdW5kPSEwLHRoaXMubWRhdHMubGVuZ3RoPT09MCYmKHRoaXMuaXNQcm9ncmVzc2l2ZT0hMCkpLHM9dGhpcy5zdHJlYW0ubWVyZ2VOZXh0QnVmZmVyP3RoaXMuc3RyZWFtLm1lcmdlTmV4dEJ1ZmZlcigpOiExLHM/KHRoaXMubmV4dFBhcnNlUG9zaXRpb249dGhpcy5zdHJlYW0uZ2V0RW5kUG9zaXRpb24oKSwhMCk6KHQudHlwZT90aGlzLm1vb3ZTdGFydEZvdW5kP3RoaXMubmV4dFBhcnNlUG9zaXRpb249dGhpcy5zdHJlYW0uZ2V0RW5kUG9zaXRpb24oKTp0aGlzLm5leHRQYXJzZVBvc2l0aW9uPXRoaXMuc3RyZWFtLmdldFBvc2l0aW9uKCkrdC5zaXplOnRoaXMubmV4dFBhcnNlUG9zaXRpb249dGhpcy5zdHJlYW0uZ2V0RW5kUG9zaXRpb24oKSwhMSkpfSx1LnByb3RvdHlwZS5oYXNJbmNvbXBsZXRlTWRhdD1mdW5jdGlvbigpe3JldHVybiB0aGlzLnBhcnNpbmdNZGF0IT09bnVsbH0sdS5wcm90b3R5cGUucHJvY2Vzc0luY29tcGxldGVNZGF0PWZ1bmN0aW9uKCl7dmFyIHQsZTtyZXR1cm4gdD10aGlzLnBhcnNpbmdNZGF0LGU9dGhpcy5zdHJlYW0uc2Vlayh0LnN0YXJ0K3Quc2l6ZSwhMSx0aGlzLmRpc2NhcmRNZGF0RGF0YSksZT8oZC5kZWJ1ZygiSVNPRmlsZSIsIkZvdW5kICdtZGF0JyBlbmQgaW4gYnVmZmVyZWQgZGF0YSIpLHRoaXMucGFyc2luZ01kYXQ9bnVsbCwhMCk6KHRoaXMubmV4dFBhcnNlUG9zaXRpb249dGhpcy5zdHJlYW0uZmluZEVuZENvbnRpZ3VvdXNCdWYoKSwhMSl9LHUucHJvdG90eXBlLnJlc3RvcmVQYXJzZVBvc2l0aW9uPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuc3RyZWFtLnNlZWsodGhpcy5sYXN0Qm94U3RhcnRQb3NpdGlvbiwhMCx0aGlzLmRpc2NhcmRNZGF0RGF0YSl9LHUucHJvdG90eXBlLnNhdmVQYXJzZVBvc2l0aW9uPWZ1bmN0aW9uKCl7dGhpcy5sYXN0Qm94U3RhcnRQb3NpdGlvbj10aGlzLnN0cmVhbS5nZXRQb3NpdGlvbigpfSx1LnByb3RvdHlwZS51cGRhdGVVc2VkQnl0ZXM9ZnVuY3Rpb24odCxlKXt0aGlzLnN0cmVhbS5hZGRVc2VkQnl0ZXMmJih0LnR5cGU9PT0ibWRhdCI/KHRoaXMuc3RyZWFtLmFkZFVzZWRCeXRlcyh0Lmhkcl9zaXplKSx0aGlzLmRpc2NhcmRNZGF0RGF0YSYmdGhpcy5zdHJlYW0uYWRkVXNlZEJ5dGVzKHQuc2l6ZS10Lmhkcl9zaXplKSk6dGhpcy5zdHJlYW0uYWRkVXNlZEJ5dGVzKHQuc2l6ZSkpfSx1LnByb3RvdHlwZS5hZGQ9ci5Cb3gucHJvdG90eXBlLmFkZCx1LnByb3RvdHlwZS5hZGRCb3g9ci5Cb3gucHJvdG90eXBlLmFkZEJveCx1LnByb3RvdHlwZS5pbml0PWZ1bmN0aW9uKHQpe3ZhciBlPXR8fHt9O3RoaXMuYWRkKCJmdHlwIikuc2V0KCJtYWpvcl9icmFuZCIsZS5icmFuZHMmJmUuYnJhbmRzWzBdfHwiaXNvNCIpLnNldCgibWlub3JfdmVyc2lvbiIsMCkuc2V0KCJjb21wYXRpYmxlX2JyYW5kcyIsZS5icmFuZHN8fFsiaXNvNCJdKTt2YXIgcz10aGlzLmFkZCgibW9vdiIpO3JldHVybiBzLmFkZCgibXZoZCIpLnNldCgidGltZXNjYWxlIixlLnRpbWVzY2FsZXx8NjAwKS5zZXQoInJhdGUiLGUucmF0ZXx8MTw8MTYpLnNldCgiY3JlYXRpb25fdGltZSIsMCkuc2V0KCJtb2RpZmljYXRpb25fdGltZSIsMCkuc2V0KCJkdXJhdGlvbiIsZS5kdXJhdGlvbnx8MCkuc2V0KCJ2b2x1bWUiLGUud2lkdGg/MDoyNTYpLnNldCgibWF0cml4IixbMTw8MTYsMCwwLDAsMTw8MTYsMCwwLDAsMTA3Mzc0MTgyNF0pLnNldCgibmV4dF90cmFja19pZCIsMSkscy5hZGQoIm12ZXgiKSx0aGlzfSx1LnByb3RvdHlwZS5hZGRUcmFjaz1mdW5jdGlvbih0KXt0aGlzLm1vb3Z8fHRoaXMuaW5pdCh0KTt2YXIgZT10fHx7fTtlLndpZHRoPWUud2lkdGh8fDMyMCxlLmhlaWdodD1lLmhlaWdodHx8MzIwLGUuaWQ9ZS5pZHx8dGhpcy5tb292Lm12aGQubmV4dF90cmFja19pZCxlLnR5cGU9ZS50eXBlfHwiYXZjMSI7dmFyIHM9dGhpcy5tb292LmFkZCgidHJhayIpO3RoaXMubW9vdi5tdmhkLm5leHRfdHJhY2tfaWQ9ZS5pZCsxLHMuYWRkKCJ0a2hkIikuc2V0KCJmbGFncyIsci5US0hEX0ZMQUdfRU5BQkxFRHxyLlRLSERfRkxBR19JTl9NT1ZJRXxyLlRLSERfRkxBR19JTl9QUkVWSUVXKS5zZXQoImNyZWF0aW9uX3RpbWUiLDApLnNldCgibW9kaWZpY2F0aW9uX3RpbWUiLDApLnNldCgidHJhY2tfaWQiLGUuaWQpLnNldCgiZHVyYXRpb24iLGUuZHVyYXRpb258fDApLnNldCgibGF5ZXIiLGUubGF5ZXJ8fDApLnNldCgiYWx0ZXJuYXRlX2dyb3VwIiwwKS5zZXQoInZvbHVtZSIsMSkuc2V0KCJtYXRyaXgiLFswLDAsMCwwLDAsMCwwLDAsMF0pLnNldCgid2lkdGgiLGUud2lkdGg8PDE2KS5zZXQoImhlaWdodCIsZS5oZWlnaHQ8PDE2KTt2YXIgbj1zLmFkZCgibWRpYSIpO24uYWRkKCJtZGhkIikuc2V0KCJjcmVhdGlvbl90aW1lIiwwKS5zZXQoIm1vZGlmaWNhdGlvbl90aW1lIiwwKS5zZXQoInRpbWVzY2FsZSIsZS50aW1lc2NhbGV8fDEpLnNldCgiZHVyYXRpb24iLGUubWVkaWFfZHVyYXRpb258fDApLnNldCgibGFuZ3VhZ2UiLGUubGFuZ3VhZ2V8fCJ1bmQiKSxuLmFkZCgiaGRsciIpLnNldCgiaGFuZGxlciIsZS5oZGxyfHwidmlkZSIpLnNldCgibmFtZSIsZS5uYW1lfHwiVHJhY2sgY3JlYXRlZCB3aXRoIE1QNEJveC5qcyIpLG4uYWRkKCJlbG5nIikuc2V0KCJleHRlbmRlZF9sYW5ndWFnZSIsZS5sYW5ndWFnZXx8ImZyLUZSIik7dmFyIGE9bi5hZGQoIm1pbmYiKTtpZihyW2UudHlwZSsiU2FtcGxlRW50cnkiXSE9PXZvaWQgMCl7dmFyIG89bmV3IHJbZS50eXBlKyJTYW1wbGVFbnRyeSJdO28uZGF0YV9yZWZlcmVuY2VfaW5kZXg9MTt2YXIgaD0iIjtmb3IodmFyIGYgaW4gci5zYW1wbGVFbnRyeUNvZGVzKWZvcih2YXIgcD1yLnNhbXBsZUVudHJ5Q29kZXNbZl0sZz0wO2c8cC5sZW5ndGg7ZysrKWlmKHAuaW5kZXhPZihlLnR5cGUpPi0xKXtoPWY7YnJlYWt9c3dpdGNoKGgpe2Nhc2UiVmlzdWFsIjppZihhLmFkZCgidm1oZCIpLnNldCgiZ3JhcGhpY3Ntb2RlIiwwKS5zZXQoIm9wY29sb3IiLFswLDAsMF0pLG8uc2V0KCJ3aWR0aCIsZS53aWR0aCkuc2V0KCJoZWlnaHQiLGUuaGVpZ2h0KS5zZXQoImhvcml6cmVzb2x1dGlvbiIsNzI8PDE2KS5zZXQoInZlcnRyZXNvbHV0aW9uIiw3Mjw8MTYpLnNldCgiZnJhbWVfY291bnQiLDEpLnNldCgiY29tcHJlc3Nvcm5hbWUiLGUudHlwZSsiIENvbXByZXNzb3IiKS5zZXQoImRlcHRoIiwyNCksZS5hdmNEZWNvZGVyQ29uZmlnUmVjb3JkKXt2YXIgbT1uZXcgci5hdmNDQm94O20ucGFyc2UobmV3IGMoZS5hdmNEZWNvZGVyQ29uZmlnUmVjb3JkKSksby5hZGRCb3gobSl9ZWxzZSBpZihlLmhldmNEZWNvZGVyQ29uZmlnUmVjb3JkKXt2YXIgdj1uZXcgci5odmNDQm94O3YucGFyc2UobmV3IGMoZS5oZXZjRGVjb2RlckNvbmZpZ1JlY29yZCkpLG8uYWRkQm94KHYpfWJyZWFrO2Nhc2UiQXVkaW8iOmEuYWRkKCJzbWhkIikuc2V0KCJiYWxhbmNlIixlLmJhbGFuY2V8fDApLG8uc2V0KCJjaGFubmVsX2NvdW50IixlLmNoYW5uZWxfY291bnR8fDIpLnNldCgic2FtcGxlc2l6ZSIsZS5zYW1wbGVzaXplfHwxNikuc2V0KCJzYW1wbGVyYXRlIixlLnNhbXBsZXJhdGV8fDE8PDE2KTticmVhaztjYXNlIkhpbnQiOmEuYWRkKCJobWhkIik7YnJlYWs7Y2FzZSJTdWJ0aXRsZSI6c3dpdGNoKGEuYWRkKCJzdGhkIiksZS50eXBlKXtjYXNlInN0cHAiOm8uc2V0KCJuYW1lc3BhY2UiLGUubmFtZXNwYWNlfHwibm9uYW1lc3BhY2UiKS5zZXQoInNjaGVtYV9sb2NhdGlvbiIsZS5zY2hlbWFfbG9jYXRpb258fCIiKS5zZXQoImF1eGlsaWFyeV9taW1lX3R5cGVzIixlLmF1eGlsaWFyeV9taW1lX3R5cGVzfHwiIik7YnJlYWt9YnJlYWs7Y2FzZSJNZXRhZGF0YSI6YS5hZGQoIm5taGQiKTticmVhaztjYXNlIlN5c3RlbSI6YS5hZGQoIm5taGQiKTticmVhaztkZWZhdWx0OmEuYWRkKCJubWhkIik7YnJlYWt9ZS5kZXNjcmlwdGlvbiYmby5hZGRCb3goZS5kZXNjcmlwdGlvbiksZS5kZXNjcmlwdGlvbl9ib3hlcyYmZS5kZXNjcmlwdGlvbl9ib3hlcy5mb3JFYWNoKGZ1bmN0aW9uKHkpe28uYWRkQm94KHkpfSksYS5hZGQoImRpbmYiKS5hZGQoImRyZWYiKS5hZGRFbnRyeShuZXcgclsidXJsIEJveCJdKCkuc2V0KCJmbGFncyIsMSkpO3ZhciBiPWEuYWRkKCJzdGJsIik7cmV0dXJuIGIuYWRkKCJzdHNkIikuYWRkRW50cnkobyksYi5hZGQoInN0dHMiKS5zZXQoInNhbXBsZV9jb3VudHMiLFtdKS5zZXQoInNhbXBsZV9kZWx0YXMiLFtdKSxiLmFkZCgic3RzYyIpLnNldCgiZmlyc3RfY2h1bmsiLFtdKS5zZXQoInNhbXBsZXNfcGVyX2NodW5rIixbXSkuc2V0KCJzYW1wbGVfZGVzY3JpcHRpb25faW5kZXgiLFtdKSxiLmFkZCgic3RjbyIpLnNldCgiY2h1bmtfb2Zmc2V0cyIsW10pLGIuYWRkKCJzdHN6Iikuc2V0KCJzYW1wbGVfc2l6ZXMiLFtdKSx0aGlzLm1vb3YubXZleC5hZGQoInRyZXgiKS5zZXQoInRyYWNrX2lkIixlLmlkKS5zZXQoImRlZmF1bHRfc2FtcGxlX2Rlc2NyaXB0aW9uX2luZGV4IixlLmRlZmF1bHRfc2FtcGxlX2Rlc2NyaXB0aW9uX2luZGV4fHwxKS5zZXQoImRlZmF1bHRfc2FtcGxlX2R1cmF0aW9uIixlLmRlZmF1bHRfc2FtcGxlX2R1cmF0aW9ufHwwKS5zZXQoImRlZmF1bHRfc2FtcGxlX3NpemUiLGUuZGVmYXVsdF9zYW1wbGVfc2l6ZXx8MCkuc2V0KCJkZWZhdWx0X3NhbXBsZV9mbGFncyIsZS5kZWZhdWx0X3NhbXBsZV9mbGFnc3x8MCksdGhpcy5idWlsZFRyYWtTYW1wbGVMaXN0cyhzKSxlLmlkfX0sci5Cb3gucHJvdG90eXBlLmNvbXB1dGVTaXplPWZ1bmN0aW9uKHQpe3ZhciBlPXR8fG5ldyBsO2UuZW5kaWFubmVzcz1sLkJJR19FTkRJQU4sdGhpcy53cml0ZShlKX0sdS5wcm90b3R5cGUuYWRkU2FtcGxlPWZ1bmN0aW9uKHQsZSxzKXt2YXIgbj1zfHx7fSxhPXt9LG89dGhpcy5nZXRUcmFja0J5SWQodCk7aWYobyE9PW51bGwpe2EubnVtYmVyPW8uc2FtcGxlcy5sZW5ndGgsYS50cmFja19pZD1vLnRraGQudHJhY2tfaWQsYS50aW1lc2NhbGU9by5tZGlhLm1kaGQudGltZXNjYWxlLGEuZGVzY3JpcHRpb25faW5kZXg9bi5zYW1wbGVfZGVzY3JpcHRpb25faW5kZXg/bi5zYW1wbGVfZGVzY3JpcHRpb25faW5kZXgtMTowLGEuZGVzY3JpcHRpb249by5tZGlhLm1pbmYuc3RibC5zdHNkLmVudHJpZXNbYS5kZXNjcmlwdGlvbl9pbmRleF0sYS5kYXRhPWUsYS5zaXplPWUuYnl0ZUxlbmd0aCxhLmFscmVhZHlSZWFkPWEuc2l6ZSxhLmR1cmF0aW9uPW4uZHVyYXRpb258fDEsYS5jdHM9bi5jdHN8fDAsYS5kdHM9bi5kdHN8fDAsYS5pc19zeW5jPW4uaXNfc3luY3x8ITEsYS5pc19sZWFkaW5nPW4uaXNfbGVhZGluZ3x8MCxhLmRlcGVuZHNfb249bi5kZXBlbmRzX29ufHwwLGEuaXNfZGVwZW5kZWRfb249bi5pc19kZXBlbmRlZF9vbnx8MCxhLmhhc19yZWR1bmRhbmN5PW4uaGFzX3JlZHVuZGFuY3l8fDAsYS5kZWdyYWRhdGlvbl9wcmlvcml0eT1uLmRlZ3JhZGF0aW9uX3ByaW9yaXR5fHwwLGEub2Zmc2V0PTAsYS5zdWJzYW1wbGVzPW4uc3Vic2FtcGxlcyxvLnNhbXBsZXMucHVzaChhKSxvLnNhbXBsZXNfc2l6ZSs9YS5zaXplLG8uc2FtcGxlc19kdXJhdGlvbis9YS5kdXJhdGlvbixvLmZpcnN0X2R0cz09PXZvaWQgMCYmKG8uZmlyc3RfZHRzPW4uZHRzKSx0aGlzLnByb2Nlc3NTYW1wbGVzKCk7dmFyIGg9dGhpcy5jcmVhdGVTaW5nbGVTYW1wbGVNb29mKGEpO3JldHVybiB0aGlzLmFkZEJveChoKSxoLmNvbXB1dGVTaXplKCksaC50cmFmc1swXS50cnVuc1swXS5kYXRhX29mZnNldD1oLnNpemUrOCx0aGlzLmFkZCgibWRhdCIpLmRhdGE9bmV3IFVpbnQ4QXJyYXkoZSksYX19LHUucHJvdG90eXBlLmNyZWF0ZVNpbmdsZVNhbXBsZU1vb2Y9ZnVuY3Rpb24odCl7dmFyIGU9MDt0LmlzX3N5bmM/ZT0xPDwyNTplPTE8PDE2O3ZhciBzPW5ldyByLm1vb2ZCb3g7cy5hZGQoIm1maGQiKS5zZXQoInNlcXVlbmNlX251bWJlciIsdGhpcy5uZXh0TW9vZk51bWJlciksdGhpcy5uZXh0TW9vZk51bWJlcisrO3ZhciBuPXMuYWRkKCJ0cmFmIiksYT10aGlzLmdldFRyYWNrQnlJZCh0LnRyYWNrX2lkKTtyZXR1cm4gbi5hZGQoInRmaGQiKS5zZXQoInRyYWNrX2lkIix0LnRyYWNrX2lkKS5zZXQoImZsYWdzIixyLlRGSERfRkxBR19ERUZBVUxUX0JBU0VfSVNfTU9PRiksbi5hZGQoInRmZHQiKS5zZXQoImJhc2VNZWRpYURlY29kZVRpbWUiLHQuZHRzLShhLmZpcnN0X2R0c3x8MCkpLG4uYWRkKCJ0cnVuIikuc2V0KCJmbGFncyIsci5UUlVOX0ZMQUdTX0RBVEFfT0ZGU0VUfHIuVFJVTl9GTEFHU19EVVJBVElPTnxyLlRSVU5fRkxBR1NfU0laRXxyLlRSVU5fRkxBR1NfRkxBR1N8ci5UUlVOX0ZMQUdTX0NUU19PRkZTRVQpLnNldCgiZGF0YV9vZmZzZXQiLDApLnNldCgiZmlyc3Rfc2FtcGxlX2ZsYWdzIiwwKS5zZXQoInNhbXBsZV9jb3VudCIsMSkuc2V0KCJzYW1wbGVfZHVyYXRpb24iLFt0LmR1cmF0aW9uXSkuc2V0KCJzYW1wbGVfc2l6ZSIsW3Quc2l6ZV0pLnNldCgic2FtcGxlX2ZsYWdzIixbZV0pLnNldCgic2FtcGxlX2NvbXBvc2l0aW9uX3RpbWVfb2Zmc2V0IixbdC5jdHMtdC5kdHNdKSxzfSx1LnByb3RvdHlwZS5sYXN0TW9vZkluZGV4PTAsdS5wcm90b3R5cGUuc2FtcGxlc0RhdGFTaXplPTAsdS5wcm90b3R5cGUucmVzZXRUYWJsZXM9ZnVuY3Rpb24oKXt2YXIgdCxlLHMsbixhLG8saCxmO2Zvcih0aGlzLmluaXRpYWxfZHVyYXRpb249dGhpcy5tb292Lm12aGQuZHVyYXRpb24sdGhpcy5tb292Lm12aGQuZHVyYXRpb249MCx0PTA7dDx0aGlzLm1vb3YudHJha3MubGVuZ3RoO3QrKyl7ZT10aGlzLm1vb3YudHJha3NbdF0sZS50a2hkLmR1cmF0aW9uPTAsZS5tZGlhLm1kaGQuZHVyYXRpb249MCxzPWUubWRpYS5taW5mLnN0Ymwuc3Rjb3x8ZS5tZGlhLm1pbmYuc3RibC5jbzY0LHMuY2h1bmtfb2Zmc2V0cz1bXSxuPWUubWRpYS5taW5mLnN0Ymwuc3RzYyxuLmZpcnN0X2NodW5rPVtdLG4uc2FtcGxlc19wZXJfY2h1bms9W10sbi5zYW1wbGVfZGVzY3JpcHRpb25faW5kZXg9W10sYT1lLm1kaWEubWluZi5zdGJsLnN0c3p8fGUubWRpYS5taW5mLnN0Ymwuc3R6MixhLnNhbXBsZV9zaXplcz1bXSxvPWUubWRpYS5taW5mLnN0Ymwuc3R0cyxvLnNhbXBsZV9jb3VudHM9W10sby5zYW1wbGVfZGVsdGFzPVtdLGg9ZS5tZGlhLm1pbmYuc3RibC5jdHRzLGgmJihoLnNhbXBsZV9jb3VudHM9W10saC5zYW1wbGVfb2Zmc2V0cz1bXSksZj1lLm1kaWEubWluZi5zdGJsLnN0c3M7dmFyIHA9ZS5tZGlhLm1pbmYuc3RibC5ib3hlcy5pbmRleE9mKGYpO3AhPS0xJiYoZS5tZGlhLm1pbmYuc3RibC5ib3hlc1twXT1udWxsKX19LHUuaW5pdFNhbXBsZUdyb3Vwcz1mdW5jdGlvbih0LGUscyxuLGEpe3ZhciBvLGgsZixwO2Z1bmN0aW9uIGcobSx2LGIpe3RoaXMuZ3JvdXBpbmdfdHlwZT1tLHRoaXMuZ3JvdXBpbmdfdHlwZV9wYXJhbWV0ZXI9dix0aGlzLnNiZ3A9Yix0aGlzLmxhc3Rfc2FtcGxlX2luX3J1bj0tMSx0aGlzLmVudHJ5X2luZGV4PS0xfWZvcihlJiYoZS5zYW1wbGVfZ3JvdXBzX2luZm89W10pLHQuc2FtcGxlX2dyb3Vwc19pbmZvfHwodC5zYW1wbGVfZ3JvdXBzX2luZm89W10pLGg9MDtoPHMubGVuZ3RoO2grKyl7Zm9yKHA9c1toXS5ncm91cGluZ190eXBlKyIvIitzW2hdLmdyb3VwaW5nX3R5cGVfcGFyYW1ldGVyLGY9bmV3IGcoc1toXS5ncm91cGluZ190eXBlLHNbaF0uZ3JvdXBpbmdfdHlwZV9wYXJhbWV0ZXIsc1toXSksZSYmKGUuc2FtcGxlX2dyb3Vwc19pbmZvW3BdPWYpLHQuc2FtcGxlX2dyb3Vwc19pbmZvW3BdfHwodC5zYW1wbGVfZ3JvdXBzX2luZm9bcF09Ziksbz0wO288bi5sZW5ndGg7bysrKW5bb10uZ3JvdXBpbmdfdHlwZT09PXNbaF0uZ3JvdXBpbmdfdHlwZSYmKGYuZGVzY3JpcHRpb249bltvXSxmLmRlc2NyaXB0aW9uLnVzZWQ9ITApO2lmKGEpZm9yKG89MDtvPGEubGVuZ3RoO28rKylhW29dLmdyb3VwaW5nX3R5cGU9PT1zW2hdLmdyb3VwaW5nX3R5cGUmJihmLmZyYWdtZW50X2Rlc2NyaXB0aW9uPWFbb10sZi5mcmFnbWVudF9kZXNjcmlwdGlvbi51c2VkPSEwLGYuaXNfZnJhZ21lbnQ9ITApfWlmKGUpe2lmKGEpZm9yKGg9MDtoPGEubGVuZ3RoO2grKykhYVtoXS51c2VkJiZhW2hdLnZlcnNpb24+PTImJihwPWFbaF0uZ3JvdXBpbmdfdHlwZSsiLzAiLGY9bmV3IGcoYVtoXS5ncm91cGluZ190eXBlLDApLGYuaXNfZnJhZ21lbnQ9ITAsZS5zYW1wbGVfZ3JvdXBzX2luZm9bcF18fChlLnNhbXBsZV9ncm91cHNfaW5mb1twXT1mKSl9ZWxzZSBmb3IoaD0wO2g8bi5sZW5ndGg7aCsrKSFuW2hdLnVzZWQmJm5baF0udmVyc2lvbj49MiYmKHA9bltoXS5ncm91cGluZ190eXBlKyIvMCIsZj1uZXcgZyhuW2hdLmdyb3VwaW5nX3R5cGUsMCksdC5zYW1wbGVfZ3JvdXBzX2luZm9bcF18fCh0LnNhbXBsZV9ncm91cHNfaW5mb1twXT1mKSl9LHUuc2V0U2FtcGxlR3JvdXBQcm9wZXJ0aWVzPWZ1bmN0aW9uKHQsZSxzLG4pe3ZhciBhLG87ZS5zYW1wbGVfZ3JvdXBzPVtdO2ZvcihhIGluIG4paWYoZS5zYW1wbGVfZ3JvdXBzW2FdPXt9LGUuc2FtcGxlX2dyb3Vwc1thXS5ncm91cGluZ190eXBlPW5bYV0uZ3JvdXBpbmdfdHlwZSxlLnNhbXBsZV9ncm91cHNbYV0uZ3JvdXBpbmdfdHlwZV9wYXJhbWV0ZXI9blthXS5ncm91cGluZ190eXBlX3BhcmFtZXRlcixzPj1uW2FdLmxhc3Rfc2FtcGxlX2luX3J1biYmKG5bYV0ubGFzdF9zYW1wbGVfaW5fcnVuPDAmJihuW2FdLmxhc3Rfc2FtcGxlX2luX3J1bj0wKSxuW2FdLmVudHJ5X2luZGV4KyssblthXS5lbnRyeV9pbmRleDw9blthXS5zYmdwLmVudHJpZXMubGVuZ3RoLTEmJihuW2FdLmxhc3Rfc2FtcGxlX2luX3J1bis9blthXS5zYmdwLmVudHJpZXNbblthXS5lbnRyeV9pbmRleF0uc2FtcGxlX2NvdW50KSksblthXS5lbnRyeV9pbmRleDw9blthXS5zYmdwLmVudHJpZXMubGVuZ3RoLTE/ZS5zYW1wbGVfZ3JvdXBzW2FdLmdyb3VwX2Rlc2NyaXB0aW9uX2luZGV4PW5bYV0uc2JncC5lbnRyaWVzW25bYV0uZW50cnlfaW5kZXhdLmdyb3VwX2Rlc2NyaXB0aW9uX2luZGV4OmUuc2FtcGxlX2dyb3Vwc1thXS5ncm91cF9kZXNjcmlwdGlvbl9pbmRleD0tMSxlLnNhbXBsZV9ncm91cHNbYV0uZ3JvdXBfZGVzY3JpcHRpb25faW5kZXghPT0wKXt2YXIgaDtuW2FdLmZyYWdtZW50X2Rlc2NyaXB0aW9uP2g9blthXS5mcmFnbWVudF9kZXNjcmlwdGlvbjpoPW5bYV0uZGVzY3JpcHRpb24sZS5zYW1wbGVfZ3JvdXBzW2FdLmdyb3VwX2Rlc2NyaXB0aW9uX2luZGV4PjA/KGUuc2FtcGxlX2dyb3Vwc1thXS5ncm91cF9kZXNjcmlwdGlvbl9pbmRleD42NTUzNT9vPShlLnNhbXBsZV9ncm91cHNbYV0uZ3JvdXBfZGVzY3JpcHRpb25faW5kZXg+PjE2KS0xOm89ZS5zYW1wbGVfZ3JvdXBzW2FdLmdyb3VwX2Rlc2NyaXB0aW9uX2luZGV4LTEsaCYmbz49MCYmKGUuc2FtcGxlX2dyb3Vwc1thXS5kZXNjcmlwdGlvbj1oLmVudHJpZXNbb10pKTpoJiZoLnZlcnNpb24+PTImJmguZGVmYXVsdF9ncm91cF9kZXNjcmlwdGlvbl9pbmRleD4wJiYoZS5zYW1wbGVfZ3JvdXBzW2FdLmRlc2NyaXB0aW9uPWguZW50cmllc1toLmRlZmF1bHRfZ3JvdXBfZGVzY3JpcHRpb25faW5kZXgtMV0pfX0sdS5wcm9jZXNzX3NkdHA9ZnVuY3Rpb24odCxlLHMpe2UmJih0PyhlLmlzX2xlYWRpbmc9dC5pc19sZWFkaW5nW3NdLGUuZGVwZW5kc19vbj10LnNhbXBsZV9kZXBlbmRzX29uW3NdLGUuaXNfZGVwZW5kZWRfb249dC5zYW1wbGVfaXNfZGVwZW5kZWRfb25bc10sZS5oYXNfcmVkdW5kYW5jeT10LnNhbXBsZV9oYXNfcmVkdW5kYW5jeVtzXSk6KGUuaXNfbGVhZGluZz0wLGUuZGVwZW5kc19vbj0wLGUuaXNfZGVwZW5kZWRfb249MCxlLmhhc19yZWR1bmRhbmN5PTApKX0sdS5wcm90b3R5cGUuYnVpbGRTYW1wbGVMaXN0cz1mdW5jdGlvbigpe3ZhciB0LGU7Zm9yKHQ9MDt0PHRoaXMubW9vdi50cmFrcy5sZW5ndGg7dCsrKWU9dGhpcy5tb292LnRyYWtzW3RdLHRoaXMuYnVpbGRUcmFrU2FtcGxlTGlzdHMoZSl9LHUucHJvdG90eXBlLmJ1aWxkVHJha1NhbXBsZUxpc3RzPWZ1bmN0aW9uKHQpe3ZhciBlLHMsbixhLG8saCxmLHAsZyxtLHYsYix5LEUsdyxPLFksRCxULEYsaixldCxQLFY7aWYodC5zYW1wbGVzPVtdLHQuc2FtcGxlc19kdXJhdGlvbj0wLHQuc2FtcGxlc19zaXplPTAscz10Lm1kaWEubWluZi5zdGJsLnN0Y298fHQubWRpYS5taW5mLnN0YmwuY282NCxuPXQubWRpYS5taW5mLnN0Ymwuc3RzYyxhPXQubWRpYS5taW5mLnN0Ymwuc3Rzenx8dC5tZGlhLm1pbmYuc3RibC5zdHoyLG89dC5tZGlhLm1pbmYuc3RibC5zdHRzLGg9dC5tZGlhLm1pbmYuc3RibC5jdHRzLGY9dC5tZGlhLm1pbmYuc3RibC5zdHNzLHA9dC5tZGlhLm1pbmYuc3RibC5zdHNkLGc9dC5tZGlhLm1pbmYuc3RibC5zdWJzLGI9dC5tZGlhLm1pbmYuc3RibC5zdGRwLG09dC5tZGlhLm1pbmYuc3RibC5zYmdwcyx2PXQubWRpYS5taW5mLnN0Ymwuc2dwZHMsRD0tMSxUPS0xLEY9LTEsaj0tMSxldD0wLFA9MCxWPTAsdS5pbml0U2FtcGxlR3JvdXBzKHQsbnVsbCxtLHYpLCEodHlwZW9mIGE+InUiKSl7Zm9yKGU9MDtlPGEuc2FtcGxlX3NpemVzLmxlbmd0aDtlKyspe3ZhciB4PXt9O3gubnVtYmVyPWUseC50cmFja19pZD10LnRraGQudHJhY2tfaWQseC50aW1lc2NhbGU9dC5tZGlhLm1kaGQudGltZXNjYWxlLHguYWxyZWFkeVJlYWQ9MCx0LnNhbXBsZXNbZV09eCx4LnNpemU9YS5zYW1wbGVfc2l6ZXNbZV0sdC5zYW1wbGVzX3NpemUrPXguc2l6ZSxlPT09MD8oRT0xLHk9MCx4LmNodW5rX2luZGV4PUUseC5jaHVua19ydW5faW5kZXg9eSxZPW4uc2FtcGxlc19wZXJfY2h1bmtbeV0sTz0wLHkrMTxuLmZpcnN0X2NodW5rLmxlbmd0aD93PW4uZmlyc3RfY2h1bmtbeSsxXS0xOnc9MS8wKTplPFk/KHguY2h1bmtfaW5kZXg9RSx4LmNodW5rX3J1bl9pbmRleD15KTooRSsrLHguY2h1bmtfaW5kZXg9RSxPPTAsRTw9d3x8KHkrKyx5KzE8bi5maXJzdF9jaHVuay5sZW5ndGg/dz1uLmZpcnN0X2NodW5rW3krMV0tMTp3PTEvMCkseC5jaHVua19ydW5faW5kZXg9eSxZKz1uLnNhbXBsZXNfcGVyX2NodW5rW3ldKSx4LmRlc2NyaXB0aW9uX2luZGV4PW4uc2FtcGxlX2Rlc2NyaXB0aW9uX2luZGV4W3guY2h1bmtfcnVuX2luZGV4XS0xLHguZGVzY3JpcHRpb249cC5lbnRyaWVzW3guZGVzY3JpcHRpb25faW5kZXhdLHgub2Zmc2V0PXMuY2h1bmtfb2Zmc2V0c1t4LmNodW5rX2luZGV4LTFdK08sTys9eC5zaXplLGU+RCYmKFQrKyxEPDAmJihEPTApLEQrPW8uc2FtcGxlX2NvdW50c1tUXSksZT4wPyh0LnNhbXBsZXNbZS0xXS5kdXJhdGlvbj1vLnNhbXBsZV9kZWx0YXNbVF0sdC5zYW1wbGVzX2R1cmF0aW9uKz10LnNhbXBsZXNbZS0xXS5kdXJhdGlvbix4LmR0cz10LnNhbXBsZXNbZS0xXS5kdHMrdC5zYW1wbGVzW2UtMV0uZHVyYXRpb24pOnguZHRzPTAsaD8oZT49RiYmKGorKyxGPDAmJihGPTApLEYrPWguc2FtcGxlX2NvdW50c1tqXSkseC5jdHM9dC5zYW1wbGVzW2VdLmR0cytoLnNhbXBsZV9vZmZzZXRzW2pdKTp4LmN0cz14LmR0cyxmPyhlPT1mLnNhbXBsZV9udW1iZXJzW2V0XS0xPyh4LmlzX3N5bmM9ITAsZXQrKyk6KHguaXNfc3luYz0hMSx4LmRlZ3JhZGF0aW9uX3ByaW9yaXR5PTApLGcmJmcuZW50cmllc1tQXS5zYW1wbGVfZGVsdGErVj09ZSsxJiYoeC5zdWJzYW1wbGVzPWcuZW50cmllc1tQXS5zdWJzYW1wbGVzLFYrPWcuZW50cmllc1tQXS5zYW1wbGVfZGVsdGEsUCsrKSk6eC5pc19zeW5jPSEwLHUucHJvY2Vzc19zZHRwKHQubWRpYS5taW5mLnN0Ymwuc2R0cCx4LHgubnVtYmVyKSxiP3guZGVncmFkYXRpb25fcHJpb3JpdHk9Yi5wcmlvcml0eVtlXTp4LmRlZ3JhZGF0aW9uX3ByaW9yaXR5PTAsZyYmZy5lbnRyaWVzW1BdLnNhbXBsZV9kZWx0YStWPT1lJiYoeC5zdWJzYW1wbGVzPWcuZW50cmllc1tQXS5zdWJzYW1wbGVzLFYrPWcuZW50cmllc1tQXS5zYW1wbGVfZGVsdGEpLChtLmxlbmd0aD4wfHx2Lmxlbmd0aD4wKSYmdS5zZXRTYW1wbGVHcm91cFByb3BlcnRpZXModCx4LGUsdC5zYW1wbGVfZ3JvdXBzX2luZm8pfWU+MCYmKHQuc2FtcGxlc1tlLTFdLmR1cmF0aW9uPU1hdGgubWF4KHQubWRpYS5tZGhkLmR1cmF0aW9uLXQuc2FtcGxlc1tlLTFdLmR0cywwKSx0LnNhbXBsZXNfZHVyYXRpb24rPXQuc2FtcGxlc1tlLTFdLmR1cmF0aW9uKX19LHUucHJvdG90eXBlLnVwZGF0ZVNhbXBsZUxpc3RzPWZ1bmN0aW9uKCl7dmFyIHQsZSxzLG4sYSxvLGgsZixwLGcsbSx2LGIseSxFO2lmKHRoaXMubW9vdiE9PXZvaWQgMCl7Zm9yKDt0aGlzLmxhc3RNb29mSW5kZXg8dGhpcy5tb29mcy5sZW5ndGg7KWlmKHA9dGhpcy5tb29mc1t0aGlzLmxhc3RNb29mSW5kZXhdLHRoaXMubGFzdE1vb2ZJbmRleCsrLHAudHlwZT09Im1vb2YiKWZvcihnPXAsdD0wO3Q8Zy50cmFmcy5sZW5ndGg7dCsrKXtmb3IobT1nLnRyYWZzW3RdLHY9dGhpcy5nZXRUcmFja0J5SWQobS50ZmhkLnRyYWNrX2lkKSxiPXRoaXMuZ2V0VHJleEJ5SWQobS50ZmhkLnRyYWNrX2lkKSxtLnRmaGQuZmxhZ3Mmci5URkhEX0ZMQUdfU0FNUExFX0RFU0M/bj1tLnRmaGQuZGVmYXVsdF9zYW1wbGVfZGVzY3JpcHRpb25faW5kZXg6bj1iP2IuZGVmYXVsdF9zYW1wbGVfZGVzY3JpcHRpb25faW5kZXg6MSxtLnRmaGQuZmxhZ3Mmci5URkhEX0ZMQUdfU0FNUExFX0RVUj9hPW0udGZoZC5kZWZhdWx0X3NhbXBsZV9kdXJhdGlvbjphPWI/Yi5kZWZhdWx0X3NhbXBsZV9kdXJhdGlvbjowLG0udGZoZC5mbGFncyZyLlRGSERfRkxBR19TQU1QTEVfU0laRT9vPW0udGZoZC5kZWZhdWx0X3NhbXBsZV9zaXplOm89Yj9iLmRlZmF1bHRfc2FtcGxlX3NpemU6MCxtLnRmaGQuZmxhZ3Mmci5URkhEX0ZMQUdfU0FNUExFX0ZMQUdTP2g9bS50ZmhkLmRlZmF1bHRfc2FtcGxlX2ZsYWdzOmg9Yj9iLmRlZmF1bHRfc2FtcGxlX2ZsYWdzOjAsbS5zYW1wbGVfbnVtYmVyPTAsbS5zYmdwcy5sZW5ndGg+MCYmdS5pbml0U2FtcGxlR3JvdXBzKHYsbSxtLnNiZ3BzLHYubWRpYS5taW5mLnN0Ymwuc2dwZHMsbS5zZ3BkcyksZT0wO2U8bS50cnVucy5sZW5ndGg7ZSsrKXt2YXIgdz1tLnRydW5zW2VdO2ZvcihzPTA7czx3LnNhbXBsZV9jb3VudDtzKyspe3k9e30seS5tb29mX251bWJlcj10aGlzLmxhc3RNb29mSW5kZXgseS5udW1iZXJfaW5fdHJhZj1tLnNhbXBsZV9udW1iZXIsbS5zYW1wbGVfbnVtYmVyKysseS5udW1iZXI9di5zYW1wbGVzLmxlbmd0aCxtLmZpcnN0X3NhbXBsZV9pbmRleD12LnNhbXBsZXMubGVuZ3RoLHYuc2FtcGxlcy5wdXNoKHkpLHkudHJhY2tfaWQ9di50a2hkLnRyYWNrX2lkLHkudGltZXNjYWxlPXYubWRpYS5tZGhkLnRpbWVzY2FsZSx5LmRlc2NyaXB0aW9uX2luZGV4PW4tMSx5LmRlc2NyaXB0aW9uPXYubWRpYS5taW5mLnN0Ymwuc3RzZC5lbnRyaWVzW3kuZGVzY3JpcHRpb25faW5kZXhdLHkuc2l6ZT1vLHcuZmxhZ3Mmci5UUlVOX0ZMQUdTX1NJWkUmJih5LnNpemU9dy5zYW1wbGVfc2l6ZVtzXSksdi5zYW1wbGVzX3NpemUrPXkuc2l6ZSx5LmR1cmF0aW9uPWEsdy5mbGFncyZyLlRSVU5fRkxBR1NfRFVSQVRJT04mJih5LmR1cmF0aW9uPXcuc2FtcGxlX2R1cmF0aW9uW3NdKSx2LnNhbXBsZXNfZHVyYXRpb24rPXkuZHVyYXRpb24sdi5maXJzdF90cmFmX21lcmdlZHx8cz4wP3kuZHRzPXYuc2FtcGxlc1t2LnNhbXBsZXMubGVuZ3RoLTJdLmR0cyt2LnNhbXBsZXNbdi5zYW1wbGVzLmxlbmd0aC0yXS5kdXJhdGlvbjoobS50ZmR0P3kuZHRzPW0udGZkdC5iYXNlTWVkaWFEZWNvZGVUaW1lOnkuZHRzPTAsdi5maXJzdF90cmFmX21lcmdlZD0hMCkseS5jdHM9eS5kdHMsdy5mbGFncyZyLlRSVU5fRkxBR1NfQ1RTX09GRlNFVCYmKHkuY3RzPXkuZHRzK3cuc2FtcGxlX2NvbXBvc2l0aW9uX3RpbWVfb2Zmc2V0W3NdKSxFPWgsdy5mbGFncyZyLlRSVU5fRkxBR1NfRkxBR1M/RT13LnNhbXBsZV9mbGFnc1tzXTpzPT09MCYmdy5mbGFncyZyLlRSVU5fRkxBR1NfRklSU1RfRkxBRyYmKEU9dy5maXJzdF9zYW1wbGVfZmxhZ3MpLHkuaXNfc3luYz0hKEU+PjE2JjEpLHkuaXNfbGVhZGluZz1FPj4yNiYzLHkuZGVwZW5kc19vbj1FPj4yNCYzLHkuaXNfZGVwZW5kZWRfb249RT4+MjImMyx5Lmhhc19yZWR1bmRhbmN5PUU+PjIwJjMseS5kZWdyYWRhdGlvbl9wcmlvcml0eT1FJjY1NTM1O3ZhciBPPSEhKG0udGZoZC5mbGFncyZyLlRGSERfRkxBR19CQVNFX0RBVEFfT0ZGU0VUKSxZPSEhKG0udGZoZC5mbGFncyZyLlRGSERfRkxBR19ERUZBVUxUX0JBU0VfSVNfTU9PRiksRD0hISh3LmZsYWdzJnIuVFJVTl9GTEFHU19EQVRBX09GRlNFVCksVD0wO08/VD1tLnRmaGQuYmFzZV9kYXRhX29mZnNldDpZfHxlPT09MD9UPWcuc3RhcnQ6VD1mLGU9PT0wJiZzPT09MD9EP3kub2Zmc2V0PVQrdy5kYXRhX29mZnNldDp5Lm9mZnNldD1UOnkub2Zmc2V0PWYsZj15Lm9mZnNldCt5LnNpemUsKG0uc2JncHMubGVuZ3RoPjB8fG0uc2dwZHMubGVuZ3RoPjB8fHYubWRpYS5taW5mLnN0Ymwuc2JncHMubGVuZ3RoPjB8fHYubWRpYS5taW5mLnN0Ymwuc2dwZHMubGVuZ3RoPjApJiZ1LnNldFNhbXBsZUdyb3VwUHJvcGVydGllcyh2LHkseS5udW1iZXJfaW5fdHJhZixtLnNhbXBsZV9ncm91cHNfaW5mbyl9fWlmKG0uc3Vicyl7di5oYXNfZnJhZ21lbnRfc3Vic2FtcGxlcz0hMDt2YXIgRj1tLmZpcnN0X3NhbXBsZV9pbmRleDtmb3IoZT0wO2U8bS5zdWJzLmVudHJpZXMubGVuZ3RoO2UrKylGKz1tLnN1YnMuZW50cmllc1tlXS5zYW1wbGVfZGVsdGEseT12LnNhbXBsZXNbRi0xXSx5LnN1YnNhbXBsZXM9bS5zdWJzLmVudHJpZXNbZV0uc3Vic2FtcGxlc319fX0sdS5wcm90b3R5cGUuZ2V0U2FtcGxlPWZ1bmN0aW9uKHQsZSl7dmFyIHMsbj10LnNhbXBsZXNbZV07aWYoIXRoaXMubW9vdilyZXR1cm4gbnVsbDtpZighbi5kYXRhKW4uZGF0YT1uZXcgVWludDhBcnJheShuLnNpemUpLG4uYWxyZWFkeVJlYWQ9MCx0aGlzLnNhbXBsZXNEYXRhU2l6ZSs9bi5zaXplLGQuZGVidWcoIklTT0ZpbGUiLCJBbGxvY2F0aW5nIHNhbXBsZSAjIitlKyIgb24gdHJhY2sgIyIrdC50a2hkLnRyYWNrX2lkKyIgb2Ygc2l6ZSAiK24uc2l6ZSsiICh0b3RhbDogIit0aGlzLnNhbXBsZXNEYXRhU2l6ZSsiKSIpO2Vsc2UgaWYobi5hbHJlYWR5UmVhZD09bi5zaXplKXJldHVybiBuO2Zvcig7Oyl7dmFyIGE9dGhpcy5zdHJlYW0uZmluZFBvc2l0aW9uKCEwLG4ub2Zmc2V0K24uYWxyZWFkeVJlYWQsITEpO2lmKGE+LTEpe3M9dGhpcy5zdHJlYW0uYnVmZmVyc1thXTt2YXIgbz1zLmJ5dGVMZW5ndGgtKG4ub2Zmc2V0K24uYWxyZWFkeVJlYWQtcy5maWxlU3RhcnQpO2lmKG4uc2l6ZS1uLmFscmVhZHlSZWFkPD1vKXJldHVybiBkLmRlYnVnKCJJU09GaWxlIiwiR2V0dGluZyBzYW1wbGUgIyIrZSsiIGRhdGEgKGFscmVhZHlSZWFkOiAiK24uYWxyZWFkeVJlYWQrIiBvZmZzZXQ6ICIrKG4ub2Zmc2V0K24uYWxyZWFkeVJlYWQtcy5maWxlU3RhcnQpKyIgcmVhZCBzaXplOiAiKyhuLnNpemUtbi5hbHJlYWR5UmVhZCkrIiBmdWxsIHNpemU6ICIrbi5zaXplKyIpIiksbC5tZW1jcHkobi5kYXRhLmJ1ZmZlcixuLmFscmVhZHlSZWFkLHMsbi5vZmZzZXQrbi5hbHJlYWR5UmVhZC1zLmZpbGVTdGFydCxuLnNpemUtbi5hbHJlYWR5UmVhZCkscy51c2VkQnl0ZXMrPW4uc2l6ZS1uLmFscmVhZHlSZWFkLHRoaXMuc3RyZWFtLmxvZ0J1ZmZlckxldmVsKCksbi5hbHJlYWR5UmVhZD1uLnNpemUsbjtpZihvPT09MClyZXR1cm4gbnVsbDtkLmRlYnVnKCJJU09GaWxlIiwiR2V0dGluZyBzYW1wbGUgIyIrZSsiIHBhcnRpYWwgZGF0YSAoYWxyZWFkeVJlYWQ6ICIrbi5hbHJlYWR5UmVhZCsiIG9mZnNldDogIisobi5vZmZzZXQrbi5hbHJlYWR5UmVhZC1zLmZpbGVTdGFydCkrIiByZWFkIHNpemU6ICIrbysiIGZ1bGwgc2l6ZTogIituLnNpemUrIikiKSxsLm1lbWNweShuLmRhdGEuYnVmZmVyLG4uYWxyZWFkeVJlYWQscyxuLm9mZnNldCtuLmFscmVhZHlSZWFkLXMuZmlsZVN0YXJ0LG8pLG4uYWxyZWFkeVJlYWQrPW8scy51c2VkQnl0ZXMrPW8sdGhpcy5zdHJlYW0ubG9nQnVmZmVyTGV2ZWwoKX1lbHNlIHJldHVybiBudWxsfX0sdS5wcm90b3R5cGUucmVsZWFzZVNhbXBsZT1mdW5jdGlvbih0LGUpe3ZhciBzPXQuc2FtcGxlc1tlXTtyZXR1cm4gcy5kYXRhPyh0aGlzLnNhbXBsZXNEYXRhU2l6ZS09cy5zaXplLHMuZGF0YT1udWxsLHMuYWxyZWFkeVJlYWQ9MCxzLnNpemUpOjB9LHUucHJvdG90eXBlLmdldEFsbG9jYXRlZFNhbXBsZURhdGFTaXplPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuc2FtcGxlc0RhdGFTaXplfSx1LnByb3RvdHlwZS5nZXRDb2RlY3M9ZnVuY3Rpb24oKXt2YXIgdCxlPSIiO2Zvcih0PTA7dDx0aGlzLm1vb3YudHJha3MubGVuZ3RoO3QrKyl7dmFyIHM9dGhpcy5tb292LnRyYWtzW3RdO3Q+MCYmKGUrPSIsIiksZSs9cy5tZGlhLm1pbmYuc3RibC5zdHNkLmVudHJpZXNbMF0uZ2V0Q29kZWMoKX1yZXR1cm4gZX0sdS5wcm90b3R5cGUuZ2V0VHJleEJ5SWQ9ZnVuY3Rpb24odCl7dmFyIGU7aWYoIXRoaXMubW9vdnx8IXRoaXMubW9vdi5tdmV4KXJldHVybiBudWxsO2ZvcihlPTA7ZTx0aGlzLm1vb3YubXZleC50cmV4cy5sZW5ndGg7ZSsrKXt2YXIgcz10aGlzLm1vb3YubXZleC50cmV4c1tlXTtpZihzLnRyYWNrX2lkPT10KXJldHVybiBzfXJldHVybiBudWxsfSx1LnByb3RvdHlwZS5nZXRUcmFja0J5SWQ9ZnVuY3Rpb24odCl7aWYodGhpcy5tb292PT09dm9pZCAwKXJldHVybiBudWxsO2Zvcih2YXIgZT0wO2U8dGhpcy5tb292LnRyYWtzLmxlbmd0aDtlKyspe3ZhciBzPXRoaXMubW9vdi50cmFrc1tlXTtpZihzLnRraGQudHJhY2tfaWQ9PXQpcmV0dXJuIHN9cmV0dXJuIG51bGx9LHUucHJvdG90eXBlLml0ZW1zPVtdLHUucHJvdG90eXBlLml0ZW1zRGF0YVNpemU9MCx1LnByb3RvdHlwZS5mbGF0dGVuSXRlbUluZm89ZnVuY3Rpb24oKXt2YXIgdD10aGlzLml0ZW1zLGUscyxuLGE9dGhpcy5tZXRhO2lmKGEhPW51bGwmJmEuaGRsciE9PXZvaWQgMCYmYS5paW5mIT09dm9pZCAwKXtmb3IoZT0wO2U8YS5paW5mLml0ZW1faW5mb3MubGVuZ3RoO2UrKyluPXt9LG4uaWQ9YS5paW5mLml0ZW1faW5mb3NbZV0uaXRlbV9JRCx0W24uaWRdPW4sbi5yZWZfdG89W10sbi5uYW1lPWEuaWluZi5pdGVtX2luZm9zW2VdLml0ZW1fbmFtZSxhLmlpbmYuaXRlbV9pbmZvc1tlXS5wcm90ZWN0aW9uX2luZGV4PjAmJihuLnByb3RlY3Rpb249YS5pcHJvLnByb3RlY3Rpb25zW2EuaWluZi5pdGVtX2luZm9zW2VdLnByb3RlY3Rpb25faW5kZXgtMV0pLGEuaWluZi5pdGVtX2luZm9zW2VdLml0ZW1fdHlwZT9uLnR5cGU9YS5paW5mLml0ZW1faW5mb3NbZV0uaXRlbV90eXBlOm4udHlwZT0ibWltZSIsbi5jb250ZW50X3R5cGU9YS5paW5mLml0ZW1faW5mb3NbZV0uY29udGVudF90eXBlLG4uY29udGVudF9lbmNvZGluZz1hLmlpbmYuaXRlbV9pbmZvc1tlXS5jb250ZW50X2VuY29kaW5nO2lmKGEuaWxvYylmb3IoZT0wO2U8YS5pbG9jLml0ZW1zLmxlbmd0aDtlKyspe3ZhciBvPWEuaWxvYy5pdGVtc1tlXTtzd2l0Y2gobj10W28uaXRlbV9JRF0sby5kYXRhX3JlZmVyZW5jZV9pbmRleCE9PTAmJihkLndhcm4oIkl0ZW0gc3RvcmFnZSB3aXRoIHJlZmVyZW5jZSB0byBvdGhlciBmaWxlczogbm90IHN1cHBvcnRlZCIpLG4uc291cmNlPWEuZGluZi5ib3hlc1tvLmRhdGFfcmVmZXJlbmNlX2luZGV4LTFdKSxvLmNvbnN0cnVjdGlvbl9tZXRob2Qpe2Nhc2UgMDpicmVhaztjYXNlIDE6ZC53YXJuKCJJdGVtIHN0b3JhZ2Ugd2l0aCBjb25zdHJ1Y3Rpb25fbWV0aG9kIDogbm90IHN1cHBvcnRlZCIpO2JyZWFrO2Nhc2UgMjpkLndhcm4oIkl0ZW0gc3RvcmFnZSB3aXRoIGNvbnN0cnVjdGlvbl9tZXRob2QgOiBub3Qgc3VwcG9ydGVkIik7YnJlYWt9Zm9yKG4uZXh0ZW50cz1bXSxuLnNpemU9MCxzPTA7czxvLmV4dGVudHMubGVuZ3RoO3MrKyluLmV4dGVudHNbc109e30sbi5leHRlbnRzW3NdLm9mZnNldD1vLmV4dGVudHNbc10uZXh0ZW50X29mZnNldCtvLmJhc2Vfb2Zmc2V0LG4uZXh0ZW50c1tzXS5sZW5ndGg9by5leHRlbnRzW3NdLmV4dGVudF9sZW5ndGgsbi5leHRlbnRzW3NdLmFscmVhZHlSZWFkPTAsbi5zaXplKz1uLmV4dGVudHNbc10ubGVuZ3RofWlmKGEucGl0bSYmKHRbYS5waXRtLml0ZW1faWRdLnByaW1hcnk9ITApLGEuaXJlZilmb3IoZT0wO2U8YS5pcmVmLnJlZmVyZW5jZXMubGVuZ3RoO2UrKyl7dmFyIGg9YS5pcmVmLnJlZmVyZW5jZXNbZV07Zm9yKHM9MDtzPGgucmVmZXJlbmNlcy5sZW5ndGg7cysrKXRbaC5mcm9tX2l0ZW1fSURdLnJlZl90by5wdXNoKHt0eXBlOmgudHlwZSxpZDpoLnJlZmVyZW5jZXNbc119KX1pZihhLmlwcnApZm9yKHZhciBmPTA7ZjxhLmlwcnAuaXBtYXMubGVuZ3RoO2YrKyl7dmFyIHA9YS5pcHJwLmlwbWFzW2ZdO2ZvcihlPTA7ZTxwLmFzc29jaWF0aW9ucy5sZW5ndGg7ZSsrKXt2YXIgZz1wLmFzc29jaWF0aW9uc1tlXTtmb3Iobj10W2cuaWRdLG4ucHJvcGVydGllcz09PXZvaWQgMCYmKG4ucHJvcGVydGllcz17fSxuLnByb3BlcnRpZXMuYm94ZXM9W10pLHM9MDtzPGcucHJvcHMubGVuZ3RoO3MrKyl7dmFyIG09Zy5wcm9wc1tzXTtpZihtLnByb3BlcnR5X2luZGV4PjAmJm0ucHJvcGVydHlfaW5kZXgtMTxhLmlwcnAuaXBjby5ib3hlcy5sZW5ndGgpe3ZhciB2PWEuaXBycC5pcGNvLmJveGVzW20ucHJvcGVydHlfaW5kZXgtMV07bi5wcm9wZXJ0aWVzW3YudHlwZV09dixuLnByb3BlcnRpZXMuYm94ZXMucHVzaCh2KX19fX19fSx1LnByb3RvdHlwZS5nZXRJdGVtPWZ1bmN0aW9uKHQpe3ZhciBlLHM7aWYoIXRoaXMubWV0YSlyZXR1cm4gbnVsbDtpZihzPXRoaXMuaXRlbXNbdF0sIXMuZGF0YSYmcy5zaXplKXMuZGF0YT1uZXcgVWludDhBcnJheShzLnNpemUpLHMuYWxyZWFkeVJlYWQ9MCx0aGlzLml0ZW1zRGF0YVNpemUrPXMuc2l6ZSxkLmRlYnVnKCJJU09GaWxlIiwiQWxsb2NhdGluZyBpdGVtICMiK3QrIiBvZiBzaXplICIrcy5zaXplKyIgKHRvdGFsOiAiK3RoaXMuaXRlbXNEYXRhU2l6ZSsiKSIpO2Vsc2UgaWYocy5hbHJlYWR5UmVhZD09PXMuc2l6ZSlyZXR1cm4gcztmb3IodmFyIG49MDtuPHMuZXh0ZW50cy5sZW5ndGg7bisrKXt2YXIgYT1zLmV4dGVudHNbbl07aWYoYS5hbHJlYWR5UmVhZCE9PWEubGVuZ3RoKXt2YXIgbz10aGlzLnN0cmVhbS5maW5kUG9zaXRpb24oITAsYS5vZmZzZXQrYS5hbHJlYWR5UmVhZCwhMSk7aWYobz4tMSl7ZT10aGlzLnN0cmVhbS5idWZmZXJzW29dO3ZhciBoPWUuYnl0ZUxlbmd0aC0oYS5vZmZzZXQrYS5hbHJlYWR5UmVhZC1lLmZpbGVTdGFydCk7aWYoYS5sZW5ndGgtYS5hbHJlYWR5UmVhZDw9aClkLmRlYnVnKCJJU09GaWxlIiwiR2V0dGluZyBpdGVtICMiK3QrIiBleHRlbnQgIyIrbisiIGRhdGEgKGFscmVhZHlSZWFkOiAiK2EuYWxyZWFkeVJlYWQrIiBvZmZzZXQ6ICIrKGEub2Zmc2V0K2EuYWxyZWFkeVJlYWQtZS5maWxlU3RhcnQpKyIgcmVhZCBzaXplOiAiKyhhLmxlbmd0aC1hLmFscmVhZHlSZWFkKSsiIGZ1bGwgZXh0ZW50IHNpemU6ICIrYS5sZW5ndGgrIiBmdWxsIGl0ZW0gc2l6ZTogIitzLnNpemUrIikiKSxsLm1lbWNweShzLmRhdGEuYnVmZmVyLHMuYWxyZWFkeVJlYWQsZSxhLm9mZnNldCthLmFscmVhZHlSZWFkLWUuZmlsZVN0YXJ0LGEubGVuZ3RoLWEuYWxyZWFkeVJlYWQpLGUudXNlZEJ5dGVzKz1hLmxlbmd0aC1hLmFscmVhZHlSZWFkLHRoaXMuc3RyZWFtLmxvZ0J1ZmZlckxldmVsKCkscy5hbHJlYWR5UmVhZCs9YS5sZW5ndGgtYS5hbHJlYWR5UmVhZCxhLmFscmVhZHlSZWFkPWEubGVuZ3RoO2Vsc2UgcmV0dXJuIGQuZGVidWcoIklTT0ZpbGUiLCJHZXR0aW5nIGl0ZW0gIyIrdCsiIGV4dGVudCAjIituKyIgcGFydGlhbCBkYXRhIChhbHJlYWR5UmVhZDogIithLmFscmVhZHlSZWFkKyIgb2Zmc2V0OiAiKyhhLm9mZnNldCthLmFscmVhZHlSZWFkLWUuZmlsZVN0YXJ0KSsiIHJlYWQgc2l6ZTogIitoKyIgZnVsbCBleHRlbnQgc2l6ZTogIithLmxlbmd0aCsiIGZ1bGwgaXRlbSBzaXplOiAiK3Muc2l6ZSsiKSIpLGwubWVtY3B5KHMuZGF0YS5idWZmZXIscy5hbHJlYWR5UmVhZCxlLGEub2Zmc2V0K2EuYWxyZWFkeVJlYWQtZS5maWxlU3RhcnQsaCksYS5hbHJlYWR5UmVhZCs9aCxzLmFscmVhZHlSZWFkKz1oLGUudXNlZEJ5dGVzKz1oLHRoaXMuc3RyZWFtLmxvZ0J1ZmZlckxldmVsKCksbnVsbH1lbHNlIHJldHVybiBudWxsfX1yZXR1cm4gcy5hbHJlYWR5UmVhZD09PXMuc2l6ZT9zOm51bGx9LHUucHJvdG90eXBlLnJlbGVhc2VJdGVtPWZ1bmN0aW9uKHQpe3ZhciBlPXRoaXMuaXRlbXNbdF07aWYoZS5kYXRhKXt0aGlzLml0ZW1zRGF0YVNpemUtPWUuc2l6ZSxlLmRhdGE9bnVsbCxlLmFscmVhZHlSZWFkPTA7Zm9yKHZhciBzPTA7czxlLmV4dGVudHMubGVuZ3RoO3MrKyl7dmFyIG49ZS5leHRlbnRzW3NdO24uYWxyZWFkeVJlYWQ9MH1yZXR1cm4gZS5zaXplfWVsc2UgcmV0dXJuIDB9LHUucHJvdG90eXBlLnByb2Nlc3NJdGVtcz1mdW5jdGlvbih0KXtmb3IodmFyIGUgaW4gdGhpcy5pdGVtcyl7dmFyIHM9dGhpcy5pdGVtc1tlXTt0aGlzLmdldEl0ZW0ocy5pZCksdCYmIXMuc2VudCYmKHQocykscy5zZW50PSEwLHMuZGF0YT1udWxsKX19LHUucHJvdG90eXBlLmhhc0l0ZW09ZnVuY3Rpb24odCl7Zm9yKHZhciBlIGluIHRoaXMuaXRlbXMpe3ZhciBzPXRoaXMuaXRlbXNbZV07aWYocy5uYW1lPT09dClyZXR1cm4gcy5pZH1yZXR1cm4tMX0sdS5wcm90b3R5cGUuZ2V0TWV0YUhhbmRsZXI9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5tZXRhP3RoaXMubWV0YS5oZGxyLmhhbmRsZXI6bnVsbH0sdS5wcm90b3R5cGUuZ2V0UHJpbWFyeUl0ZW09ZnVuY3Rpb24oKXtyZXR1cm4hdGhpcy5tZXRhfHwhdGhpcy5tZXRhLnBpdG0/bnVsbDp0aGlzLmdldEl0ZW0odGhpcy5tZXRhLnBpdG0uaXRlbV9pZCl9LHUucHJvdG90eXBlLml0ZW1Ub0ZyYWdtZW50ZWRUcmFja0ZpbGU9ZnVuY3Rpb24odCl7dmFyIGU9dHx8e30scz1udWxsO2lmKGUuaXRlbUlkP3M9dGhpcy5nZXRJdGVtKGUuaXRlbUlkKTpzPXRoaXMuZ2V0UHJpbWFyeUl0ZW0oKSxzPT1udWxsKXJldHVybiBudWxsO3ZhciBuPW5ldyB1O24uZGlzY2FyZE1kYXREYXRhPSExO3ZhciBhPXt0eXBlOnMudHlwZSxkZXNjcmlwdGlvbl9ib3hlczpzLnByb3BlcnRpZXMuYm94ZXN9O3MucHJvcGVydGllcy5pc3BlJiYoYS53aWR0aD1zLnByb3BlcnRpZXMuaXNwZS5pbWFnZV93aWR0aCxhLmhlaWdodD1zLnByb3BlcnRpZXMuaXNwZS5pbWFnZV9oZWlnaHQpO3ZhciBvPW4uYWRkVHJhY2soYSk7cmV0dXJuIG8/KG4uYWRkU2FtcGxlKG8scy5kYXRhKSxuKTpudWxsfSx1LnByb3RvdHlwZS53cml0ZT1mdW5jdGlvbih0KXtmb3IodmFyIGU9MDtlPHRoaXMuYm94ZXMubGVuZ3RoO2UrKyl0aGlzLmJveGVzW2VdLndyaXRlKHQpfSx1LnByb3RvdHlwZS5jcmVhdGVGcmFnbWVudD1mdW5jdGlvbih0LGUscyl7dmFyIG49dGhpcy5nZXRUcmFja0J5SWQodCksYT10aGlzLmdldFNhbXBsZShuLGUpO2lmKGE9PW51bGwpcmV0dXJuIHRoaXMuc2V0TmV4dFNlZWtQb3NpdGlvbkZyb21TYW1wbGUobi5zYW1wbGVzW2VdKSxudWxsO3ZhciBvPXN8fG5ldyBsO28uZW5kaWFubmVzcz1sLkJJR19FTkRJQU47dmFyIGg9dGhpcy5jcmVhdGVTaW5nbGVTYW1wbGVNb29mKGEpO2gud3JpdGUobyksaC50cmFmc1swXS50cnVuc1swXS5kYXRhX29mZnNldD1oLnNpemUrOCxkLmRlYnVnKCJNUDRCb3giLCJBZGp1c3RpbmcgZGF0YV9vZmZzZXQgd2l0aCBuZXcgdmFsdWUgIitoLnRyYWZzWzBdLnRydW5zWzBdLmRhdGFfb2Zmc2V0KSxvLmFkanVzdFVpbnQzMihoLnRyYWZzWzBdLnRydW5zWzBdLmRhdGFfb2Zmc2V0X3Bvc2l0aW9uLGgudHJhZnNbMF0udHJ1bnNbMF0uZGF0YV9vZmZzZXQpO3ZhciBmPW5ldyByLm1kYXRCb3g7cmV0dXJuIGYuZGF0YT1hLmRhdGEsZi53cml0ZShvKSxvfSx1LndyaXRlSW5pdGlhbGl6YXRpb25TZWdtZW50PWZ1bmN0aW9uKHQsZSxzLG4pe3ZhciBhO2QuZGVidWcoIklTT0ZpbGUiLCJHZW5lcmF0aW5nIGluaXRpYWxpemF0aW9uIHNlZ21lbnQiKTt2YXIgbz1uZXcgbDtvLmVuZGlhbm5lc3M9bC5CSUdfRU5ESUFOLHQud3JpdGUobyk7dmFyIGg9ZS5hZGQoIm12ZXgiKTtmb3IocyYmaC5hZGQoIm1laGQiKS5zZXQoImZyYWdtZW50X2R1cmF0aW9uIixzKSxhPTA7YTxlLnRyYWtzLmxlbmd0aDthKyspaC5hZGQoInRyZXgiKS5zZXQoInRyYWNrX2lkIixlLnRyYWtzW2FdLnRraGQudHJhY2tfaWQpLnNldCgiZGVmYXVsdF9zYW1wbGVfZGVzY3JpcHRpb25faW5kZXgiLDEpLnNldCgiZGVmYXVsdF9zYW1wbGVfZHVyYXRpb24iLG4pLnNldCgiZGVmYXVsdF9zYW1wbGVfc2l6ZSIsMCkuc2V0KCJkZWZhdWx0X3NhbXBsZV9mbGFncyIsMTw8MTYpO3JldHVybiBlLndyaXRlKG8pLG8uYnVmZmVyfSx1LnByb3RvdHlwZS5zYXZlPWZ1bmN0aW9uKHQpe3ZhciBlPW5ldyBsO2UuZW5kaWFubmVzcz1sLkJJR19FTkRJQU4sdGhpcy53cml0ZShlKSxlLnNhdmUodCl9LHUucHJvdG90eXBlLmdldEJ1ZmZlcj1mdW5jdGlvbigpe3ZhciB0PW5ldyBsO3JldHVybiB0LmVuZGlhbm5lc3M9bC5CSUdfRU5ESUFOLHRoaXMud3JpdGUodCksdC5idWZmZXJ9LHUucHJvdG90eXBlLmluaXRpYWxpemVTZWdtZW50YXRpb249ZnVuY3Rpb24oKXt2YXIgdCxlLHMsbjtmb3IodGhpcy5vblNlZ21lbnQ9PT1udWxsJiZkLndhcm4oIk1QNEJveCIsIk5vIHNlZ21lbnRhdGlvbiBjYWxsYmFjayBzZXQhIiksdGhpcy5pc0ZyYWdtZW50YXRpb25Jbml0aWFsaXplZHx8KHRoaXMuaXNGcmFnbWVudGF0aW9uSW5pdGlhbGl6ZWQ9ITAsdGhpcy5uZXh0TW9vZk51bWJlcj0wLHRoaXMucmVzZXRUYWJsZXMoKSksZT1bXSx0PTA7dDx0aGlzLmZyYWdtZW50ZWRUcmFja3MubGVuZ3RoO3QrKyl7dmFyIGE9bmV3IHIubW9vdkJveDthLm12aGQ9dGhpcy5tb292Lm12aGQsYS5ib3hlcy5wdXNoKGEubXZoZCkscz10aGlzLmdldFRyYWNrQnlJZCh0aGlzLmZyYWdtZW50ZWRUcmFja3NbdF0uaWQpLGEuYm94ZXMucHVzaChzKSxhLnRyYWtzLnB1c2gocyksbj17fSxuLmlkPXMudGtoZC50cmFja19pZCxuLnVzZXI9dGhpcy5mcmFnbWVudGVkVHJhY2tzW3RdLnVzZXIsbi5idWZmZXI9dS53cml0ZUluaXRpYWxpemF0aW9uU2VnbWVudCh0aGlzLmZ0eXAsYSx0aGlzLm1vb3YubXZleCYmdGhpcy5tb292Lm12ZXgubWVoZD90aGlzLm1vb3YubXZleC5tZWhkLmZyYWdtZW50X2R1cmF0aW9uOnZvaWQgMCx0aGlzLm1vb3YudHJha3NbdF0uc2FtcGxlcy5sZW5ndGg+MD90aGlzLm1vb3YudHJha3NbdF0uc2FtcGxlc1swXS5kdXJhdGlvbjowKSxlLnB1c2gobil9cmV0dXJuIGV9LHIuQm94LnByb3RvdHlwZS5wcmludEhlYWRlcj1mdW5jdGlvbih0KXt0aGlzLnNpemUrPTgsdGhpcy5zaXplPlMmJih0aGlzLnNpemUrPTgpLHRoaXMudHlwZT09PSJ1dWlkIiYmKHRoaXMuc2l6ZSs9MTYpLHQubG9nKHQuaW5kZW50KyJzaXplOiIrdGhpcy5zaXplKSx0LmxvZyh0LmluZGVudCsidHlwZToiK3RoaXMudHlwZSl9LHIuRnVsbEJveC5wcm90b3R5cGUucHJpbnRIZWFkZXI9ZnVuY3Rpb24odCl7dGhpcy5zaXplKz00LHIuQm94LnByb3RvdHlwZS5wcmludEhlYWRlci5jYWxsKHRoaXMsdCksdC5sb2codC5pbmRlbnQrInZlcnNpb246Iit0aGlzLnZlcnNpb24pLHQubG9nKHQuaW5kZW50KyJmbGFnczoiK3RoaXMuZmxhZ3MpfSxyLkJveC5wcm90b3R5cGUucHJpbnQ9ZnVuY3Rpb24odCl7dGhpcy5wcmludEhlYWRlcih0KX0sci5Db250YWluZXJCb3gucHJvdG90eXBlLnByaW50PWZ1bmN0aW9uKHQpe3RoaXMucHJpbnRIZWFkZXIodCk7Zm9yKHZhciBlPTA7ZTx0aGlzLmJveGVzLmxlbmd0aDtlKyspaWYodGhpcy5ib3hlc1tlXSl7dmFyIHM9dC5pbmRlbnQ7dC5pbmRlbnQrPSIgIix0aGlzLmJveGVzW2VdLnByaW50KHQpLHQuaW5kZW50PXN9fSx1LnByb3RvdHlwZS5wcmludD1mdW5jdGlvbih0KXt0LmluZGVudD0iIjtmb3IodmFyIGU9MDtlPHRoaXMuYm94ZXMubGVuZ3RoO2UrKyl0aGlzLmJveGVzW2VdJiZ0aGlzLmJveGVzW2VdLnByaW50KHQpfSxyLm12aGRCb3gucHJvdG90eXBlLnByaW50PWZ1bmN0aW9uKHQpe3IuRnVsbEJveC5wcm90b3R5cGUucHJpbnRIZWFkZXIuY2FsbCh0aGlzLHQpLHQubG9nKHQuaW5kZW50KyJjcmVhdGlvbl90aW1lOiAiK3RoaXMuY3JlYXRpb25fdGltZSksdC5sb2codC5pbmRlbnQrIm1vZGlmaWNhdGlvbl90aW1lOiAiK3RoaXMubW9kaWZpY2F0aW9uX3RpbWUpLHQubG9nKHQuaW5kZW50KyJ0aW1lc2NhbGU6ICIrdGhpcy50aW1lc2NhbGUpLHQubG9nKHQuaW5kZW50KyJkdXJhdGlvbjogIit0aGlzLmR1cmF0aW9uKSx0LmxvZyh0LmluZGVudCsicmF0ZTogIit0aGlzLnJhdGUpLHQubG9nKHQuaW5kZW50KyJ2b2x1bWU6ICIrKHRoaXMudm9sdW1lPj44KSksdC5sb2codC5pbmRlbnQrIm1hdHJpeDogIit0aGlzLm1hdHJpeC5qb2luKCIsICIpKSx0LmxvZyh0LmluZGVudCsibmV4dF90cmFja19pZDogIit0aGlzLm5leHRfdHJhY2tfaWQpfSxyLnRraGRCb3gucHJvdG90eXBlLnByaW50PWZ1bmN0aW9uKHQpe3IuRnVsbEJveC5wcm90b3R5cGUucHJpbnRIZWFkZXIuY2FsbCh0aGlzLHQpLHQubG9nKHQuaW5kZW50KyJjcmVhdGlvbl90aW1lOiAiK3RoaXMuY3JlYXRpb25fdGltZSksdC5sb2codC5pbmRlbnQrIm1vZGlmaWNhdGlvbl90aW1lOiAiK3RoaXMubW9kaWZpY2F0aW9uX3RpbWUpLHQubG9nKHQuaW5kZW50KyJ0cmFja19pZDogIit0aGlzLnRyYWNrX2lkKSx0LmxvZyh0LmluZGVudCsiZHVyYXRpb246ICIrdGhpcy5kdXJhdGlvbiksdC5sb2codC5pbmRlbnQrInZvbHVtZTogIisodGhpcy52b2x1bWU+PjgpKSx0LmxvZyh0LmluZGVudCsibWF0cml4OiAiK3RoaXMubWF0cml4LmpvaW4oIiwgIikpLHQubG9nKHQuaW5kZW50KyJsYXllcjogIit0aGlzLmxheWVyKSx0LmxvZyh0LmluZGVudCsiYWx0ZXJuYXRlX2dyb3VwOiAiK3RoaXMuYWx0ZXJuYXRlX2dyb3VwKSx0LmxvZyh0LmluZGVudCsid2lkdGg6ICIrdGhpcy53aWR0aCksdC5sb2codC5pbmRlbnQrImhlaWdodDogIit0aGlzLmhlaWdodCl9O3ZhciBJPXt9O0kuY3JlYXRlRmlsZT1mdW5jdGlvbih0LGUpe3ZhciBzPXQhPT12b2lkIDA/dDohMCxuPW5ldyB1KGUpO3JldHVybiBuLmRpc2NhcmRNZGF0RGF0YT0hcyxufSxfLmNyZWF0ZUZpbGU9SS5jcmVhdGVGaWxlfSkoTCk7dmFyIFI9T2JqZWN0LmRlZmluZVByb3BlcnR5LEc9KF8sZCxjKT0+ZCBpbiBfP1IoXyxkLHtlbnVtZXJhYmxlOiEwLGNvbmZpZ3VyYWJsZTohMCx3cml0YWJsZTohMCx2YWx1ZTpjfSk6X1tkXT1jLGs9KF8sZCxjKT0+KEcoXyx0eXBlb2YgZCE9InN5bWJvbCI/ZCsiIjpkLGMpLGMpLHl0PShfLGQsYyk9PntpZighZC5oYXMoXykpdGhyb3cgVHlwZUVycm9yKCJDYW5ub3QgIitjKX0sQz0oXyxkLGMpPT4oeXQoXyxkLCJyZWFkIGZyb20gcHJpdmF0ZSBmaWVsZCIpLGM/Yy5jYWxsKF8pOmQuZ2V0KF8pKSxxPShfLGQsYyk9PntpZihkLmhhcyhfKSl0aHJvdyBUeXBlRXJyb3IoIkNhbm5vdCBhZGQgdGhlIHNhbWUgcHJpdmF0ZSBtZW1iZXIgbW9yZSB0aGFuIG9uY2UiKTtkIGluc3RhbmNlb2YgV2Vha1NldD9kLmFkZChfKTpkLnNldChfLGMpfSxKPShfLGQsYyxsKT0+KHl0KF8sZCwid3JpdGUgdG8gcHJpdmF0ZSBmaWVsZCIpLGw/bC5jYWxsKF8sYyk6ZC5zZXQoXyxjKSxjKSx6dD0oXyxkLGMpPT4oeXQoXyxkLCJhY2Nlc3MgcHJpdmF0ZSBtZXRob2QiKSxjKTtsZXQgbHQ9MTtjb25zdCBTdD17ZGVidWc6KC4uLl8pPT57bHQ8PTAmJmNvbnNvbGUuZGVidWcoLi4uXyl9LGluZm86KC4uLl8pPT57bHQ8PTEmJmNvbnNvbGUuaW5mbyguLi5fKX0sd2FybjooLi4uXyk9PntsdDw9MiYmY29uc29sZS53YXJuKC4uLl8pfSxlcnJvcjooLi4uXyk9PntsdDw9MyYmY29uc29sZS5lcnJvciguLi5fKX19LGR0PW5ldyBNYXAsTT17c2V0TG9nTGV2ZWw6Xz0+e2x0PWR0LmdldChfKT8/MX0sLi4uU3QsY3JlYXRlOl89Pk9iamVjdC5mcm9tRW50cmllcyhPYmplY3QuZW50cmllcyhTdCkubWFwKChbZCxjXSk9PltkLCguLi5sKT0+YyhfLC4uLmwpXSkpfTtkdC5zZXQoTS5kZWJ1ZywwKSxkdC5zZXQoTS5pbmZvLDEpLGR0LnNldChNLndhcm4sMiksZHQuc2V0KE0uZXJyb3IsMyk7Y29uc3QgQ3Q9KCk9PntsZXQgXyxkPTE2LjY7c2VsZi5vbm1lc3NhZ2U9Yz0+e2MuZGF0YS5ldmVudD09PSJzdGFydCImJihzZWxmLmNsZWFySW50ZXJ2YWwoXyksXz1zZWxmLnNldEludGVydmFsKCgpPT57c2VsZi5wb3N0TWVzc2FnZSh7fSl9LGQpKSxjLmRhdGEuZXZlbnQ9PT0ic3RvcCImJnNlbGYuY2xlYXJJbnRlcnZhbChfKX19LFR0PSgpPT57Y29uc3QgXz1uZXcgQmxvYihbYCgke0N0LnRvU3RyaW5nKCl9KSgpYF0pLGQ9VVJMLmNyZWF0ZU9iamVjdFVSTChfKTtyZXR1cm4gbmV3IFdvcmtlcihkKX0sSXQ9bmV3IE1hcDtsZXQgeHQ9MTtjb25zdCBGdD1UdCgpO0Z0Lm9ubWVzc2FnZT0oKT0+e3h0Kz0xO2Zvcihjb25zdFtfLGRdb2YgSXQuZW50cmllcygpKXh0JV89PT0wJiZkLmZvckVhY2goYz0+YygpKX07ZnVuY3Rpb24gUHQoXyl7cmV0dXJuIEFycmF5KF8ubnVtYmVyT2ZDaGFubmVscykuZmlsbCgwKS5tYXAoKGQsYyk9Pl8uZ2V0Q2hhbm5lbERhdGEoYykpfWZ1bmN0aW9uIGJ0KF8sZCxjKXtjb25zdCBsPWMtZCxTPW5ldyBGbG9hdDMyQXJyYXkobCk7bGV0IFU9MDtmb3IoO1U8bDspU1tVXT1fWyhkK1UpJV8ubGVuZ3RoXSxVKz0xO3JldHVybiBTfWZ1bmN0aW9uIHd0KF8sZCl7bGV0IGM9ITE7YXN5bmMgZnVuY3Rpb24gbCgpe2NvbnN0IFM9Xy5nZXRSZWFkZXIoKTtmb3IoOyFjOyl7Y29uc3R7dmFsdWU6VSxkb25lOkF9PWF3YWl0IFMucmVhZCgpO2lmKEEpe2Qub25Eb25lKCk7cmV0dXJufWF3YWl0IGQub25DaHVuayhVKX1TLnJlbGVhc2VMb2NrKCksYXdhaXQgXy5jYW5jZWwoKX1yZXR1cm4gbCgpLmNhdGNoKE0uZXJyb3IpLCgpPT57Yz0hMH19dmFyICQ9e307KGZ1bmN0aW9uKF8pe3ZhciBkPWZ1bmN0aW9uKCl7dmFyIHQ9bmV3IERhdGUsZT00LHM9MyxuPTIsYT0xLG89ZSxoPXtzZXRMb2dMZXZlbDpmdW5jdGlvbihmKXtmPT10aGlzLmRlYnVnP289YTpmPT10aGlzLmluZm8/bz1uOmY9PXRoaXMud2Fybj9vPXM6KGY9PXRoaXMuZXJyb3Isbz1lKX0sZGVidWc6ZnVuY3Rpb24oZixwKXtjb25zb2xlLmRlYnVnPT09dm9pZCAwJiYoY29uc29sZS5kZWJ1Zz1jb25zb2xlLmxvZyksYT49byYmY29uc29sZS5kZWJ1ZygiWyIrZC5nZXREdXJhdGlvblN0cmluZyhuZXcgRGF0ZS10LDFlMykrIl0iLCJbIitmKyJdIixwKX0sbG9nOmZ1bmN0aW9uKGYscCl7dGhpcy5kZWJ1ZyhmLm1zZyl9LGluZm86ZnVuY3Rpb24oZixwKXtuPj1vJiZjb25zb2xlLmluZm8oIlsiK2QuZ2V0RHVyYXRpb25TdHJpbmcobmV3IERhdGUtdCwxZTMpKyJdIiwiWyIrZisiXSIscCl9LHdhcm46ZnVuY3Rpb24oZixwKXtzPj1vJiZjb25zb2xlLndhcm4oIlsiK2QuZ2V0RHVyYXRpb25TdHJpbmcobmV3IERhdGUtdCwxZTMpKyJdIiwiWyIrZisiXSIscCl9LGVycm9yOmZ1bmN0aW9uKGYscCl7ZT49byYmY29uc29sZS5lcnJvcigiWyIrZC5nZXREdXJhdGlvblN0cmluZyhuZXcgRGF0ZS10LDFlMykrIl0iLCJbIitmKyJdIixwKX19O3JldHVybiBofSgpO2QuZ2V0RHVyYXRpb25TdHJpbmc9ZnVuY3Rpb24odCxlKXt2YXIgcztmdW5jdGlvbiBuKGcsbSl7Zm9yKHZhciB2PSIiK2csYj12LnNwbGl0KCIuIik7YlswXS5sZW5ndGg8bTspYlswXT0iMCIrYlswXTtyZXR1cm4gYi5qb2luKCIuIil9dDwwPyhzPSEwLHQ9LXQpOnM9ITE7dmFyIGE9ZXx8MSxvPXQvYSxoPU1hdGguZmxvb3Ioby8zNjAwKTtvLT1oKjM2MDA7dmFyIGY9TWF0aC5mbG9vcihvLzYwKTtvLT1mKjYwO3ZhciBwPW8qMWUzO3JldHVybiBvPU1hdGguZmxvb3IobykscC09byoxZTMscD1NYXRoLmZsb29yKHApLChzPyItIjoiIikraCsiOiIrbihmLDIpKyI6IituKG8sMikrIi4iK24ocCwzKX0sZC5wcmludFJhbmdlcz1mdW5jdGlvbih0KXt2YXIgZT10Lmxlbmd0aDtpZihlPjApe2Zvcih2YXIgcz0iIixuPTA7bjxlO24rKyluPjAmJihzKz0iLCIpLHMrPSJbIitkLmdldER1cmF0aW9uU3RyaW5nKHQuc3RhcnQobikpKyIsIitkLmdldER1cmF0aW9uU3RyaW5nKHQuZW5kKG4pKSsiXSI7cmV0dXJuIHN9ZWxzZSByZXR1cm4iKGVtcHR5KSJ9LF8uTG9nPWQ7dmFyIGM9ZnVuY3Rpb24odCl7aWYodCBpbnN0YW5jZW9mIEFycmF5QnVmZmVyKXRoaXMuYnVmZmVyPXQsdGhpcy5kYXRhdmlldz1uZXcgRGF0YVZpZXcodCk7ZWxzZSB0aHJvdyJOZWVkcyBhbiBhcnJheSBidWZmZXIiO3RoaXMucG9zaXRpb249MH07Yy5wcm90b3R5cGUuZ2V0UG9zaXRpb249ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5wb3NpdGlvbn0sYy5wcm90b3R5cGUuZ2V0RW5kUG9zaXRpb249ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5idWZmZXIuYnl0ZUxlbmd0aH0sYy5wcm90b3R5cGUuZ2V0TGVuZ3RoPWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuYnVmZmVyLmJ5dGVMZW5ndGh9LGMucHJvdG90eXBlLnNlZWs9ZnVuY3Rpb24odCl7dmFyIGU9TWF0aC5tYXgoMCxNYXRoLm1pbih0aGlzLmJ1ZmZlci5ieXRlTGVuZ3RoLHQpKTtyZXR1cm4gdGhpcy5wb3NpdGlvbj1pc05hTihlKXx8IWlzRmluaXRlKGUpPzA6ZSwhMH0sYy5wcm90b3R5cGUuaXNFb3M9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5nZXRQb3NpdGlvbigpPj10aGlzLmdldEVuZFBvc2l0aW9uKCl9LGMucHJvdG90eXBlLnJlYWRBbnlJbnQ9ZnVuY3Rpb24odCxlKXt2YXIgcz0wO2lmKHRoaXMucG9zaXRpb24rdDw9dGhpcy5idWZmZXIuYnl0ZUxlbmd0aCl7c3dpdGNoKHQpe2Nhc2UgMTplP3M9dGhpcy5kYXRhdmlldy5nZXRJbnQ4KHRoaXMucG9zaXRpb24pOnM9dGhpcy5kYXRhdmlldy5nZXRVaW50OCh0aGlzLnBvc2l0aW9uKTticmVhaztjYXNlIDI6ZT9zPXRoaXMuZGF0YXZpZXcuZ2V0SW50MTYodGhpcy5wb3NpdGlvbik6cz10aGlzLmRhdGF2aWV3LmdldFVpbnQxNih0aGlzLnBvc2l0aW9uKTticmVhaztjYXNlIDM6aWYoZSl0aHJvdyJObyBtZXRob2QgZm9yIHJlYWRpbmcgc2lnbmVkIDI0IGJpdHMgdmFsdWVzIjtzPXRoaXMuZGF0YXZpZXcuZ2V0VWludDgodGhpcy5wb3NpdGlvbik8PDE2LHN8PXRoaXMuZGF0YXZpZXcuZ2V0VWludDgodGhpcy5wb3NpdGlvbisxKTw8OCxzfD10aGlzLmRhdGF2aWV3LmdldFVpbnQ4KHRoaXMucG9zaXRpb24rMik7YnJlYWs7Y2FzZSA0OmU/cz10aGlzLmRhdGF2aWV3LmdldEludDMyKHRoaXMucG9zaXRpb24pOnM9dGhpcy5kYXRhdmlldy5nZXRVaW50MzIodGhpcy5wb3NpdGlvbik7YnJlYWs7Y2FzZSA4OmlmKGUpdGhyb3ciTm8gbWV0aG9kIGZvciByZWFkaW5nIHNpZ25lZCA2NCBiaXRzIHZhbHVlcyI7cz10aGlzLmRhdGF2aWV3LmdldFVpbnQzMih0aGlzLnBvc2l0aW9uKTw8MzIsc3w9dGhpcy5kYXRhdmlldy5nZXRVaW50MzIodGhpcy5wb3NpdGlvbis0KTticmVhaztkZWZhdWx0OnRocm93InJlYWRJbnQgbWV0aG9kIG5vdCBpbXBsZW1lbnRlZCBmb3Igc2l6ZTogIit0fXJldHVybiB0aGlzLnBvc2l0aW9uKz10LHN9ZWxzZSB0aHJvdyJOb3QgZW5vdWdoIGJ5dGVzIGluIGJ1ZmZlciJ9LGMucHJvdG90eXBlLnJlYWRVaW50OD1mdW5jdGlvbigpe3JldHVybiB0aGlzLnJlYWRBbnlJbnQoMSwhMSl9LGMucHJvdG90eXBlLnJlYWRVaW50MTY9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5yZWFkQW55SW50KDIsITEpfSxjLnByb3RvdHlwZS5yZWFkVWludDI0PWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMucmVhZEFueUludCgzLCExKX0sYy5wcm90b3R5cGUucmVhZFVpbnQzMj1mdW5jdGlvbigpe3JldHVybiB0aGlzLnJlYWRBbnlJbnQoNCwhMSl9LGMucHJvdG90eXBlLnJlYWRVaW50NjQ9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5yZWFkQW55SW50KDgsITEpfSxjLnByb3RvdHlwZS5yZWFkU3RyaW5nPWZ1bmN0aW9uKHQpe2lmKHRoaXMucG9zaXRpb24rdDw9dGhpcy5idWZmZXIuYnl0ZUxlbmd0aCl7Zm9yKHZhciBlPSIiLHM9MDtzPHQ7cysrKWUrPVN0cmluZy5mcm9tQ2hhckNvZGUodGhpcy5yZWFkVWludDgoKSk7cmV0dXJuIGV9ZWxzZSB0aHJvdyJOb3QgZW5vdWdoIGJ5dGVzIGluIGJ1ZmZlciJ9LGMucHJvdG90eXBlLnJlYWRDU3RyaW5nPWZ1bmN0aW9uKCl7Zm9yKHZhciB0PVtdOzspe3ZhciBlPXRoaXMucmVhZFVpbnQ4KCk7aWYoZSE9PTApdC5wdXNoKGUpO2Vsc2UgYnJlYWt9cmV0dXJuIFN0cmluZy5mcm9tQ2hhckNvZGUuYXBwbHkobnVsbCx0KX0sYy5wcm90b3R5cGUucmVhZEludDg9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5yZWFkQW55SW50KDEsITApfSxjLnByb3RvdHlwZS5yZWFkSW50MTY9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5yZWFkQW55SW50KDIsITApfSxjLnByb3RvdHlwZS5yZWFkSW50MzI9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5yZWFkQW55SW50KDQsITApfSxjLnByb3RvdHlwZS5yZWFkSW50NjQ9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5yZWFkQW55SW50KDgsITEpfSxjLnByb3RvdHlwZS5yZWFkVWludDhBcnJheT1mdW5jdGlvbih0KXtmb3IodmFyIGU9bmV3IFVpbnQ4QXJyYXkodCkscz0wO3M8dDtzKyspZVtzXT10aGlzLnJlYWRVaW50OCgpO3JldHVybiBlfSxjLnByb3RvdHlwZS5yZWFkSW50MTZBcnJheT1mdW5jdGlvbih0KXtmb3IodmFyIGU9bmV3IEludDE2QXJyYXkodCkscz0wO3M8dDtzKyspZVtzXT10aGlzLnJlYWRJbnQxNigpO3JldHVybiBlfSxjLnByb3RvdHlwZS5yZWFkVWludDE2QXJyYXk9ZnVuY3Rpb24odCl7Zm9yKHZhciBlPW5ldyBJbnQxNkFycmF5KHQpLHM9MDtzPHQ7cysrKWVbc109dGhpcy5yZWFkVWludDE2KCk7cmV0dXJuIGV9LGMucHJvdG90eXBlLnJlYWRVaW50MzJBcnJheT1mdW5jdGlvbih0KXtmb3IodmFyIGU9bmV3IFVpbnQzMkFycmF5KHQpLHM9MDtzPHQ7cysrKWVbc109dGhpcy5yZWFkVWludDMyKCk7cmV0dXJuIGV9LGMucHJvdG90eXBlLnJlYWRJbnQzMkFycmF5PWZ1bmN0aW9uKHQpe2Zvcih2YXIgZT1uZXcgSW50MzJBcnJheSh0KSxzPTA7czx0O3MrKyllW3NdPXRoaXMucmVhZEludDMyKCk7cmV0dXJuIGV9LF8uTVA0Qm94U3RyZWFtPWM7dmFyIGw9ZnVuY3Rpb24odCxlLHMpe3RoaXMuX2J5dGVPZmZzZXQ9ZXx8MCx0IGluc3RhbmNlb2YgQXJyYXlCdWZmZXI/dGhpcy5idWZmZXI9dDp0eXBlb2YgdD09Im9iamVjdCI/KHRoaXMuZGF0YVZpZXc9dCxlJiYodGhpcy5fYnl0ZU9mZnNldCs9ZSkpOnRoaXMuYnVmZmVyPW5ldyBBcnJheUJ1ZmZlcih0fHwwKSx0aGlzLnBvc2l0aW9uPTAsdGhpcy5lbmRpYW5uZXNzPXM/P2wuTElUVExFX0VORElBTn07bC5wcm90b3R5cGU9e30sbC5wcm90b3R5cGUuZ2V0UG9zaXRpb249ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5wb3NpdGlvbn0sbC5wcm90b3R5cGUuX3JlYWxsb2M9ZnVuY3Rpb24odCl7aWYodGhpcy5fZHluYW1pY1NpemUpe3ZhciBlPXRoaXMuX2J5dGVPZmZzZXQrdGhpcy5wb3NpdGlvbit0LHM9dGhpcy5fYnVmZmVyLmJ5dGVMZW5ndGg7aWYoZTw9cyl7ZT50aGlzLl9ieXRlTGVuZ3RoJiYodGhpcy5fYnl0ZUxlbmd0aD1lKTtyZXR1cm59Zm9yKHM8MSYmKHM9MSk7ZT5zOylzKj0yO3ZhciBuPW5ldyBBcnJheUJ1ZmZlcihzKSxhPW5ldyBVaW50OEFycmF5KHRoaXMuX2J1ZmZlciksbz1uZXcgVWludDhBcnJheShuLDAsYS5sZW5ndGgpO28uc2V0KGEpLHRoaXMuYnVmZmVyPW4sdGhpcy5fYnl0ZUxlbmd0aD1lfX0sbC5wcm90b3R5cGUuX3RyaW1BbGxvYz1mdW5jdGlvbigpe2lmKHRoaXMuX2J5dGVMZW5ndGghPXRoaXMuX2J1ZmZlci5ieXRlTGVuZ3RoKXt2YXIgdD1uZXcgQXJyYXlCdWZmZXIodGhpcy5fYnl0ZUxlbmd0aCksZT1uZXcgVWludDhBcnJheSh0KSxzPW5ldyBVaW50OEFycmF5KHRoaXMuX2J1ZmZlciwwLGUubGVuZ3RoKTtlLnNldChzKSx0aGlzLmJ1ZmZlcj10fX0sbC5CSUdfRU5ESUFOPSExLGwuTElUVExFX0VORElBTj0hMCxsLnByb3RvdHlwZS5fYnl0ZUxlbmd0aD0wLE9iamVjdC5kZWZpbmVQcm9wZXJ0eShsLnByb3RvdHlwZSwiYnl0ZUxlbmd0aCIse2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9ieXRlTGVuZ3RoLXRoaXMuX2J5dGVPZmZzZXR9fSksT2JqZWN0LmRlZmluZVByb3BlcnR5KGwucHJvdG90eXBlLCJidWZmZXIiLHtnZXQ6ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5fdHJpbUFsbG9jKCksdGhpcy5fYnVmZmVyfSxzZXQ6ZnVuY3Rpb24odCl7dGhpcy5fYnVmZmVyPXQsdGhpcy5fZGF0YVZpZXc9bmV3IERhdGFWaWV3KHRoaXMuX2J1ZmZlcix0aGlzLl9ieXRlT2Zmc2V0KSx0aGlzLl9ieXRlTGVuZ3RoPXRoaXMuX2J1ZmZlci5ieXRlTGVuZ3RofX0pLE9iamVjdC5kZWZpbmVQcm9wZXJ0eShsLnByb3RvdHlwZSwiYnl0ZU9mZnNldCIse2dldDpmdW5jdGlvbigpe3JldHVybiB0aGlzLl9ieXRlT2Zmc2V0fSxzZXQ6ZnVuY3Rpb24odCl7dGhpcy5fYnl0ZU9mZnNldD10LHRoaXMuX2RhdGFWaWV3PW5ldyBEYXRhVmlldyh0aGlzLl9idWZmZXIsdGhpcy5fYnl0ZU9mZnNldCksdGhpcy5fYnl0ZUxlbmd0aD10aGlzLl9idWZmZXIuYnl0ZUxlbmd0aH19KSxPYmplY3QuZGVmaW5lUHJvcGVydHkobC5wcm90b3R5cGUsImRhdGFWaWV3Iix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2RhdGFWaWV3fSxzZXQ6ZnVuY3Rpb24odCl7dGhpcy5fYnl0ZU9mZnNldD10LmJ5dGVPZmZzZXQsdGhpcy5fYnVmZmVyPXQuYnVmZmVyLHRoaXMuX2RhdGFWaWV3PW5ldyBEYXRhVmlldyh0aGlzLl9idWZmZXIsdGhpcy5fYnl0ZU9mZnNldCksdGhpcy5fYnl0ZUxlbmd0aD10aGlzLl9ieXRlT2Zmc2V0K3QuYnl0ZUxlbmd0aH19KSxsLnByb3RvdHlwZS5zZWVrPWZ1bmN0aW9uKHQpe3ZhciBlPU1hdGgubWF4KDAsTWF0aC5taW4odGhpcy5ieXRlTGVuZ3RoLHQpKTt0aGlzLnBvc2l0aW9uPWlzTmFOKGUpfHwhaXNGaW5pdGUoZSk/MDplfSxsLnByb3RvdHlwZS5pc0VvZj1mdW5jdGlvbigpe3JldHVybiB0aGlzLnBvc2l0aW9uPj10aGlzLl9ieXRlTGVuZ3RofSxsLnByb3RvdHlwZS5tYXBVaW50OEFycmF5PWZ1bmN0aW9uKHQpe3RoaXMuX3JlYWxsb2ModCoxKTt2YXIgZT1uZXcgVWludDhBcnJheSh0aGlzLl9idWZmZXIsdGhpcy5ieXRlT2Zmc2V0K3RoaXMucG9zaXRpb24sdCk7cmV0dXJuIHRoaXMucG9zaXRpb24rPXQqMSxlfSxsLnByb3RvdHlwZS5yZWFkSW50MzJBcnJheT1mdW5jdGlvbih0LGUpe3Q9dD8/dGhpcy5ieXRlTGVuZ3RoLXRoaXMucG9zaXRpb24vNDt2YXIgcz1uZXcgSW50MzJBcnJheSh0KTtyZXR1cm4gbC5tZW1jcHkocy5idWZmZXIsMCx0aGlzLmJ1ZmZlcix0aGlzLmJ5dGVPZmZzZXQrdGhpcy5wb3NpdGlvbix0KnMuQllURVNfUEVSX0VMRU1FTlQpLGwuYXJyYXlUb05hdGl2ZShzLGU/P3RoaXMuZW5kaWFubmVzcyksdGhpcy5wb3NpdGlvbis9cy5ieXRlTGVuZ3RoLHN9LGwucHJvdG90eXBlLnJlYWRJbnQxNkFycmF5PWZ1bmN0aW9uKHQsZSl7dD10Pz90aGlzLmJ5dGVMZW5ndGgtdGhpcy5wb3NpdGlvbi8yO3ZhciBzPW5ldyBJbnQxNkFycmF5KHQpO3JldHVybiBsLm1lbWNweShzLmJ1ZmZlciwwLHRoaXMuYnVmZmVyLHRoaXMuYnl0ZU9mZnNldCt0aGlzLnBvc2l0aW9uLHQqcy5CWVRFU19QRVJfRUxFTUVOVCksbC5hcnJheVRvTmF0aXZlKHMsZT8/dGhpcy5lbmRpYW5uZXNzKSx0aGlzLnBvc2l0aW9uKz1zLmJ5dGVMZW5ndGgsc30sbC5wcm90b3R5cGUucmVhZEludDhBcnJheT1mdW5jdGlvbih0KXt0PXQ/P3RoaXMuYnl0ZUxlbmd0aC10aGlzLnBvc2l0aW9uO3ZhciBlPW5ldyBJbnQ4QXJyYXkodCk7cmV0dXJuIGwubWVtY3B5KGUuYnVmZmVyLDAsdGhpcy5idWZmZXIsdGhpcy5ieXRlT2Zmc2V0K3RoaXMucG9zaXRpb24sdCplLkJZVEVTX1BFUl9FTEVNRU5UKSx0aGlzLnBvc2l0aW9uKz1lLmJ5dGVMZW5ndGgsZX0sbC5wcm90b3R5cGUucmVhZFVpbnQzMkFycmF5PWZ1bmN0aW9uKHQsZSl7dD10Pz90aGlzLmJ5dGVMZW5ndGgtdGhpcy5wb3NpdGlvbi80O3ZhciBzPW5ldyBVaW50MzJBcnJheSh0KTtyZXR1cm4gbC5tZW1jcHkocy5idWZmZXIsMCx0aGlzLmJ1ZmZlcix0aGlzLmJ5dGVPZmZzZXQrdGhpcy5wb3NpdGlvbix0KnMuQllURVNfUEVSX0VMRU1FTlQpLGwuYXJyYXlUb05hdGl2ZShzLGU/P3RoaXMuZW5kaWFubmVzcyksdGhpcy5wb3NpdGlvbis9cy5ieXRlTGVuZ3RoLHN9LGwucHJvdG90eXBlLnJlYWRVaW50MTZBcnJheT1mdW5jdGlvbih0LGUpe3Q9dD8/dGhpcy5ieXRlTGVuZ3RoLXRoaXMucG9zaXRpb24vMjt2YXIgcz1uZXcgVWludDE2QXJyYXkodCk7cmV0dXJuIGwubWVtY3B5KHMuYnVmZmVyLDAsdGhpcy5idWZmZXIsdGhpcy5ieXRlT2Zmc2V0K3RoaXMucG9zaXRpb24sdCpzLkJZVEVTX1BFUl9FTEVNRU5UKSxsLmFycmF5VG9OYXRpdmUocyxlPz90aGlzLmVuZGlhbm5lc3MpLHRoaXMucG9zaXRpb24rPXMuYnl0ZUxlbmd0aCxzfSxsLnByb3RvdHlwZS5yZWFkVWludDhBcnJheT1mdW5jdGlvbih0KXt0PXQ/P3RoaXMuYnl0ZUxlbmd0aC10aGlzLnBvc2l0aW9uO3ZhciBlPW5ldyBVaW50OEFycmF5KHQpO3JldHVybiBsLm1lbWNweShlLmJ1ZmZlciwwLHRoaXMuYnVmZmVyLHRoaXMuYnl0ZU9mZnNldCt0aGlzLnBvc2l0aW9uLHQqZS5CWVRFU19QRVJfRUxFTUVOVCksdGhpcy5wb3NpdGlvbis9ZS5ieXRlTGVuZ3RoLGV9LGwucHJvdG90eXBlLnJlYWRGbG9hdDY0QXJyYXk9ZnVuY3Rpb24odCxlKXt0PXQ/P3RoaXMuYnl0ZUxlbmd0aC10aGlzLnBvc2l0aW9uLzg7dmFyIHM9bmV3IEZsb2F0NjRBcnJheSh0KTtyZXR1cm4gbC5tZW1jcHkocy5idWZmZXIsMCx0aGlzLmJ1ZmZlcix0aGlzLmJ5dGVPZmZzZXQrdGhpcy5wb3NpdGlvbix0KnMuQllURVNfUEVSX0VMRU1FTlQpLGwuYXJyYXlUb05hdGl2ZShzLGU/P3RoaXMuZW5kaWFubmVzcyksdGhpcy5wb3NpdGlvbis9cy5ieXRlTGVuZ3RoLHN9LGwucHJvdG90eXBlLnJlYWRGbG9hdDMyQXJyYXk9ZnVuY3Rpb24odCxlKXt0PXQ/P3RoaXMuYnl0ZUxlbmd0aC10aGlzLnBvc2l0aW9uLzQ7dmFyIHM9bmV3IEZsb2F0MzJBcnJheSh0KTtyZXR1cm4gbC5tZW1jcHkocy5idWZmZXIsMCx0aGlzLmJ1ZmZlcix0aGlzLmJ5dGVPZmZzZXQrdGhpcy5wb3NpdGlvbix0KnMuQllURVNfUEVSX0VMRU1FTlQpLGwuYXJyYXlUb05hdGl2ZShzLGU/P3RoaXMuZW5kaWFubmVzcyksdGhpcy5wb3NpdGlvbis9cy5ieXRlTGVuZ3RoLHN9LGwucHJvdG90eXBlLnJlYWRJbnQzMj1mdW5jdGlvbih0KXt2YXIgZT10aGlzLl9kYXRhVmlldy5nZXRJbnQzMih0aGlzLnBvc2l0aW9uLHQ/P3RoaXMuZW5kaWFubmVzcyk7cmV0dXJuIHRoaXMucG9zaXRpb24rPTQsZX0sbC5wcm90b3R5cGUucmVhZEludDE2PWZ1bmN0aW9uKHQpe3ZhciBlPXRoaXMuX2RhdGFWaWV3LmdldEludDE2KHRoaXMucG9zaXRpb24sdD8/dGhpcy5lbmRpYW5uZXNzKTtyZXR1cm4gdGhpcy5wb3NpdGlvbis9MixlfSxsLnByb3RvdHlwZS5yZWFkSW50OD1mdW5jdGlvbigpe3ZhciB0PXRoaXMuX2RhdGFWaWV3LmdldEludDgodGhpcy5wb3NpdGlvbik7cmV0dXJuIHRoaXMucG9zaXRpb24rPTEsdH0sbC5wcm90b3R5cGUucmVhZFVpbnQzMj1mdW5jdGlvbih0KXt2YXIgZT10aGlzLl9kYXRhVmlldy5nZXRVaW50MzIodGhpcy5wb3NpdGlvbix0Pz90aGlzLmVuZGlhbm5lc3MpO3JldHVybiB0aGlzLnBvc2l0aW9uKz00LGV9LGwucHJvdG90eXBlLnJlYWRVaW50MTY9ZnVuY3Rpb24odCl7dmFyIGU9dGhpcy5fZGF0YVZpZXcuZ2V0VWludDE2KHRoaXMucG9zaXRpb24sdD8/dGhpcy5lbmRpYW5uZXNzKTtyZXR1cm4gdGhpcy5wb3NpdGlvbis9MixlfSxsLnByb3RvdHlwZS5yZWFkVWludDg9ZnVuY3Rpb24oKXt2YXIgdD10aGlzLl9kYXRhVmlldy5nZXRVaW50OCh0aGlzLnBvc2l0aW9uKTtyZXR1cm4gdGhpcy5wb3NpdGlvbis9MSx0fSxsLnByb3RvdHlwZS5yZWFkRmxvYXQzMj1mdW5jdGlvbih0KXt2YXIgZT10aGlzLl9kYXRhVmlldy5nZXRGbG9hdDMyKHRoaXMucG9zaXRpb24sdD8/dGhpcy5lbmRpYW5uZXNzKTtyZXR1cm4gdGhpcy5wb3NpdGlvbis9NCxlfSxsLnByb3RvdHlwZS5yZWFkRmxvYXQ2ND1mdW5jdGlvbih0KXt2YXIgZT10aGlzLl9kYXRhVmlldy5nZXRGbG9hdDY0KHRoaXMucG9zaXRpb24sdD8/dGhpcy5lbmRpYW5uZXNzKTtyZXR1cm4gdGhpcy5wb3NpdGlvbis9OCxlfSxsLmVuZGlhbm5lc3M9bmV3IEludDhBcnJheShuZXcgSW50MTZBcnJheShbMV0pLmJ1ZmZlcilbMF0+MCxsLm1lbWNweT1mdW5jdGlvbih0LGUscyxuLGEpe3ZhciBvPW5ldyBVaW50OEFycmF5KHQsZSxhKSxoPW5ldyBVaW50OEFycmF5KHMsbixhKTtvLnNldChoKX0sbC5hcnJheVRvTmF0aXZlPWZ1bmN0aW9uKHQsZSl7cmV0dXJuIGU9PXRoaXMuZW5kaWFubmVzcz90OnRoaXMuZmxpcEFycmF5RW5kaWFubmVzcyh0KX0sbC5uYXRpdmVUb0VuZGlhbj1mdW5jdGlvbih0LGUpe3JldHVybiB0aGlzLmVuZGlhbm5lc3M9PWU/dDp0aGlzLmZsaXBBcnJheUVuZGlhbm5lc3ModCl9LGwuZmxpcEFycmF5RW5kaWFubmVzcz1mdW5jdGlvbih0KXtmb3IodmFyIGU9bmV3IFVpbnQ4QXJyYXkodC5idWZmZXIsdC5ieXRlT2Zmc2V0LHQuYnl0ZUxlbmd0aCkscz0wO3M8dC5ieXRlTGVuZ3RoO3MrPXQuQllURVNfUEVSX0VMRU1FTlQpZm9yKHZhciBuPXMrdC5CWVRFU19QRVJfRUxFTUVOVC0xLGE9cztuPmE7bi0tLGErKyl7dmFyIG89ZVthXTtlW2FdPWVbbl0sZVtuXT1vfXJldHVybiB0fSxsLnByb3RvdHlwZS5mYWlsdXJlUG9zaXRpb249MCxTdHJpbmcuZnJvbUNoYXJDb2RlVWludDg9ZnVuY3Rpb24odCl7Zm9yKHZhciBlPVtdLHM9MDtzPHQubGVuZ3RoO3MrKyllW3NdPXRbc107cmV0dXJuIFN0cmluZy5mcm9tQ2hhckNvZGUuYXBwbHkobnVsbCxlKX0sbC5wcm90b3R5cGUucmVhZFN0cmluZz1mdW5jdGlvbih0LGUpe3JldHVybiBlPT1udWxsfHxlPT0iQVNDSUkiP1N0cmluZy5mcm9tQ2hhckNvZGVVaW50OC5hcHBseShudWxsLFt0aGlzLm1hcFVpbnQ4QXJyYXkodD8/dGhpcy5ieXRlTGVuZ3RoLXRoaXMucG9zaXRpb24pXSk6bmV3IFRleHREZWNvZGVyKGUpLmRlY29kZSh0aGlzLm1hcFVpbnQ4QXJyYXkodCkpfSxsLnByb3RvdHlwZS5yZWFkQ1N0cmluZz1mdW5jdGlvbih0KXt2YXIgZT10aGlzLmJ5dGVMZW5ndGgtdGhpcy5wb3NpdGlvbixzPW5ldyBVaW50OEFycmF5KHRoaXMuX2J1ZmZlcix0aGlzLl9ieXRlT2Zmc2V0K3RoaXMucG9zaXRpb24pLG49ZTt0IT1udWxsJiYobj1NYXRoLm1pbih0LGUpKTtmb3IodmFyIGE9MDthPG4mJnNbYV0hPT0wO2ErKyk7dmFyIG89U3RyaW5nLmZyb21DaGFyQ29kZVVpbnQ4LmFwcGx5KG51bGwsW3RoaXMubWFwVWludDhBcnJheShhKV0pO3JldHVybiB0IT1udWxsP3RoaXMucG9zaXRpb24rPW4tYTphIT1lJiYodGhpcy5wb3NpdGlvbis9MSksb307dmFyIFM9TWF0aC5wb3coMiwzMik7bC5wcm90b3R5cGUucmVhZEludDY0PWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMucmVhZEludDMyKCkqUyt0aGlzLnJlYWRVaW50MzIoKX0sbC5wcm90b3R5cGUucmVhZFVpbnQ2ND1mdW5jdGlvbigpe3JldHVybiB0aGlzLnJlYWRVaW50MzIoKSpTK3RoaXMucmVhZFVpbnQzMigpfSxsLnByb3RvdHlwZS5yZWFkSW50NjQ9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5yZWFkVWludDMyKCkqUyt0aGlzLnJlYWRVaW50MzIoKX0sbC5wcm90b3R5cGUucmVhZFVpbnQyND1mdW5jdGlvbigpe3JldHVybih0aGlzLnJlYWRVaW50OCgpPDwxNikrKHRoaXMucmVhZFVpbnQ4KCk8PDgpK3RoaXMucmVhZFVpbnQ4KCl9LF8uRGF0YVN0cmVhbT1sLGwucHJvdG90eXBlLnNhdmU9ZnVuY3Rpb24odCl7dmFyIGU9bmV3IEJsb2IoW3RoaXMuYnVmZmVyXSk7aWYod2luZG93LlVSTCYmVVJMLmNyZWF0ZU9iamVjdFVSTCl7dmFyIHM9d2luZG93LlVSTC5jcmVhdGVPYmplY3RVUkwoZSksbj1kb2N1bWVudC5jcmVhdGVFbGVtZW50KCJhIik7ZG9jdW1lbnQuYm9keS5hcHBlbmRDaGlsZChuKSxuLnNldEF0dHJpYnV0ZSgiaHJlZiIscyksbi5zZXRBdHRyaWJ1dGUoImRvd25sb2FkIix0KSxuLnNldEF0dHJpYnV0ZSgidGFyZ2V0IiwiX3NlbGYiKSxuLmNsaWNrKCksd2luZG93LlVSTC5yZXZva2VPYmplY3RVUkwocyl9ZWxzZSB0aHJvdyJEYXRhU3RyZWFtLnNhdmU6IENhbid0IGNyZWF0ZSBvYmplY3QgVVJMLiJ9LGwucHJvdG90eXBlLl9keW5hbWljU2l6ZT0hMCxPYmplY3QuZGVmaW5lUHJvcGVydHkobC5wcm90b3R5cGUsImR5bmFtaWNTaXplIix7Z2V0OmZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMuX2R5bmFtaWNTaXplfSxzZXQ6ZnVuY3Rpb24odCl7dHx8dGhpcy5fdHJpbUFsbG9jKCksdGhpcy5fZHluYW1pY1NpemU9dH19KSxsLnByb3RvdHlwZS5zaGlmdD1mdW5jdGlvbih0KXt2YXIgZT1uZXcgQXJyYXlCdWZmZXIodGhpcy5fYnl0ZUxlbmd0aC10KSxzPW5ldyBVaW50OEFycmF5KGUpLG49bmV3IFVpbnQ4QXJyYXkodGhpcy5fYnVmZmVyLHQscy5sZW5ndGgpO3Muc2V0KG4pLHRoaXMuYnVmZmVyPWUsdGhpcy5wb3NpdGlvbi09dH0sbC5wcm90b3R5cGUud3JpdGVJbnQzMkFycmF5PWZ1bmN0aW9uKHQsZSl7aWYodGhpcy5fcmVhbGxvYyh0Lmxlbmd0aCo0KSx0IGluc3RhbmNlb2YgSW50MzJBcnJheSYmdGhpcy5ieXRlT2Zmc2V0K3RoaXMucG9zaXRpb24ldC5CWVRFU19QRVJfRUxFTUVOVD09PTApbC5tZW1jcHkodGhpcy5fYnVmZmVyLHRoaXMuYnl0ZU9mZnNldCt0aGlzLnBvc2l0aW9uLHQuYnVmZmVyLDAsdC5ieXRlTGVuZ3RoKSx0aGlzLm1hcEludDMyQXJyYXkodC5sZW5ndGgsZSk7ZWxzZSBmb3IodmFyIHM9MDtzPHQubGVuZ3RoO3MrKyl0aGlzLndyaXRlSW50MzIodFtzXSxlKX0sbC5wcm90b3R5cGUud3JpdGVJbnQxNkFycmF5PWZ1bmN0aW9uKHQsZSl7aWYodGhpcy5fcmVhbGxvYyh0Lmxlbmd0aCoyKSx0IGluc3RhbmNlb2YgSW50MTZBcnJheSYmdGhpcy5ieXRlT2Zmc2V0K3RoaXMucG9zaXRpb24ldC5CWVRFU19QRVJfRUxFTUVOVD09PTApbC5tZW1jcHkodGhpcy5fYnVmZmVyLHRoaXMuYnl0ZU9mZnNldCt0aGlzLnBvc2l0aW9uLHQuYnVmZmVyLDAsdC5ieXRlTGVuZ3RoKSx0aGlzLm1hcEludDE2QXJyYXkodC5sZW5ndGgsZSk7ZWxzZSBmb3IodmFyIHM9MDtzPHQubGVuZ3RoO3MrKyl0aGlzLndyaXRlSW50MTYodFtzXSxlKX0sbC5wcm90b3R5cGUud3JpdGVJbnQ4QXJyYXk9ZnVuY3Rpb24odCl7aWYodGhpcy5fcmVhbGxvYyh0Lmxlbmd0aCoxKSx0IGluc3RhbmNlb2YgSW50OEFycmF5JiZ0aGlzLmJ5dGVPZmZzZXQrdGhpcy5wb3NpdGlvbiV0LkJZVEVTX1BFUl9FTEVNRU5UPT09MClsLm1lbWNweSh0aGlzLl9idWZmZXIsdGhpcy5ieXRlT2Zmc2V0K3RoaXMucG9zaXRpb24sdC5idWZmZXIsMCx0LmJ5dGVMZW5ndGgpLHRoaXMubWFwSW50OEFycmF5KHQubGVuZ3RoKTtlbHNlIGZvcih2YXIgZT0wO2U8dC5sZW5ndGg7ZSsrKXRoaXMud3JpdGVJbnQ4KHRbZV0pfSxsLnByb3RvdHlwZS53cml0ZVVpbnQzMkFycmF5PWZ1bmN0aW9uKHQsZSl7aWYodGhpcy5fcmVhbGxvYyh0Lmxlbmd0aCo0KSx0IGluc3RhbmNlb2YgVWludDMyQXJyYXkmJnRoaXMuYnl0ZU9mZnNldCt0aGlzLnBvc2l0aW9uJXQuQllURVNfUEVSX0VMRU1FTlQ9PT0wKWwubWVtY3B5KHRoaXMuX2J1ZmZlcix0aGlzLmJ5dGVPZmZzZXQrdGhpcy5wb3NpdGlvbix0LmJ1ZmZlciwwLHQuYnl0ZUxlbmd0aCksdGhpcy5tYXBVaW50MzJBcnJheSh0Lmxlbmd0aCxlKTtlbHNlIGZvcih2YXIgcz0wO3M8dC5sZW5ndGg7cysrKXRoaXMud3JpdGVVaW50MzIodFtzXSxlKX0sbC5wcm90b3R5cGUud3JpdGVVaW50MTZBcnJheT1mdW5jdGlvbih0LGUpe2lmKHRoaXMuX3JlYWxsb2ModC5sZW5ndGgqMiksdCBpbnN0YW5jZW9mIFVpbnQxNkFycmF5JiZ0aGlzLmJ5dGVPZmZzZXQrdGhpcy5wb3NpdGlvbiV0LkJZVEVTX1BFUl9FTEVNRU5UPT09MClsLm1lbWNweSh0aGlzLl9idWZmZXIsdGhpcy5ieXRlT2Zmc2V0K3RoaXMucG9zaXRpb24sdC5idWZmZXIsMCx0LmJ5dGVMZW5ndGgpLHRoaXMubWFwVWludDE2QXJyYXkodC5sZW5ndGgsZSk7ZWxzZSBmb3IodmFyIHM9MDtzPHQubGVuZ3RoO3MrKyl0aGlzLndyaXRlVWludDE2KHRbc10sZSl9LGwucHJvdG90eXBlLndyaXRlVWludDhBcnJheT1mdW5jdGlvbih0KXtpZih0aGlzLl9yZWFsbG9jKHQubGVuZ3RoKjEpLHQgaW5zdGFuY2VvZiBVaW50OEFycmF5JiZ0aGlzLmJ5dGVPZmZzZXQrdGhpcy5wb3NpdGlvbiV0LkJZVEVTX1BFUl9FTEVNRU5UPT09MClsLm1lbWNweSh0aGlzLl9idWZmZXIsdGhpcy5ieXRlT2Zmc2V0K3RoaXMucG9zaXRpb24sdC5idWZmZXIsMCx0LmJ5dGVMZW5ndGgpLHRoaXMubWFwVWludDhBcnJheSh0Lmxlbmd0aCk7ZWxzZSBmb3IodmFyIGU9MDtlPHQubGVuZ3RoO2UrKyl0aGlzLndyaXRlVWludDgodFtlXSl9LGwucHJvdG90eXBlLndyaXRlRmxvYXQ2NEFycmF5PWZ1bmN0aW9uKHQsZSl7aWYodGhpcy5fcmVhbGxvYyh0Lmxlbmd0aCo4KSx0IGluc3RhbmNlb2YgRmxvYXQ2NEFycmF5JiZ0aGlzLmJ5dGVPZmZzZXQrdGhpcy5wb3NpdGlvbiV0LkJZVEVTX1BFUl9FTEVNRU5UPT09MClsLm1lbWNweSh0aGlzLl9idWZmZXIsdGhpcy5ieXRlT2Zmc2V0K3RoaXMucG9zaXRpb24sdC5idWZmZXIsMCx0LmJ5dGVMZW5ndGgpLHRoaXMubWFwRmxvYXQ2NEFycmF5KHQubGVuZ3RoLGUpO2Vsc2UgZm9yKHZhciBzPTA7czx0Lmxlbmd0aDtzKyspdGhpcy53cml0ZUZsb2F0NjQodFtzXSxlKX0sbC5wcm90b3R5cGUud3JpdGVGbG9hdDMyQXJyYXk9ZnVuY3Rpb24odCxlKXtpZih0aGlzLl9yZWFsbG9jKHQubGVuZ3RoKjQpLHQgaW5zdGFuY2VvZiBGbG9hdDMyQXJyYXkmJnRoaXMuYnl0ZU9mZnNldCt0aGlzLnBvc2l0aW9uJXQuQllURVNfUEVSX0VMRU1FTlQ9PT0wKWwubWVtY3B5KHRoaXMuX2J1ZmZlcix0aGlzLmJ5dGVPZmZzZXQrdGhpcy5wb3NpdGlvbix0LmJ1ZmZlciwwLHQuYnl0ZUxlbmd0aCksdGhpcy5tYXBGbG9hdDMyQXJyYXkodC5sZW5ndGgsZSk7ZWxzZSBmb3IodmFyIHM9MDtzPHQubGVuZ3RoO3MrKyl0aGlzLndyaXRlRmxvYXQzMih0W3NdLGUpfSxsLnByb3RvdHlwZS53cml0ZUludDMyPWZ1bmN0aW9uKHQsZSl7dGhpcy5fcmVhbGxvYyg0KSx0aGlzLl9kYXRhVmlldy5zZXRJbnQzMih0aGlzLnBvc2l0aW9uLHQsZT8/dGhpcy5lbmRpYW5uZXNzKSx0aGlzLnBvc2l0aW9uKz00fSxsLnByb3RvdHlwZS53cml0ZUludDE2PWZ1bmN0aW9uKHQsZSl7dGhpcy5fcmVhbGxvYygyKSx0aGlzLl9kYXRhVmlldy5zZXRJbnQxNih0aGlzLnBvc2l0aW9uLHQsZT8/dGhpcy5lbmRpYW5uZXNzKSx0aGlzLnBvc2l0aW9uKz0yfSxsLnByb3RvdHlwZS53cml0ZUludDg9ZnVuY3Rpb24odCl7dGhpcy5fcmVhbGxvYygxKSx0aGlzLl9kYXRhVmlldy5zZXRJbnQ4KHRoaXMucG9zaXRpb24sdCksdGhpcy5wb3NpdGlvbis9MX0sbC5wcm90b3R5cGUud3JpdGVVaW50MzI9ZnVuY3Rpb24odCxlKXt0aGlzLl9yZWFsbG9jKDQpLHRoaXMuX2RhdGFWaWV3LnNldFVpbnQzMih0aGlzLnBvc2l0aW9uLHQsZT8/dGhpcy5lbmRpYW5uZXNzKSx0aGlzLnBvc2l0aW9uKz00fSxsLnByb3RvdHlwZS53cml0ZVVpbnQxNj1mdW5jdGlvbih0LGUpe3RoaXMuX3JlYWxsb2MoMiksdGhpcy5fZGF0YVZpZXcuc2V0VWludDE2KHRoaXMucG9zaXRpb24sdCxlPz90aGlzLmVuZGlhbm5lc3MpLHRoaXMucG9zaXRpb24rPTJ9LGwucHJvdG90eXBlLndyaXRlVWludDg9ZnVuY3Rpb24odCl7dGhpcy5fcmVhbGxvYygxKSx0aGlzLl9kYXRhVmlldy5zZXRVaW50OCh0aGlzLnBvc2l0aW9uLHQpLHRoaXMucG9zaXRpb24rPTF9LGwucHJvdG90eXBlLndyaXRlRmxvYXQzMj1mdW5jdGlvbih0LGUpe3RoaXMuX3JlYWxsb2MoNCksdGhpcy5fZGF0YVZpZXcuc2V0RmxvYXQzMih0aGlzLnBvc2l0aW9uLHQsZT8/dGhpcy5lbmRpYW5uZXNzKSx0aGlzLnBvc2l0aW9uKz00fSxsLnByb3RvdHlwZS53cml0ZUZsb2F0NjQ9ZnVuY3Rpb24odCxlKXt0aGlzLl9yZWFsbG9jKDgpLHRoaXMuX2RhdGFWaWV3LnNldEZsb2F0NjQodGhpcy5wb3NpdGlvbix0LGU/P3RoaXMuZW5kaWFubmVzcyksdGhpcy5wb3NpdGlvbis9OH0sbC5wcm90b3R5cGUud3JpdGVVQ1MyU3RyaW5nPWZ1bmN0aW9uKHQsZSxzKXtzPT1udWxsJiYocz10Lmxlbmd0aCk7Zm9yKHZhciBuPTA7bjx0Lmxlbmd0aCYmbjxzO24rKyl0aGlzLndyaXRlVWludDE2KHQuY2hhckNvZGVBdChuKSxlKTtmb3IoO248cztuKyspdGhpcy53cml0ZVVpbnQxNigwKX0sbC5wcm90b3R5cGUud3JpdGVTdHJpbmc9ZnVuY3Rpb24odCxlLHMpe3ZhciBuPTA7aWYoZT09bnVsbHx8ZT09IkFTQ0lJIilpZihzIT1udWxsKXt2YXIgYT1NYXRoLm1pbih0Lmxlbmd0aCxzKTtmb3Iobj0wO248YTtuKyspdGhpcy53cml0ZVVpbnQ4KHQuY2hhckNvZGVBdChuKSk7Zm9yKDtuPHM7bisrKXRoaXMud3JpdGVVaW50OCgwKX1lbHNlIGZvcihuPTA7bjx0Lmxlbmd0aDtuKyspdGhpcy53cml0ZVVpbnQ4KHQuY2hhckNvZGVBdChuKSk7ZWxzZSB0aGlzLndyaXRlVWludDhBcnJheShuZXcgVGV4dEVuY29kZXIoZSkuZW5jb2RlKHQuc3Vic3RyaW5nKDAscykpKX0sbC5wcm90b3R5cGUud3JpdGVDU3RyaW5nPWZ1bmN0aW9uKHQsZSl7dmFyIHM9MDtpZihlIT1udWxsKXt2YXIgbj1NYXRoLm1pbih0Lmxlbmd0aCxlKTtmb3Iocz0wO3M8bjtzKyspdGhpcy53cml0ZVVpbnQ4KHQuY2hhckNvZGVBdChzKSk7Zm9yKDtzPGU7cysrKXRoaXMud3JpdGVVaW50OCgwKX1lbHNle2ZvcihzPTA7czx0Lmxlbmd0aDtzKyspdGhpcy53cml0ZVVpbnQ4KHQuY2hhckNvZGVBdChzKSk7dGhpcy53cml0ZVVpbnQ4KDApfX0sbC5wcm90b3R5cGUud3JpdGVTdHJ1Y3Q9ZnVuY3Rpb24odCxlKXtmb3IodmFyIHM9MDtzPHQubGVuZ3RoO3MrPTIpe3ZhciBuPXRbcysxXTt0aGlzLndyaXRlVHlwZShuLGVbdFtzXV0sZSl9fSxsLnByb3RvdHlwZS53cml0ZVR5cGU9ZnVuY3Rpb24odCxlLHMpe3ZhciBuO2lmKHR5cGVvZiB0PT0iZnVuY3Rpb24iKXJldHVybiB0KHRoaXMsZSk7aWYodHlwZW9mIHQ9PSJvYmplY3QiJiYhKHQgaW5zdGFuY2VvZiBBcnJheSkpcmV0dXJuIHQuc2V0KHRoaXMsZSxzKTt2YXIgYT1udWxsLG89IkFTQ0lJIixoPXRoaXMucG9zaXRpb247c3dpdGNoKHR5cGVvZiB0PT0ic3RyaW5nIiYmLzovLnRlc3QodCkmJihuPXQuc3BsaXQoIjoiKSx0PW5bMF0sYT1wYXJzZUludChuWzFdKSksdHlwZW9mIHQ9PSJzdHJpbmciJiYvLC8udGVzdCh0KSYmKG49dC5zcGxpdCgiLCIpLHQ9blswXSxvPXBhcnNlSW50KG5bMV0pKSx0KXtjYXNlInVpbnQ4Ijp0aGlzLndyaXRlVWludDgoZSk7YnJlYWs7Y2FzZSJpbnQ4Ijp0aGlzLndyaXRlSW50OChlKTticmVhaztjYXNlInVpbnQxNiI6dGhpcy53cml0ZVVpbnQxNihlLHRoaXMuZW5kaWFubmVzcyk7YnJlYWs7Y2FzZSJpbnQxNiI6dGhpcy53cml0ZUludDE2KGUsdGhpcy5lbmRpYW5uZXNzKTticmVhaztjYXNlInVpbnQzMiI6dGhpcy53cml0ZVVpbnQzMihlLHRoaXMuZW5kaWFubmVzcyk7YnJlYWs7Y2FzZSJpbnQzMiI6dGhpcy53cml0ZUludDMyKGUsdGhpcy5lbmRpYW5uZXNzKTticmVhaztjYXNlImZsb2F0MzIiOnRoaXMud3JpdGVGbG9hdDMyKGUsdGhpcy5lbmRpYW5uZXNzKTticmVhaztjYXNlImZsb2F0NjQiOnRoaXMud3JpdGVGbG9hdDY0KGUsdGhpcy5lbmRpYW5uZXNzKTticmVhaztjYXNlInVpbnQxNmJlIjp0aGlzLndyaXRlVWludDE2KGUsbC5CSUdfRU5ESUFOKTticmVhaztjYXNlImludDE2YmUiOnRoaXMud3JpdGVJbnQxNihlLGwuQklHX0VORElBTik7YnJlYWs7Y2FzZSJ1aW50MzJiZSI6dGhpcy53cml0ZVVpbnQzMihlLGwuQklHX0VORElBTik7YnJlYWs7Y2FzZSJpbnQzMmJlIjp0aGlzLndyaXRlSW50MzIoZSxsLkJJR19FTkRJQU4pO2JyZWFrO2Nhc2UiZmxvYXQzMmJlIjp0aGlzLndyaXRlRmxvYXQzMihlLGwuQklHX0VORElBTik7YnJlYWs7Y2FzZSJmbG9hdDY0YmUiOnRoaXMud3JpdGVGbG9hdDY0KGUsbC5CSUdfRU5ESUFOKTticmVhaztjYXNlInVpbnQxNmxlIjp0aGlzLndyaXRlVWludDE2KGUsbC5MSVRUTEVfRU5ESUFOKTticmVhaztjYXNlImludDE2bGUiOnRoaXMud3JpdGVJbnQxNihlLGwuTElUVExFX0VORElBTik7YnJlYWs7Y2FzZSJ1aW50MzJsZSI6dGhpcy53cml0ZVVpbnQzMihlLGwuTElUVExFX0VORElBTik7YnJlYWs7Y2FzZSJpbnQzMmxlIjp0aGlzLndyaXRlSW50MzIoZSxsLkxJVFRMRV9FTkRJQU4pO2JyZWFrO2Nhc2UiZmxvYXQzMmxlIjp0aGlzLndyaXRlRmxvYXQzMihlLGwuTElUVExFX0VORElBTik7YnJlYWs7Y2FzZSJmbG9hdDY0bGUiOnRoaXMud3JpdGVGbG9hdDY0KGUsbC5MSVRUTEVfRU5ESUFOKTticmVhaztjYXNlImNzdHJpbmciOnRoaXMud3JpdGVDU3RyaW5nKGUsYSk7YnJlYWs7Y2FzZSJzdHJpbmciOnRoaXMud3JpdGVTdHJpbmcoZSxvLGEpO2JyZWFrO2Nhc2UidTE2c3RyaW5nIjp0aGlzLndyaXRlVUNTMlN0cmluZyhlLHRoaXMuZW5kaWFubmVzcyxhKTticmVhaztjYXNlInUxNnN0cmluZ2xlIjp0aGlzLndyaXRlVUNTMlN0cmluZyhlLGwuTElUVExFX0VORElBTixhKTticmVhaztjYXNlInUxNnN0cmluZ2JlIjp0aGlzLndyaXRlVUNTMlN0cmluZyhlLGwuQklHX0VORElBTixhKTticmVhaztkZWZhdWx0OmlmKHQubGVuZ3RoPT0zKXtmb3IodmFyIGY9dFsxXSxwPTA7cDxlLmxlbmd0aDtwKyspdGhpcy53cml0ZVR5cGUoZixlW3BdKTticmVha31lbHNle3RoaXMud3JpdGVTdHJ1Y3QodCxlKTticmVha319YSE9bnVsbCYmKHRoaXMucG9zaXRpb249aCx0aGlzLl9yZWFsbG9jKGEpLHRoaXMucG9zaXRpb249aCthKX0sbC5wcm90b3R5cGUud3JpdGVVaW50NjQ9ZnVuY3Rpb24odCl7dmFyIGU9TWF0aC5mbG9vcih0L1MpO3RoaXMud3JpdGVVaW50MzIoZSksdGhpcy53cml0ZVVpbnQzMih0JjQyOTQ5NjcyOTUpfSxsLnByb3RvdHlwZS53cml0ZVVpbnQyND1mdW5jdGlvbih0KXt0aGlzLndyaXRlVWludDgoKHQmMTY3MTE2ODApPj4xNiksdGhpcy53cml0ZVVpbnQ4KCh0JjY1MjgwKT4+OCksdGhpcy53cml0ZVVpbnQ4KHQmMjU1KX0sbC5wcm90b3R5cGUuYWRqdXN0VWludDMyPWZ1bmN0aW9uKHQsZSl7dmFyIHM9dGhpcy5wb3NpdGlvbjt0aGlzLnNlZWsodCksdGhpcy53cml0ZVVpbnQzMihlKSx0aGlzLnNlZWsocyl9LGwucHJvdG90eXBlLm1hcEludDMyQXJyYXk9ZnVuY3Rpb24odCxlKXt0aGlzLl9yZWFsbG9jKHQqNCk7dmFyIHM9bmV3IEludDMyQXJyYXkodGhpcy5fYnVmZmVyLHRoaXMuYnl0ZU9mZnNldCt0aGlzLnBvc2l0aW9uLHQpO3JldHVybiBsLmFycmF5VG9OYXRpdmUocyxlPz90aGlzLmVuZGlhbm5lc3MpLHRoaXMucG9zaXRpb24rPXQqNCxzfSxsLnByb3RvdHlwZS5tYXBJbnQxNkFycmF5PWZ1bmN0aW9uKHQsZSl7dGhpcy5fcmVhbGxvYyh0KjIpO3ZhciBzPW5ldyBJbnQxNkFycmF5KHRoaXMuX2J1ZmZlcix0aGlzLmJ5dGVPZmZzZXQrdGhpcy5wb3NpdGlvbix0KTtyZXR1cm4gbC5hcnJheVRvTmF0aXZlKHMsZT8/dGhpcy5lbmRpYW5uZXNzKSx0aGlzLnBvc2l0aW9uKz10KjIsc30sbC5wcm90b3R5cGUubWFwSW50OEFycmF5PWZ1bmN0aW9uKHQpe3RoaXMuX3JlYWxsb2ModCoxKTt2YXIgZT1uZXcgSW50OEFycmF5KHRoaXMuX2J1ZmZlcix0aGlzLmJ5dGVPZmZzZXQrdGhpcy5wb3NpdGlvbix0KTtyZXR1cm4gdGhpcy5wb3NpdGlvbis9dCoxLGV9LGwucHJvdG90eXBlLm1hcFVpbnQzMkFycmF5PWZ1bmN0aW9uKHQsZSl7dGhpcy5fcmVhbGxvYyh0KjQpO3ZhciBzPW5ldyBVaW50MzJBcnJheSh0aGlzLl9idWZmZXIsdGhpcy5ieXRlT2Zmc2V0K3RoaXMucG9zaXRpb24sdCk7cmV0dXJuIGwuYXJyYXlUb05hdGl2ZShzLGU/P3RoaXMuZW5kaWFubmVzcyksdGhpcy5wb3NpdGlvbis9dCo0LHN9LGwucHJvdG90eXBlLm1hcFVpbnQxNkFycmF5PWZ1bmN0aW9uKHQsZSl7dGhpcy5fcmVhbGxvYyh0KjIpO3ZhciBzPW5ldyBVaW50MTZBcnJheSh0aGlzLl9idWZmZXIsdGhpcy5ieXRlT2Zmc2V0K3RoaXMucG9zaXRpb24sdCk7cmV0dXJuIGwuYXJyYXlUb05hdGl2ZShzLGU/P3RoaXMuZW5kaWFubmVzcyksdGhpcy5wb3NpdGlvbis9dCoyLHN9LGwucHJvdG90eXBlLm1hcEZsb2F0NjRBcnJheT1mdW5jdGlvbih0LGUpe3RoaXMuX3JlYWxsb2ModCo4KTt2YXIgcz1uZXcgRmxvYXQ2NEFycmF5KHRoaXMuX2J1ZmZlcix0aGlzLmJ5dGVPZmZzZXQrdGhpcy5wb3NpdGlvbix0KTtyZXR1cm4gbC5hcnJheVRvTmF0aXZlKHMsZT8/dGhpcy5lbmRpYW5uZXNzKSx0aGlzLnBvc2l0aW9uKz10Kjgsc30sbC5wcm90b3R5cGUubWFwRmxvYXQzMkFycmF5PWZ1bmN0aW9uKHQsZSl7dGhpcy5fcmVhbGxvYyh0KjQpO3ZhciBzPW5ldyBGbG9hdDMyQXJyYXkodGhpcy5fYnVmZmVyLHRoaXMuYnl0ZU9mZnNldCt0aGlzLnBvc2l0aW9uLHQpO3JldHVybiBsLmFycmF5VG9OYXRpdmUocyxlPz90aGlzLmVuZGlhbm5lc3MpLHRoaXMucG9zaXRpb24rPXQqNCxzfTt2YXIgVT1mdW5jdGlvbih0KXt0aGlzLmJ1ZmZlcnM9W10sdGhpcy5idWZmZXJJbmRleD0tMSx0JiYodGhpcy5pbnNlcnRCdWZmZXIodCksdGhpcy5idWZmZXJJbmRleD0wKX07VS5wcm90b3R5cGU9bmV3IGwobmV3IEFycmF5QnVmZmVyLDAsbC5CSUdfRU5ESUFOKSxVLnByb3RvdHlwZS5pbml0aWFsaXplZD1mdW5jdGlvbigpe3ZhciB0O3JldHVybiB0aGlzLmJ1ZmZlckluZGV4Pi0xPyEwOnRoaXMuYnVmZmVycy5sZW5ndGg+MD8odD10aGlzLmJ1ZmZlcnNbMF0sdC5maWxlU3RhcnQ9PT0wPyh0aGlzLmJ1ZmZlcj10LHRoaXMuYnVmZmVySW5kZXg9MCxkLmRlYnVnKCJNdWx0aUJ1ZmZlclN0cmVhbSIsIlN0cmVhbSByZWFkeSBmb3IgcGFyc2luZyIpLCEwKTooZC53YXJuKCJNdWx0aUJ1ZmZlclN0cmVhbSIsIlRoZSBmaXJzdCBidWZmZXIgc2hvdWxkIGhhdmUgYSBmaWxlU3RhcnQgb2YgMCIpLHRoaXMubG9nQnVmZmVyTGV2ZWwoKSwhMSkpOihkLndhcm4oIk11bHRpQnVmZmVyU3RyZWFtIiwiTm8gYnVmZmVyIHRvIHN0YXJ0IHBhcnNpbmcgZnJvbSIpLHRoaXMubG9nQnVmZmVyTGV2ZWwoKSwhMSl9LEFycmF5QnVmZmVyLmNvbmNhdD1mdW5jdGlvbih0LGUpe2QuZGVidWcoIkFycmF5QnVmZmVyIiwiVHJ5aW5nIHRvIGNyZWF0ZSBhIG5ldyBidWZmZXIgb2Ygc2l6ZTogIisodC5ieXRlTGVuZ3RoK2UuYnl0ZUxlbmd0aCkpO3ZhciBzPW5ldyBVaW50OEFycmF5KHQuYnl0ZUxlbmd0aCtlLmJ5dGVMZW5ndGgpO3JldHVybiBzLnNldChuZXcgVWludDhBcnJheSh0KSwwKSxzLnNldChuZXcgVWludDhBcnJheShlKSx0LmJ5dGVMZW5ndGgpLHMuYnVmZmVyfSxVLnByb3RvdHlwZS5yZWR1Y2VCdWZmZXI9ZnVuY3Rpb24odCxlLHMpe3ZhciBuO3JldHVybiBuPW5ldyBVaW50OEFycmF5KHMpLG4uc2V0KG5ldyBVaW50OEFycmF5KHQsZSxzKSksbi5idWZmZXIuZmlsZVN0YXJ0PXQuZmlsZVN0YXJ0K2Usbi5idWZmZXIudXNlZEJ5dGVzPTAsbi5idWZmZXJ9LFUucHJvdG90eXBlLmluc2VydEJ1ZmZlcj1mdW5jdGlvbih0KXtmb3IodmFyIGU9ITAscz0wO3M8dGhpcy5idWZmZXJzLmxlbmd0aDtzKyspe3ZhciBuPXRoaXMuYnVmZmVyc1tzXTtpZih0LmZpbGVTdGFydDw9bi5maWxlU3RhcnQpe2lmKHQuZmlsZVN0YXJ0PT09bi5maWxlU3RhcnQpaWYodC5ieXRlTGVuZ3RoPm4uYnl0ZUxlbmd0aCl7dGhpcy5idWZmZXJzLnNwbGljZShzLDEpLHMtLTtjb250aW51ZX1lbHNlIGQud2FybigiTXVsdGlCdWZmZXJTdHJlYW0iLCJCdWZmZXIgKGZpbGVTdGFydDogIit0LmZpbGVTdGFydCsiIC0gTGVuZ3RoOiAiK3QuYnl0ZUxlbmd0aCsiKSBhbHJlYWR5IGFwcGVuZGVkLCBpZ25vcmluZyIpO2Vsc2UgdC5maWxlU3RhcnQrdC5ieXRlTGVuZ3RoPD1uLmZpbGVTdGFydHx8KHQ9dGhpcy5yZWR1Y2VCdWZmZXIodCwwLG4uZmlsZVN0YXJ0LXQuZmlsZVN0YXJ0KSksZC5kZWJ1ZygiTXVsdGlCdWZmZXJTdHJlYW0iLCJBcHBlbmRpbmcgbmV3IGJ1ZmZlciAoZmlsZVN0YXJ0OiAiK3QuZmlsZVN0YXJ0KyIgLSBMZW5ndGg6ICIrdC5ieXRlTGVuZ3RoKyIpIiksdGhpcy5idWZmZXJzLnNwbGljZShzLDAsdCkscz09PTAmJih0aGlzLmJ1ZmZlcj10KTtlPSExO2JyZWFrfWVsc2UgaWYodC5maWxlU3RhcnQ8bi5maWxlU3RhcnQrbi5ieXRlTGVuZ3RoKXt2YXIgYT1uLmZpbGVTdGFydCtuLmJ5dGVMZW5ndGgtdC5maWxlU3RhcnQsbz10LmJ5dGVMZW5ndGgtYTtpZihvPjApdD10aGlzLnJlZHVjZUJ1ZmZlcih0LGEsbyk7ZWxzZXtlPSExO2JyZWFrfX19ZSYmKGQuZGVidWcoIk11bHRpQnVmZmVyU3RyZWFtIiwiQXBwZW5kaW5nIG5ldyBidWZmZXIgKGZpbGVTdGFydDogIit0LmZpbGVTdGFydCsiIC0gTGVuZ3RoOiAiK3QuYnl0ZUxlbmd0aCsiKSIpLHRoaXMuYnVmZmVycy5wdXNoKHQpLHM9PT0wJiYodGhpcy5idWZmZXI9dCkpfSxVLnByb3RvdHlwZS5sb2dCdWZmZXJMZXZlbD1mdW5jdGlvbih0KXt2YXIgZSxzLG4sYSxvPVtdLGgsZj0iIjtmb3Iobj0wLGE9MCxlPTA7ZTx0aGlzLmJ1ZmZlcnMubGVuZ3RoO2UrKylzPXRoaXMuYnVmZmVyc1tlXSxlPT09MD8oaD17fSxvLnB1c2goaCksaC5zdGFydD1zLmZpbGVTdGFydCxoLmVuZD1zLmZpbGVTdGFydCtzLmJ5dGVMZW5ndGgsZis9IlsiK2guc3RhcnQrIi0iKTpoLmVuZD09PXMuZmlsZVN0YXJ0P2guZW5kPXMuZmlsZVN0YXJ0K3MuYnl0ZUxlbmd0aDooaD17fSxoLnN0YXJ0PXMuZmlsZVN0YXJ0LGYrPW9bby5sZW5ndGgtMV0uZW5kLTErIl0sIFsiK2guc3RhcnQrIi0iLGguZW5kPXMuZmlsZVN0YXJ0K3MuYnl0ZUxlbmd0aCxvLnB1c2goaCkpLG4rPXMudXNlZEJ5dGVzLGErPXMuYnl0ZUxlbmd0aDtvLmxlbmd0aD4wJiYoZis9aC5lbmQtMSsiXSIpO3ZhciBwPXQ/ZC5pbmZvOmQuZGVidWc7dGhpcy5idWZmZXJzLmxlbmd0aD09PTA/cCgiTXVsdGlCdWZmZXJTdHJlYW0iLCJObyBtb3JlIGJ1ZmZlciBpbiBtZW1vcnkiKTpwKCJNdWx0aUJ1ZmZlclN0cmVhbSIsIiIrdGhpcy5idWZmZXJzLmxlbmd0aCsiIHN0b3JlZCBidWZmZXIocykgKCIrbisiLyIrYSsiIGJ5dGVzKSwgY29udGludW91cyByYW5nZXM6ICIrZil9LFUucHJvdG90eXBlLmNsZWFuQnVmZmVycz1mdW5jdGlvbigpe3ZhciB0LGU7Zm9yKHQ9MDt0PHRoaXMuYnVmZmVycy5sZW5ndGg7dCsrKWU9dGhpcy5idWZmZXJzW3RdLGUudXNlZEJ5dGVzPT09ZS5ieXRlTGVuZ3RoJiYoZC5kZWJ1ZygiTXVsdGlCdWZmZXJTdHJlYW0iLCJSZW1vdmluZyBidWZmZXIgIyIrdCksdGhpcy5idWZmZXJzLnNwbGljZSh0LDEpLHQtLSl9LFUucHJvdG90eXBlLm1lcmdlTmV4dEJ1ZmZlcj1mdW5jdGlvbigpe3ZhciB0O2lmKHRoaXMuYnVmZmVySW5kZXgrMTx0aGlzLmJ1ZmZlcnMubGVuZ3RoKWlmKHQ9dGhpcy5idWZmZXJzW3RoaXMuYnVmZmVySW5kZXgrMV0sdC5maWxlU3RhcnQ9PT10aGlzLmJ1ZmZlci5maWxlU3RhcnQrdGhpcy5idWZmZXIuYnl0ZUxlbmd0aCl7dmFyIGU9dGhpcy5idWZmZXIuYnl0ZUxlbmd0aCxzPXRoaXMuYnVmZmVyLnVzZWRCeXRlcyxuPXRoaXMuYnVmZmVyLmZpbGVTdGFydDtyZXR1cm4gdGhpcy5idWZmZXJzW3RoaXMuYnVmZmVySW5kZXhdPUFycmF5QnVmZmVyLmNvbmNhdCh0aGlzLmJ1ZmZlcix0KSx0aGlzLmJ1ZmZlcj10aGlzLmJ1ZmZlcnNbdGhpcy5idWZmZXJJbmRleF0sdGhpcy5idWZmZXJzLnNwbGljZSh0aGlzLmJ1ZmZlckluZGV4KzEsMSksdGhpcy5idWZmZXIudXNlZEJ5dGVzPXMsdGhpcy5idWZmZXIuZmlsZVN0YXJ0PW4sZC5kZWJ1ZygiSVNPRmlsZSIsIkNvbmNhdGVuYXRpbmcgYnVmZmVyIGZvciBib3ggcGFyc2luZyAobGVuZ3RoOiAiK2UrIi0+Iit0aGlzLmJ1ZmZlci5ieXRlTGVuZ3RoKyIpIiksITB9ZWxzZSByZXR1cm4hMTtlbHNlIHJldHVybiExfSxVLnByb3RvdHlwZS5maW5kUG9zaXRpb249ZnVuY3Rpb24odCxlLHMpe3ZhciBuLGE9bnVsbCxvPS0xO2Zvcih0PT09ITA/bj0wOm49dGhpcy5idWZmZXJJbmRleDtuPHRoaXMuYnVmZmVycy5sZW5ndGgmJihhPXRoaXMuYnVmZmVyc1tuXSxhLmZpbGVTdGFydDw9ZSk7KW89bixzJiYoYS5maWxlU3RhcnQrYS5ieXRlTGVuZ3RoPD1lP2EudXNlZEJ5dGVzPWEuYnl0ZUxlbmd0aDphLnVzZWRCeXRlcz1lLWEuZmlsZVN0YXJ0LHRoaXMubG9nQnVmZmVyTGV2ZWwoKSksbisrO3JldHVybiBvIT09LTE/KGE9dGhpcy5idWZmZXJzW29dLGEuZmlsZVN0YXJ0K2EuYnl0ZUxlbmd0aD49ZT8oZC5kZWJ1ZygiTXVsdGlCdWZmZXJTdHJlYW0iLCJGb3VuZCBwb3NpdGlvbiBpbiBleGlzdGluZyBidWZmZXIgIyIrbyksbyk6LTEpOi0xfSxVLnByb3RvdHlwZS5maW5kRW5kQ29udGlndW91c0J1Zj1mdW5jdGlvbih0KXt2YXIgZSxzLG4sYT10IT09dm9pZCAwP3Q6dGhpcy5idWZmZXJJbmRleDtpZihzPXRoaXMuYnVmZmVyc1thXSx0aGlzLmJ1ZmZlcnMubGVuZ3RoPmErMSlmb3IoZT1hKzE7ZTx0aGlzLmJ1ZmZlcnMubGVuZ3RoJiYobj10aGlzLmJ1ZmZlcnNbZV0sbi5maWxlU3RhcnQ9PT1zLmZpbGVTdGFydCtzLmJ5dGVMZW5ndGgpO2UrKylzPW47cmV0dXJuIHMuZmlsZVN0YXJ0K3MuYnl0ZUxlbmd0aH0sVS5wcm90b3R5cGUuZ2V0RW5kRmlsZVBvc2l0aW9uQWZ0ZXI9ZnVuY3Rpb24odCl7dmFyIGU9dGhpcy5maW5kUG9zaXRpb24oITAsdCwhMSk7cmV0dXJuIGUhPT0tMT90aGlzLmZpbmRFbmRDb250aWd1b3VzQnVmKGUpOnR9LFUucHJvdG90eXBlLmFkZFVzZWRCeXRlcz1mdW5jdGlvbih0KXt0aGlzLmJ1ZmZlci51c2VkQnl0ZXMrPXQsdGhpcy5sb2dCdWZmZXJMZXZlbCgpfSxVLnByb3RvdHlwZS5zZXRBbGxVc2VkQnl0ZXM9ZnVuY3Rpb24oKXt0aGlzLmJ1ZmZlci51c2VkQnl0ZXM9dGhpcy5idWZmZXIuYnl0ZUxlbmd0aCx0aGlzLmxvZ0J1ZmZlckxldmVsKCl9LFUucHJvdG90eXBlLnNlZWs9ZnVuY3Rpb24odCxlLHMpe3ZhciBuO3JldHVybiBuPXRoaXMuZmluZFBvc2l0aW9uKGUsdCxzKSxuIT09LTE/KHRoaXMuYnVmZmVyPXRoaXMuYnVmZmVyc1tuXSx0aGlzLmJ1ZmZlckluZGV4PW4sdGhpcy5wb3NpdGlvbj10LXRoaXMuYnVmZmVyLmZpbGVTdGFydCxkLmRlYnVnKCJNdWx0aUJ1ZmZlclN0cmVhbSIsIlJlcG9zaXRpb25pbmcgcGFyc2VyIGF0IGJ1ZmZlciBwb3NpdGlvbjogIit0aGlzLnBvc2l0aW9uKSwhMCk6KGQuZGVidWcoIk11bHRpQnVmZmVyU3RyZWFtIiwiUG9zaXRpb24gIit0KyIgbm90IGZvdW5kIGluIGJ1ZmZlcmVkIGRhdGEiKSwhMSl9LFUucHJvdG90eXBlLmdldFBvc2l0aW9uPWZ1bmN0aW9uKCl7aWYodGhpcy5idWZmZXJJbmRleD09PS0xfHx0aGlzLmJ1ZmZlcnNbdGhpcy5idWZmZXJJbmRleF09PT1udWxsKXRocm93IkVycm9yIGFjY2Vzc2luZyBwb3NpdGlvbiBpbiB0aGUgTXVsdGlCdWZmZXJTdHJlYW0iO3JldHVybiB0aGlzLmJ1ZmZlcnNbdGhpcy5idWZmZXJJbmRleF0uZmlsZVN0YXJ0K3RoaXMucG9zaXRpb259LFUucHJvdG90eXBlLmdldExlbmd0aD1mdW5jdGlvbigpe3JldHVybiB0aGlzLmJ5dGVMZW5ndGh9LFUucHJvdG90eXBlLmdldEVuZFBvc2l0aW9uPWZ1bmN0aW9uKCl7aWYodGhpcy5idWZmZXJJbmRleD09PS0xfHx0aGlzLmJ1ZmZlcnNbdGhpcy5idWZmZXJJbmRleF09PT1udWxsKXRocm93IkVycm9yIGFjY2Vzc2luZyBwb3NpdGlvbiBpbiB0aGUgTXVsdGlCdWZmZXJTdHJlYW0iO3JldHVybiB0aGlzLmJ1ZmZlcnNbdGhpcy5idWZmZXJJbmRleF0uZmlsZVN0YXJ0K3RoaXMuYnl0ZUxlbmd0aH0sXy5NdWx0aUJ1ZmZlclN0cmVhbT1VO3ZhciBBPWZ1bmN0aW9uKCl7dmFyIHQ9MyxlPTQscz01LG49NixhPVtdO2FbdF09IkVTX0Rlc2NyaXB0b3IiLGFbZV09IkRlY29kZXJDb25maWdEZXNjcmlwdG9yIixhW3NdPSJEZWNvZGVyU3BlY2lmaWNJbmZvIixhW25dPSJTTENvbmZpZ0Rlc2NyaXB0b3IiLHRoaXMuZ2V0RGVzY3JpcHRvck5hbWU9ZnVuY3Rpb24oZil7cmV0dXJuIGFbZl19O3ZhciBvPXRoaXMsaD17fTtyZXR1cm4gdGhpcy5wYXJzZU9uZURlc2NyaXB0b3I9ZnVuY3Rpb24oZil7dmFyIHA9MCxnLG0sdjtmb3IoZz1mLnJlYWRVaW50OCgpLHY9Zi5yZWFkVWludDgoKTt2JjEyODspcD0odiYxMjcpPDw3LHY9Zi5yZWFkVWludDgoKTtyZXR1cm4gcCs9diYxMjcsZC5kZWJ1ZygiTVBFRzREZXNjcmlwdG9yUGFyc2VyIiwiRm91bmQgIisoYVtnXXx8IkRlc2NyaXB0b3IgIitnKSsiLCBzaXplICIrcCsiIGF0IHBvc2l0aW9uICIrZi5nZXRQb3NpdGlvbigpKSxhW2ddP209bmV3IGhbYVtnXV0ocCk6bT1uZXcgaC5EZXNjcmlwdG9yKHApLG0ucGFyc2UoZiksbX0saC5EZXNjcmlwdG9yPWZ1bmN0aW9uKGYscCl7dGhpcy50YWc9Zix0aGlzLnNpemU9cCx0aGlzLmRlc2NzPVtdfSxoLkRlc2NyaXB0b3IucHJvdG90eXBlLnBhcnNlPWZ1bmN0aW9uKGYpe3RoaXMuZGF0YT1mLnJlYWRVaW50OEFycmF5KHRoaXMuc2l6ZSl9LGguRGVzY3JpcHRvci5wcm90b3R5cGUuZmluZERlc2NyaXB0b3I9ZnVuY3Rpb24oZil7Zm9yKHZhciBwPTA7cDx0aGlzLmRlc2NzLmxlbmd0aDtwKyspaWYodGhpcy5kZXNjc1twXS50YWc9PWYpcmV0dXJuIHRoaXMuZGVzY3NbcF07cmV0dXJuIG51bGx9LGguRGVzY3JpcHRvci5wcm90b3R5cGUucGFyc2VSZW1haW5pbmdEZXNjcmlwdG9ycz1mdW5jdGlvbihmKXtmb3IodmFyIHA9Zi5wb3NpdGlvbjtmLnBvc2l0aW9uPHArdGhpcy5zaXplOyl7dmFyIGc9by5wYXJzZU9uZURlc2NyaXB0b3IoZik7dGhpcy5kZXNjcy5wdXNoKGcpfX0saC5FU19EZXNjcmlwdG9yPWZ1bmN0aW9uKGYpe2guRGVzY3JpcHRvci5jYWxsKHRoaXMsdCxmKX0saC5FU19EZXNjcmlwdG9yLnByb3RvdHlwZT1uZXcgaC5EZXNjcmlwdG9yLGguRVNfRGVzY3JpcHRvci5wcm90b3R5cGUucGFyc2U9ZnVuY3Rpb24oZil7aWYodGhpcy5FU19JRD1mLnJlYWRVaW50MTYoKSx0aGlzLmZsYWdzPWYucmVhZFVpbnQ4KCksdGhpcy5zaXplLT0zLHRoaXMuZmxhZ3MmMTI4Pyh0aGlzLmRlcGVuZHNPbl9FU19JRD1mLnJlYWRVaW50MTYoKSx0aGlzLnNpemUtPTIpOnRoaXMuZGVwZW5kc09uX0VTX0lEPTAsdGhpcy5mbGFncyY2NCl7dmFyIHA9Zi5yZWFkVWludDgoKTt0aGlzLlVSTD1mLnJlYWRTdHJpbmcocCksdGhpcy5zaXplLT1wKzF9ZWxzZSB0aGlzLlVSTD0iIjt0aGlzLmZsYWdzJjMyPyh0aGlzLk9DUl9FU19JRD1mLnJlYWRVaW50MTYoKSx0aGlzLnNpemUtPTIpOnRoaXMuT0NSX0VTX0lEPTAsdGhpcy5wYXJzZVJlbWFpbmluZ0Rlc2NyaXB0b3JzKGYpfSxoLkVTX0Rlc2NyaXB0b3IucHJvdG90eXBlLmdldE9UST1mdW5jdGlvbihmKXt2YXIgcD10aGlzLmZpbmREZXNjcmlwdG9yKGUpO3JldHVybiBwP3Aub3RpOjB9LGguRVNfRGVzY3JpcHRvci5wcm90b3R5cGUuZ2V0QXVkaW9Db25maWc9ZnVuY3Rpb24oZil7dmFyIHA9dGhpcy5maW5kRGVzY3JpcHRvcihlKTtpZighcClyZXR1cm4gbnVsbDt2YXIgZz1wLmZpbmREZXNjcmlwdG9yKHMpO2lmKGcmJmcuZGF0YSl7dmFyIG09KGcuZGF0YVswXSYyNDgpPj4zO3JldHVybiBtPT09MzEmJmcuZGF0YS5sZW5ndGg+PTImJihtPTMyKygoZy5kYXRhWzBdJjcpPDwzKSsoKGcuZGF0YVsxXSYyMjQpPj41KSksbX1lbHNlIHJldHVybiBudWxsfSxoLkRlY29kZXJDb25maWdEZXNjcmlwdG9yPWZ1bmN0aW9uKGYpe2guRGVzY3JpcHRvci5jYWxsKHRoaXMsZSxmKX0saC5EZWNvZGVyQ29uZmlnRGVzY3JpcHRvci5wcm90b3R5cGU9bmV3IGguRGVzY3JpcHRvcixoLkRlY29kZXJDb25maWdEZXNjcmlwdG9yLnByb3RvdHlwZS5wYXJzZT1mdW5jdGlvbihmKXt0aGlzLm90aT1mLnJlYWRVaW50OCgpLHRoaXMuc3RyZWFtVHlwZT1mLnJlYWRVaW50OCgpLHRoaXMuYnVmZmVyU2l6ZT1mLnJlYWRVaW50MjQoKSx0aGlzLm1heEJpdHJhdGU9Zi5yZWFkVWludDMyKCksdGhpcy5hdmdCaXRyYXRlPWYucmVhZFVpbnQzMigpLHRoaXMuc2l6ZS09MTMsdGhpcy5wYXJzZVJlbWFpbmluZ0Rlc2NyaXB0b3JzKGYpfSxoLkRlY29kZXJTcGVjaWZpY0luZm89ZnVuY3Rpb24oZil7aC5EZXNjcmlwdG9yLmNhbGwodGhpcyxzLGYpfSxoLkRlY29kZXJTcGVjaWZpY0luZm8ucHJvdG90eXBlPW5ldyBoLkRlc2NyaXB0b3IsaC5TTENvbmZpZ0Rlc2NyaXB0b3I9ZnVuY3Rpb24oZil7aC5EZXNjcmlwdG9yLmNhbGwodGhpcyxuLGYpfSxoLlNMQ29uZmlnRGVzY3JpcHRvci5wcm90b3R5cGU9bmV3IGguRGVzY3JpcHRvcix0aGlzfTtfLk1QRUc0RGVzY3JpcHRvclBhcnNlcj1BO3ZhciByPXtFUlJfSU5WQUxJRF9EQVRBOi0xLEVSUl9OT1RfRU5PVUdIX0RBVEE6MCxPSzoxLEJBU0lDX0JPWEVTOlsibWRhdCIsImlkYXQiLCJmcmVlIiwic2tpcCIsIm1lY28iLCJzdHJrIl0sRlVMTF9CT1hFUzpbImhtaGQiLCJubWhkIiwiaW9kcyIsInhtbCAiLCJieG1sIiwiaXBybyIsIm1lcmUiXSxDT05UQUlORVJfQk9YRVM6W1sibW9vdiIsWyJ0cmFrIiwicHNzaCJdXSxbInRyYWsiXSxbImVkdHMiXSxbIm1kaWEiXSxbIm1pbmYiXSxbImRpbmYiXSxbInN0YmwiLFsic2dwZCIsInNiZ3AiXV0sWyJtdmV4IixbInRyZXgiXV0sWyJtb29mIixbInRyYWYiXV0sWyJ0cmFmIixbInRydW4iLCJzZ3BkIiwic2JncCJdXSxbInZ0dGMiXSxbInRyZWYiXSxbImlyZWYiXSxbIm1mcmEiLFsidGZyYSJdXSxbIm1lY28iXSxbImhudGkiXSxbImhpbmYiXSxbInN0cmsiXSxbInN0cmQiXSxbInNpbmYiXSxbInJpbmYiXSxbInNjaGkiXSxbInRyZ3IiXSxbInVkdGEiLFsia2luZCJdXSxbImlwcnAiLFsiaXBtYSJdXSxbImlwY28iXSxbImdycGwiXSxbImoya0giXSxbImV0eXAiLFsidHljbyJdXV0sYm94Q29kZXM6W10sZnVsbEJveENvZGVzOltdLGNvbnRhaW5lckJveENvZGVzOltdLHNhbXBsZUVudHJ5Q29kZXM6e30sc2FtcGxlR3JvdXBFbnRyeUNvZGVzOltdLHRyYWNrR3JvdXBUeXBlczpbXSxVVUlEQm94ZXM6e30sVVVJRHM6W10saW5pdGlhbGl6ZTpmdW5jdGlvbigpe3IuRnVsbEJveC5wcm90b3R5cGU9bmV3IHIuQm94LHIuQ29udGFpbmVyQm94LnByb3RvdHlwZT1uZXcgci5Cb3gsci5TYW1wbGVFbnRyeS5wcm90b3R5cGU9bmV3IHIuQm94LHIuVHJhY2tHcm91cFR5cGVCb3gucHJvdG90eXBlPW5ldyByLkZ1bGxCb3gsci5CQVNJQ19CT1hFUy5mb3JFYWNoKGZ1bmN0aW9uKHQpe3IuY3JlYXRlQm94Q3Rvcih0KX0pLHIuRlVMTF9CT1hFUy5mb3JFYWNoKGZ1bmN0aW9uKHQpe3IuY3JlYXRlRnVsbEJveEN0b3IodCl9KSxyLkNPTlRBSU5FUl9CT1hFUy5mb3JFYWNoKGZ1bmN0aW9uKHQpe3IuY3JlYXRlQ29udGFpbmVyQm94Q3Rvcih0WzBdLG51bGwsdFsxXSl9KX0sQm94OmZ1bmN0aW9uKHQsZSxzKXt0aGlzLnR5cGU9dCx0aGlzLnNpemU9ZSx0aGlzLnV1aWQ9c30sRnVsbEJveDpmdW5jdGlvbih0LGUscyl7ci5Cb3guY2FsbCh0aGlzLHQsZSxzKSx0aGlzLmZsYWdzPTAsdGhpcy52ZXJzaW9uPTB9LENvbnRhaW5lckJveDpmdW5jdGlvbih0LGUscyl7ci5Cb3guY2FsbCh0aGlzLHQsZSxzKSx0aGlzLmJveGVzPVtdfSxTYW1wbGVFbnRyeTpmdW5jdGlvbih0LGUscyxuKXtyLkNvbnRhaW5lckJveC5jYWxsKHRoaXMsdCxlKSx0aGlzLmhkcl9zaXplPXMsdGhpcy5zdGFydD1ufSxTYW1wbGVHcm91cEVudHJ5OmZ1bmN0aW9uKHQpe3RoaXMuZ3JvdXBpbmdfdHlwZT10fSxUcmFja0dyb3VwVHlwZUJveDpmdW5jdGlvbih0LGUpe3IuRnVsbEJveC5jYWxsKHRoaXMsdCxlKX0sY3JlYXRlQm94Q3RvcjpmdW5jdGlvbih0LGUpe3IuYm94Q29kZXMucHVzaCh0KSxyW3QrIkJveCJdPWZ1bmN0aW9uKHMpe3IuQm94LmNhbGwodGhpcyx0LHMpfSxyW3QrIkJveCJdLnByb3RvdHlwZT1uZXcgci5Cb3gsZSYmKHJbdCsiQm94Il0ucHJvdG90eXBlLnBhcnNlPWUpfSxjcmVhdGVGdWxsQm94Q3RvcjpmdW5jdGlvbih0LGUpe3JbdCsiQm94Il09ZnVuY3Rpb24ocyl7ci5GdWxsQm94LmNhbGwodGhpcyx0LHMpfSxyW3QrIkJveCJdLnByb3RvdHlwZT1uZXcgci5GdWxsQm94LHJbdCsiQm94Il0ucHJvdG90eXBlLnBhcnNlPWZ1bmN0aW9uKHMpe3RoaXMucGFyc2VGdWxsSGVhZGVyKHMpLGUmJmUuY2FsbCh0aGlzLHMpfX0sYWRkU3ViQm94QXJyYXlzOmZ1bmN0aW9uKHQpe2lmKHQpe3RoaXMuc3ViQm94TmFtZXM9dDtmb3IodmFyIGU9dC5sZW5ndGgscz0wO3M8ZTtzKyspdGhpc1t0W3NdKyJzIl09W119fSxjcmVhdGVDb250YWluZXJCb3hDdG9yOmZ1bmN0aW9uKHQsZSxzKXtyW3QrIkJveCJdPWZ1bmN0aW9uKG4pe3IuQ29udGFpbmVyQm94LmNhbGwodGhpcyx0LG4pLHIuYWRkU3ViQm94QXJyYXlzLmNhbGwodGhpcyxzKX0sclt0KyJCb3giXS5wcm90b3R5cGU9bmV3IHIuQ29udGFpbmVyQm94LGUmJihyW3QrIkJveCJdLnByb3RvdHlwZS5wYXJzZT1lKX0sY3JlYXRlTWVkaWFTYW1wbGVFbnRyeUN0b3I6ZnVuY3Rpb24odCxlLHMpe3Iuc2FtcGxlRW50cnlDb2Rlc1t0XT1bXSxyW3QrIlNhbXBsZUVudHJ5Il09ZnVuY3Rpb24obixhKXtyLlNhbXBsZUVudHJ5LmNhbGwodGhpcyxuLGEpLHIuYWRkU3ViQm94QXJyYXlzLmNhbGwodGhpcyxzKX0sclt0KyJTYW1wbGVFbnRyeSJdLnByb3RvdHlwZT1uZXcgci5TYW1wbGVFbnRyeSxlJiYoclt0KyJTYW1wbGVFbnRyeSJdLnByb3RvdHlwZS5wYXJzZT1lKX0sY3JlYXRlU2FtcGxlRW50cnlDdG9yOmZ1bmN0aW9uKHQsZSxzLG4pe3Iuc2FtcGxlRW50cnlDb2Rlc1t0XS5wdXNoKGUpLHJbZSsiU2FtcGxlRW50cnkiXT1mdW5jdGlvbihhKXtyW3QrIlNhbXBsZUVudHJ5Il0uY2FsbCh0aGlzLGUsYSksci5hZGRTdWJCb3hBcnJheXMuY2FsbCh0aGlzLG4pfSxyW2UrIlNhbXBsZUVudHJ5Il0ucHJvdG90eXBlPW5ldyByW3QrIlNhbXBsZUVudHJ5Il0scyYmKHJbZSsiU2FtcGxlRW50cnkiXS5wcm90b3R5cGUucGFyc2U9cyl9LGNyZWF0ZUVuY3J5cHRlZFNhbXBsZUVudHJ5Q3RvcjpmdW5jdGlvbih0LGUscyl7ci5jcmVhdGVTYW1wbGVFbnRyeUN0b3IuY2FsbCh0aGlzLHQsZSxzLFsic2luZiJdKX0sY3JlYXRlU2FtcGxlR3JvdXBDdG9yOmZ1bmN0aW9uKHQsZSl7clt0KyJTYW1wbGVHcm91cEVudHJ5Il09ZnVuY3Rpb24ocyl7ci5TYW1wbGVHcm91cEVudHJ5LmNhbGwodGhpcyx0LHMpfSxyW3QrIlNhbXBsZUdyb3VwRW50cnkiXS5wcm90b3R5cGU9bmV3IHIuU2FtcGxlR3JvdXBFbnRyeSxlJiYoclt0KyJTYW1wbGVHcm91cEVudHJ5Il0ucHJvdG90eXBlLnBhcnNlPWUpfSxjcmVhdGVUcmFja0dyb3VwQ3RvcjpmdW5jdGlvbih0LGUpe3JbdCsiVHJhY2tHcm91cFR5cGVCb3giXT1mdW5jdGlvbihzKXtyLlRyYWNrR3JvdXBUeXBlQm94LmNhbGwodGhpcyx0LHMpfSxyW3QrIlRyYWNrR3JvdXBUeXBlQm94Il0ucHJvdG90eXBlPW5ldyByLlRyYWNrR3JvdXBUeXBlQm94LGUmJihyW3QrIlRyYWNrR3JvdXBUeXBlQm94Il0ucHJvdG90eXBlLnBhcnNlPWUpfSxjcmVhdGVVVUlEQm94OmZ1bmN0aW9uKHQsZSxzLG4pe3IuVVVJRHMucHVzaCh0KSxyLlVVSURCb3hlc1t0XT1mdW5jdGlvbihhKXtlP3IuRnVsbEJveC5jYWxsKHRoaXMsInV1aWQiLGEsdCk6cz9yLkNvbnRhaW5lckJveC5jYWxsKHRoaXMsInV1aWQiLGEsdCk6ci5Cb3guY2FsbCh0aGlzLCJ1dWlkIixhLHQpfSxyLlVVSURCb3hlc1t0XS5wcm90b3R5cGU9ZT9uZXcgci5GdWxsQm94OnM/bmV3IHIuQ29udGFpbmVyQm94Om5ldyByLkJveCxuJiYoZT9yLlVVSURCb3hlc1t0XS5wcm90b3R5cGUucGFyc2U9ZnVuY3Rpb24oYSl7dGhpcy5wYXJzZUZ1bGxIZWFkZXIoYSksbiYmbi5jYWxsKHRoaXMsYSl9OnIuVVVJREJveGVzW3RdLnByb3RvdHlwZS5wYXJzZT1uKX19O3IuaW5pdGlhbGl6ZSgpLHIuVEtIRF9GTEFHX0VOQUJMRUQ9MSxyLlRLSERfRkxBR19JTl9NT1ZJRT0yLHIuVEtIRF9GTEFHX0lOX1BSRVZJRVc9NCxyLlRGSERfRkxBR19CQVNFX0RBVEFfT0ZGU0VUPTEsci5URkhEX0ZMQUdfU0FNUExFX0RFU0M9MixyLlRGSERfRkxBR19TQU1QTEVfRFVSPTgsci5URkhEX0ZMQUdfU0FNUExFX1NJWkU9MTYsci5URkhEX0ZMQUdfU0FNUExFX0ZMQUdTPTMyLHIuVEZIRF9GTEFHX0RVUl9FTVBUWT02NTUzNixyLlRGSERfRkxBR19ERUZBVUxUX0JBU0VfSVNfTU9PRj0xMzEwNzIsci5UUlVOX0ZMQUdTX0RBVEFfT0ZGU0VUPTEsci5UUlVOX0ZMQUdTX0ZJUlNUX0ZMQUc9NCxyLlRSVU5fRkxBR1NfRFVSQVRJT049MjU2LHIuVFJVTl9GTEFHU19TSVpFPTUxMixyLlRSVU5fRkxBR1NfRkxBR1M9MTAyNCxyLlRSVU5fRkxBR1NfQ1RTX09GRlNFVD0yMDQ4LHIuQm94LnByb3RvdHlwZS5hZGQ9ZnVuY3Rpb24odCl7cmV0dXJuIHRoaXMuYWRkQm94KG5ldyByW3QrIkJveCJdKX0sci5Cb3gucHJvdG90eXBlLmFkZEJveD1mdW5jdGlvbih0KXtyZXR1cm4gdGhpcy5ib3hlcy5wdXNoKHQpLHRoaXNbdC50eXBlKyJzIl0/dGhpc1t0LnR5cGUrInMiXS5wdXNoKHQpOnRoaXNbdC50eXBlXT10LHR9LHIuQm94LnByb3RvdHlwZS5zZXQ9ZnVuY3Rpb24odCxlKXtyZXR1cm4gdGhpc1t0XT1lLHRoaXN9LHIuQm94LnByb3RvdHlwZS5hZGRFbnRyeT1mdW5jdGlvbih0LGUpe3ZhciBzPWV8fCJlbnRyaWVzIjtyZXR1cm4gdGhpc1tzXXx8KHRoaXNbc109W10pLHRoaXNbc10ucHVzaCh0KSx0aGlzfSxfLkJveFBhcnNlcj1yLHIucGFyc2VVVUlEPWZ1bmN0aW9uKHQpe3JldHVybiByLnBhcnNlSGV4MTYodCl9LHIucGFyc2VIZXgxNj1mdW5jdGlvbih0KXtmb3IodmFyIGU9IiIscz0wO3M8MTY7cysrKXt2YXIgbj10LnJlYWRVaW50OCgpLnRvU3RyaW5nKDE2KTtlKz1uLmxlbmd0aD09PTE/IjAiK246bn1yZXR1cm4gZX0sci5wYXJzZU9uZUJveD1mdW5jdGlvbih0LGUscyl7dmFyIG4sYT10LmdldFBvc2l0aW9uKCksbz0wLGgsZjtpZih0LmdldEVuZFBvc2l0aW9uKCktYTw4KXJldHVybiBkLmRlYnVnKCJCb3hQYXJzZXIiLCJOb3QgZW5vdWdoIGRhdGEgaW4gc3RyZWFtIHRvIHBhcnNlIHRoZSB0eXBlIGFuZCBzaXplIG9mIHRoZSBib3giKSx7Y29kZTpyLkVSUl9OT1RfRU5PVUdIX0RBVEF9O2lmKHMmJnM8OClyZXR1cm4gZC5kZWJ1ZygiQm94UGFyc2VyIiwiTm90IGVub3VnaCBieXRlcyBsZWZ0IGluIHRoZSBwYXJlbnQgYm94IHRvIHBhcnNlIGEgbmV3IGJveCIpLHtjb2RlOnIuRVJSX05PVF9FTk9VR0hfREFUQX07dmFyIHA9dC5yZWFkVWludDMyKCksZz10LnJlYWRTdHJpbmcoNCksbT1nO2lmKGQuZGVidWcoIkJveFBhcnNlciIsIkZvdW5kIGJveCBvZiB0eXBlICciK2crIicgYW5kIHNpemUgIitwKyIgYXQgcG9zaXRpb24gIithKSxvPTgsZz09InV1aWQiKXtpZih0LmdldEVuZFBvc2l0aW9uKCktdC5nZXRQb3NpdGlvbigpPDE2fHxzLW88MTYpcmV0dXJuIHQuc2VlayhhKSxkLmRlYnVnKCJCb3hQYXJzZXIiLCJOb3QgZW5vdWdoIGJ5dGVzIGxlZnQgaW4gdGhlIHBhcmVudCBib3ggdG8gcGFyc2UgYSBVVUlEIGJveCIpLHtjb2RlOnIuRVJSX05PVF9FTk9VR0hfREFUQX07Zj1yLnBhcnNlVVVJRCh0KSxvKz0xNixtPWZ9aWYocD09MSl7aWYodC5nZXRFbmRQb3NpdGlvbigpLXQuZ2V0UG9zaXRpb24oKTw4fHxzJiZzLW88OClyZXR1cm4gdC5zZWVrKGEpLGQud2FybigiQm94UGFyc2VyIiwnTm90IGVub3VnaCBkYXRhIGluIHN0cmVhbSB0byBwYXJzZSB0aGUgZXh0ZW5kZWQgc2l6ZSBvZiB0aGUgIicrZysnIiBib3gnKSx7Y29kZTpyLkVSUl9OT1RfRU5PVUdIX0RBVEF9O3A9dC5yZWFkVWludDY0KCksbys9OH1lbHNlIGlmKHA9PT0wKXtpZihzKXA9cztlbHNlIGlmKGchPT0ibWRhdCIpcmV0dXJuIGQuZXJyb3IoIkJveFBhcnNlciIsIlVubGltaXRlZCBib3ggc2l6ZSBub3Qgc3VwcG9ydGVkIGZvciB0eXBlOiAnIitnKyInIiksbj1uZXcgci5Cb3goZyxwKSx7Y29kZTpyLk9LLGJveDpuLHNpemU6bi5zaXplfX1yZXR1cm4gcCE9PTAmJnA8bz8oZC5lcnJvcigiQm94UGFyc2VyIiwiQm94IG9mIHR5cGUgIitnKyIgaGFzIGFuIGludmFsaWQgc2l6ZSAiK3ArIiAodG9vIHNtYWxsIHRvIGJlIGEgYm94KSIpLHtjb2RlOnIuRVJSX05PVF9FTk9VR0hfREFUQSx0eXBlOmcsc2l6ZTpwLGhkcl9zaXplOm8sc3RhcnQ6YX0pOnAhPT0wJiZzJiZwPnM/KGQuZXJyb3IoIkJveFBhcnNlciIsIkJveCBvZiB0eXBlICciK2crIicgaGFzIGEgc2l6ZSAiK3ArIiBncmVhdGVyIHRoYW4gaXRzIGNvbnRhaW5lciBzaXplICIrcykse2NvZGU6ci5FUlJfTk9UX0VOT1VHSF9EQVRBLHR5cGU6ZyxzaXplOnAsaGRyX3NpemU6byxzdGFydDphfSk6cCE9PTAmJmErcD50LmdldEVuZFBvc2l0aW9uKCk/KHQuc2VlayhhKSxkLmluZm8oIkJveFBhcnNlciIsIk5vdCBlbm91Z2ggZGF0YSBpbiBzdHJlYW0gdG8gcGFyc2UgdGhlIGVudGlyZSAnIitnKyInIGJveCIpLHtjb2RlOnIuRVJSX05PVF9FTk9VR0hfREFUQSx0eXBlOmcsc2l6ZTpwLGhkcl9zaXplOm8sc3RhcnQ6YX0pOmU/e2NvZGU6ci5PSyx0eXBlOmcsc2l6ZTpwLGhkcl9zaXplOm8sc3RhcnQ6YX06KHJbZysiQm94Il0/bj1uZXcgcltnKyJCb3giXShwKTpnIT09InV1aWQiPyhkLndhcm4oIkJveFBhcnNlciIsIlVua25vd24gYm94IHR5cGU6ICciK2crIiciKSxuPW5ldyByLkJveChnLHApLG4uaGFzX3VucGFyc2VkX2RhdGE9ITApOnIuVVVJREJveGVzW2ZdP249bmV3IHIuVVVJREJveGVzW2ZdKHApOihkLndhcm4oIkJveFBhcnNlciIsIlVua25vd24gdXVpZCB0eXBlOiAnIitmKyInIiksbj1uZXcgci5Cb3goZyxwKSxuLnV1aWQ9ZixuLmhhc191bnBhcnNlZF9kYXRhPSEwKSxuLmhkcl9zaXplPW8sbi5zdGFydD1hLG4ud3JpdGU9PT1yLkJveC5wcm90b3R5cGUud3JpdGUmJm4udHlwZSE9PSJtZGF0IiYmKGQuaW5mbygiQm94UGFyc2VyIiwiJyIrbSsiJyBib3ggd3JpdGluZyBub3QgeWV0IGltcGxlbWVudGVkLCBrZWVwaW5nIHVucGFyc2VkIGRhdGEgaW4gbWVtb3J5IGZvciBsYXRlciB3cml0ZSIpLG4ucGFyc2VEYXRhQW5kUmV3aW5kKHQpKSxuLnBhcnNlKHQpLGg9dC5nZXRQb3NpdGlvbigpLShuLnN0YXJ0K24uc2l6ZSksaDwwPyhkLndhcm4oIkJveFBhcnNlciIsIlBhcnNpbmcgb2YgYm94ICciK20rIicgZGlkIG5vdCByZWFkIHRoZSBlbnRpcmUgaW5kaWNhdGVkIGJveCBkYXRhIHNpemUgKG1pc3NpbmcgIistaCsiIGJ5dGVzKSwgc2Vla2luZyBmb3J3YXJkIiksdC5zZWVrKG4uc3RhcnQrbi5zaXplKSk6aD4wJiYoZC5lcnJvcigiQm94UGFyc2VyIiwiUGFyc2luZyBvZiBib3ggJyIrbSsiJyByZWFkICIraCsiIG1vcmUgYnl0ZXMgdGhhbiB0aGUgaW5kaWNhdGVkIGJveCBkYXRhIHNpemUsIHNlZWtpbmcgYmFja3dhcmRzIiksbi5zaXplIT09MCYmdC5zZWVrKG4uc3RhcnQrbi5zaXplKSkse2NvZGU6ci5PSyxib3g6bixzaXplOm4uc2l6ZX0pfSxyLkJveC5wcm90b3R5cGUucGFyc2U9ZnVuY3Rpb24odCl7dGhpcy50eXBlIT0ibWRhdCI/dGhpcy5kYXRhPXQucmVhZFVpbnQ4QXJyYXkodGhpcy5zaXplLXRoaXMuaGRyX3NpemUpOnRoaXMuc2l6ZT09PTA/dC5zZWVrKHQuZ2V0RW5kUG9zaXRpb24oKSk6dC5zZWVrKHRoaXMuc3RhcnQrdGhpcy5zaXplKX0sci5Cb3gucHJvdG90eXBlLnBhcnNlRGF0YUFuZFJld2luZD1mdW5jdGlvbih0KXt0aGlzLmRhdGE9dC5yZWFkVWludDhBcnJheSh0aGlzLnNpemUtdGhpcy5oZHJfc2l6ZSksdC5wb3NpdGlvbi09dGhpcy5zaXplLXRoaXMuaGRyX3NpemV9LHIuRnVsbEJveC5wcm90b3R5cGUucGFyc2VEYXRhQW5kUmV3aW5kPWZ1bmN0aW9uKHQpe3RoaXMucGFyc2VGdWxsSGVhZGVyKHQpLHRoaXMuZGF0YT10LnJlYWRVaW50OEFycmF5KHRoaXMuc2l6ZS10aGlzLmhkcl9zaXplKSx0aGlzLmhkcl9zaXplLT00LHQucG9zaXRpb24tPXRoaXMuc2l6ZS10aGlzLmhkcl9zaXplfSxyLkZ1bGxCb3gucHJvdG90eXBlLnBhcnNlRnVsbEhlYWRlcj1mdW5jdGlvbih0KXt0aGlzLnZlcnNpb249dC5yZWFkVWludDgoKSx0aGlzLmZsYWdzPXQucmVhZFVpbnQyNCgpLHRoaXMuaGRyX3NpemUrPTR9LHIuRnVsbEJveC5wcm90b3R5cGUucGFyc2U9ZnVuY3Rpb24odCl7dGhpcy5wYXJzZUZ1bGxIZWFkZXIodCksdGhpcy5kYXRhPXQucmVhZFVpbnQ4QXJyYXkodGhpcy5zaXplLXRoaXMuaGRyX3NpemUpfSxyLkNvbnRhaW5lckJveC5wcm90b3R5cGUucGFyc2U9ZnVuY3Rpb24odCl7Zm9yKHZhciBlLHM7dC5nZXRQb3NpdGlvbigpPHRoaXMuc3RhcnQrdGhpcy5zaXplOylpZihlPXIucGFyc2VPbmVCb3godCwhMSx0aGlzLnNpemUtKHQuZ2V0UG9zaXRpb24oKS10aGlzLnN0YXJ0KSksZS5jb2RlPT09ci5PSylpZihzPWUuYm94LHRoaXMuYm94ZXMucHVzaChzKSx0aGlzLnN1YkJveE5hbWVzJiZ0aGlzLnN1YkJveE5hbWVzLmluZGV4T2Yocy50eXBlKSE9LTEpdGhpc1t0aGlzLnN1YkJveE5hbWVzW3RoaXMuc3ViQm94TmFtZXMuaW5kZXhPZihzLnR5cGUpXSsicyJdLnB1c2gocyk7ZWxzZXt2YXIgbj1zLnR5cGUhPT0idXVpZCI/cy50eXBlOnMudXVpZDt0aGlzW25dP2Qud2FybigiQm94IG9mIHR5cGUgIituKyIgYWxyZWFkeSBzdG9yZWQgaW4gZmllbGQgb2YgdGhpcyB0eXBlIik6dGhpc1tuXT1zfWVsc2UgcmV0dXJufSxyLkJveC5wcm90b3R5cGUucGFyc2VMYW5ndWFnZT1mdW5jdGlvbih0KXt0aGlzLmxhbmd1YWdlPXQucmVhZFVpbnQxNigpO3ZhciBlPVtdO2VbMF09dGhpcy5sYW5ndWFnZT4+MTAmMzEsZVsxXT10aGlzLmxhbmd1YWdlPj41JjMxLGVbMl09dGhpcy5sYW5ndWFnZSYzMSx0aGlzLmxhbmd1YWdlU3RyaW5nPVN0cmluZy5mcm9tQ2hhckNvZGUoZVswXSs5NixlWzFdKzk2LGVbMl0rOTYpfSxyLlNBTVBMRV9FTlRSWV9UWVBFX1ZJU1VBTD0iVmlzdWFsIixyLlNBTVBMRV9FTlRSWV9UWVBFX0FVRElPPSJBdWRpbyIsci5TQU1QTEVfRU5UUllfVFlQRV9ISU5UPSJIaW50IixyLlNBTVBMRV9FTlRSWV9UWVBFX01FVEFEQVRBPSJNZXRhZGF0YSIsci5TQU1QTEVfRU5UUllfVFlQRV9TVUJUSVRMRT0iU3VidGl0bGUiLHIuU0FNUExFX0VOVFJZX1RZUEVfU1lTVEVNPSJTeXN0ZW0iLHIuU0FNUExFX0VOVFJZX1RZUEVfVEVYVD0iVGV4dCIsci5TYW1wbGVFbnRyeS5wcm90b3R5cGUucGFyc2VIZWFkZXI9ZnVuY3Rpb24odCl7dC5yZWFkVWludDhBcnJheSg2KSx0aGlzLmRhdGFfcmVmZXJlbmNlX2luZGV4PXQucmVhZFVpbnQxNigpLHRoaXMuaGRyX3NpemUrPTh9LHIuU2FtcGxlRW50cnkucHJvdG90eXBlLnBhcnNlPWZ1bmN0aW9uKHQpe3RoaXMucGFyc2VIZWFkZXIodCksdGhpcy5kYXRhPXQucmVhZFVpbnQ4QXJyYXkodGhpcy5zaXplLXRoaXMuaGRyX3NpemUpfSxyLlNhbXBsZUVudHJ5LnByb3RvdHlwZS5wYXJzZURhdGFBbmRSZXdpbmQ9ZnVuY3Rpb24odCl7dGhpcy5wYXJzZUhlYWRlcih0KSx0aGlzLmRhdGE9dC5yZWFkVWludDhBcnJheSh0aGlzLnNpemUtdGhpcy5oZHJfc2l6ZSksdGhpcy5oZHJfc2l6ZS09OCx0LnBvc2l0aW9uLT10aGlzLnNpemUtdGhpcy5oZHJfc2l6ZX0sci5TYW1wbGVFbnRyeS5wcm90b3R5cGUucGFyc2VGb290ZXI9ZnVuY3Rpb24odCl7ci5Db250YWluZXJCb3gucHJvdG90eXBlLnBhcnNlLmNhbGwodGhpcyx0KX0sci5jcmVhdGVNZWRpYVNhbXBsZUVudHJ5Q3RvcihyLlNBTVBMRV9FTlRSWV9UWVBFX0hJTlQpLHIuY3JlYXRlTWVkaWFTYW1wbGVFbnRyeUN0b3Ioci5TQU1QTEVfRU5UUllfVFlQRV9NRVRBREFUQSksci5jcmVhdGVNZWRpYVNhbXBsZUVudHJ5Q3RvcihyLlNBTVBMRV9FTlRSWV9UWVBFX1NVQlRJVExFKSxyLmNyZWF0ZU1lZGlhU2FtcGxlRW50cnlDdG9yKHIuU0FNUExFX0VOVFJZX1RZUEVfU1lTVEVNKSxyLmNyZWF0ZU1lZGlhU2FtcGxlRW50cnlDdG9yKHIuU0FNUExFX0VOVFJZX1RZUEVfVEVYVCksci5jcmVhdGVNZWRpYVNhbXBsZUVudHJ5Q3RvcihyLlNBTVBMRV9FTlRSWV9UWVBFX1ZJU1VBTCxmdW5jdGlvbih0KXt2YXIgZTt0aGlzLnBhcnNlSGVhZGVyKHQpLHQucmVhZFVpbnQxNigpLHQucmVhZFVpbnQxNigpLHQucmVhZFVpbnQzMkFycmF5KDMpLHRoaXMud2lkdGg9dC5yZWFkVWludDE2KCksdGhpcy5oZWlnaHQ9dC5yZWFkVWludDE2KCksdGhpcy5ob3JpenJlc29sdXRpb249dC5yZWFkVWludDMyKCksdGhpcy52ZXJ0cmVzb2x1dGlvbj10LnJlYWRVaW50MzIoKSx0LnJlYWRVaW50MzIoKSx0aGlzLmZyYW1lX2NvdW50PXQucmVhZFVpbnQxNigpLGU9TWF0aC5taW4oMzEsdC5yZWFkVWludDgoKSksdGhpcy5jb21wcmVzc29ybmFtZT10LnJlYWRTdHJpbmcoZSksZTwzMSYmdC5yZWFkU3RyaW5nKDMxLWUpLHRoaXMuZGVwdGg9dC5yZWFkVWludDE2KCksdC5yZWFkVWludDE2KCksdGhpcy5wYXJzZUZvb3Rlcih0KX0pLHIuY3JlYXRlTWVkaWFTYW1wbGVFbnRyeUN0b3Ioci5TQU1QTEVfRU5UUllfVFlQRV9BVURJTyxmdW5jdGlvbih0KXt0aGlzLnBhcnNlSGVhZGVyKHQpLHQucmVhZFVpbnQzMkFycmF5KDIpLHRoaXMuY2hhbm5lbF9jb3VudD10LnJlYWRVaW50MTYoKSx0aGlzLnNhbXBsZXNpemU9dC5yZWFkVWludDE2KCksdC5yZWFkVWludDE2KCksdC5yZWFkVWludDE2KCksdGhpcy5zYW1wbGVyYXRlPXQucmVhZFVpbnQzMigpLygxPDwxNiksdGhpcy5wYXJzZUZvb3Rlcih0KX0pLHIuY3JlYXRlU2FtcGxlRW50cnlDdG9yKHIuU0FNUExFX0VOVFJZX1RZUEVfVklTVUFMLCJhdmMxIiksci5jcmVhdGVTYW1wbGVFbnRyeUN0b3Ioci5TQU1QTEVfRU5UUllfVFlQRV9WSVNVQUwsImF2YzIiKSxyLmNyZWF0ZVNhbXBsZUVudHJ5Q3RvcihyLlNBTVBMRV9FTlRSWV9UWVBFX1ZJU1VBTCwiYXZjMyIpLHIuY3JlYXRlU2FtcGxlRW50cnlDdG9yKHIuU0FNUExFX0VOVFJZX1RZUEVfVklTVUFMLCJhdmM0Iiksci5jcmVhdGVTYW1wbGVFbnRyeUN0b3Ioci5TQU1QTEVfRU5UUllfVFlQRV9WSVNVQUwsImF2MDEiKSxyLmNyZWF0ZVNhbXBsZUVudHJ5Q3RvcihyLlNBTVBMRV9FTlRSWV9UWVBFX1ZJU1VBTCwiZGF2MSIpLHIuY3JlYXRlU2FtcGxlRW50cnlDdG9yKHIuU0FNUExFX0VOVFJZX1RZUEVfVklTVUFMLCJodmMxIiksci5jcmVhdGVTYW1wbGVFbnRyeUN0b3Ioci5TQU1QTEVfRU5UUllfVFlQRV9WSVNVQUwsImhldjEiKSxyLmNyZWF0ZVNhbXBsZUVudHJ5Q3RvcihyLlNBTVBMRV9FTlRSWV9UWVBFX1ZJU1VBTCwiaHZ0MSIpLHIuY3JlYXRlU2FtcGxlRW50cnlDdG9yKHIuU0FNUExFX0VOVFJZX1RZUEVfVklTVUFMLCJsaGUxIiksci5jcmVhdGVTYW1wbGVFbnRyeUN0b3Ioci5TQU1QTEVfRU5UUllfVFlQRV9WSVNVQUwsImR2aDEiKSxyLmNyZWF0ZVNhbXBsZUVudHJ5Q3RvcihyLlNBTVBMRV9FTlRSWV9UWVBFX1ZJU1VBTCwiZHZoZSIpLHIuY3JlYXRlU2FtcGxlRW50cnlDdG9yKHIuU0FNUExFX0VOVFJZX1RZUEVfVklTVUFMLCJ2dmMxIiksci5jcmVhdGVTYW1wbGVFbnRyeUN0b3Ioci5TQU1QTEVfRU5UUllfVFlQRV9WSVNVQUwsInZ2aTEiKSxyLmNyZWF0ZVNhbXBsZUVudHJ5Q3RvcihyLlNBTVBMRV9FTlRSWV9UWVBFX1ZJU1VBTCwidnZzMSIpLHIuY3JlYXRlU2FtcGxlRW50cnlDdG9yKHIuU0FNUExFX0VOVFJZX1RZUEVfVklTVUFMLCJ2dmNOIiksci5jcmVhdGVTYW1wbGVFbnRyeUN0b3Ioci5TQU1QTEVfRU5UUllfVFlQRV9WSVNVQUwsInZwMDgiKSxyLmNyZWF0ZVNhbXBsZUVudHJ5Q3RvcihyLlNBTVBMRV9FTlRSWV9UWVBFX1ZJU1VBTCwidnAwOSIpLHIuY3JlYXRlU2FtcGxlRW50cnlDdG9yKHIuU0FNUExFX0VOVFJZX1RZUEVfVklTVUFMLCJhdnMzIiksci5jcmVhdGVTYW1wbGVFbnRyeUN0b3Ioci5TQU1QTEVfRU5UUllfVFlQRV9WSVNVQUwsImoya2kiKSxyLmNyZWF0ZVNhbXBsZUVudHJ5Q3RvcihyLlNBTVBMRV9FTlRSWV9UWVBFX1ZJU1VBTCwibWpwMiIpLHIuY3JlYXRlU2FtcGxlRW50cnlDdG9yKHIuU0FNUExFX0VOVFJZX1RZUEVfVklTVUFMLCJtanBnIiksci5jcmVhdGVTYW1wbGVFbnRyeUN0b3Ioci5TQU1QTEVfRU5UUllfVFlQRV9WSVNVQUwsInVuY3YiKSxyLmNyZWF0ZVNhbXBsZUVudHJ5Q3RvcihyLlNBTVBMRV9FTlRSWV9UWVBFX0FVRElPLCJtcDRhIiksci5jcmVhdGVTYW1wbGVFbnRyeUN0b3Ioci5TQU1QTEVfRU5UUllfVFlQRV9BVURJTywiYWMtMyIpLHIuY3JlYXRlU2FtcGxlRW50cnlDdG9yKHIuU0FNUExFX0VOVFJZX1RZUEVfQVVESU8sImFjLTQiKSxyLmNyZWF0ZVNhbXBsZUVudHJ5Q3RvcihyLlNBTVBMRV9FTlRSWV9UWVBFX0FVRElPLCJlYy0zIiksci5jcmVhdGVTYW1wbGVFbnRyeUN0b3Ioci5TQU1QTEVfRU5UUllfVFlQRV9BVURJTywiT3B1cyIpLHIuY3JlYXRlU2FtcGxlRW50cnlDdG9yKHIuU0FNUExFX0VOVFJZX1RZUEVfQVVESU8sIm1oYTEiKSxyLmNyZWF0ZVNhbXBsZUVudHJ5Q3RvcihyLlNBTVBMRV9FTlRSWV9UWVBFX0FVRElPLCJtaGEyIiksci5jcmVhdGVTYW1wbGVFbnRyeUN0b3Ioci5TQU1QTEVfRU5UUllfVFlQRV9BVURJTywibWhtMSIpLHIuY3JlYXRlU2FtcGxlRW50cnlDdG9yKHIuU0FNUExFX0VOVFJZX1RZUEVfQVVESU8sIm1obTIiKSxyLmNyZWF0ZUVuY3J5cHRlZFNhbXBsZUVudHJ5Q3RvcihyLlNBTVBMRV9FTlRSWV9UWVBFX1ZJU1VBTCwiZW5jdiIpLHIuY3JlYXRlRW5jcnlwdGVkU2FtcGxlRW50cnlDdG9yKHIuU0FNUExFX0VOVFJZX1RZUEVfQVVESU8sImVuY2EiKSxyLmNyZWF0ZUVuY3J5cHRlZFNhbXBsZUVudHJ5Q3RvcihyLlNBTVBMRV9FTlRSWV9UWVBFX1NVQlRJVExFLCJlbmN1Iiksci5jcmVhdGVFbmNyeXB0ZWRTYW1wbGVFbnRyeUN0b3Ioci5TQU1QTEVfRU5UUllfVFlQRV9TWVNURU0sImVuY3MiKSxyLmNyZWF0ZUVuY3J5cHRlZFNhbXBsZUVudHJ5Q3RvcihyLlNBTVBMRV9FTlRSWV9UWVBFX1RFWFQsImVuY3QiKSxyLmNyZWF0ZUVuY3J5cHRlZFNhbXBsZUVudHJ5Q3RvcihyLlNBTVBMRV9FTlRSWV9UWVBFX01FVEFEQVRBLCJlbmNtIiksci5jcmVhdGVCb3hDdG9yKCJhMWx4IixmdW5jdGlvbih0KXt2YXIgZT10LnJlYWRVaW50OCgpJjEscz0oKGUmMSkrMSkqMTY7dGhpcy5sYXllcl9zaXplPVtdO2Zvcih2YXIgbj0wO248MztuKyspcz09MTY/dGhpcy5sYXllcl9zaXplW25dPXQucmVhZFVpbnQxNigpOnRoaXMubGF5ZXJfc2l6ZVtuXT10LnJlYWRVaW50MzIoKX0pLHIuY3JlYXRlQm94Q3RvcigiYTFvcCIsZnVuY3Rpb24odCl7dGhpcy5vcF9pbmRleD10LnJlYWRVaW50OCgpfSksci5jcmVhdGVGdWxsQm94Q3RvcigiYXV4QyIsZnVuY3Rpb24odCl7dGhpcy5hdXhfdHlwZT10LnJlYWRDU3RyaW5nKCk7dmFyIGU9dGhpcy5zaXplLXRoaXMuaGRyX3NpemUtKHRoaXMuYXV4X3R5cGUubGVuZ3RoKzEpO3RoaXMuYXV4X3N1YnR5cGU9dC5yZWFkVWludDhBcnJheShlKX0pLHIuY3JlYXRlQm94Q3RvcigiYXYxQyIsZnVuY3Rpb24odCl7dmFyIGU9dC5yZWFkVWludDgoKTtpZihlPj43JiExKXtkLmVycm9yKCJhdjFDIG1hcmtlciBwcm9ibGVtIik7cmV0dXJufWlmKHRoaXMudmVyc2lvbj1lJjEyNyx0aGlzLnZlcnNpb24hPT0xKXtkLmVycm9yKCJhdjFDIHZlcnNpb24gIit0aGlzLnZlcnNpb24rIiBub3Qgc3VwcG9ydGVkIik7cmV0dXJufWlmKGU9dC5yZWFkVWludDgoKSx0aGlzLnNlcV9wcm9maWxlPWU+PjUmNyx0aGlzLnNlcV9sZXZlbF9pZHhfMD1lJjMxLGU9dC5yZWFkVWludDgoKSx0aGlzLnNlcV90aWVyXzA9ZT4+NyYxLHRoaXMuaGlnaF9iaXRkZXB0aD1lPj42JjEsdGhpcy50d2VsdmVfYml0PWU+PjUmMSx0aGlzLm1vbm9jaHJvbWU9ZT4+NCYxLHRoaXMuY2hyb21hX3N1YnNhbXBsaW5nX3g9ZT4+MyYxLHRoaXMuY2hyb21hX3N1YnNhbXBsaW5nX3k9ZT4+MiYxLHRoaXMuY2hyb21hX3NhbXBsZV9wb3NpdGlvbj1lJjMsZT10LnJlYWRVaW50OCgpLHRoaXMucmVzZXJ2ZWRfMT1lPj41JjcsdGhpcy5yZXNlcnZlZF8xIT09MCl7ZC5lcnJvcigiYXYxQyByZXNlcnZlZF8xIHBhcnNpbmcgcHJvYmxlbSIpO3JldHVybn1pZih0aGlzLmluaXRpYWxfcHJlc2VudGF0aW9uX2RlbGF5X3ByZXNlbnQ9ZT4+NCYxLHRoaXMuaW5pdGlhbF9wcmVzZW50YXRpb25fZGVsYXlfcHJlc2VudD09PTEpdGhpcy5pbml0aWFsX3ByZXNlbnRhdGlvbl9kZWxheV9taW51c19vbmU9ZSYxNTtlbHNlIGlmKHRoaXMucmVzZXJ2ZWRfMj1lJjE1LHRoaXMucmVzZXJ2ZWRfMiE9PTApe2QuZXJyb3IoImF2MUMgcmVzZXJ2ZWRfMiBwYXJzaW5nIHByb2JsZW0iKTtyZXR1cm59dmFyIHM9dGhpcy5zaXplLXRoaXMuaGRyX3NpemUtNDt0aGlzLmNvbmZpZ09CVXM9dC5yZWFkVWludDhBcnJheShzKX0pLHIuY3JlYXRlQm94Q3RvcigiYXZjQyIsZnVuY3Rpb24odCl7dmFyIGUscztmb3IodGhpcy5jb25maWd1cmF0aW9uVmVyc2lvbj10LnJlYWRVaW50OCgpLHRoaXMuQVZDUHJvZmlsZUluZGljYXRpb249dC5yZWFkVWludDgoKSx0aGlzLnByb2ZpbGVfY29tcGF0aWJpbGl0eT10LnJlYWRVaW50OCgpLHRoaXMuQVZDTGV2ZWxJbmRpY2F0aW9uPXQucmVhZFVpbnQ4KCksdGhpcy5sZW5ndGhTaXplTWludXNPbmU9dC5yZWFkVWludDgoKSYzLHRoaXMubmJfU1BTX25hbHVzPXQucmVhZFVpbnQ4KCkmMzEscz10aGlzLnNpemUtdGhpcy5oZHJfc2l6ZS02LHRoaXMuU1BTPVtdLGU9MDtlPHRoaXMubmJfU1BTX25hbHVzO2UrKyl0aGlzLlNQU1tlXT17fSx0aGlzLlNQU1tlXS5sZW5ndGg9dC5yZWFkVWludDE2KCksdGhpcy5TUFNbZV0ubmFsdT10LnJlYWRVaW50OEFycmF5KHRoaXMuU1BTW2VdLmxlbmd0aCkscy09Mit0aGlzLlNQU1tlXS5sZW5ndGg7Zm9yKHRoaXMubmJfUFBTX25hbHVzPXQucmVhZFVpbnQ4KCkscy0tLHRoaXMuUFBTPVtdLGU9MDtlPHRoaXMubmJfUFBTX25hbHVzO2UrKyl0aGlzLlBQU1tlXT17fSx0aGlzLlBQU1tlXS5sZW5ndGg9dC5yZWFkVWludDE2KCksdGhpcy5QUFNbZV0ubmFsdT10LnJlYWRVaW50OEFycmF5KHRoaXMuUFBTW2VdLmxlbmd0aCkscy09Mit0aGlzLlBQU1tlXS5sZW5ndGg7cz4wJiYodGhpcy5leHQ9dC5yZWFkVWludDhBcnJheShzKSl9KSxyLmNyZWF0ZUJveEN0b3IoImJ0cnQiLGZ1bmN0aW9uKHQpe3RoaXMuYnVmZmVyU2l6ZURCPXQucmVhZFVpbnQzMigpLHRoaXMubWF4Qml0cmF0ZT10LnJlYWRVaW50MzIoKSx0aGlzLmF2Z0JpdHJhdGU9dC5yZWFkVWludDMyKCl9KSxyLmNyZWF0ZUZ1bGxCb3hDdG9yKCJjY3N0IixmdW5jdGlvbih0KXt2YXIgZT10LnJlYWRVaW50OCgpO3RoaXMuYWxsX3JlZl9waWNzX2ludHJhPShlJjEyOCk9PTEyOCx0aGlzLmludHJhX3ByZWRfdXNlZD0oZSY2NCk9PTY0LHRoaXMubWF4X3JlZl9wZXJfcGljPShlJjYzKT4+Mix0LnJlYWRVaW50MjQoKX0pLHIuY3JlYXRlQm94Q3RvcigiY2RlZiIsZnVuY3Rpb24odCl7dmFyIGU7Zm9yKHRoaXMuY2hhbm5lbF9jb3VudD10LnJlYWRVaW50MTYoKSx0aGlzLmNoYW5uZWxfaW5kZXhlcz1bXSx0aGlzLmNoYW5uZWxfdHlwZXM9W10sdGhpcy5jaGFubmVsX2Fzc29jaWF0aW9ucz1bXSxlPTA7ZTx0aGlzLmNoYW5uZWxfY291bnQ7ZSsrKXRoaXMuY2hhbm5lbF9pbmRleGVzLnB1c2godC5yZWFkVWludDE2KCkpLHRoaXMuY2hhbm5lbF90eXBlcy5wdXNoKHQucmVhZFVpbnQxNigpKSx0aGlzLmNoYW5uZWxfYXNzb2NpYXRpb25zLnB1c2godC5yZWFkVWludDE2KCkpfSksci5jcmVhdGVCb3hDdG9yKCJjbGFwIixmdW5jdGlvbih0KXt0aGlzLmNsZWFuQXBlcnR1cmVXaWR0aE49dC5yZWFkVWludDMyKCksdGhpcy5jbGVhbkFwZXJ0dXJlV2lkdGhEPXQucmVhZFVpbnQzMigpLHRoaXMuY2xlYW5BcGVydHVyZUhlaWdodE49dC5yZWFkVWludDMyKCksdGhpcy5jbGVhbkFwZXJ0dXJlSGVpZ2h0RD10LnJlYWRVaW50MzIoKSx0aGlzLmhvcml6T2ZmTj10LnJlYWRVaW50MzIoKSx0aGlzLmhvcml6T2ZmRD10LnJlYWRVaW50MzIoKSx0aGlzLnZlcnRPZmZOPXQucmVhZFVpbnQzMigpLHRoaXMudmVydE9mZkQ9dC5yZWFkVWludDMyKCl9KSxyLmNyZWF0ZUJveEN0b3IoImNsbGkiLGZ1bmN0aW9uKHQpe3RoaXMubWF4X2NvbnRlbnRfbGlnaHRfbGV2ZWw9dC5yZWFkVWludDE2KCksdGhpcy5tYXhfcGljX2F2ZXJhZ2VfbGlnaHRfbGV2ZWw9dC5yZWFkVWludDE2KCl9KSxyLmNyZWF0ZUZ1bGxCb3hDdG9yKCJjbWV4IixmdW5jdGlvbih0KXt0aGlzLmZsYWdzJjEmJih0aGlzLnBvc194PXQucmVhZEludDMyKCkpLHRoaXMuZmxhZ3MmMiYmKHRoaXMucG9zX3k9dC5yZWFkSW50MzIoKSksdGhpcy5mbGFncyY0JiYodGhpcy5wb3Nfej10LnJlYWRJbnQzMigpKSx0aGlzLmZsYWdzJjgmJih0aGlzLnZlcnNpb249PTA/dGhpcy5mbGFncyYxNj8odGhpcy5xdWF0X3g9dC5yZWFkSW50MzIoKSx0aGlzLnF1YXRfeT10LnJlYWRJbnQzMigpLHRoaXMucXVhdF96PXQucmVhZEludDMyKCkpOih0aGlzLnF1YXRfeD10LnJlYWRJbnQxNigpLHRoaXMucXVhdF95PXQucmVhZEludDE2KCksdGhpcy5xdWF0X3o9dC5yZWFkSW50MTYoKSk6dGhpcy52ZXJzaW9uPT0xKSx0aGlzLmZsYWdzJjMyJiYodGhpcy5pZD10LnJlYWRVaW50MzIoKSl9KSxyLmNyZWF0ZUZ1bGxCb3hDdG9yKCJjbWluIixmdW5jdGlvbih0KXt0aGlzLmZvY2FsX2xlbmd0aF94PXQucmVhZEludDMyKCksdGhpcy5wcmluY2lwYWxfcG9pbnRfeD10LnJlYWRJbnQzMigpLHRoaXMucHJpbmNpcGFsX3BvaW50X3k9dC5yZWFkSW50MzIoKSx0aGlzLmZsYWdzJjEmJih0aGlzLmZvY2FsX2xlbmd0aF95PXQucmVhZEludDMyKCksdGhpcy5za2V3X2ZhY3Rvcj10LnJlYWRJbnQzMigpKX0pLHIuY3JlYXRlQm94Q3RvcigiY21wZCIsZnVuY3Rpb24odCl7Zm9yKHRoaXMuY29tcG9uZW50X2NvdW50PXQucmVhZFVpbnQxNigpLHRoaXMuY29tcG9uZW50X3R5cGVzPVtdLHRoaXMuY29tcG9uZW50X3R5cGVfdXJscz1bXSxpPTA7aTx0aGlzLmNvbXBvbmVudF9jb3VudDtpKyspe3ZhciBlPXQucmVhZFVpbnQxNigpO3RoaXMuY29tcG9uZW50X3R5cGVzLnB1c2goZSksZT49MzI3NjgmJnRoaXMuY29tcG9uZW50X3R5cGVfdXJscy5wdXNoKHQucmVhZENTdHJpbmcoKSl9fSksci5jcmVhdGVGdWxsQm94Q3RvcigiY282NCIsZnVuY3Rpb24odCl7dmFyIGUscztpZihlPXQucmVhZFVpbnQzMigpLHRoaXMuY2h1bmtfb2Zmc2V0cz1bXSx0aGlzLnZlcnNpb249PT0wKWZvcihzPTA7czxlO3MrKyl0aGlzLmNodW5rX29mZnNldHMucHVzaCh0LnJlYWRVaW50NjQoKSl9KSxyLmNyZWF0ZUZ1bGxCb3hDdG9yKCJDb0xMIixmdW5jdGlvbih0KXt0aGlzLm1heENMTD10LnJlYWRVaW50MTYoKSx0aGlzLm1heEZBTEw9dC5yZWFkVWludDE2KCl9KSxyLmNyZWF0ZUJveEN0b3IoImNvbHIiLGZ1bmN0aW9uKHQpe2lmKHRoaXMuY29sb3VyX3R5cGU9dC5yZWFkU3RyaW5nKDQpLHRoaXMuY29sb3VyX3R5cGU9PT0ibmNseCIpe3RoaXMuY29sb3VyX3ByaW1hcmllcz10LnJlYWRVaW50MTYoKSx0aGlzLnRyYW5zZmVyX2NoYXJhY3RlcmlzdGljcz10LnJlYWRVaW50MTYoKSx0aGlzLm1hdHJpeF9jb2VmZmljaWVudHM9dC5yZWFkVWludDE2KCk7dmFyIGU9dC5yZWFkVWludDgoKTt0aGlzLmZ1bGxfcmFuZ2VfZmxhZz1lPj43fWVsc2UgdGhpcy5jb2xvdXJfdHlwZT09PSJySUNDIj90aGlzLklDQ19wcm9maWxlPXQucmVhZFVpbnQ4QXJyYXkodGhpcy5zaXplLTQpOnRoaXMuY29sb3VyX3R5cGU9PT0icHJvZiImJih0aGlzLklDQ19wcm9maWxlPXQucmVhZFVpbnQ4QXJyYXkodGhpcy5zaXplLTQpKX0pLHIuY3JlYXRlRnVsbEJveEN0b3IoImNwcnQiLGZ1bmN0aW9uKHQpe3RoaXMucGFyc2VMYW5ndWFnZSh0KSx0aGlzLm5vdGljZT10LnJlYWRDU3RyaW5nKCl9KSxyLmNyZWF0ZUZ1bGxCb3hDdG9yKCJjc2xnIixmdW5jdGlvbih0KXt0aGlzLnZlcnNpb249PT0wJiYodGhpcy5jb21wb3NpdGlvblRvRFRTU2hpZnQ9dC5yZWFkSW50MzIoKSx0aGlzLmxlYXN0RGVjb2RlVG9EaXNwbGF5RGVsdGE9dC5yZWFkSW50MzIoKSx0aGlzLmdyZWF0ZXN0RGVjb2RlVG9EaXNwbGF5RGVsdGE9dC5yZWFkSW50MzIoKSx0aGlzLmNvbXBvc2l0aW9uU3RhcnRUaW1lPXQucmVhZEludDMyKCksdGhpcy5jb21wb3NpdGlvbkVuZFRpbWU9dC5yZWFkSW50MzIoKSl9KSxyLmNyZWF0ZUZ1bGxCb3hDdG9yKCJjdHRzIixmdW5jdGlvbih0KXt2YXIgZSxzO2lmKGU9dC5yZWFkVWludDMyKCksdGhpcy5zYW1wbGVfY291bnRzPVtdLHRoaXMuc2FtcGxlX29mZnNldHM9W10sdGhpcy52ZXJzaW9uPT09MClmb3Iocz0wO3M8ZTtzKyspe3RoaXMuc2FtcGxlX2NvdW50cy5wdXNoKHQucmVhZFVpbnQzMigpKTt2YXIgbj10LnJlYWRJbnQzMigpO248MCYmZC53YXJuKCJCb3hQYXJzZXIiLCJjdHRzIGJveCB1c2VzIG5lZ2F0aXZlIHZhbHVlcyB3aXRob3V0IHVzaW5nIHZlcnNpb24gMSIpLHRoaXMuc2FtcGxlX29mZnNldHMucHVzaChuKX1lbHNlIGlmKHRoaXMudmVyc2lvbj09MSlmb3Iocz0wO3M8ZTtzKyspdGhpcy5zYW1wbGVfY291bnRzLnB1c2godC5yZWFkVWludDMyKCkpLHRoaXMuc2FtcGxlX29mZnNldHMucHVzaCh0LnJlYWRJbnQzMigpKX0pLHIuY3JlYXRlQm94Q3RvcigiZGFjMyIsZnVuY3Rpb24odCl7dmFyIGU9dC5yZWFkVWludDgoKSxzPXQucmVhZFVpbnQ4KCksbj10LnJlYWRVaW50OCgpO3RoaXMuZnNjb2Q9ZT4+Nix0aGlzLmJzaWQ9ZT4+MSYzMSx0aGlzLmJzbW9kPShlJjEpPDwyfHM+PjYmMyx0aGlzLmFjbW9kPXM+PjMmNyx0aGlzLmxmZW9uPXM+PjImMSx0aGlzLmJpdF9yYXRlX2NvZGU9cyYzfG4+PjUmN30pLHIuY3JlYXRlQm94Q3RvcigiZGVjMyIsZnVuY3Rpb24odCl7dmFyIGU9dC5yZWFkVWludDE2KCk7dGhpcy5kYXRhX3JhdGU9ZT4+Myx0aGlzLm51bV9pbmRfc3ViPWUmNyx0aGlzLmluZF9zdWJzPVtdO2Zvcih2YXIgcz0wO3M8dGhpcy5udW1faW5kX3N1YisxO3MrKyl7dmFyIG49e307dGhpcy5pbmRfc3Vicy5wdXNoKG4pO3ZhciBhPXQucmVhZFVpbnQ4KCksbz10LnJlYWRVaW50OCgpLGg9dC5yZWFkVWludDgoKTtuLmZzY29kPWE+PjYsbi5ic2lkPWE+PjEmMzEsbi5ic21vZD0oYSYxKTw8NHxvPj40JjE1LG4uYWNtb2Q9bz4+MSY3LG4ubGZlb249byYxLG4ubnVtX2RlcF9zdWI9aD4+MSYxNSxuLm51bV9kZXBfc3ViPjAmJihuLmNoYW5fbG9jPShoJjEpPDw4fHQucmVhZFVpbnQ4KCkpfX0pLHIuY3JlYXRlRnVsbEJveEN0b3IoImRmTGEiLGZ1bmN0aW9uKHQpe3ZhciBlPTEyNyxzPTEyOCxuPVtdLGE9WyJTVFJFQU1JTkZPIiwiUEFERElORyIsIkFQUExJQ0FUSU9OIiwiU0VFS1RBQkxFIiwiVk9SQklTX0NPTU1FTlQiLCJDVUVTSEVFVCIsIlBJQ1RVUkUiLCJSRVNFUlZFRCJdO3RoaXMucGFyc2VGdWxsSGVhZGVyKHQpO2Rve3ZhciBvPXQucmVhZFVpbnQ4KCksaD1NYXRoLm1pbihvJmUsYS5sZW5ndGgtMSk7aWYoaD90LnJlYWRVaW50OEFycmF5KHQucmVhZFVpbnQyNCgpKToodC5yZWFkVWludDhBcnJheSgxMyksdGhpcy5zYW1wbGVyYXRlPXQucmVhZFVpbnQzMigpPj4xMix0LnJlYWRVaW50OEFycmF5KDIwKSksbi5wdXNoKGFbaF0pLG8mcylicmVha313aGlsZSghMCk7dGhpcy5udW1NZXRhZGF0YUJsb2Nrcz1uLmxlbmd0aCsiICgiK24uam9pbigiLCAiKSsiKSJ9KSxyLmNyZWF0ZUJveEN0b3IoImRpbW0iLGZ1bmN0aW9uKHQpe3RoaXMuYnl0ZXNzZW50PXQucmVhZFVpbnQ2NCgpfSksci5jcmVhdGVCb3hDdG9yKCJkbWF4IixmdW5jdGlvbih0KXt0aGlzLnRpbWU9dC5yZWFkVWludDMyKCl9KSxyLmNyZWF0ZUJveEN0b3IoImRtZWQiLGZ1bmN0aW9uKHQpe3RoaXMuYnl0ZXNzZW50PXQucmVhZFVpbnQ2NCgpfSksci5jcmVhdGVCb3hDdG9yKCJkT3BzIixmdW5jdGlvbih0KXtpZih0aGlzLlZlcnNpb249dC5yZWFkVWludDgoKSx0aGlzLk91dHB1dENoYW5uZWxDb3VudD10LnJlYWRVaW50OCgpLHRoaXMuUHJlU2tpcD10LnJlYWRVaW50MTYoKSx0aGlzLklucHV0U2FtcGxlUmF0ZT10LnJlYWRVaW50MzIoKSx0aGlzLk91dHB1dEdhaW49dC5yZWFkSW50MTYoKSx0aGlzLkNoYW5uZWxNYXBwaW5nRmFtaWx5PXQucmVhZFVpbnQ4KCksdGhpcy5DaGFubmVsTWFwcGluZ0ZhbWlseSE9PTApe3RoaXMuU3RyZWFtQ291bnQ9dC5yZWFkVWludDgoKSx0aGlzLkNvdXBsZWRDb3VudD10LnJlYWRVaW50OCgpLHRoaXMuQ2hhbm5lbE1hcHBpbmc9W107Zm9yKHZhciBlPTA7ZTx0aGlzLk91dHB1dENoYW5uZWxDb3VudDtlKyspdGhpcy5DaGFubmVsTWFwcGluZ1tlXT10LnJlYWRVaW50OCgpfX0pLHIuY3JlYXRlRnVsbEJveEN0b3IoImRyZWYiLGZ1bmN0aW9uKHQpe3ZhciBlLHM7dGhpcy5lbnRyaWVzPVtdO2Zvcih2YXIgbj10LnJlYWRVaW50MzIoKSxhPTA7YTxuO2ErKylpZihlPXIucGFyc2VPbmVCb3godCwhMSx0aGlzLnNpemUtKHQuZ2V0UG9zaXRpb24oKS10aGlzLnN0YXJ0KSksZS5jb2RlPT09ci5PSylzPWUuYm94LHRoaXMuZW50cmllcy5wdXNoKHMpO2Vsc2UgcmV0dXJufSksci5jcmVhdGVCb3hDdG9yKCJkcmVwIixmdW5jdGlvbih0KXt0aGlzLmJ5dGVzc2VudD10LnJlYWRVaW50NjQoKX0pLHIuY3JlYXRlRnVsbEJveEN0b3IoImVsbmciLGZ1bmN0aW9uKHQpe3RoaXMuZXh0ZW5kZWRfbGFuZ3VhZ2U9dC5yZWFkU3RyaW5nKHRoaXMuc2l6ZS10aGlzLmhkcl9zaXplKX0pLHIuY3JlYXRlRnVsbEJveEN0b3IoImVsc3QiLGZ1bmN0aW9uKHQpe3RoaXMuZW50cmllcz1bXTtmb3IodmFyIGU9dC5yZWFkVWludDMyKCkscz0wO3M8ZTtzKyspe3ZhciBuPXt9O3RoaXMuZW50cmllcy5wdXNoKG4pLHRoaXMudmVyc2lvbj09PTE/KG4uc2VnbWVudF9kdXJhdGlvbj10LnJlYWRVaW50NjQoKSxuLm1lZGlhX3RpbWU9dC5yZWFkSW50NjQoKSk6KG4uc2VnbWVudF9kdXJhdGlvbj10LnJlYWRVaW50MzIoKSxuLm1lZGlhX3RpbWU9dC5yZWFkSW50MzIoKSksbi5tZWRpYV9yYXRlX2ludGVnZXI9dC5yZWFkSW50MTYoKSxuLm1lZGlhX3JhdGVfZnJhY3Rpb249dC5yZWFkSW50MTYoKX19KSxyLmNyZWF0ZUZ1bGxCb3hDdG9yKCJlbXNnIixmdW5jdGlvbih0KXt0aGlzLnZlcnNpb249PTE/KHRoaXMudGltZXNjYWxlPXQucmVhZFVpbnQzMigpLHRoaXMucHJlc2VudGF0aW9uX3RpbWU9dC5yZWFkVWludDY0KCksdGhpcy5ldmVudF9kdXJhdGlvbj10LnJlYWRVaW50MzIoKSx0aGlzLmlkPXQucmVhZFVpbnQzMigpLHRoaXMuc2NoZW1lX2lkX3VyaT10LnJlYWRDU3RyaW5nKCksdGhpcy52YWx1ZT10LnJlYWRDU3RyaW5nKCkpOih0aGlzLnNjaGVtZV9pZF91cmk9dC5yZWFkQ1N0cmluZygpLHRoaXMudmFsdWU9dC5yZWFkQ1N0cmluZygpLHRoaXMudGltZXNjYWxlPXQucmVhZFVpbnQzMigpLHRoaXMucHJlc2VudGF0aW9uX3RpbWVfZGVsdGE9dC5yZWFkVWludDMyKCksdGhpcy5ldmVudF9kdXJhdGlvbj10LnJlYWRVaW50MzIoKSx0aGlzLmlkPXQucmVhZFVpbnQzMigpKTt2YXIgZT10aGlzLnNpemUtdGhpcy5oZHJfc2l6ZS0oNCo0Kyh0aGlzLnNjaGVtZV9pZF91cmkubGVuZ3RoKzEpKyh0aGlzLnZhbHVlLmxlbmd0aCsxKSk7dGhpcy52ZXJzaW9uPT0xJiYoZS09NCksdGhpcy5tZXNzYWdlX2RhdGE9dC5yZWFkVWludDhBcnJheShlKX0pLHIuY3JlYXRlRW50aXR5VG9Hcm91cEN0b3I9ZnVuY3Rpb24odCxlKXtyW3QrIkJveCJdPWZ1bmN0aW9uKHMpe3IuRnVsbEJveC5jYWxsKHRoaXMsdCxzKX0sclt0KyJCb3giXS5wcm90b3R5cGU9bmV3IHIuRnVsbEJveCxyW3QrIkJveCJdLnByb3RvdHlwZS5wYXJzZT1mdW5jdGlvbihzKXtpZih0aGlzLnBhcnNlRnVsbEhlYWRlcihzKSxlKWUuY2FsbCh0aGlzLHMpO2Vsc2UgZm9yKHRoaXMuZ3JvdXBfaWQ9cy5yZWFkVWludDMyKCksdGhpcy5udW1fZW50aXRpZXNfaW5fZ3JvdXA9cy5yZWFkVWludDMyKCksdGhpcy5lbnRpdHlfaWRzPVtdLGk9MDtpPHRoaXMubnVtX2VudGl0aWVzX2luX2dyb3VwO2krKyl7dmFyIG49cy5yZWFkVWludDMyKCk7dGhpcy5lbnRpdHlfaWRzLnB1c2gobil9fX0sci5jcmVhdGVFbnRpdHlUb0dyb3VwQ3RvcigiYWViciIpLHIuY3JlYXRlRW50aXR5VG9Hcm91cEN0b3IoImFmYnIiKSxyLmNyZWF0ZUVudGl0eVRvR3JvdXBDdG9yKCJhbGJjIiksci5jcmVhdGVFbnRpdHlUb0dyb3VwQ3RvcigiYWx0ciIpLHIuY3JlYXRlRW50aXR5VG9Hcm91cEN0b3IoImJyc3QiKSxyLmNyZWF0ZUVudGl0eVRvR3JvdXBDdG9yKCJkb2JyIiksci5jcmVhdGVFbnRpdHlUb0dyb3VwQ3RvcigiZXFpdiIpLHIuY3JlYXRlRW50aXR5VG9Hcm91cEN0b3IoImZhdmMiKSxyLmNyZWF0ZUVudGl0eVRvR3JvdXBDdG9yKCJmb2JyIiksci5jcmVhdGVFbnRpdHlUb0dyb3VwQ3RvcigiaWF1ZyIpLHIuY3JlYXRlRW50aXR5VG9Hcm91cEN0b3IoInBhbm8iKSxyLmNyZWF0ZUVudGl0eVRvR3JvdXBDdG9yKCJzbGlkIiksci5jcmVhdGVFbnRpdHlUb0dyb3VwQ3Rvcigic3RlciIpLHIuY3JlYXRlRW50aXR5VG9Hcm91cEN0b3IoInRzeW4iKSxyLmNyZWF0ZUVudGl0eVRvR3JvdXBDdG9yKCJ3YmJyIiksci5jcmVhdGVFbnRpdHlUb0dyb3VwQ3RvcigicHJnciIpLHIuY3JlYXRlRnVsbEJveEN0b3IoImVzZHMiLGZ1bmN0aW9uKHQpe3ZhciBlPXQucmVhZFVpbnQ4QXJyYXkodGhpcy5zaXplLXRoaXMuaGRyX3NpemUpO2lmKHRoaXMuZGF0YT1lLHR5cGVvZiBBPCJ1Iil7dmFyIHM9bmV3IEE7dGhpcy5lc2Q9cy5wYXJzZU9uZURlc2NyaXB0b3IobmV3IGwoZS5idWZmZXIsMCxsLkJJR19FTkRJQU4pKX19KSxyLmNyZWF0ZUJveEN0b3IoImZpZWwiLGZ1bmN0aW9uKHQpe3RoaXMuZmllbGRDb3VudD10LnJlYWRVaW50OCgpLHRoaXMuZmllbGRPcmRlcmluZz10LnJlYWRVaW50OCgpfSksci5jcmVhdGVCb3hDdG9yKCJmcm1hIixmdW5jdGlvbih0KXt0aGlzLmRhdGFfZm9ybWF0PXQucmVhZFN0cmluZyg0KX0pLHIuY3JlYXRlQm94Q3RvcigiZnR5cCIsZnVuY3Rpb24odCl7dmFyIGU9dGhpcy5zaXplLXRoaXMuaGRyX3NpemU7dGhpcy5tYWpvcl9icmFuZD10LnJlYWRTdHJpbmcoNCksdGhpcy5taW5vcl92ZXJzaW9uPXQucmVhZFVpbnQzMigpLGUtPTgsdGhpcy5jb21wYXRpYmxlX2JyYW5kcz1bXTtmb3IodmFyIHM9MDtlPj00Oyl0aGlzLmNvbXBhdGlibGVfYnJhbmRzW3NdPXQucmVhZFN0cmluZyg0KSxlLT00LHMrK30pLHIuY3JlYXRlRnVsbEJveEN0b3IoImhkbHIiLGZ1bmN0aW9uKHQpe3RoaXMudmVyc2lvbj09PTAmJih0LnJlYWRVaW50MzIoKSx0aGlzLmhhbmRsZXI9dC5yZWFkU3RyaW5nKDQpLHQucmVhZFVpbnQzMkFycmF5KDMpLHRoaXMubmFtZT10LnJlYWRTdHJpbmcodGhpcy5zaXplLXRoaXMuaGRyX3NpemUtMjApLHRoaXMubmFtZVt0aGlzLm5hbWUubGVuZ3RoLTFdPT09IlwwIiYmKHRoaXMubmFtZT10aGlzLm5hbWUuc2xpY2UoMCwtMSkpKX0pLHIuY3JlYXRlQm94Q3RvcigiaHZjQyIsZnVuY3Rpb24odCl7dmFyIGUscyxuLGE7dGhpcy5jb25maWd1cmF0aW9uVmVyc2lvbj10LnJlYWRVaW50OCgpLGE9dC5yZWFkVWludDgoKSx0aGlzLmdlbmVyYWxfcHJvZmlsZV9zcGFjZT1hPj42LHRoaXMuZ2VuZXJhbF90aWVyX2ZsYWc9KGEmMzIpPj41LHRoaXMuZ2VuZXJhbF9wcm9maWxlX2lkYz1hJjMxLHRoaXMuZ2VuZXJhbF9wcm9maWxlX2NvbXBhdGliaWxpdHk9dC5yZWFkVWludDMyKCksdGhpcy5nZW5lcmFsX2NvbnN0cmFpbnRfaW5kaWNhdG9yPXQucmVhZFVpbnQ4QXJyYXkoNiksdGhpcy5nZW5lcmFsX2xldmVsX2lkYz10LnJlYWRVaW50OCgpLHRoaXMubWluX3NwYXRpYWxfc2VnbWVudGF0aW9uX2lkYz10LnJlYWRVaW50MTYoKSY0MDk1LHRoaXMucGFyYWxsZWxpc21UeXBlPXQucmVhZFVpbnQ4KCkmMyx0aGlzLmNocm9tYV9mb3JtYXRfaWRjPXQucmVhZFVpbnQ4KCkmMyx0aGlzLmJpdF9kZXB0aF9sdW1hX21pbnVzOD10LnJlYWRVaW50OCgpJjcsdGhpcy5iaXRfZGVwdGhfY2hyb21hX21pbnVzOD10LnJlYWRVaW50OCgpJjcsdGhpcy5hdmdGcmFtZVJhdGU9dC5yZWFkVWludDE2KCksYT10LnJlYWRVaW50OCgpLHRoaXMuY29uc3RhbnRGcmFtZVJhdGU9YT4+Nix0aGlzLm51bVRlbXBvcmFsTGF5ZXJzPShhJjEzKT4+Myx0aGlzLnRlbXBvcmFsSWROZXN0ZWQ9KGEmNCk+PjIsdGhpcy5sZW5ndGhTaXplTWludXNPbmU9YSYzLHRoaXMubmFsdV9hcnJheXM9W107dmFyIG89dC5yZWFkVWludDgoKTtmb3IoZT0wO2U8bztlKyspe3ZhciBoPVtdO3RoaXMubmFsdV9hcnJheXMucHVzaChoKSxhPXQucmVhZFVpbnQ4KCksaC5jb21wbGV0ZW5lc3M9KGEmMTI4KT4+NyxoLm5hbHVfdHlwZT1hJjYzO3ZhciBmPXQucmVhZFVpbnQxNigpO2ZvcihzPTA7czxmO3MrKyl7dmFyIHA9e307aC5wdXNoKHApLG49dC5yZWFkVWludDE2KCkscC5kYXRhPXQucmVhZFVpbnQ4QXJyYXkobil9fX0pLHIuY3JlYXRlRnVsbEJveEN0b3IoImlpbmYiLGZ1bmN0aW9uKHQpe3ZhciBlO3RoaXMudmVyc2lvbj09PTA/dGhpcy5lbnRyeV9jb3VudD10LnJlYWRVaW50MTYoKTp0aGlzLmVudHJ5X2NvdW50PXQucmVhZFVpbnQzMigpLHRoaXMuaXRlbV9pbmZvcz1bXTtmb3IodmFyIHM9MDtzPHRoaXMuZW50cnlfY291bnQ7cysrKWlmKGU9ci5wYXJzZU9uZUJveCh0LCExLHRoaXMuc2l6ZS0odC5nZXRQb3NpdGlvbigpLXRoaXMuc3RhcnQpKSxlLmNvZGU9PT1yLk9LKWUuYm94LnR5cGUhPT0iaW5mZSImJmQuZXJyb3IoIkJveFBhcnNlciIsIkV4cGVjdGVkICdpbmZlJyBib3gsIGdvdCAiK2UuYm94LnR5cGUpLHRoaXMuaXRlbV9pbmZvc1tzXT1lLmJveDtlbHNlIHJldHVybn0pLHIuY3JlYXRlRnVsbEJveEN0b3IoImlsb2MiLGZ1bmN0aW9uKHQpe3ZhciBlO2U9dC5yZWFkVWludDgoKSx0aGlzLm9mZnNldF9zaXplPWU+PjQmMTUsdGhpcy5sZW5ndGhfc2l6ZT1lJjE1LGU9dC5yZWFkVWludDgoKSx0aGlzLmJhc2Vfb2Zmc2V0X3NpemU9ZT4+NCYxNSx0aGlzLnZlcnNpb249PT0xfHx0aGlzLnZlcnNpb249PT0yP3RoaXMuaW5kZXhfc2l6ZT1lJjE1OnRoaXMuaW5kZXhfc2l6ZT0wLHRoaXMuaXRlbXM9W107dmFyIHM9MDtpZih0aGlzLnZlcnNpb248MilzPXQucmVhZFVpbnQxNigpO2Vsc2UgaWYodGhpcy52ZXJzaW9uPT09MilzPXQucmVhZFVpbnQzMigpO2Vsc2UgdGhyb3cidmVyc2lvbiBvZiBpbG9jIGJveCBub3Qgc3VwcG9ydGVkIjtmb3IodmFyIG49MDtuPHM7bisrKXt2YXIgYT17fTtpZih0aGlzLml0ZW1zLnB1c2goYSksdGhpcy52ZXJzaW9uPDIpYS5pdGVtX0lEPXQucmVhZFVpbnQxNigpO2Vsc2UgaWYodGhpcy52ZXJzaW9uPT09MilhLml0ZW1fSUQ9dC5yZWFkVWludDE2KCk7ZWxzZSB0aHJvdyJ2ZXJzaW9uIG9mIGlsb2MgYm94IG5vdCBzdXBwb3J0ZWQiO3N3aXRjaCh0aGlzLnZlcnNpb249PT0xfHx0aGlzLnZlcnNpb249PT0yP2EuY29uc3RydWN0aW9uX21ldGhvZD10LnJlYWRVaW50MTYoKSYxNTphLmNvbnN0cnVjdGlvbl9tZXRob2Q9MCxhLmRhdGFfcmVmZXJlbmNlX2luZGV4PXQucmVhZFVpbnQxNigpLHRoaXMuYmFzZV9vZmZzZXRfc2l6ZSl7Y2FzZSAwOmEuYmFzZV9vZmZzZXQ9MDticmVhaztjYXNlIDQ6YS5iYXNlX29mZnNldD10LnJlYWRVaW50MzIoKTticmVhaztjYXNlIDg6YS5iYXNlX29mZnNldD10LnJlYWRVaW50NjQoKTticmVhaztkZWZhdWx0OnRocm93IkVycm9yIHJlYWRpbmcgYmFzZSBvZmZzZXQgc2l6ZSJ9dmFyIG89dC5yZWFkVWludDE2KCk7YS5leHRlbnRzPVtdO2Zvcih2YXIgaD0wO2g8bztoKyspe3ZhciBmPXt9O2lmKGEuZXh0ZW50cy5wdXNoKGYpLHRoaXMudmVyc2lvbj09PTF8fHRoaXMudmVyc2lvbj09PTIpc3dpdGNoKHRoaXMuaW5kZXhfc2l6ZSl7Y2FzZSAwOmYuZXh0ZW50X2luZGV4PTA7YnJlYWs7Y2FzZSA0OmYuZXh0ZW50X2luZGV4PXQucmVhZFVpbnQzMigpO2JyZWFrO2Nhc2UgODpmLmV4dGVudF9pbmRleD10LnJlYWRVaW50NjQoKTticmVhaztkZWZhdWx0OnRocm93IkVycm9yIHJlYWRpbmcgZXh0ZW50IGluZGV4In1zd2l0Y2godGhpcy5vZmZzZXRfc2l6ZSl7Y2FzZSAwOmYuZXh0ZW50X29mZnNldD0wO2JyZWFrO2Nhc2UgNDpmLmV4dGVudF9vZmZzZXQ9dC5yZWFkVWludDMyKCk7YnJlYWs7Y2FzZSA4OmYuZXh0ZW50X29mZnNldD10LnJlYWRVaW50NjQoKTticmVhaztkZWZhdWx0OnRocm93IkVycm9yIHJlYWRpbmcgZXh0ZW50IGluZGV4In1zd2l0Y2godGhpcy5sZW5ndGhfc2l6ZSl7Y2FzZSAwOmYuZXh0ZW50X2xlbmd0aD0wO2JyZWFrO2Nhc2UgNDpmLmV4dGVudF9sZW5ndGg9dC5yZWFkVWludDMyKCk7YnJlYWs7Y2FzZSA4OmYuZXh0ZW50X2xlbmd0aD10LnJlYWRVaW50NjQoKTticmVhaztkZWZhdWx0OnRocm93IkVycm9yIHJlYWRpbmcgZXh0ZW50IGluZGV4In19fX0pLHIuY3JlYXRlQm94Q3RvcigiaW1pciIsZnVuY3Rpb24odCl7dmFyIGU9dC5yZWFkVWludDgoKTt0aGlzLnJlc2VydmVkPWU+PjcsdGhpcy5heGlzPWUmMX0pLHIuY3JlYXRlRnVsbEJveEN0b3IoImluZmUiLGZ1bmN0aW9uKHQpe2lmKCh0aGlzLnZlcnNpb249PT0wfHx0aGlzLnZlcnNpb249PT0xKSYmKHRoaXMuaXRlbV9JRD10LnJlYWRVaW50MTYoKSx0aGlzLml0ZW1fcHJvdGVjdGlvbl9pbmRleD10LnJlYWRVaW50MTYoKSx0aGlzLml0ZW1fbmFtZT10LnJlYWRDU3RyaW5nKCksdGhpcy5jb250ZW50X3R5cGU9dC5yZWFkQ1N0cmluZygpLHRoaXMuY29udGVudF9lbmNvZGluZz10LnJlYWRDU3RyaW5nKCkpLHRoaXMudmVyc2lvbj09PTEpe3RoaXMuZXh0ZW5zaW9uX3R5cGU9dC5yZWFkU3RyaW5nKDQpLGQud2FybigiQm94UGFyc2VyIiwiQ2Fubm90IHBhcnNlIGV4dGVuc2lvbiB0eXBlIiksdC5zZWVrKHRoaXMuc3RhcnQrdGhpcy5zaXplKTtyZXR1cm59dGhpcy52ZXJzaW9uPj0yJiYodGhpcy52ZXJzaW9uPT09Mj90aGlzLml0ZW1fSUQ9dC5yZWFkVWludDE2KCk6dGhpcy52ZXJzaW9uPT09MyYmKHRoaXMuaXRlbV9JRD10LnJlYWRVaW50MzIoKSksdGhpcy5pdGVtX3Byb3RlY3Rpb25faW5kZXg9dC5yZWFkVWludDE2KCksdGhpcy5pdGVtX3R5cGU9dC5yZWFkU3RyaW5nKDQpLHRoaXMuaXRlbV9uYW1lPXQucmVhZENTdHJpbmcoKSx0aGlzLml0ZW1fdHlwZT09PSJtaW1lIj8odGhpcy5jb250ZW50X3R5cGU9dC5yZWFkQ1N0cmluZygpLHRoaXMuY29udGVudF9lbmNvZGluZz10LnJlYWRDU3RyaW5nKCkpOnRoaXMuaXRlbV90eXBlPT09InVyaSAiJiYodGhpcy5pdGVtX3VyaV90eXBlPXQucmVhZENTdHJpbmcoKSkpfSksci5jcmVhdGVGdWxsQm94Q3RvcigiaXBtYSIsZnVuY3Rpb24odCl7dmFyIGUscztmb3IoZW50cnlfY291bnQ9dC5yZWFkVWludDMyKCksdGhpcy5hc3NvY2lhdGlvbnM9W10sZT0wO2U8ZW50cnlfY291bnQ7ZSsrKXt2YXIgbj17fTt0aGlzLmFzc29jaWF0aW9ucy5wdXNoKG4pLHRoaXMudmVyc2lvbjwxP24uaWQ9dC5yZWFkVWludDE2KCk6bi5pZD10LnJlYWRVaW50MzIoKTt2YXIgYT10LnJlYWRVaW50OCgpO2ZvcihuLnByb3BzPVtdLHM9MDtzPGE7cysrKXt2YXIgbz10LnJlYWRVaW50OCgpLGg9e307bi5wcm9wcy5wdXNoKGgpLGguZXNzZW50aWFsPShvJjEyOCk+Pjc9PT0xLHRoaXMuZmxhZ3MmMT9oLnByb3BlcnR5X2luZGV4PShvJjEyNyk8PDh8dC5yZWFkVWludDgoKTpoLnByb3BlcnR5X2luZGV4PW8mMTI3fX19KSxyLmNyZWF0ZUZ1bGxCb3hDdG9yKCJpcmVmIixmdW5jdGlvbih0KXt2YXIgZSxzO2Zvcih0aGlzLnJlZmVyZW5jZXM9W107dC5nZXRQb3NpdGlvbigpPHRoaXMuc3RhcnQrdGhpcy5zaXplOylpZihlPXIucGFyc2VPbmVCb3godCwhMCx0aGlzLnNpemUtKHQuZ2V0UG9zaXRpb24oKS10aGlzLnN0YXJ0KSksZS5jb2RlPT09ci5PSyl0aGlzLnZlcnNpb249PT0wP3M9bmV3IHIuU2luZ2xlSXRlbVR5cGVSZWZlcmVuY2VCb3goZS50eXBlLGUuc2l6ZSxlLmhkcl9zaXplLGUuc3RhcnQpOnM9bmV3IHIuU2luZ2xlSXRlbVR5cGVSZWZlcmVuY2VCb3hMYXJnZShlLnR5cGUsZS5zaXplLGUuaGRyX3NpemUsZS5zdGFydCkscy53cml0ZT09PXIuQm94LnByb3RvdHlwZS53cml0ZSYmcy50eXBlIT09Im1kYXQiJiYoZC53YXJuKCJCb3hQYXJzZXIiLHMudHlwZSsiIGJveCB3cml0aW5nIG5vdCB5ZXQgaW1wbGVtZW50ZWQsIGtlZXBpbmcgdW5wYXJzZWQgZGF0YSBpbiBtZW1vcnkgZm9yIGxhdGVyIHdyaXRlIikscy5wYXJzZURhdGFBbmRSZXdpbmQodCkpLHMucGFyc2UodCksdGhpcy5yZWZlcmVuY2VzLnB1c2gocyk7ZWxzZSByZXR1cm59KSxyLmNyZWF0ZUJveEN0b3IoImlyb3QiLGZ1bmN0aW9uKHQpe3RoaXMuYW5nbGU9dC5yZWFkVWludDgoKSYzfSksci5jcmVhdGVGdWxsQm94Q3RvcigiaXNwZSIsZnVuY3Rpb24odCl7dGhpcy5pbWFnZV93aWR0aD10LnJlYWRVaW50MzIoKSx0aGlzLmltYWdlX2hlaWdodD10LnJlYWRVaW50MzIoKX0pLHIuY3JlYXRlRnVsbEJveEN0b3IoImtpbmQiLGZ1bmN0aW9uKHQpe3RoaXMuc2NoZW1lVVJJPXQucmVhZENTdHJpbmcoKSx0aGlzLnZhbHVlPXQucmVhZENTdHJpbmcoKX0pLHIuY3JlYXRlRnVsbEJveEN0b3IoImxldmEiLGZ1bmN0aW9uKHQpe3ZhciBlPXQucmVhZFVpbnQ4KCk7dGhpcy5sZXZlbHM9W107Zm9yKHZhciBzPTA7czxlO3MrKyl7dmFyIG49e307dGhpcy5sZXZlbHNbc109bixuLnRyYWNrX0lEPXQucmVhZFVpbnQzMigpO3ZhciBhPXQucmVhZFVpbnQ4KCk7c3dpdGNoKG4ucGFkZGluZ19mbGFnPWE+Pjcsbi5hc3NpZ25tZW50X3R5cGU9YSYxMjcsbi5hc3NpZ25tZW50X3R5cGUpe2Nhc2UgMDpuLmdyb3VwaW5nX3R5cGU9dC5yZWFkU3RyaW5nKDQpO2JyZWFrO2Nhc2UgMTpuLmdyb3VwaW5nX3R5cGU9dC5yZWFkU3RyaW5nKDQpLG4uZ3JvdXBpbmdfdHlwZV9wYXJhbWV0ZXI9dC5yZWFkVWludDMyKCk7YnJlYWs7Y2FzZSAyOmJyZWFrO2Nhc2UgMzpicmVhaztjYXNlIDQ6bi5zdWJfdHJhY2tfaWQ9dC5yZWFkVWludDMyKCk7YnJlYWs7ZGVmYXVsdDpkLndhcm4oIkJveFBhcnNlciIsIlVua25vd24gbGV2YSBhc3NpZ25lbWVudCB0eXBlIil9fX0pLHIuY3JlYXRlQm94Q3RvcigibHNlbCIsZnVuY3Rpb24odCl7dGhpcy5sYXllcl9pZD10LnJlYWRVaW50MTYoKX0pLHIuY3JlYXRlQm94Q3RvcigibWF4ciIsZnVuY3Rpb24odCl7dGhpcy5wZXJpb2Q9dC5yZWFkVWludDMyKCksdGhpcy5ieXRlcz10LnJlYWRVaW50MzIoKX0pLHIuY3JlYXRlQm94Q3RvcigibWRjdiIsZnVuY3Rpb24odCl7dGhpcy5kaXNwbGF5X3ByaW1hcmllcz1bXSx0aGlzLmRpc3BsYXlfcHJpbWFyaWVzWzBdPXt9LHRoaXMuZGlzcGxheV9wcmltYXJpZXNbMF0ueD10LnJlYWRVaW50MTYoKSx0aGlzLmRpc3BsYXlfcHJpbWFyaWVzWzBdLnk9dC5yZWFkVWludDE2KCksdGhpcy5kaXNwbGF5X3ByaW1hcmllc1sxXT17fSx0aGlzLmRpc3BsYXlfcHJpbWFyaWVzWzFdLng9dC5yZWFkVWludDE2KCksdGhpcy5kaXNwbGF5X3ByaW1hcmllc1sxXS55PXQucmVhZFVpbnQxNigpLHRoaXMuZGlzcGxheV9wcmltYXJpZXNbMl09e30sdGhpcy5kaXNwbGF5X3ByaW1hcmllc1syXS54PXQucmVhZFVpbnQxNigpLHRoaXMuZGlzcGxheV9wcmltYXJpZXNbMl0ueT10LnJlYWRVaW50MTYoKSx0aGlzLndoaXRlX3BvaW50PXt9LHRoaXMud2hpdGVfcG9pbnQueD10LnJlYWRVaW50MTYoKSx0aGlzLndoaXRlX3BvaW50Lnk9dC5yZWFkVWludDE2KCksdGhpcy5tYXhfZGlzcGxheV9tYXN0ZXJpbmdfbHVtaW5hbmNlPXQucmVhZFVpbnQzMigpLHRoaXMubWluX2Rpc3BsYXlfbWFzdGVyaW5nX2x1bWluYW5jZT10LnJlYWRVaW50MzIoKX0pLHIuY3JlYXRlRnVsbEJveEN0b3IoIm1kaGQiLGZ1bmN0aW9uKHQpe3RoaXMudmVyc2lvbj09MT8odGhpcy5jcmVhdGlvbl90aW1lPXQucmVhZFVpbnQ2NCgpLHRoaXMubW9kaWZpY2F0aW9uX3RpbWU9dC5yZWFkVWludDY0KCksdGhpcy50aW1lc2NhbGU9dC5yZWFkVWludDMyKCksdGhpcy5kdXJhdGlvbj10LnJlYWRVaW50NjQoKSk6KHRoaXMuY3JlYXRpb25fdGltZT10LnJlYWRVaW50MzIoKSx0aGlzLm1vZGlmaWNhdGlvbl90aW1lPXQucmVhZFVpbnQzMigpLHRoaXMudGltZXNjYWxlPXQucmVhZFVpbnQzMigpLHRoaXMuZHVyYXRpb249dC5yZWFkVWludDMyKCkpLHRoaXMucGFyc2VMYW5ndWFnZSh0KSx0LnJlYWRVaW50MTYoKX0pLHIuY3JlYXRlRnVsbEJveEN0b3IoIm1laGQiLGZ1bmN0aW9uKHQpe3RoaXMuZmxhZ3MmMSYmKGQud2FybigiQm94UGFyc2VyIiwibWVoZCBib3ggaW5jb3JyZWN0bHkgdXNlcyBmbGFncyBzZXQgdG8gMSwgY29udmVydGluZyB2ZXJzaW9uIHRvIDEiKSx0aGlzLnZlcnNpb249MSksdGhpcy52ZXJzaW9uPT0xP3RoaXMuZnJhZ21lbnRfZHVyYXRpb249dC5yZWFkVWludDY0KCk6dGhpcy5mcmFnbWVudF9kdXJhdGlvbj10LnJlYWRVaW50MzIoKX0pLHIuY3JlYXRlRnVsbEJveEN0b3IoIm1ldGEiLGZ1bmN0aW9uKHQpe3RoaXMuYm94ZXM9W10sci5Db250YWluZXJCb3gucHJvdG90eXBlLnBhcnNlLmNhbGwodGhpcyx0KX0pLHIuY3JlYXRlRnVsbEJveEN0b3IoIm1maGQiLGZ1bmN0aW9uKHQpe3RoaXMuc2VxdWVuY2VfbnVtYmVyPXQucmVhZFVpbnQzMigpfSksci5jcmVhdGVGdWxsQm94Q3RvcigibWZybyIsZnVuY3Rpb24odCl7dGhpcy5fc2l6ZT10LnJlYWRVaW50MzIoKX0pLHIuY3JlYXRlRnVsbEJveEN0b3IoIm12aGQiLGZ1bmN0aW9uKHQpe3RoaXMudmVyc2lvbj09MT8odGhpcy5jcmVhdGlvbl90aW1lPXQucmVhZFVpbnQ2NCgpLHRoaXMubW9kaWZpY2F0aW9uX3RpbWU9dC5yZWFkVWludDY0KCksdGhpcy50aW1lc2NhbGU9dC5yZWFkVWludDMyKCksdGhpcy5kdXJhdGlvbj10LnJlYWRVaW50NjQoKSk6KHRoaXMuY3JlYXRpb25fdGltZT10LnJlYWRVaW50MzIoKSx0aGlzLm1vZGlmaWNhdGlvbl90aW1lPXQucmVhZFVpbnQzMigpLHRoaXMudGltZXNjYWxlPXQucmVhZFVpbnQzMigpLHRoaXMuZHVyYXRpb249dC5yZWFkVWludDMyKCkpLHRoaXMucmF0ZT10LnJlYWRVaW50MzIoKSx0aGlzLnZvbHVtZT10LnJlYWRVaW50MTYoKT4+OCx0LnJlYWRVaW50MTYoKSx0LnJlYWRVaW50MzJBcnJheSgyKSx0aGlzLm1hdHJpeD10LnJlYWRVaW50MzJBcnJheSg5KSx0LnJlYWRVaW50MzJBcnJheSg2KSx0aGlzLm5leHRfdHJhY2tfaWQ9dC5yZWFkVWludDMyKCl9KSxyLmNyZWF0ZUJveEN0b3IoIm5wY2siLGZ1bmN0aW9uKHQpe3RoaXMucGFja2V0c3NlbnQ9dC5yZWFkVWludDMyKCl9KSxyLmNyZWF0ZUJveEN0b3IoIm51bXAiLGZ1bmN0aW9uKHQpe3RoaXMucGFja2V0c3NlbnQ9dC5yZWFkVWludDY0KCl9KSxyLmNyZWF0ZUZ1bGxCb3hDdG9yKCJwYWRiIixmdW5jdGlvbih0KXt2YXIgZT10LnJlYWRVaW50MzIoKTt0aGlzLnBhZGJpdHM9W107Zm9yKHZhciBzPTA7czxNYXRoLmZsb29yKChlKzEpLzIpO3MrKyl0aGlzLnBhZGJpdHM9dC5yZWFkVWludDgoKX0pLHIuY3JlYXRlQm94Q3RvcigicGFzcCIsZnVuY3Rpb24odCl7dGhpcy5oU3BhY2luZz10LnJlYWRVaW50MzIoKSx0aGlzLnZTcGFjaW5nPXQucmVhZFVpbnQzMigpfSksci5jcmVhdGVCb3hDdG9yKCJwYXlsIixmdW5jdGlvbih0KXt0aGlzLnRleHQ9dC5yZWFkU3RyaW5nKHRoaXMuc2l6ZS10aGlzLmhkcl9zaXplKX0pLHIuY3JlYXRlQm94Q3RvcigicGF5dCIsZnVuY3Rpb24odCl7dGhpcy5wYXlsb2FkSUQ9dC5yZWFkVWludDMyKCk7dmFyIGU9dC5yZWFkVWludDgoKTt0aGlzLnJ0cG1hcF9zdHJpbmc9dC5yZWFkU3RyaW5nKGUpfSksci5jcmVhdGVGdWxsQm94Q3RvcigicGRpbiIsZnVuY3Rpb24odCl7dmFyIGU9KHRoaXMuc2l6ZS10aGlzLmhkcl9zaXplKS84O3RoaXMucmF0ZT1bXSx0aGlzLmluaXRpYWxfZGVsYXk9W107Zm9yKHZhciBzPTA7czxlO3MrKyl0aGlzLnJhdGVbc109dC5yZWFkVWludDMyKCksdGhpcy5pbml0aWFsX2RlbGF5W3NdPXQucmVhZFVpbnQzMigpfSksci5jcmVhdGVGdWxsQm94Q3RvcigicGl0bSIsZnVuY3Rpb24odCl7dGhpcy52ZXJzaW9uPT09MD90aGlzLml0ZW1faWQ9dC5yZWFkVWludDE2KCk6dGhpcy5pdGVtX2lkPXQucmVhZFVpbnQzMigpfSksci5jcmVhdGVGdWxsQm94Q3RvcigicGl4aSIsZnVuY3Rpb24odCl7dmFyIGU7Zm9yKHRoaXMubnVtX2NoYW5uZWxzPXQucmVhZFVpbnQ4KCksdGhpcy5iaXRzX3Blcl9jaGFubmVscz1bXSxlPTA7ZTx0aGlzLm51bV9jaGFubmVscztlKyspdGhpcy5iaXRzX3Blcl9jaGFubmVsc1tlXT10LnJlYWRVaW50OCgpfSksci5jcmVhdGVCb3hDdG9yKCJwbWF4IixmdW5jdGlvbih0KXt0aGlzLmJ5dGVzPXQucmVhZFVpbnQzMigpfSksci5jcmVhdGVGdWxsQm94Q3RvcigicHJkaSIsZnVuY3Rpb24odCl7aWYodGhpcy5zdGVwX2NvdW50PXQucmVhZFVpbnQxNigpLHRoaXMuaXRlbV9jb3VudD1bXSx0aGlzLmZsYWdzJjIpZm9yKHZhciBlPTA7ZTx0aGlzLnN0ZXBfY291bnQ7ZSsrKXRoaXMuaXRlbV9jb3VudFtlXT10LnJlYWRVaW50MTYoKX0pLHIuY3JlYXRlRnVsbEJveEN0b3IoInByZnQiLGZ1bmN0aW9uKHQpe3RoaXMucmVmX3RyYWNrX2lkPXQucmVhZFVpbnQzMigpLHRoaXMubnRwX3RpbWVzdGFtcD10LnJlYWRVaW50NjQoKSx0aGlzLnZlcnNpb249PT0wP3RoaXMubWVkaWFfdGltZT10LnJlYWRVaW50MzIoKTp0aGlzLm1lZGlhX3RpbWU9dC5yZWFkVWludDY0KCl9KSxyLmNyZWF0ZUZ1bGxCb3hDdG9yKCJwc3NoIixmdW5jdGlvbih0KXtpZih0aGlzLnN5c3RlbV9pZD1yLnBhcnNlSGV4MTYodCksdGhpcy52ZXJzaW9uPjApe3ZhciBlPXQucmVhZFVpbnQzMigpO3RoaXMua2lkPVtdO2Zvcih2YXIgcz0wO3M8ZTtzKyspdGhpcy5raWRbc109ci5wYXJzZUhleDE2KHQpfXZhciBuPXQucmVhZFVpbnQzMigpO24+MCYmKHRoaXMuZGF0YT10LnJlYWRVaW50OEFycmF5KG4pKX0pLHIuY3JlYXRlRnVsbEJveEN0b3IoImNsZWYiLGZ1bmN0aW9uKHQpe3RoaXMud2lkdGg9dC5yZWFkVWludDMyKCksdGhpcy5oZWlnaHQ9dC5yZWFkVWludDMyKCl9KSxyLmNyZWF0ZUZ1bGxCb3hDdG9yKCJlbm9mIixmdW5jdGlvbih0KXt0aGlzLndpZHRoPXQucmVhZFVpbnQzMigpLHRoaXMuaGVpZ2h0PXQucmVhZFVpbnQzMigpfSksci5jcmVhdGVGdWxsQm94Q3RvcigicHJvZiIsZnVuY3Rpb24odCl7dGhpcy53aWR0aD10LnJlYWRVaW50MzIoKSx0aGlzLmhlaWdodD10LnJlYWRVaW50MzIoKX0pLHIuY3JlYXRlQ29udGFpbmVyQm94Q3RvcigidGFwdCIsbnVsbCxbImNsZWYiLCJwcm9mIiwiZW5vZiJdKSxyLmNyZWF0ZUJveEN0b3IoInJ0cCAiLGZ1bmN0aW9uKHQpe3RoaXMuZGVzY3JpcHRpb25mb3JtYXQ9dC5yZWFkU3RyaW5nKDQpLHRoaXMuc2RwdGV4dD10LnJlYWRTdHJpbmcodGhpcy5zaXplLXRoaXMuaGRyX3NpemUtNCl9KSxyLmNyZWF0ZUZ1bGxCb3hDdG9yKCJzYWlvIixmdW5jdGlvbih0KXt0aGlzLmZsYWdzJjEmJih0aGlzLmF1eF9pbmZvX3R5cGU9dC5yZWFkVWludDMyKCksdGhpcy5hdXhfaW5mb190eXBlX3BhcmFtZXRlcj10LnJlYWRVaW50MzIoKSk7dmFyIGU9dC5yZWFkVWludDMyKCk7dGhpcy5vZmZzZXQ9W107Zm9yKHZhciBzPTA7czxlO3MrKyl0aGlzLnZlcnNpb249PT0wP3RoaXMub2Zmc2V0W3NdPXQucmVhZFVpbnQzMigpOnRoaXMub2Zmc2V0W3NdPXQucmVhZFVpbnQ2NCgpfSksci5jcmVhdGVGdWxsQm94Q3Rvcigic2FpeiIsZnVuY3Rpb24odCl7dGhpcy5mbGFncyYxJiYodGhpcy5hdXhfaW5mb190eXBlPXQucmVhZFVpbnQzMigpLHRoaXMuYXV4X2luZm9fdHlwZV9wYXJhbWV0ZXI9dC5yZWFkVWludDMyKCkpLHRoaXMuZGVmYXVsdF9zYW1wbGVfaW5mb19zaXplPXQucmVhZFVpbnQ4KCk7dmFyIGU9dC5yZWFkVWludDMyKCk7aWYodGhpcy5zYW1wbGVfaW5mb19zaXplPVtdLHRoaXMuZGVmYXVsdF9zYW1wbGVfaW5mb19zaXplPT09MClmb3IodmFyIHM9MDtzPGU7cysrKXRoaXMuc2FtcGxlX2luZm9fc2l6ZVtzXT10LnJlYWRVaW50OCgpfSksci5jcmVhdGVTYW1wbGVFbnRyeUN0b3Ioci5TQU1QTEVfRU5UUllfVFlQRV9NRVRBREFUQSwibWV0dCIsZnVuY3Rpb24odCl7dGhpcy5wYXJzZUhlYWRlcih0KSx0aGlzLmNvbnRlbnRfZW5jb2Rpbmc9dC5yZWFkQ1N0cmluZygpLHRoaXMubWltZV9mb3JtYXQ9dC5yZWFkQ1N0cmluZygpLHRoaXMucGFyc2VGb290ZXIodCl9KSxyLmNyZWF0ZVNhbXBsZUVudHJ5Q3RvcihyLlNBTVBMRV9FTlRSWV9UWVBFX01FVEFEQVRBLCJtZXR4IixmdW5jdGlvbih0KXt0aGlzLnBhcnNlSGVhZGVyKHQpLHRoaXMuY29udGVudF9lbmNvZGluZz10LnJlYWRDU3RyaW5nKCksdGhpcy5uYW1lc3BhY2U9dC5yZWFkQ1N0cmluZygpLHRoaXMuc2NoZW1hX2xvY2F0aW9uPXQucmVhZENTdHJpbmcoKSx0aGlzLnBhcnNlRm9vdGVyKHQpfSksci5jcmVhdGVTYW1wbGVFbnRyeUN0b3Ioci5TQU1QTEVfRU5UUllfVFlQRV9TVUJUSVRMRSwic2J0dCIsZnVuY3Rpb24odCl7dGhpcy5wYXJzZUhlYWRlcih0KSx0aGlzLmNvbnRlbnRfZW5jb2Rpbmc9dC5yZWFkQ1N0cmluZygpLHRoaXMubWltZV9mb3JtYXQ9dC5yZWFkQ1N0cmluZygpLHRoaXMucGFyc2VGb290ZXIodCl9KSxyLmNyZWF0ZVNhbXBsZUVudHJ5Q3RvcihyLlNBTVBMRV9FTlRSWV9UWVBFX1NVQlRJVExFLCJzdHBwIixmdW5jdGlvbih0KXt0aGlzLnBhcnNlSGVhZGVyKHQpLHRoaXMubmFtZXNwYWNlPXQucmVhZENTdHJpbmcoKSx0aGlzLnNjaGVtYV9sb2NhdGlvbj10LnJlYWRDU3RyaW5nKCksdGhpcy5hdXhpbGlhcnlfbWltZV90eXBlcz10LnJlYWRDU3RyaW5nKCksdGhpcy5wYXJzZUZvb3Rlcih0KX0pLHIuY3JlYXRlU2FtcGxlRW50cnlDdG9yKHIuU0FNUExFX0VOVFJZX1RZUEVfU1VCVElUTEUsInN0eHQiLGZ1bmN0aW9uKHQpe3RoaXMucGFyc2VIZWFkZXIodCksdGhpcy5jb250ZW50X2VuY29kaW5nPXQucmVhZENTdHJpbmcoKSx0aGlzLm1pbWVfZm9ybWF0PXQucmVhZENTdHJpbmcoKSx0aGlzLnBhcnNlRm9vdGVyKHQpfSksci5jcmVhdGVTYW1wbGVFbnRyeUN0b3Ioci5TQU1QTEVfRU5UUllfVFlQRV9TVUJUSVRMRSwidHgzZyIsZnVuY3Rpb24odCl7dGhpcy5wYXJzZUhlYWRlcih0KSx0aGlzLmRpc3BsYXlGbGFncz10LnJlYWRVaW50MzIoKSx0aGlzLmhvcml6b250YWxfanVzdGlmaWNhdGlvbj10LnJlYWRJbnQ4KCksdGhpcy52ZXJ0aWNhbF9qdXN0aWZpY2F0aW9uPXQucmVhZEludDgoKSx0aGlzLmJnX2NvbG9yX3JnYmE9dC5yZWFkVWludDhBcnJheSg0KSx0aGlzLmJveF9yZWNvcmQ9dC5yZWFkSW50MTZBcnJheSg0KSx0aGlzLnN0eWxlX3JlY29yZD10LnJlYWRVaW50OEFycmF5KDEyKSx0aGlzLnBhcnNlRm9vdGVyKHQpfSksci5jcmVhdGVTYW1wbGVFbnRyeUN0b3Ioci5TQU1QTEVfRU5UUllfVFlQRV9NRVRBREFUQSwid3Z0dCIsZnVuY3Rpb24odCl7dGhpcy5wYXJzZUhlYWRlcih0KSx0aGlzLnBhcnNlRm9vdGVyKHQpfSksci5jcmVhdGVTYW1wbGVHcm91cEN0b3IoImFsc3QiLGZ1bmN0aW9uKHQpe3ZhciBlLHM9dC5yZWFkVWludDE2KCk7Zm9yKHRoaXMuZmlyc3Rfb3V0cHV0X3NhbXBsZT10LnJlYWRVaW50MTYoKSx0aGlzLnNhbXBsZV9vZmZzZXQ9W10sZT0wO2U8cztlKyspdGhpcy5zYW1wbGVfb2Zmc2V0W2VdPXQucmVhZFVpbnQzMigpO3ZhciBuPXRoaXMuZGVzY3JpcHRpb25fbGVuZ3RoLTQtNCpzO2Zvcih0aGlzLm51bV9vdXRwdXRfc2FtcGxlcz1bXSx0aGlzLm51bV90b3RhbF9zYW1wbGVzPVtdLGU9MDtlPG4vNDtlKyspdGhpcy5udW1fb3V0cHV0X3NhbXBsZXNbZV09dC5yZWFkVWludDE2KCksdGhpcy5udW1fdG90YWxfc2FtcGxlc1tlXT10LnJlYWRVaW50MTYoKX0pLHIuY3JlYXRlU2FtcGxlR3JvdXBDdG9yKCJhdmxsIixmdW5jdGlvbih0KXt0aGlzLmxheWVyTnVtYmVyPXQucmVhZFVpbnQ4KCksdGhpcy5hY2N1cmF0ZVN0YXRpc3RpY3NGbGFnPXQucmVhZFVpbnQ4KCksdGhpcy5hdmdCaXRSYXRlPXQucmVhZFVpbnQxNigpLHRoaXMuYXZnRnJhbWVSYXRlPXQucmVhZFVpbnQxNigpfSksci5jcmVhdGVTYW1wbGVHcm91cEN0b3IoImF2c3MiLGZ1bmN0aW9uKHQpe3RoaXMuc3ViU2VxdWVuY2VJZGVudGlmaWVyPXQucmVhZFVpbnQxNigpLHRoaXMubGF5ZXJOdW1iZXI9dC5yZWFkVWludDgoKTt2YXIgZT10LnJlYWRVaW50OCgpO3RoaXMuZHVyYXRpb25GbGFnPWU+PjcsdGhpcy5hdmdSYXRlRmxhZz1lPj42JjEsdGhpcy5kdXJhdGlvbkZsYWcmJih0aGlzLmR1cmF0aW9uPXQucmVhZFVpbnQzMigpKSx0aGlzLmF2Z1JhdGVGbGFnJiYodGhpcy5hY2N1cmF0ZVN0YXRpc3RpY3NGbGFnPXQucmVhZFVpbnQ4KCksdGhpcy5hdmdCaXRSYXRlPXQucmVhZFVpbnQxNigpLHRoaXMuYXZnRnJhbWVSYXRlPXQucmVhZFVpbnQxNigpKSx0aGlzLmRlcGVuZGVuY3k9W107Zm9yKHZhciBzPXQucmVhZFVpbnQ4KCksbj0wO248cztuKyspe3ZhciBhPXt9O3RoaXMuZGVwZW5kZW5jeS5wdXNoKGEpLGEuc3ViU2VxRGlyZWN0aW9uRmxhZz10LnJlYWRVaW50OCgpLGEubGF5ZXJOdW1iZXI9dC5yZWFkVWludDgoKSxhLnN1YlNlcXVlbmNlSWRlbnRpZmllcj10LnJlYWRVaW50MTYoKX19KSxyLmNyZWF0ZVNhbXBsZUdyb3VwQ3RvcigiZHRydCIsZnVuY3Rpb24odCl7ZC53YXJuKCJCb3hQYXJzZXIiLCJTYW1wbGUgR3JvdXAgdHlwZTogIit0aGlzLmdyb3VwaW5nX3R5cGUrIiBub3QgZnVsbHkgcGFyc2VkIil9KSxyLmNyZWF0ZVNhbXBsZUdyb3VwQ3RvcigibXZpZiIsZnVuY3Rpb24odCl7ZC53YXJuKCJCb3hQYXJzZXIiLCJTYW1wbGUgR3JvdXAgdHlwZTogIit0aGlzLmdyb3VwaW5nX3R5cGUrIiBub3QgZnVsbHkgcGFyc2VkIil9KSxyLmNyZWF0ZVNhbXBsZUdyb3VwQ3RvcigicHJvbCIsZnVuY3Rpb24odCl7dGhpcy5yb2xsX2Rpc3RhbmNlPXQucmVhZEludDE2KCl9KSxyLmNyZWF0ZVNhbXBsZUdyb3VwQ3RvcigicmFwICIsZnVuY3Rpb24odCl7dmFyIGU9dC5yZWFkVWludDgoKTt0aGlzLm51bV9sZWFkaW5nX3NhbXBsZXNfa25vd249ZT4+Nyx0aGlzLm51bV9sZWFkaW5nX3NhbXBsZXM9ZSYxMjd9KSxyLmNyZWF0ZVNhbXBsZUdyb3VwQ3RvcigicmFzaCIsZnVuY3Rpb24odCl7aWYodGhpcy5vcGVyYXRpb25fcG9pbnRfY291bnQ9dC5yZWFkVWludDE2KCksdGhpcy5kZXNjcmlwdGlvbl9sZW5ndGghPT0yKyh0aGlzLm9wZXJhdGlvbl9wb2ludF9jb3VudD09PTE/Mjp0aGlzLm9wZXJhdGlvbl9wb2ludF9jb3VudCo2KSs5KWQud2FybigiQm94UGFyc2VyIiwiTWlzbWF0Y2ggaW4gIit0aGlzLmdyb3VwaW5nX3R5cGUrIiBzYW1wbGUgZ3JvdXAgbGVuZ3RoIiksdGhpcy5kYXRhPXQucmVhZFVpbnQ4QXJyYXkodGhpcy5kZXNjcmlwdGlvbl9sZW5ndGgtMik7ZWxzZXtpZih0aGlzLm9wZXJhdGlvbl9wb2ludF9jb3VudD09PTEpdGhpcy50YXJnZXRfcmF0ZV9zaGFyZT10LnJlYWRVaW50MTYoKTtlbHNle3RoaXMudGFyZ2V0X3JhdGVfc2hhcmU9W10sdGhpcy5hdmFpbGFibGVfYml0cmF0ZT1bXTtmb3IodmFyIGU9MDtlPHRoaXMub3BlcmF0aW9uX3BvaW50X2NvdW50O2UrKyl0aGlzLmF2YWlsYWJsZV9iaXRyYXRlW2VdPXQucmVhZFVpbnQzMigpLHRoaXMudGFyZ2V0X3JhdGVfc2hhcmVbZV09dC5yZWFkVWludDE2KCl9dGhpcy5tYXhpbXVtX2JpdHJhdGU9dC5yZWFkVWludDMyKCksdGhpcy5taW5pbXVtX2JpdHJhdGU9dC5yZWFkVWludDMyKCksdGhpcy5kaXNjYXJkX3ByaW9yaXR5PXQucmVhZFVpbnQ4KCl9fSksci5jcmVhdGVTYW1wbGVHcm91cEN0b3IoInJvbGwiLGZ1bmN0aW9uKHQpe3RoaXMucm9sbF9kaXN0YW5jZT10LnJlYWRJbnQxNigpfSksci5TYW1wbGVHcm91cEVudHJ5LnByb3RvdHlwZS5wYXJzZT1mdW5jdGlvbih0KXtkLndhcm4oIkJveFBhcnNlciIsIlVua25vd24gU2FtcGxlIEdyb3VwIHR5cGU6ICIrdGhpcy5ncm91cGluZ190eXBlKSx0aGlzLmRhdGE9dC5yZWFkVWludDhBcnJheSh0aGlzLmRlc2NyaXB0aW9uX2xlbmd0aCl9LHIuY3JlYXRlU2FtcGxlR3JvdXBDdG9yKCJzY2lmIixmdW5jdGlvbih0KXtkLndhcm4oIkJveFBhcnNlciIsIlNhbXBsZSBHcm91cCB0eXBlOiAiK3RoaXMuZ3JvdXBpbmdfdHlwZSsiIG5vdCBmdWxseSBwYXJzZWQiKX0pLHIuY3JlYXRlU2FtcGxlR3JvdXBDdG9yKCJzY25tIixmdW5jdGlvbih0KXtkLndhcm4oIkJveFBhcnNlciIsIlNhbXBsZSBHcm91cCB0eXBlOiAiK3RoaXMuZ3JvdXBpbmdfdHlwZSsiIG5vdCBmdWxseSBwYXJzZWQiKX0pLHIuY3JlYXRlU2FtcGxlR3JvdXBDdG9yKCJzZWlnIixmdW5jdGlvbih0KXt0aGlzLnJlc2VydmVkPXQucmVhZFVpbnQ4KCk7dmFyIGU9dC5yZWFkVWludDgoKTt0aGlzLmNyeXB0X2J5dGVfYmxvY2s9ZT4+NCx0aGlzLnNraXBfYnl0ZV9ibG9jaz1lJjE1LHRoaXMuaXNQcm90ZWN0ZWQ9dC5yZWFkVWludDgoKSx0aGlzLlBlcl9TYW1wbGVfSVZfU2l6ZT10LnJlYWRVaW50OCgpLHRoaXMuS0lEPXIucGFyc2VIZXgxNih0KSx0aGlzLmNvbnN0YW50X0lWX3NpemU9MCx0aGlzLmNvbnN0YW50X0lWPTAsdGhpcy5pc1Byb3RlY3RlZD09PTEmJnRoaXMuUGVyX1NhbXBsZV9JVl9TaXplPT09MCYmKHRoaXMuY29uc3RhbnRfSVZfc2l6ZT10LnJlYWRVaW50OCgpLHRoaXMuY29uc3RhbnRfSVY9dC5yZWFkVWludDhBcnJheSh0aGlzLmNvbnN0YW50X0lWX3NpemUpKX0pLHIuY3JlYXRlU2FtcGxlR3JvdXBDdG9yKCJzdHNhIixmdW5jdGlvbih0KXtkLndhcm4oIkJveFBhcnNlciIsIlNhbXBsZSBHcm91cCB0eXBlOiAiK3RoaXMuZ3JvdXBpbmdfdHlwZSsiIG5vdCBmdWxseSBwYXJzZWQiKX0pLHIuY3JlYXRlU2FtcGxlR3JvdXBDdG9yKCJzeW5jIixmdW5jdGlvbih0KXt2YXIgZT10LnJlYWRVaW50OCgpO3RoaXMuTkFMX3VuaXRfdHlwZT1lJjYzfSksci5jcmVhdGVTYW1wbGVHcm91cEN0b3IoInRlbGUiLGZ1bmN0aW9uKHQpe3ZhciBlPXQucmVhZFVpbnQ4KCk7dGhpcy5sZXZlbF9pbmRlcGVuZGVudGx5X2RlY29kYWJsZT1lPj43fSksci5jcmVhdGVTYW1wbGVHcm91cEN0b3IoInRzYXMiLGZ1bmN0aW9uKHQpe2Qud2FybigiQm94UGFyc2VyIiwiU2FtcGxlIEdyb3VwIHR5cGU6ICIrdGhpcy5ncm91cGluZ190eXBlKyIgbm90IGZ1bGx5IHBhcnNlZCIpfSksci5jcmVhdGVTYW1wbGVHcm91cEN0b3IoInRzY2wiLGZ1bmN0aW9uKHQpe2Qud2FybigiQm94UGFyc2VyIiwiU2FtcGxlIEdyb3VwIHR5cGU6ICIrdGhpcy5ncm91cGluZ190eXBlKyIgbm90IGZ1bGx5IHBhcnNlZCIpfSksci5jcmVhdGVTYW1wbGVHcm91cEN0b3IoInZpcHIiLGZ1bmN0aW9uKHQpe2Qud2FybigiQm94UGFyc2VyIiwiU2FtcGxlIEdyb3VwIHR5cGU6ICIrdGhpcy5ncm91cGluZ190eXBlKyIgbm90IGZ1bGx5IHBhcnNlZCIpfSksci5jcmVhdGVGdWxsQm94Q3Rvcigic2JncCIsZnVuY3Rpb24odCl7dGhpcy5ncm91cGluZ190eXBlPXQucmVhZFN0cmluZyg0KSx0aGlzLnZlcnNpb249PT0xP3RoaXMuZ3JvdXBpbmdfdHlwZV9wYXJhbWV0ZXI9dC5yZWFkVWludDMyKCk6dGhpcy5ncm91cGluZ190eXBlX3BhcmFtZXRlcj0wLHRoaXMuZW50cmllcz1bXTtmb3IodmFyIGU9dC5yZWFkVWludDMyKCkscz0wO3M8ZTtzKyspe3ZhciBuPXt9O3RoaXMuZW50cmllcy5wdXNoKG4pLG4uc2FtcGxlX2NvdW50PXQucmVhZEludDMyKCksbi5ncm91cF9kZXNjcmlwdGlvbl9pbmRleD10LnJlYWRJbnQzMigpfX0pLHIuY3JlYXRlRnVsbEJveEN0b3IoInNjaG0iLGZ1bmN0aW9uKHQpe3RoaXMuc2NoZW1lX3R5cGU9dC5yZWFkU3RyaW5nKDQpLHRoaXMuc2NoZW1lX3ZlcnNpb249dC5yZWFkVWludDMyKCksdGhpcy5mbGFncyYxJiYodGhpcy5zY2hlbWVfdXJpPXQucmVhZFN0cmluZyh0aGlzLnNpemUtdGhpcy5oZHJfc2l6ZS04KSl9KSxyLmNyZWF0ZUJveEN0b3IoInNkcCAiLGZ1bmN0aW9uKHQpe3RoaXMuc2RwdGV4dD10LnJlYWRTdHJpbmcodGhpcy5zaXplLXRoaXMuaGRyX3NpemUpfSksci5jcmVhdGVGdWxsQm94Q3Rvcigic2R0cCIsZnVuY3Rpb24odCl7dmFyIGUscz10aGlzLnNpemUtdGhpcy5oZHJfc2l6ZTt0aGlzLmlzX2xlYWRpbmc9W10sdGhpcy5zYW1wbGVfZGVwZW5kc19vbj1bXSx0aGlzLnNhbXBsZV9pc19kZXBlbmRlZF9vbj1bXSx0aGlzLnNhbXBsZV9oYXNfcmVkdW5kYW5jeT1bXTtmb3IodmFyIG49MDtuPHM7bisrKWU9dC5yZWFkVWludDgoKSx0aGlzLmlzX2xlYWRpbmdbbl09ZT4+Nix0aGlzLnNhbXBsZV9kZXBlbmRzX29uW25dPWU+PjQmMyx0aGlzLnNhbXBsZV9pc19kZXBlbmRlZF9vbltuXT1lPj4yJjMsdGhpcy5zYW1wbGVfaGFzX3JlZHVuZGFuY3lbbl09ZSYzfSksci5jcmVhdGVGdWxsQm94Q3Rvcigic2VuYyIpLHIuY3JlYXRlRnVsbEJveEN0b3IoInNncGQiLGZ1bmN0aW9uKHQpe3RoaXMuZ3JvdXBpbmdfdHlwZT10LnJlYWRTdHJpbmcoNCksZC5kZWJ1ZygiQm94UGFyc2VyIiwiRm91bmQgU2FtcGxlIEdyb3VwcyBvZiB0eXBlICIrdGhpcy5ncm91cGluZ190eXBlKSx0aGlzLnZlcnNpb249PT0xP3RoaXMuZGVmYXVsdF9sZW5ndGg9dC5yZWFkVWludDMyKCk6dGhpcy5kZWZhdWx0X2xlbmd0aD0wLHRoaXMudmVyc2lvbj49MiYmKHRoaXMuZGVmYXVsdF9ncm91cF9kZXNjcmlwdGlvbl9pbmRleD10LnJlYWRVaW50MzIoKSksdGhpcy5lbnRyaWVzPVtdO2Zvcih2YXIgZT10LnJlYWRVaW50MzIoKSxzPTA7czxlO3MrKyl7dmFyIG47clt0aGlzLmdyb3VwaW5nX3R5cGUrIlNhbXBsZUdyb3VwRW50cnkiXT9uPW5ldyByW3RoaXMuZ3JvdXBpbmdfdHlwZSsiU2FtcGxlR3JvdXBFbnRyeSJdKHRoaXMuZ3JvdXBpbmdfdHlwZSk6bj1uZXcgci5TYW1wbGVHcm91cEVudHJ5KHRoaXMuZ3JvdXBpbmdfdHlwZSksdGhpcy5lbnRyaWVzLnB1c2gobiksdGhpcy52ZXJzaW9uPT09MT90aGlzLmRlZmF1bHRfbGVuZ3RoPT09MD9uLmRlc2NyaXB0aW9uX2xlbmd0aD10LnJlYWRVaW50MzIoKTpuLmRlc2NyaXB0aW9uX2xlbmd0aD10aGlzLmRlZmF1bHRfbGVuZ3RoOm4uZGVzY3JpcHRpb25fbGVuZ3RoPXRoaXMuZGVmYXVsdF9sZW5ndGgsbi53cml0ZT09PXIuU2FtcGxlR3JvdXBFbnRyeS5wcm90b3R5cGUud3JpdGUmJihkLmluZm8oIkJveFBhcnNlciIsIlNhbXBsZUdyb3VwIGZvciB0eXBlICIrdGhpcy5ncm91cGluZ190eXBlKyIgd3JpdGluZyBub3QgeWV0IGltcGxlbWVudGVkLCBrZWVwaW5nIHVucGFyc2VkIGRhdGEgaW4gbWVtb3J5IGZvciBsYXRlciB3cml0ZSIpLG4uZGF0YT10LnJlYWRVaW50OEFycmF5KG4uZGVzY3JpcHRpb25fbGVuZ3RoKSx0LnBvc2l0aW9uLT1uLmRlc2NyaXB0aW9uX2xlbmd0aCksbi5wYXJzZSh0KX19KSxyLmNyZWF0ZUZ1bGxCb3hDdG9yKCJzaWR4IixmdW5jdGlvbih0KXt0aGlzLnJlZmVyZW5jZV9JRD10LnJlYWRVaW50MzIoKSx0aGlzLnRpbWVzY2FsZT10LnJlYWRVaW50MzIoKSx0aGlzLnZlcnNpb249PT0wPyh0aGlzLmVhcmxpZXN0X3ByZXNlbnRhdGlvbl90aW1lPXQucmVhZFVpbnQzMigpLHRoaXMuZmlyc3Rfb2Zmc2V0PXQucmVhZFVpbnQzMigpKToodGhpcy5lYXJsaWVzdF9wcmVzZW50YXRpb25fdGltZT10LnJlYWRVaW50NjQoKSx0aGlzLmZpcnN0X29mZnNldD10LnJlYWRVaW50NjQoKSksdC5yZWFkVWludDE2KCksdGhpcy5yZWZlcmVuY2VzPVtdO2Zvcih2YXIgZT10LnJlYWRVaW50MTYoKSxzPTA7czxlO3MrKyl7dmFyIG49e307dGhpcy5yZWZlcmVuY2VzLnB1c2gobik7dmFyIGE9dC5yZWFkVWludDMyKCk7bi5yZWZlcmVuY2VfdHlwZT1hPj4zMSYxLG4ucmVmZXJlbmNlZF9zaXplPWEmMjE0NzQ4MzY0NyxuLnN1YnNlZ21lbnRfZHVyYXRpb249dC5yZWFkVWludDMyKCksYT10LnJlYWRVaW50MzIoKSxuLnN0YXJ0c193aXRoX1NBUD1hPj4zMSYxLG4uU0FQX3R5cGU9YT4+MjgmNyxuLlNBUF9kZWx0YV90aW1lPWEmMjY4NDM1NDU1fX0pLHIuU2luZ2xlSXRlbVR5cGVSZWZlcmVuY2VCb3g9ZnVuY3Rpb24odCxlLHMsbil7ci5Cb3guY2FsbCh0aGlzLHQsZSksdGhpcy5oZHJfc2l6ZT1zLHRoaXMuc3RhcnQ9bn0sci5TaW5nbGVJdGVtVHlwZVJlZmVyZW5jZUJveC5wcm90b3R5cGU9bmV3IHIuQm94LHIuU2luZ2xlSXRlbVR5cGVSZWZlcmVuY2VCb3gucHJvdG90eXBlLnBhcnNlPWZ1bmN0aW9uKHQpe3RoaXMuZnJvbV9pdGVtX0lEPXQucmVhZFVpbnQxNigpO3ZhciBlPXQucmVhZFVpbnQxNigpO3RoaXMucmVmZXJlbmNlcz1bXTtmb3IodmFyIHM9MDtzPGU7cysrKXRoaXMucmVmZXJlbmNlc1tzXT17fSx0aGlzLnJlZmVyZW5jZXNbc10udG9faXRlbV9JRD10LnJlYWRVaW50MTYoKX0sci5TaW5nbGVJdGVtVHlwZVJlZmVyZW5jZUJveExhcmdlPWZ1bmN0aW9uKHQsZSxzLG4pe3IuQm94LmNhbGwodGhpcyx0LGUpLHRoaXMuaGRyX3NpemU9cyx0aGlzLnN0YXJ0PW59LHIuU2luZ2xlSXRlbVR5cGVSZWZlcmVuY2VCb3hMYXJnZS5wcm90b3R5cGU9bmV3IHIuQm94LHIuU2luZ2xlSXRlbVR5cGVSZWZlcmVuY2VCb3hMYXJnZS5wcm90b3R5cGUucGFyc2U9ZnVuY3Rpb24odCl7dGhpcy5mcm9tX2l0ZW1fSUQ9dC5yZWFkVWludDMyKCk7dmFyIGU9dC5yZWFkVWludDE2KCk7dGhpcy5yZWZlcmVuY2VzPVtdO2Zvcih2YXIgcz0wO3M8ZTtzKyspdGhpcy5yZWZlcmVuY2VzW3NdPXt9LHRoaXMucmVmZXJlbmNlc1tzXS50b19pdGVtX0lEPXQucmVhZFVpbnQzMigpfSxyLmNyZWF0ZUZ1bGxCb3hDdG9yKCJTbURtIixmdW5jdGlvbih0KXt0aGlzLnByaW1hcnlSQ2hyb21hdGljaXR5X3g9dC5yZWFkVWludDE2KCksdGhpcy5wcmltYXJ5UkNocm9tYXRpY2l0eV95PXQucmVhZFVpbnQxNigpLHRoaXMucHJpbWFyeUdDaHJvbWF0aWNpdHlfeD10LnJlYWRVaW50MTYoKSx0aGlzLnByaW1hcnlHQ2hyb21hdGljaXR5X3k9dC5yZWFkVWludDE2KCksdGhpcy5wcmltYXJ5QkNocm9tYXRpY2l0eV94PXQucmVhZFVpbnQxNigpLHRoaXMucHJpbWFyeUJDaHJvbWF0aWNpdHlfeT10LnJlYWRVaW50MTYoKSx0aGlzLndoaXRlUG9pbnRDaHJvbWF0aWNpdHlfeD10LnJlYWRVaW50MTYoKSx0aGlzLndoaXRlUG9pbnRDaHJvbWF0aWNpdHlfeT10LnJlYWRVaW50MTYoKSx0aGlzLmx1bWluYW5jZU1heD10LnJlYWRVaW50MzIoKSx0aGlzLmx1bWluYW5jZU1pbj10LnJlYWRVaW50MzIoKX0pLHIuY3JlYXRlRnVsbEJveEN0b3IoInNtaGQiLGZ1bmN0aW9uKHQpe3RoaXMuYmFsYW5jZT10LnJlYWRVaW50MTYoKSx0LnJlYWRVaW50MTYoKX0pLHIuY3JlYXRlRnVsbEJveEN0b3IoInNzaXgiLGZ1bmN0aW9uKHQpe3RoaXMuc3Vic2VnbWVudHM9W107Zm9yKHZhciBlPXQucmVhZFVpbnQzMigpLHM9MDtzPGU7cysrKXt2YXIgbj17fTt0aGlzLnN1YnNlZ21lbnRzLnB1c2gobiksbi5yYW5nZXM9W107Zm9yKHZhciBhPXQucmVhZFVpbnQzMigpLG89MDtvPGE7bysrKXt2YXIgaD17fTtuLnJhbmdlcy5wdXNoKGgpLGgubGV2ZWw9dC5yZWFkVWludDgoKSxoLnJhbmdlX3NpemU9dC5yZWFkVWludDI0KCl9fX0pLHIuY3JlYXRlRnVsbEJveEN0b3IoInN0Y28iLGZ1bmN0aW9uKHQpe3ZhciBlO2lmKGU9dC5yZWFkVWludDMyKCksdGhpcy5jaHVua19vZmZzZXRzPVtdLHRoaXMudmVyc2lvbj09PTApZm9yKHZhciBzPTA7czxlO3MrKyl0aGlzLmNodW5rX29mZnNldHMucHVzaCh0LnJlYWRVaW50MzIoKSl9KSxyLmNyZWF0ZUZ1bGxCb3hDdG9yKCJzdGRwIixmdW5jdGlvbih0KXt2YXIgZT0odGhpcy5zaXplLXRoaXMuaGRyX3NpemUpLzI7dGhpcy5wcmlvcml0eT1bXTtmb3IodmFyIHM9MDtzPGU7cysrKXRoaXMucHJpb3JpdHlbc109dC5yZWFkVWludDE2KCl9KSxyLmNyZWF0ZUZ1bGxCb3hDdG9yKCJzdGhkIiksci5jcmVhdGVGdWxsQm94Q3Rvcigic3RyaSIsZnVuY3Rpb24odCl7dGhpcy5zd2l0Y2hfZ3JvdXA9dC5yZWFkVWludDE2KCksdGhpcy5hbHRlcm5hdGVfZ3JvdXA9dC5yZWFkVWludDE2KCksdGhpcy5zdWJfdHJhY2tfaWQ9dC5yZWFkVWludDMyKCk7dmFyIGU9KHRoaXMuc2l6ZS10aGlzLmhkcl9zaXplLTgpLzQ7dGhpcy5hdHRyaWJ1dGVfbGlzdD1bXTtmb3IodmFyIHM9MDtzPGU7cysrKXRoaXMuYXR0cmlidXRlX2xpc3Rbc109dC5yZWFkVWludDMyKCl9KSxyLmNyZWF0ZUZ1bGxCb3hDdG9yKCJzdHNjIixmdW5jdGlvbih0KXt2YXIgZSxzO2lmKGU9dC5yZWFkVWludDMyKCksdGhpcy5maXJzdF9jaHVuaz1bXSx0aGlzLnNhbXBsZXNfcGVyX2NodW5rPVtdLHRoaXMuc2FtcGxlX2Rlc2NyaXB0aW9uX2luZGV4PVtdLHRoaXMudmVyc2lvbj09PTApZm9yKHM9MDtzPGU7cysrKXRoaXMuZmlyc3RfY2h1bmsucHVzaCh0LnJlYWRVaW50MzIoKSksdGhpcy5zYW1wbGVzX3Blcl9jaHVuay5wdXNoKHQucmVhZFVpbnQzMigpKSx0aGlzLnNhbXBsZV9kZXNjcmlwdGlvbl9pbmRleC5wdXNoKHQucmVhZFVpbnQzMigpKX0pLHIuY3JlYXRlRnVsbEJveEN0b3IoInN0c2QiLGZ1bmN0aW9uKHQpe3ZhciBlLHMsbixhO2Zvcih0aGlzLmVudHJpZXM9W10sbj10LnJlYWRVaW50MzIoKSxlPTE7ZTw9bjtlKyspaWYocz1yLnBhcnNlT25lQm94KHQsITAsdGhpcy5zaXplLSh0LmdldFBvc2l0aW9uKCktdGhpcy5zdGFydCkpLHMuY29kZT09PXIuT0spcltzLnR5cGUrIlNhbXBsZUVudHJ5Il0/KGE9bmV3IHJbcy50eXBlKyJTYW1wbGVFbnRyeSJdKHMuc2l6ZSksYS5oZHJfc2l6ZT1zLmhkcl9zaXplLGEuc3RhcnQ9cy5zdGFydCk6KGQud2FybigiQm94UGFyc2VyIiwiVW5rbm93biBzYW1wbGUgZW50cnkgdHlwZTogIitzLnR5cGUpLGE9bmV3IHIuU2FtcGxlRW50cnkocy50eXBlLHMuc2l6ZSxzLmhkcl9zaXplLHMuc3RhcnQpKSxhLndyaXRlPT09ci5TYW1wbGVFbnRyeS5wcm90b3R5cGUud3JpdGUmJihkLmluZm8oIkJveFBhcnNlciIsIlNhbXBsZUVudHJ5ICIrYS50eXBlKyIgYm94IHdyaXRpbmcgbm90IHlldCBpbXBsZW1lbnRlZCwga2VlcGluZyB1bnBhcnNlZCBkYXRhIGluIG1lbW9yeSBmb3IgbGF0ZXIgd3JpdGUiKSxhLnBhcnNlRGF0YUFuZFJld2luZCh0KSksYS5wYXJzZSh0KSx0aGlzLmVudHJpZXMucHVzaChhKTtlbHNlIHJldHVybn0pLHIuY3JlYXRlRnVsbEJveEN0b3IoInN0c2ciLGZ1bmN0aW9uKHQpe3RoaXMuZ3JvdXBpbmdfdHlwZT10LnJlYWRVaW50MzIoKTt2YXIgZT10LnJlYWRVaW50MTYoKTt0aGlzLmdyb3VwX2Rlc2NyaXB0aW9uX2luZGV4PVtdO2Zvcih2YXIgcz0wO3M8ZTtzKyspdGhpcy5ncm91cF9kZXNjcmlwdGlvbl9pbmRleFtzXT10LnJlYWRVaW50MzIoKX0pLHIuY3JlYXRlRnVsbEJveEN0b3IoInN0c2giLGZ1bmN0aW9uKHQpe3ZhciBlLHM7aWYoZT10LnJlYWRVaW50MzIoKSx0aGlzLnNoYWRvd2VkX3NhbXBsZV9udW1iZXJzPVtdLHRoaXMuc3luY19zYW1wbGVfbnVtYmVycz1bXSx0aGlzLnZlcnNpb249PT0wKWZvcihzPTA7czxlO3MrKyl0aGlzLnNoYWRvd2VkX3NhbXBsZV9udW1iZXJzLnB1c2godC5yZWFkVWludDMyKCkpLHRoaXMuc3luY19zYW1wbGVfbnVtYmVycy5wdXNoKHQucmVhZFVpbnQzMigpKX0pLHIuY3JlYXRlRnVsbEJveEN0b3IoInN0c3MiLGZ1bmN0aW9uKHQpe3ZhciBlLHM7aWYocz10LnJlYWRVaW50MzIoKSx0aGlzLnZlcnNpb249PT0wKWZvcih0aGlzLnNhbXBsZV9udW1iZXJzPVtdLGU9MDtlPHM7ZSsrKXRoaXMuc2FtcGxlX251bWJlcnMucHVzaCh0LnJlYWRVaW50MzIoKSl9KSxyLmNyZWF0ZUZ1bGxCb3hDdG9yKCJzdHN6IixmdW5jdGlvbih0KXt2YXIgZTtpZih0aGlzLnNhbXBsZV9zaXplcz1bXSx0aGlzLnZlcnNpb249PT0wKWZvcih0aGlzLnNhbXBsZV9zaXplPXQucmVhZFVpbnQzMigpLHRoaXMuc2FtcGxlX2NvdW50PXQucmVhZFVpbnQzMigpLGU9MDtlPHRoaXMuc2FtcGxlX2NvdW50O2UrKyl0aGlzLnNhbXBsZV9zaXplPT09MD90aGlzLnNhbXBsZV9zaXplcy5wdXNoKHQucmVhZFVpbnQzMigpKTp0aGlzLnNhbXBsZV9zaXplc1tlXT10aGlzLnNhbXBsZV9zaXplfSksci5jcmVhdGVGdWxsQm94Q3Rvcigic3R0cyIsZnVuY3Rpb24odCl7dmFyIGUscyxuO2lmKGU9dC5yZWFkVWludDMyKCksdGhpcy5zYW1wbGVfY291bnRzPVtdLHRoaXMuc2FtcGxlX2RlbHRhcz1bXSx0aGlzLnZlcnNpb249PT0wKWZvcihzPTA7czxlO3MrKyl0aGlzLnNhbXBsZV9jb3VudHMucHVzaCh0LnJlYWRVaW50MzIoKSksbj10LnJlYWRJbnQzMigpLG48MCYmKGQud2FybigiQm94UGFyc2VyIiwiRmlsZSB1c2VzIG5lZ2F0aXZlIHN0dHMgc2FtcGxlIGRlbHRhLCB1c2luZyB2YWx1ZSAxIGluc3RlYWQsIHN5bmMgbWF5IGJlIGxvc3QhIiksbj0xKSx0aGlzLnNhbXBsZV9kZWx0YXMucHVzaChuKX0pLHIuY3JlYXRlRnVsbEJveEN0b3IoInN0dmkiLGZ1bmN0aW9uKHQpe3ZhciBlPXQucmVhZFVpbnQzMigpO3RoaXMuc2luZ2xlX3ZpZXdfYWxsb3dlZD1lJjMsdGhpcy5zdGVyZW9fc2NoZW1lPXQucmVhZFVpbnQzMigpO3ZhciBzPXQucmVhZFVpbnQzMigpO3RoaXMuc3RlcmVvX2luZGljYXRpb25fdHlwZT10LnJlYWRTdHJpbmcocyk7dmFyIG4sYTtmb3IodGhpcy5ib3hlcz1bXTt0LmdldFBvc2l0aW9uKCk8dGhpcy5zdGFydCt0aGlzLnNpemU7KWlmKG49ci5wYXJzZU9uZUJveCh0LCExLHRoaXMuc2l6ZS0odC5nZXRQb3NpdGlvbigpLXRoaXMuc3RhcnQpKSxuLmNvZGU9PT1yLk9LKWE9bi5ib3gsdGhpcy5ib3hlcy5wdXNoKGEpLHRoaXNbYS50eXBlXT1hO2Vsc2UgcmV0dXJufSksci5jcmVhdGVCb3hDdG9yKCJzdHlwIixmdW5jdGlvbih0KXtyLmZ0eXBCb3gucHJvdG90eXBlLnBhcnNlLmNhbGwodGhpcyx0KX0pLHIuY3JlYXRlRnVsbEJveEN0b3IoInN0ejIiLGZ1bmN0aW9uKHQpe3ZhciBlLHM7aWYodGhpcy5zYW1wbGVfc2l6ZXM9W10sdGhpcy52ZXJzaW9uPT09MClpZih0aGlzLnJlc2VydmVkPXQucmVhZFVpbnQyNCgpLHRoaXMuZmllbGRfc2l6ZT10LnJlYWRVaW50OCgpLHM9dC5yZWFkVWludDMyKCksdGhpcy5maWVsZF9zaXplPT09NClmb3IoZT0wO2U8cztlKz0yKXt2YXIgbj10LnJlYWRVaW50OCgpO3RoaXMuc2FtcGxlX3NpemVzW2VdPW4+PjQmMTUsdGhpcy5zYW1wbGVfc2l6ZXNbZSsxXT1uJjE1fWVsc2UgaWYodGhpcy5maWVsZF9zaXplPT09OClmb3IoZT0wO2U8cztlKyspdGhpcy5zYW1wbGVfc2l6ZXNbZV09dC5yZWFkVWludDgoKTtlbHNlIGlmKHRoaXMuZmllbGRfc2l6ZT09PTE2KWZvcihlPTA7ZTxzO2UrKyl0aGlzLnNhbXBsZV9zaXplc1tlXT10LnJlYWRVaW50MTYoKTtlbHNlIGQuZXJyb3IoIkJveFBhcnNlciIsIkVycm9yIGluIGxlbmd0aCBmaWVsZCBpbiBzdHoyIGJveCIpfSksci5jcmVhdGVGdWxsQm94Q3Rvcigic3VicyIsZnVuY3Rpb24odCl7dmFyIGUscyxuLGE7Zm9yKG49dC5yZWFkVWludDMyKCksdGhpcy5lbnRyaWVzPVtdLGU9MDtlPG47ZSsrKXt2YXIgbz17fTtpZih0aGlzLmVudHJpZXNbZV09byxvLnNhbXBsZV9kZWx0YT10LnJlYWRVaW50MzIoKSxvLnN1YnNhbXBsZXM9W10sYT10LnJlYWRVaW50MTYoKSxhPjApZm9yKHM9MDtzPGE7cysrKXt2YXIgaD17fTtvLnN1YnNhbXBsZXMucHVzaChoKSx0aGlzLnZlcnNpb249PTE/aC5zaXplPXQucmVhZFVpbnQzMigpOmguc2l6ZT10LnJlYWRVaW50MTYoKSxoLnByaW9yaXR5PXQucmVhZFVpbnQ4KCksaC5kaXNjYXJkYWJsZT10LnJlYWRVaW50OCgpLGguY29kZWNfc3BlY2lmaWNfcGFyYW1ldGVycz10LnJlYWRVaW50MzIoKX19fSksci5jcmVhdGVGdWxsQm94Q3RvcigidGVuYyIsZnVuY3Rpb24odCl7aWYodC5yZWFkVWludDgoKSx0aGlzLnZlcnNpb249PT0wKXQucmVhZFVpbnQ4KCk7ZWxzZXt2YXIgZT10LnJlYWRVaW50OCgpO3RoaXMuZGVmYXVsdF9jcnlwdF9ieXRlX2Jsb2NrPWU+PjQmMTUsdGhpcy5kZWZhdWx0X3NraXBfYnl0ZV9ibG9jaz1lJjE1fXRoaXMuZGVmYXVsdF9pc1Byb3RlY3RlZD10LnJlYWRVaW50OCgpLHRoaXMuZGVmYXVsdF9QZXJfU2FtcGxlX0lWX1NpemU9dC5yZWFkVWludDgoKSx0aGlzLmRlZmF1bHRfS0lEPXIucGFyc2VIZXgxNih0KSx0aGlzLmRlZmF1bHRfaXNQcm90ZWN0ZWQ9PT0xJiZ0aGlzLmRlZmF1bHRfUGVyX1NhbXBsZV9JVl9TaXplPT09MCYmKHRoaXMuZGVmYXVsdF9jb25zdGFudF9JVl9zaXplPXQucmVhZFVpbnQ4KCksdGhpcy5kZWZhdWx0X2NvbnN0YW50X0lWPXQucmVhZFVpbnQ4QXJyYXkodGhpcy5kZWZhdWx0X2NvbnN0YW50X0lWX3NpemUpKX0pLHIuY3JlYXRlRnVsbEJveEN0b3IoInRmZHQiLGZ1bmN0aW9uKHQpe3RoaXMudmVyc2lvbj09MT90aGlzLmJhc2VNZWRpYURlY29kZVRpbWU9dC5yZWFkVWludDY0KCk6dGhpcy5iYXNlTWVkaWFEZWNvZGVUaW1lPXQucmVhZFVpbnQzMigpfSksci5jcmVhdGVGdWxsQm94Q3RvcigidGZoZCIsZnVuY3Rpb24odCl7dmFyIGU9MDt0aGlzLnRyYWNrX2lkPXQucmVhZFVpbnQzMigpLHRoaXMuc2l6ZS10aGlzLmhkcl9zaXplPmUmJnRoaXMuZmxhZ3Mmci5URkhEX0ZMQUdfQkFTRV9EQVRBX09GRlNFVD8odGhpcy5iYXNlX2RhdGFfb2Zmc2V0PXQucmVhZFVpbnQ2NCgpLGUrPTgpOnRoaXMuYmFzZV9kYXRhX29mZnNldD0wLHRoaXMuc2l6ZS10aGlzLmhkcl9zaXplPmUmJnRoaXMuZmxhZ3Mmci5URkhEX0ZMQUdfU0FNUExFX0RFU0M/KHRoaXMuZGVmYXVsdF9zYW1wbGVfZGVzY3JpcHRpb25faW5kZXg9dC5yZWFkVWludDMyKCksZSs9NCk6dGhpcy5kZWZhdWx0X3NhbXBsZV9kZXNjcmlwdGlvbl9pbmRleD0wLHRoaXMuc2l6ZS10aGlzLmhkcl9zaXplPmUmJnRoaXMuZmxhZ3Mmci5URkhEX0ZMQUdfU0FNUExFX0RVUj8odGhpcy5kZWZhdWx0X3NhbXBsZV9kdXJhdGlvbj10LnJlYWRVaW50MzIoKSxlKz00KTp0aGlzLmRlZmF1bHRfc2FtcGxlX2R1cmF0aW9uPTAsdGhpcy5zaXplLXRoaXMuaGRyX3NpemU+ZSYmdGhpcy5mbGFncyZyLlRGSERfRkxBR19TQU1QTEVfU0laRT8odGhpcy5kZWZhdWx0X3NhbXBsZV9zaXplPXQucmVhZFVpbnQzMigpLGUrPTQpOnRoaXMuZGVmYXVsdF9zYW1wbGVfc2l6ZT0wLHRoaXMuc2l6ZS10aGlzLmhkcl9zaXplPmUmJnRoaXMuZmxhZ3Mmci5URkhEX0ZMQUdfU0FNUExFX0ZMQUdTPyh0aGlzLmRlZmF1bHRfc2FtcGxlX2ZsYWdzPXQucmVhZFVpbnQzMigpLGUrPTQpOnRoaXMuZGVmYXVsdF9zYW1wbGVfZmxhZ3M9MH0pLHIuY3JlYXRlRnVsbEJveEN0b3IoInRmcmEiLGZ1bmN0aW9uKHQpe3RoaXMudHJhY2tfSUQ9dC5yZWFkVWludDMyKCksdC5yZWFkVWludDI0KCk7dmFyIGU9dC5yZWFkVWludDgoKTt0aGlzLmxlbmd0aF9zaXplX29mX3RyYWZfbnVtPWU+PjQmMyx0aGlzLmxlbmd0aF9zaXplX29mX3RydW5fbnVtPWU+PjImMyx0aGlzLmxlbmd0aF9zaXplX29mX3NhbXBsZV9udW09ZSYzLHRoaXMuZW50cmllcz1bXTtmb3IodmFyIHM9dC5yZWFkVWludDMyKCksbj0wO248cztuKyspdGhpcy52ZXJzaW9uPT09MT8odGhpcy50aW1lPXQucmVhZFVpbnQ2NCgpLHRoaXMubW9vZl9vZmZzZXQ9dC5yZWFkVWludDY0KCkpOih0aGlzLnRpbWU9dC5yZWFkVWludDMyKCksdGhpcy5tb29mX29mZnNldD10LnJlYWRVaW50MzIoKSksdGhpcy50cmFmX251bWJlcj10WyJyZWFkVWludCIrOCoodGhpcy5sZW5ndGhfc2l6ZV9vZl90cmFmX251bSsxKV0oKSx0aGlzLnRydW5fbnVtYmVyPXRbInJlYWRVaW50Iis4Kih0aGlzLmxlbmd0aF9zaXplX29mX3RydW5fbnVtKzEpXSgpLHRoaXMuc2FtcGxlX251bWJlcj10WyJyZWFkVWludCIrOCoodGhpcy5sZW5ndGhfc2l6ZV9vZl9zYW1wbGVfbnVtKzEpXSgpfSksci5jcmVhdGVGdWxsQm94Q3RvcigidGtoZCIsZnVuY3Rpb24odCl7dGhpcy52ZXJzaW9uPT0xPyh0aGlzLmNyZWF0aW9uX3RpbWU9dC5yZWFkVWludDY0KCksdGhpcy5tb2RpZmljYXRpb25fdGltZT10LnJlYWRVaW50NjQoKSx0aGlzLnRyYWNrX2lkPXQucmVhZFVpbnQzMigpLHQucmVhZFVpbnQzMigpLHRoaXMuZHVyYXRpb249dC5yZWFkVWludDY0KCkpOih0aGlzLmNyZWF0aW9uX3RpbWU9dC5yZWFkVWludDMyKCksdGhpcy5tb2RpZmljYXRpb25fdGltZT10LnJlYWRVaW50MzIoKSx0aGlzLnRyYWNrX2lkPXQucmVhZFVpbnQzMigpLHQucmVhZFVpbnQzMigpLHRoaXMuZHVyYXRpb249dC5yZWFkVWludDMyKCkpLHQucmVhZFVpbnQzMkFycmF5KDIpLHRoaXMubGF5ZXI9dC5yZWFkSW50MTYoKSx0aGlzLmFsdGVybmF0ZV9ncm91cD10LnJlYWRJbnQxNigpLHRoaXMudm9sdW1lPXQucmVhZEludDE2KCk+PjgsdC5yZWFkVWludDE2KCksdGhpcy5tYXRyaXg9dC5yZWFkSW50MzJBcnJheSg5KSx0aGlzLndpZHRoPXQucmVhZFVpbnQzMigpLHRoaXMuaGVpZ2h0PXQucmVhZFVpbnQzMigpfSksci5jcmVhdGVCb3hDdG9yKCJ0bWF4IixmdW5jdGlvbih0KXt0aGlzLnRpbWU9dC5yZWFkVWludDMyKCl9KSxyLmNyZWF0ZUJveEN0b3IoInRtaW4iLGZ1bmN0aW9uKHQpe3RoaXMudGltZT10LnJlYWRVaW50MzIoKX0pLHIuY3JlYXRlQm94Q3RvcigidG90bCIsZnVuY3Rpb24odCl7dGhpcy5ieXRlc3NlbnQ9dC5yZWFkVWludDMyKCl9KSxyLmNyZWF0ZUJveEN0b3IoInRwYXkiLGZ1bmN0aW9uKHQpe3RoaXMuYnl0ZXNzZW50PXQucmVhZFVpbnQzMigpfSksci5jcmVhdGVCb3hDdG9yKCJ0cHlsIixmdW5jdGlvbih0KXt0aGlzLmJ5dGVzc2VudD10LnJlYWRVaW50NjQoKX0pLHIuVHJhY2tHcm91cFR5cGVCb3gucHJvdG90eXBlLnBhcnNlPWZ1bmN0aW9uKHQpe3RoaXMucGFyc2VGdWxsSGVhZGVyKHQpLHRoaXMudHJhY2tfZ3JvdXBfaWQ9dC5yZWFkVWludDMyKCl9LHIuY3JlYXRlVHJhY2tHcm91cEN0b3IoIm1zcmMiKSxyLlRyYWNrUmVmZXJlbmNlVHlwZUJveD1mdW5jdGlvbih0LGUscyxuKXtyLkJveC5jYWxsKHRoaXMsdCxlKSx0aGlzLmhkcl9zaXplPXMsdGhpcy5zdGFydD1ufSxyLlRyYWNrUmVmZXJlbmNlVHlwZUJveC5wcm90b3R5cGU9bmV3IHIuQm94LHIuVHJhY2tSZWZlcmVuY2VUeXBlQm94LnByb3RvdHlwZS5wYXJzZT1mdW5jdGlvbih0KXt0aGlzLnRyYWNrX2lkcz10LnJlYWRVaW50MzJBcnJheSgodGhpcy5zaXplLXRoaXMuaGRyX3NpemUpLzQpfSxyLnRyZWZCb3gucHJvdG90eXBlLnBhcnNlPWZ1bmN0aW9uKHQpe2Zvcih2YXIgZSxzO3QuZ2V0UG9zaXRpb24oKTx0aGlzLnN0YXJ0K3RoaXMuc2l6ZTspaWYoZT1yLnBhcnNlT25lQm94KHQsITAsdGhpcy5zaXplLSh0LmdldFBvc2l0aW9uKCktdGhpcy5zdGFydCkpLGUuY29kZT09PXIuT0spcz1uZXcgci5UcmFja1JlZmVyZW5jZVR5cGVCb3goZS50eXBlLGUuc2l6ZSxlLmhkcl9zaXplLGUuc3RhcnQpLHMud3JpdGU9PT1yLkJveC5wcm90b3R5cGUud3JpdGUmJnMudHlwZSE9PSJtZGF0IiYmKGQuaW5mbygiQm94UGFyc2VyIiwiVHJhY2tSZWZlcmVuY2UgIitzLnR5cGUrIiBib3ggd3JpdGluZyBub3QgeWV0IGltcGxlbWVudGVkLCBrZWVwaW5nIHVucGFyc2VkIGRhdGEgaW4gbWVtb3J5IGZvciBsYXRlciB3cml0ZSIpLHMucGFyc2VEYXRhQW5kUmV3aW5kKHQpKSxzLnBhcnNlKHQpLHRoaXMuYm94ZXMucHVzaChzKTtlbHNlIHJldHVybn0sci5jcmVhdGVGdWxsQm94Q3RvcigidHJlcCIsZnVuY3Rpb24odCl7Zm9yKHRoaXMudHJhY2tfSUQ9dC5yZWFkVWludDMyKCksdGhpcy5ib3hlcz1bXTt0LmdldFBvc2l0aW9uKCk8dGhpcy5zdGFydCt0aGlzLnNpemU7KWlmKHJldD1yLnBhcnNlT25lQm94KHQsITEsdGhpcy5zaXplLSh0LmdldFBvc2l0aW9uKCktdGhpcy5zdGFydCkpLHJldC5jb2RlPT09ci5PSylib3g9cmV0LmJveCx0aGlzLmJveGVzLnB1c2goYm94KTtlbHNlIHJldHVybn0pLHIuY3JlYXRlRnVsbEJveEN0b3IoInRyZXgiLGZ1bmN0aW9uKHQpe3RoaXMudHJhY2tfaWQ9dC5yZWFkVWludDMyKCksdGhpcy5kZWZhdWx0X3NhbXBsZV9kZXNjcmlwdGlvbl9pbmRleD10LnJlYWRVaW50MzIoKSx0aGlzLmRlZmF1bHRfc2FtcGxlX2R1cmF0aW9uPXQucmVhZFVpbnQzMigpLHRoaXMuZGVmYXVsdF9zYW1wbGVfc2l6ZT10LnJlYWRVaW50MzIoKSx0aGlzLmRlZmF1bHRfc2FtcGxlX2ZsYWdzPXQucmVhZFVpbnQzMigpfSksci5jcmVhdGVCb3hDdG9yKCJ0cnB5IixmdW5jdGlvbih0KXt0aGlzLmJ5dGVzc2VudD10LnJlYWRVaW50NjQoKX0pLHIuY3JlYXRlRnVsbEJveEN0b3IoInRydW4iLGZ1bmN0aW9uKHQpe3ZhciBlPTA7aWYodGhpcy5zYW1wbGVfY291bnQ9dC5yZWFkVWludDMyKCksZSs9NCx0aGlzLnNpemUtdGhpcy5oZHJfc2l6ZT5lJiZ0aGlzLmZsYWdzJnIuVFJVTl9GTEFHU19EQVRBX09GRlNFVD8odGhpcy5kYXRhX29mZnNldD10LnJlYWRJbnQzMigpLGUrPTQpOnRoaXMuZGF0YV9vZmZzZXQ9MCx0aGlzLnNpemUtdGhpcy5oZHJfc2l6ZT5lJiZ0aGlzLmZsYWdzJnIuVFJVTl9GTEFHU19GSVJTVF9GTEFHPyh0aGlzLmZpcnN0X3NhbXBsZV9mbGFncz10LnJlYWRVaW50MzIoKSxlKz00KTp0aGlzLmZpcnN0X3NhbXBsZV9mbGFncz0wLHRoaXMuc2FtcGxlX2R1cmF0aW9uPVtdLHRoaXMuc2FtcGxlX3NpemU9W10sdGhpcy5zYW1wbGVfZmxhZ3M9W10sdGhpcy5zYW1wbGVfY29tcG9zaXRpb25fdGltZV9vZmZzZXQ9W10sdGhpcy5zaXplLXRoaXMuaGRyX3NpemU+ZSlmb3IodmFyIHM9MDtzPHRoaXMuc2FtcGxlX2NvdW50O3MrKyl0aGlzLmZsYWdzJnIuVFJVTl9GTEFHU19EVVJBVElPTiYmKHRoaXMuc2FtcGxlX2R1cmF0aW9uW3NdPXQucmVhZFVpbnQzMigpKSx0aGlzLmZsYWdzJnIuVFJVTl9GTEFHU19TSVpFJiYodGhpcy5zYW1wbGVfc2l6ZVtzXT10LnJlYWRVaW50MzIoKSksdGhpcy5mbGFncyZyLlRSVU5fRkxBR1NfRkxBR1MmJih0aGlzLnNhbXBsZV9mbGFnc1tzXT10LnJlYWRVaW50MzIoKSksdGhpcy5mbGFncyZyLlRSVU5fRkxBR1NfQ1RTX09GRlNFVCYmKHRoaXMudmVyc2lvbj09PTA/dGhpcy5zYW1wbGVfY29tcG9zaXRpb25fdGltZV9vZmZzZXRbc109dC5yZWFkVWludDMyKCk6dGhpcy5zYW1wbGVfY29tcG9zaXRpb25fdGltZV9vZmZzZXRbc109dC5yZWFkSW50MzIoKSl9KSxyLmNyZWF0ZUZ1bGxCb3hDdG9yKCJ0c2VsIixmdW5jdGlvbih0KXt0aGlzLnN3aXRjaF9ncm91cD10LnJlYWRVaW50MzIoKTt2YXIgZT0odGhpcy5zaXplLXRoaXMuaGRyX3NpemUtNCkvNDt0aGlzLmF0dHJpYnV0ZV9saXN0PVtdO2Zvcih2YXIgcz0wO3M8ZTtzKyspdGhpcy5hdHRyaWJ1dGVfbGlzdFtzXT10LnJlYWRVaW50MzIoKX0pLHIuY3JlYXRlRnVsbEJveEN0b3IoInR4dEMiLGZ1bmN0aW9uKHQpe3RoaXMuY29uZmlnPXQucmVhZENTdHJpbmcoKX0pLHIuY3JlYXRlQm94Q3RvcigidHljbyIsZnVuY3Rpb24odCl7dmFyIGU9KHRoaXMuc2l6ZS10aGlzLmhkcl9zaXplKS80O3RoaXMuY29tcGF0aWJsZV9icmFuZHM9W107Zm9yKHZhciBzPTA7czxlO3MrKyl0aGlzLmNvbXBhdGlibGVfYnJhbmRzW3NdPXQucmVhZFN0cmluZyg0KX0pLHIuY3JlYXRlRnVsbEJveEN0b3IoInVkZXMiLGZ1bmN0aW9uKHQpe3RoaXMubGFuZz10LnJlYWRDU3RyaW5nKCksdGhpcy5uYW1lPXQucmVhZENTdHJpbmcoKSx0aGlzLmRlc2NyaXB0aW9uPXQucmVhZENTdHJpbmcoKSx0aGlzLnRhZ3M9dC5yZWFkQ1N0cmluZygpfSksci5jcmVhdGVGdWxsQm94Q3RvcigidW5jQyIsZnVuY3Rpb24odCl7dmFyIGU7Zm9yKHRoaXMucHJvZmlsZT10LnJlYWRVaW50MzIoKSx0aGlzLmNvbXBvbmVudF9jb3VudD10LnJlYWRVaW50MTYoKSx0aGlzLmNvbXBvbmVudF9pbmRleD1bXSx0aGlzLmNvbXBvbmVudF9iaXRfZGVwdGhfbWludXNfb25lPVtdLHRoaXMuY29tcG9uZW50X2Zvcm1hdD1bXSx0aGlzLmNvbXBvbmVudF9hbGlnbl9zaXplPVtdLGU9MDtlPHRoaXMuY29tcG9uZW50X2NvdW50O2UrKyl0aGlzLmNvbXBvbmVudF9pbmRleC5wdXNoKHQucmVhZFVpbnQxNigpKSx0aGlzLmNvbXBvbmVudF9iaXRfZGVwdGhfbWludXNfb25lLnB1c2godC5yZWFkVWludDgoKSksdGhpcy5jb21wb25lbnRfZm9ybWF0LnB1c2godC5yZWFkVWludDgoKSksdGhpcy5jb21wb25lbnRfYWxpZ25fc2l6ZS5wdXNoKHQucmVhZFVpbnQ4KCkpO3RoaXMuc2FtcGxpbmdfdHlwZT10LnJlYWRVaW50OCgpLHRoaXMuaW50ZXJsZWF2ZV90eXBlPXQucmVhZFVpbnQ4KCksdGhpcy5ibG9ja19zaXplPXQucmVhZFVpbnQ4KCk7dmFyIHM9dC5yZWFkVWludDgoKTt0aGlzLmNvbXBvbmVudF9saXR0bGVfZW5kaWFuPXM+PjcmMSx0aGlzLmJsb2NrX3BhZF9sc2I9cz4+NiYxLHRoaXMuYmxvY2tfbGl0dGxlX2VuZGlhbj1zPj41JjEsdGhpcy5ibG9ja19yZXZlcnNlZD1zPj40JjEsdGhpcy5wYWRfdW5rbm93bj1zPj4zJjEsdGhpcy5waXhlbF9zaXplPXQucmVhZFVpbnQ4KCksdGhpcy5yb3dfYWxpZ25fc2l6ZT10LnJlYWRVaW50MzIoKSx0aGlzLnRpbGVfYWxpZ25fc2l6ZT10LnJlYWRVaW50MzIoKSx0aGlzLm51bV90aWxlX2NvbHNfbWludXNfb25lPXQucmVhZFVpbnQzMigpLHRoaXMubnVtX3RpbGVfcm93c19taW51c19vbmU9dC5yZWFkVWludDMyKCl9KSxyLmNyZWF0ZUZ1bGxCb3hDdG9yKCJ1cmwgIixmdW5jdGlvbih0KXt0aGlzLmZsYWdzIT09MSYmKHRoaXMubG9jYXRpb249dC5yZWFkQ1N0cmluZygpKX0pLHIuY3JlYXRlRnVsbEJveEN0b3IoInVybiAiLGZ1bmN0aW9uKHQpe3RoaXMubmFtZT10LnJlYWRDU3RyaW5nKCksdGhpcy5zaXplLXRoaXMuaGRyX3NpemUtdGhpcy5uYW1lLmxlbmd0aC0xPjAmJih0aGlzLmxvY2F0aW9uPXQucmVhZENTdHJpbmcoKSl9KSxyLmNyZWF0ZVVVSURCb3goImE1ZDQwYjMwZTgxNDExZGRiYTJmMDgwMDIwMGM5YTY2IiwhMCwhMSxmdW5jdGlvbih0KXt0aGlzLkxpdmVTZXJ2ZXJNYW5pZmVzdD10LnJlYWRTdHJpbmcodGhpcy5zaXplLXRoaXMuaGRyX3NpemUpLnJlcGxhY2UoLyYvZywiJmFtcDsiKS5yZXBsYWNlKC88L2csIiZsdDsiKS5yZXBsYWNlKC8+L2csIiZndDsiKS5yZXBsYWNlKC8iL2csIiZxdW90OyIpLnJlcGxhY2UoLycvZywiJiMwMzk7Iil9KSxyLmNyZWF0ZVVVSURCb3goImQwOGE0ZjE4MTBmMzRhODJiNmM4MzJkOGFiYTE4M2QzIiwhMCwhMSxmdW5jdGlvbih0KXt0aGlzLnN5c3RlbV9pZD1yLnBhcnNlSGV4MTYodCk7dmFyIGU9dC5yZWFkVWludDMyKCk7ZT4wJiYodGhpcy5kYXRhPXQucmVhZFVpbnQ4QXJyYXkoZSkpfSksci5jcmVhdGVVVUlEQm94KCJhMjM5NGY1MjVhOWI0ZjE0YTI0NDZjNDI3YzY0OGRmNCIsITAsITEpLHIuY3JlYXRlVVVJREJveCgiODk3NGRiY2U3YmU3NGM1MTg0Zjk3MTQ4Zjk4ODI1NTQiLCEwLCExLGZ1bmN0aW9uKHQpe3RoaXMuZGVmYXVsdF9BbGdvcml0aG1JRD10LnJlYWRVaW50MjQoKSx0aGlzLmRlZmF1bHRfSVZfc2l6ZT10LnJlYWRVaW50OCgpLHRoaXMuZGVmYXVsdF9LSUQ9ci5wYXJzZUhleDE2KHQpfSksci5jcmVhdGVVVUlEQm94KCJkNDgwN2VmMmNhMzk0Njk1OGU1NDI2Y2I5ZTQ2YTc5ZiIsITAsITEsZnVuY3Rpb24odCl7dGhpcy5mcmFnbWVudF9jb3VudD10LnJlYWRVaW50OCgpLHRoaXMuZW50cmllcz1bXTtmb3IodmFyIGU9MDtlPHRoaXMuZnJhZ21lbnRfY291bnQ7ZSsrKXt2YXIgcz17fSxuPTAsYT0wO3RoaXMudmVyc2lvbj09PTE/KG49dC5yZWFkVWludDY0KCksYT10LnJlYWRVaW50NjQoKSk6KG49dC5yZWFkVWludDMyKCksYT10LnJlYWRVaW50MzIoKSkscy5hYnNvbHV0ZV90aW1lPW4scy5hYnNvbHV0ZV9kdXJhdGlvbj1hLHRoaXMuZW50cmllcy5wdXNoKHMpfX0pLHIuY3JlYXRlVVVJREJveCgiNmQxZDliMDU0MmQ1NDRlNjgwZTIxNDFkYWZmNzU3YjIiLCEwLCExLGZ1bmN0aW9uKHQpe3RoaXMudmVyc2lvbj09PTE/KHRoaXMuYWJzb2x1dGVfdGltZT10LnJlYWRVaW50NjQoKSx0aGlzLmR1cmF0aW9uPXQucmVhZFVpbnQ2NCgpKToodGhpcy5hYnNvbHV0ZV90aW1lPXQucmVhZFVpbnQzMigpLHRoaXMuZHVyYXRpb249dC5yZWFkVWludDMyKCkpfSksci5jcmVhdGVGdWxsQm94Q3Rvcigidm1oZCIsZnVuY3Rpb24odCl7dGhpcy5ncmFwaGljc21vZGU9dC5yZWFkVWludDE2KCksdGhpcy5vcGNvbG9yPXQucmVhZFVpbnQxNkFycmF5KDMpfSksci5jcmVhdGVGdWxsQm94Q3RvcigidnBjQyIsZnVuY3Rpb24odCl7dmFyIGU7dGhpcy52ZXJzaW9uPT09MT8odGhpcy5wcm9maWxlPXQucmVhZFVpbnQ4KCksdGhpcy5sZXZlbD10LnJlYWRVaW50OCgpLGU9dC5yZWFkVWludDgoKSx0aGlzLmJpdERlcHRoPWU+PjQsdGhpcy5jaHJvbWFTdWJzYW1wbGluZz1lPj4xJjcsdGhpcy52aWRlb0Z1bGxSYW5nZUZsYWc9ZSYxLHRoaXMuY29sb3VyUHJpbWFyaWVzPXQucmVhZFVpbnQ4KCksdGhpcy50cmFuc2ZlckNoYXJhY3RlcmlzdGljcz10LnJlYWRVaW50OCgpLHRoaXMubWF0cml4Q29lZmZpY2llbnRzPXQucmVhZFVpbnQ4KCksdGhpcy5jb2RlY0ludGlhbGl6YXRpb25EYXRhU2l6ZT10LnJlYWRVaW50MTYoKSx0aGlzLmNvZGVjSW50aWFsaXphdGlvbkRhdGE9dC5yZWFkVWludDhBcnJheSh0aGlzLmNvZGVjSW50aWFsaXphdGlvbkRhdGFTaXplKSk6KHRoaXMucHJvZmlsZT10LnJlYWRVaW50OCgpLHRoaXMubGV2ZWw9dC5yZWFkVWludDgoKSxlPXQucmVhZFVpbnQ4KCksdGhpcy5iaXREZXB0aD1lPj40JjE1LHRoaXMuY29sb3JTcGFjZT1lJjE1LGU9dC5yZWFkVWludDgoKSx0aGlzLmNocm9tYVN1YnNhbXBsaW5nPWU+PjQmMTUsdGhpcy50cmFuc2ZlckZ1bmN0aW9uPWU+PjEmNyx0aGlzLnZpZGVvRnVsbFJhbmdlRmxhZz1lJjEsdGhpcy5jb2RlY0ludGlhbGl6YXRpb25EYXRhU2l6ZT10LnJlYWRVaW50MTYoKSx0aGlzLmNvZGVjSW50aWFsaXphdGlvbkRhdGE9dC5yZWFkVWludDhBcnJheSh0aGlzLmNvZGVjSW50aWFsaXphdGlvbkRhdGFTaXplKSl9KSxyLmNyZWF0ZUJveEN0b3IoInZ0dEMiLGZ1bmN0aW9uKHQpe3RoaXMudGV4dD10LnJlYWRTdHJpbmcodGhpcy5zaXplLXRoaXMuaGRyX3NpemUpfSksci5jcmVhdGVGdWxsQm94Q3RvcigidnZjQyIsZnVuY3Rpb24odCl7dmFyIGUscyxuPXtoZWxkX2JpdHM6dm9pZCAwLG51bV9oZWxkX2JpdHM6MCxzdHJlYW1fcmVhZF8xX2J5dGVzOmZ1bmN0aW9uKHkpe3RoaXMuaGVsZF9iaXRzPXkucmVhZFVpbnQ4KCksdGhpcy5udW1faGVsZF9iaXRzPTh9LHN0cmVhbV9yZWFkXzJfYnl0ZXM6ZnVuY3Rpb24oeSl7dGhpcy5oZWxkX2JpdHM9eS5yZWFkVWludDE2KCksdGhpcy5udW1faGVsZF9iaXRzPTE2fSxleHRyYWN0X2JpdHM6ZnVuY3Rpb24oeSl7dmFyIEU9dGhpcy5oZWxkX2JpdHM+PnRoaXMubnVtX2hlbGRfYml0cy15JigxPDx5KS0xO3JldHVybiB0aGlzLm51bV9oZWxkX2JpdHMtPXksRX19O2lmKG4uc3RyZWFtX3JlYWRfMV9ieXRlcyh0KSxuLmV4dHJhY3RfYml0cyg1KSx0aGlzLmxlbmd0aFNpemVNaW51c09uZT1uLmV4dHJhY3RfYml0cygyKSx0aGlzLnB0bF9wcmVzZW50X2ZsYWc9bi5leHRyYWN0X2JpdHMoMSksdGhpcy5wdGxfcHJlc2VudF9mbGFnKXtuLnN0cmVhbV9yZWFkXzJfYnl0ZXModCksdGhpcy5vbHNfaWR4PW4uZXh0cmFjdF9iaXRzKDkpLHRoaXMubnVtX3N1YmxheWVycz1uLmV4dHJhY3RfYml0cygzKSx0aGlzLmNvbnN0YW50X2ZyYW1lX3JhdGU9bi5leHRyYWN0X2JpdHMoMiksdGhpcy5jaHJvbWFfZm9ybWF0X2lkYz1uLmV4dHJhY3RfYml0cygyKSxuLnN0cmVhbV9yZWFkXzFfYnl0ZXModCksdGhpcy5iaXRfZGVwdGhfbWludXM4PW4uZXh0cmFjdF9iaXRzKDMpLG4uZXh0cmFjdF9iaXRzKDUpO3tpZihuLnN0cmVhbV9yZWFkXzJfYnl0ZXModCksbi5leHRyYWN0X2JpdHMoMiksdGhpcy5udW1fYnl0ZXNfY29uc3RyYWludF9pbmZvPW4uZXh0cmFjdF9iaXRzKDYpLHRoaXMuZ2VuZXJhbF9wcm9maWxlX2lkYz1uLmV4dHJhY3RfYml0cyg3KSx0aGlzLmdlbmVyYWxfdGllcl9mbGFnPW4uZXh0cmFjdF9iaXRzKDEpLHRoaXMuZ2VuZXJhbF9sZXZlbF9pZGM9dC5yZWFkVWludDgoKSxuLnN0cmVhbV9yZWFkXzFfYnl0ZXModCksdGhpcy5wdGxfZnJhbWVfb25seV9jb25zdHJhaW50X2ZsYWc9bi5leHRyYWN0X2JpdHMoMSksdGhpcy5wdGxfbXVsdGlsYXllcl9lbmFibGVkX2ZsYWc9bi5leHRyYWN0X2JpdHMoMSksdGhpcy5nZW5lcmFsX2NvbnN0cmFpbnRfaW5mbz1uZXcgVWludDhBcnJheSh0aGlzLm51bV9ieXRlc19jb25zdHJhaW50X2luZm8pLHRoaXMubnVtX2J5dGVzX2NvbnN0cmFpbnRfaW5mbyl7Zm9yKGU9MDtlPHRoaXMubnVtX2J5dGVzX2NvbnN0cmFpbnRfaW5mby0xO2UrKyl7dmFyIGE9bi5leHRyYWN0X2JpdHMoNik7bi5zdHJlYW1fcmVhZF8xX2J5dGVzKHQpO3ZhciBvPW4uZXh0cmFjdF9iaXRzKDIpO3RoaXMuZ2VuZXJhbF9jb25zdHJhaW50X2luZm9bZV09YTw8MnxvfXRoaXMuZ2VuZXJhbF9jb25zdHJhaW50X2luZm9bdGhpcy5udW1fYnl0ZXNfY29uc3RyYWludF9pbmZvLTFdPW4uZXh0cmFjdF9iaXRzKDYpfWVsc2Ugbi5leHRyYWN0X2JpdHMoNik7aWYodGhpcy5udW1fc3VibGF5ZXJzPjEpe2ZvcihuLnN0cmVhbV9yZWFkXzFfYnl0ZXModCksdGhpcy5wdGxfc3VibGF5ZXJfcHJlc2VudF9tYXNrPTAscz10aGlzLm51bV9zdWJsYXllcnMtMjtzPj0wOy0tcyl7dmFyIGg9bi5leHRyYWN0X2JpdHMoMSk7dGhpcy5wdGxfc3VibGF5ZXJfcHJlc2VudF9tYXNrfD1oPDxzfWZvcihzPXRoaXMubnVtX3N1YmxheWVycztzPD04JiZ0aGlzLm51bV9zdWJsYXllcnM+MTsrK3Mpbi5leHRyYWN0X2JpdHMoMSk7Zm9yKHRoaXMuc3VibGF5ZXJfbGV2ZWxfaWRjPVtdLHM9dGhpcy5udW1fc3VibGF5ZXJzLTI7cz49MDstLXMpdGhpcy5wdGxfc3VibGF5ZXJfcHJlc2VudF9tYXNrJjE8PHMmJih0aGlzLnN1YmxheWVyX2xldmVsX2lkY1tzXT10LnJlYWRVaW50OCgpKX1pZih0aGlzLnB0bF9udW1fc3ViX3Byb2ZpbGVzPXQucmVhZFVpbnQ4KCksdGhpcy5nZW5lcmFsX3N1Yl9wcm9maWxlX2lkYz1bXSx0aGlzLnB0bF9udW1fc3ViX3Byb2ZpbGVzKWZvcihlPTA7ZTx0aGlzLnB0bF9udW1fc3ViX3Byb2ZpbGVzO2UrKyl0aGlzLmdlbmVyYWxfc3ViX3Byb2ZpbGVfaWRjLnB1c2godC5yZWFkVWludDMyKCkpfXRoaXMubWF4X3BpY3R1cmVfd2lkdGg9dC5yZWFkVWludDE2KCksdGhpcy5tYXhfcGljdHVyZV9oZWlnaHQ9dC5yZWFkVWludDE2KCksdGhpcy5hdmdfZnJhbWVfcmF0ZT10LnJlYWRVaW50MTYoKX12YXIgZj0xMixwPTEzO3RoaXMubmFsdV9hcnJheXM9W107dmFyIGc9dC5yZWFkVWludDgoKTtmb3IoZT0wO2U8ZztlKyspe3ZhciBtPVtdO3RoaXMubmFsdV9hcnJheXMucHVzaChtKSxuLnN0cmVhbV9yZWFkXzFfYnl0ZXModCksbS5jb21wbGV0ZW5lc3M9bi5leHRyYWN0X2JpdHMoMSksbi5leHRyYWN0X2JpdHMoMiksbS5uYWx1X3R5cGU9bi5leHRyYWN0X2JpdHMoNSk7dmFyIHY9MTtmb3IobS5uYWx1X3R5cGUhPXAmJm0ubmFsdV90eXBlIT1mJiYodj10LnJlYWRVaW50MTYoKSkscz0wO3M8djtzKyspe3ZhciBiPXQucmVhZFVpbnQxNigpO20ucHVzaCh7ZGF0YTp0LnJlYWRVaW50OEFycmF5KGIpLGxlbmd0aDpifSl9fX0pLHIuY3JlYXRlRnVsbEJveEN0b3IoInZ2bkMiLGZ1bmN0aW9uKHQpe3ZhciBlPXN0cm0ucmVhZFVpbnQ4KCk7dGhpcy5sZW5ndGhTaXplTWludXNPbmU9ZSYzfSksci5TYW1wbGVFbnRyeS5wcm90b3R5cGUuaXNWaWRlbz1mdW5jdGlvbigpe3JldHVybiExfSxyLlNhbXBsZUVudHJ5LnByb3RvdHlwZS5pc0F1ZGlvPWZ1bmN0aW9uKCl7cmV0dXJuITF9LHIuU2FtcGxlRW50cnkucHJvdG90eXBlLmlzU3VidGl0bGU9ZnVuY3Rpb24oKXtyZXR1cm4hMX0sci5TYW1wbGVFbnRyeS5wcm90b3R5cGUuaXNNZXRhZGF0YT1mdW5jdGlvbigpe3JldHVybiExfSxyLlNhbXBsZUVudHJ5LnByb3RvdHlwZS5pc0hpbnQ9ZnVuY3Rpb24oKXtyZXR1cm4hMX0sci5TYW1wbGVFbnRyeS5wcm90b3R5cGUuZ2V0Q29kZWM9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy50eXBlLnJlcGxhY2UoIi4iLCIiKX0sci5TYW1wbGVFbnRyeS5wcm90b3R5cGUuZ2V0V2lkdGg9ZnVuY3Rpb24oKXtyZXR1cm4iIn0sci5TYW1wbGVFbnRyeS5wcm90b3R5cGUuZ2V0SGVpZ2h0PWZ1bmN0aW9uKCl7cmV0dXJuIiJ9LHIuU2FtcGxlRW50cnkucHJvdG90eXBlLmdldENoYW5uZWxDb3VudD1mdW5jdGlvbigpe3JldHVybiIifSxyLlNhbXBsZUVudHJ5LnByb3RvdHlwZS5nZXRTYW1wbGVSYXRlPWZ1bmN0aW9uKCl7cmV0dXJuIiJ9LHIuU2FtcGxlRW50cnkucHJvdG90eXBlLmdldFNhbXBsZVNpemU9ZnVuY3Rpb24oKXtyZXR1cm4iIn0sci5WaXN1YWxTYW1wbGVFbnRyeS5wcm90b3R5cGUuaXNWaWRlbz1mdW5jdGlvbigpe3JldHVybiEwfSxyLlZpc3VhbFNhbXBsZUVudHJ5LnByb3RvdHlwZS5nZXRXaWR0aD1mdW5jdGlvbigpe3JldHVybiB0aGlzLndpZHRofSxyLlZpc3VhbFNhbXBsZUVudHJ5LnByb3RvdHlwZS5nZXRIZWlnaHQ9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5oZWlnaHR9LHIuQXVkaW9TYW1wbGVFbnRyeS5wcm90b3R5cGUuaXNBdWRpbz1mdW5jdGlvbigpe3JldHVybiEwfSxyLkF1ZGlvU2FtcGxlRW50cnkucHJvdG90eXBlLmdldENoYW5uZWxDb3VudD1mdW5jdGlvbigpe3JldHVybiB0aGlzLmNoYW5uZWxfY291bnR9LHIuQXVkaW9TYW1wbGVFbnRyeS5wcm90b3R5cGUuZ2V0U2FtcGxlUmF0ZT1mdW5jdGlvbigpe3JldHVybiB0aGlzLnNhbXBsZXJhdGV9LHIuQXVkaW9TYW1wbGVFbnRyeS5wcm90b3R5cGUuZ2V0U2FtcGxlU2l6ZT1mdW5jdGlvbigpe3JldHVybiB0aGlzLnNhbXBsZXNpemV9LHIuU3VidGl0bGVTYW1wbGVFbnRyeS5wcm90b3R5cGUuaXNTdWJ0aXRsZT1mdW5jdGlvbigpe3JldHVybiEwfSxyLk1ldGFkYXRhU2FtcGxlRW50cnkucHJvdG90eXBlLmlzTWV0YWRhdGE9ZnVuY3Rpb24oKXtyZXR1cm4hMH0sci5kZWNpbWFsVG9IZXg9ZnVuY3Rpb24odCxlKXt2YXIgcz1OdW1iZXIodCkudG9TdHJpbmcoMTYpO2ZvcihlPXR5cGVvZiBlPiJ1Inx8ZT09PW51bGw/ZT0yOmU7cy5sZW5ndGg8ZTspcz0iMCIrcztyZXR1cm4gc30sci5hdmMxU2FtcGxlRW50cnkucHJvdG90eXBlLmdldENvZGVjPXIuYXZjMlNhbXBsZUVudHJ5LnByb3RvdHlwZS5nZXRDb2RlYz1yLmF2YzNTYW1wbGVFbnRyeS5wcm90b3R5cGUuZ2V0Q29kZWM9ci5hdmM0U2FtcGxlRW50cnkucHJvdG90eXBlLmdldENvZGVjPWZ1bmN0aW9uKCl7dmFyIHQ9ci5TYW1wbGVFbnRyeS5wcm90b3R5cGUuZ2V0Q29kZWMuY2FsbCh0aGlzKTtyZXR1cm4gdGhpcy5hdmNDP3QrIi4iK3IuZGVjaW1hbFRvSGV4KHRoaXMuYXZjQy5BVkNQcm9maWxlSW5kaWNhdGlvbikrci5kZWNpbWFsVG9IZXgodGhpcy5hdmNDLnByb2ZpbGVfY29tcGF0aWJpbGl0eSkrci5kZWNpbWFsVG9IZXgodGhpcy5hdmNDLkFWQ0xldmVsSW5kaWNhdGlvbik6dH0sci5oZXYxU2FtcGxlRW50cnkucHJvdG90eXBlLmdldENvZGVjPXIuaHZjMVNhbXBsZUVudHJ5LnByb3RvdHlwZS5nZXRDb2RlYz1mdW5jdGlvbigpe3ZhciB0LGU9ci5TYW1wbGVFbnRyeS5wcm90b3R5cGUuZ2V0Q29kZWMuY2FsbCh0aGlzKTtpZih0aGlzLmh2Y0Mpe3N3aXRjaChlKz0iLiIsdGhpcy5odmNDLmdlbmVyYWxfcHJvZmlsZV9zcGFjZSl7Y2FzZSAwOmUrPSIiO2JyZWFrO2Nhc2UgMTplKz0iQSI7YnJlYWs7Y2FzZSAyOmUrPSJCIjticmVhaztjYXNlIDM6ZSs9IkMiO2JyZWFrfWUrPXRoaXMuaHZjQy5nZW5lcmFsX3Byb2ZpbGVfaWRjLGUrPSIuIjt2YXIgcz10aGlzLmh2Y0MuZ2VuZXJhbF9wcm9maWxlX2NvbXBhdGliaWxpdHksbj0wO2Zvcih0PTA7dDwzMiYmKG58PXMmMSx0IT0zMSk7dCsrKW48PD0xLHM+Pj0xO2UrPXIuZGVjaW1hbFRvSGV4KG4sMCksZSs9Ii4iLHRoaXMuaHZjQy5nZW5lcmFsX3RpZXJfZmxhZz09PTA/ZSs9IkwiOmUrPSJIIixlKz10aGlzLmh2Y0MuZ2VuZXJhbF9sZXZlbF9pZGM7dmFyIGE9ITEsbz0iIjtmb3IodD01O3Q+PTA7dC0tKSh0aGlzLmh2Y0MuZ2VuZXJhbF9jb25zdHJhaW50X2luZGljYXRvclt0XXx8YSkmJihvPSIuIityLmRlY2ltYWxUb0hleCh0aGlzLmh2Y0MuZ2VuZXJhbF9jb25zdHJhaW50X2luZGljYXRvclt0XSwwKStvLGE9ITApO2UrPW99cmV0dXJuIGV9LHIudnZjMVNhbXBsZUVudHJ5LnByb3RvdHlwZS5nZXRDb2RlYz1yLnZ2aTFTYW1wbGVFbnRyeS5wcm90b3R5cGUuZ2V0Q29kZWM9ZnVuY3Rpb24oKXt2YXIgdCxlPXIuU2FtcGxlRW50cnkucHJvdG90eXBlLmdldENvZGVjLmNhbGwodGhpcyk7aWYodGhpcy52dmNDKXtlKz0iLiIrdGhpcy52dmNDLmdlbmVyYWxfcHJvZmlsZV9pZGMsdGhpcy52dmNDLmdlbmVyYWxfdGllcl9mbGFnP2UrPSIuSCI6ZSs9Ii5MIixlKz10aGlzLnZ2Y0MuZ2VuZXJhbF9sZXZlbF9pZGM7dmFyIHM9IiI7aWYodGhpcy52dmNDLmdlbmVyYWxfY29uc3RyYWludF9pbmZvKXt2YXIgbj1bXSxhPTA7YXw9dGhpcy52dmNDLnB0bF9mcmFtZV9vbmx5X2NvbnN0cmFpbnQ8PDcsYXw9dGhpcy52dmNDLnB0bF9tdWx0aWxheWVyX2VuYWJsZWQ8PDY7dmFyIG87Zm9yKHQ9MDt0PHRoaXMudnZjQy5nZW5lcmFsX2NvbnN0cmFpbnRfaW5mby5sZW5ndGg7Kyt0KWF8PXRoaXMudnZjQy5nZW5lcmFsX2NvbnN0cmFpbnRfaW5mb1t0XT4+MiY2MyxuLnB1c2goYSksYSYmKG89dCksYT10aGlzLnZ2Y0MuZ2VuZXJhbF9jb25zdHJhaW50X2luZm9bdF0+PjImMztpZihvPT09dm9pZCAwKXM9Ii5DQSI7ZWxzZXtzPSIuQyI7dmFyIGg9IkFCQ0RFRkdISUpLTE1OT1BRUlNUVVZXWFlaMjM0NTY3IixmPTAscD0wO2Zvcih0PTA7dDw9bzsrK3QpZm9yKGY9Zjw8OHxuW3RdLHArPTg7cD49NTspe3ZhciBnPWY+PnAtNSYzMTtzKz1oW2ddLHAtPTUsZiY9KDE8PHApLTF9cCYmKGY8PD01LXAscys9aFtmJjMxXSl9fWUrPXN9cmV0dXJuIGV9LHIubXA0YVNhbXBsZUVudHJ5LnByb3RvdHlwZS5nZXRDb2RlYz1mdW5jdGlvbigpe3ZhciB0PXIuU2FtcGxlRW50cnkucHJvdG90eXBlLmdldENvZGVjLmNhbGwodGhpcyk7aWYodGhpcy5lc2RzJiZ0aGlzLmVzZHMuZXNkKXt2YXIgZT10aGlzLmVzZHMuZXNkLmdldE9USSgpLHM9dGhpcy5lc2RzLmVzZC5nZXRBdWRpb0NvbmZpZygpO3JldHVybiB0KyIuIityLmRlY2ltYWxUb0hleChlKSsocz8iLiIrczoiIil9ZWxzZSByZXR1cm4gdH0sci5zdHh0U2FtcGxlRW50cnkucHJvdG90eXBlLmdldENvZGVjPWZ1bmN0aW9uKCl7dmFyIHQ9ci5TYW1wbGVFbnRyeS5wcm90b3R5cGUuZ2V0Q29kZWMuY2FsbCh0aGlzKTtyZXR1cm4gdGhpcy5taW1lX2Zvcm1hdD90KyIuIit0aGlzLm1pbWVfZm9ybWF0OnR9LHIudnAwOFNhbXBsZUVudHJ5LnByb3RvdHlwZS5nZXRDb2RlYz1yLnZwMDlTYW1wbGVFbnRyeS5wcm90b3R5cGUuZ2V0Q29kZWM9ZnVuY3Rpb24oKXt2YXIgdD1yLlNhbXBsZUVudHJ5LnByb3RvdHlwZS5nZXRDb2RlYy5jYWxsKHRoaXMpLGU9dGhpcy52cGNDLmxldmVsO2U9PTAmJihlPSIwMCIpO3ZhciBzPXRoaXMudnBjQy5iaXREZXB0aDtyZXR1cm4gcz09OCYmKHM9IjA4IiksdCsiLjAiK3RoaXMudnBjQy5wcm9maWxlKyIuIitlKyIuIitzfSxyLmF2MDFTYW1wbGVFbnRyeS5wcm90b3R5cGUuZ2V0Q29kZWM9ZnVuY3Rpb24oKXt2YXIgdD1yLlNhbXBsZUVudHJ5LnByb3RvdHlwZS5nZXRDb2RlYy5jYWxsKHRoaXMpLGU9dGhpcy5hdjFDLnNlcV9sZXZlbF9pZHhfMDtlPDEwJiYoZT0iMCIrZSk7dmFyIHM7cmV0dXJuIHRoaXMuYXYxQy5zZXFfcHJvZmlsZT09PTImJnRoaXMuYXYxQy5oaWdoX2JpdGRlcHRoPT09MT9zPXRoaXMuYXYxQy50d2VsdmVfYml0PT09MT8iMTIiOiIxMCI6dGhpcy5hdjFDLnNlcV9wcm9maWxlPD0yJiYocz10aGlzLmF2MUMuaGlnaF9iaXRkZXB0aD09PTE/IjEwIjoiMDgiKSx0KyIuIit0aGlzLmF2MUMuc2VxX3Byb2ZpbGUrIi4iK2UrKHRoaXMuYXYxQy5zZXFfdGllcl8wPyJIIjoiTSIpKyIuIitzfSxyLkJveC5wcm90b3R5cGUud3JpdGVIZWFkZXI9ZnVuY3Rpb24odCxlKXt0aGlzLnNpemUrPTgsdGhpcy5zaXplPlMmJih0aGlzLnNpemUrPTgpLHRoaXMudHlwZT09PSJ1dWlkIiYmKHRoaXMuc2l6ZSs9MTYpLGQuZGVidWcoIkJveFdyaXRlciIsIldyaXRpbmcgYm94ICIrdGhpcy50eXBlKyIgb2Ygc2l6ZTogIit0aGlzLnNpemUrIiBhdCBwb3NpdGlvbiAiK3QuZ2V0UG9zaXRpb24oKSsoZXx8IiIpKSx0aGlzLnNpemU+Uz90LndyaXRlVWludDMyKDEpOih0aGlzLnNpemVQb3NpdGlvbj10LmdldFBvc2l0aW9uKCksdC53cml0ZVVpbnQzMih0aGlzLnNpemUpKSx0LndyaXRlU3RyaW5nKHRoaXMudHlwZSxudWxsLDQpLHRoaXMudHlwZT09PSJ1dWlkIiYmdC53cml0ZVVpbnQ4QXJyYXkodGhpcy51dWlkKSx0aGlzLnNpemU+UyYmdC53cml0ZVVpbnQ2NCh0aGlzLnNpemUpfSxyLkZ1bGxCb3gucHJvdG90eXBlLndyaXRlSGVhZGVyPWZ1bmN0aW9uKHQpe3RoaXMuc2l6ZSs9NCxyLkJveC5wcm90b3R5cGUud3JpdGVIZWFkZXIuY2FsbCh0aGlzLHQsIiB2PSIrdGhpcy52ZXJzaW9uKyIgZj0iK3RoaXMuZmxhZ3MpLHQud3JpdGVVaW50OCh0aGlzLnZlcnNpb24pLHQud3JpdGVVaW50MjQodGhpcy5mbGFncyl9LHIuQm94LnByb3RvdHlwZS53cml0ZT1mdW5jdGlvbih0KXt0aGlzLnR5cGU9PT0ibWRhdCI/dGhpcy5kYXRhJiYodGhpcy5zaXplPXRoaXMuZGF0YS5sZW5ndGgsdGhpcy53cml0ZUhlYWRlcih0KSx0LndyaXRlVWludDhBcnJheSh0aGlzLmRhdGEpKToodGhpcy5zaXplPXRoaXMuZGF0YT90aGlzLmRhdGEubGVuZ3RoOjAsdGhpcy53cml0ZUhlYWRlcih0KSx0aGlzLmRhdGEmJnQud3JpdGVVaW50OEFycmF5KHRoaXMuZGF0YSkpfSxyLkNvbnRhaW5lckJveC5wcm90b3R5cGUud3JpdGU9ZnVuY3Rpb24odCl7dGhpcy5zaXplPTAsdGhpcy53cml0ZUhlYWRlcih0KTtmb3IodmFyIGU9MDtlPHRoaXMuYm94ZXMubGVuZ3RoO2UrKyl0aGlzLmJveGVzW2VdJiYodGhpcy5ib3hlc1tlXS53cml0ZSh0KSx0aGlzLnNpemUrPXRoaXMuYm94ZXNbZV0uc2l6ZSk7ZC5kZWJ1ZygiQm94V3JpdGVyIiwiQWRqdXN0aW5nIGJveCAiK3RoaXMudHlwZSsiIHdpdGggbmV3IHNpemUgIit0aGlzLnNpemUpLHQuYWRqdXN0VWludDMyKHRoaXMuc2l6ZVBvc2l0aW9uLHRoaXMuc2l6ZSl9LHIuVHJhY2tSZWZlcmVuY2VUeXBlQm94LnByb3RvdHlwZS53cml0ZT1mdW5jdGlvbih0KXt0aGlzLnNpemU9dGhpcy50cmFja19pZHMubGVuZ3RoKjQsdGhpcy53cml0ZUhlYWRlcih0KSx0LndyaXRlVWludDMyQXJyYXkodGhpcy50cmFja19pZHMpfSxyLmF2Y0NCb3gucHJvdG90eXBlLndyaXRlPWZ1bmN0aW9uKHQpe3ZhciBlO2Zvcih0aGlzLnNpemU9NyxlPTA7ZTx0aGlzLlNQUy5sZW5ndGg7ZSsrKXRoaXMuc2l6ZSs9Mit0aGlzLlNQU1tlXS5sZW5ndGg7Zm9yKGU9MDtlPHRoaXMuUFBTLmxlbmd0aDtlKyspdGhpcy5zaXplKz0yK3RoaXMuUFBTW2VdLmxlbmd0aDtmb3IodGhpcy5leHQmJih0aGlzLnNpemUrPXRoaXMuZXh0Lmxlbmd0aCksdGhpcy53cml0ZUhlYWRlcih0KSx0LndyaXRlVWludDgodGhpcy5jb25maWd1cmF0aW9uVmVyc2lvbiksdC53cml0ZVVpbnQ4KHRoaXMuQVZDUHJvZmlsZUluZGljYXRpb24pLHQud3JpdGVVaW50OCh0aGlzLnByb2ZpbGVfY29tcGF0aWJpbGl0eSksdC53cml0ZVVpbnQ4KHRoaXMuQVZDTGV2ZWxJbmRpY2F0aW9uKSx0LndyaXRlVWludDgodGhpcy5sZW5ndGhTaXplTWludXNPbmUrKDYzPDwyKSksdC53cml0ZVVpbnQ4KHRoaXMuU1BTLmxlbmd0aCsoNzw8NSkpLGU9MDtlPHRoaXMuU1BTLmxlbmd0aDtlKyspdC53cml0ZVVpbnQxNih0aGlzLlNQU1tlXS5sZW5ndGgpLHQud3JpdGVVaW50OEFycmF5KHRoaXMuU1BTW2VdLm5hbHUpO2Zvcih0LndyaXRlVWludDgodGhpcy5QUFMubGVuZ3RoKSxlPTA7ZTx0aGlzLlBQUy5sZW5ndGg7ZSsrKXQud3JpdGVVaW50MTYodGhpcy5QUFNbZV0ubGVuZ3RoKSx0LndyaXRlVWludDhBcnJheSh0aGlzLlBQU1tlXS5uYWx1KTt0aGlzLmV4dCYmdC53cml0ZVVpbnQ4QXJyYXkodGhpcy5leHQpfSxyLmNvNjRCb3gucHJvdG90eXBlLndyaXRlPWZ1bmN0aW9uKHQpe3ZhciBlO2Zvcih0aGlzLnZlcnNpb249MCx0aGlzLmZsYWdzPTAsdGhpcy5zaXplPTQrOCp0aGlzLmNodW5rX29mZnNldHMubGVuZ3RoLHRoaXMud3JpdGVIZWFkZXIodCksdC53cml0ZVVpbnQzMih0aGlzLmNodW5rX29mZnNldHMubGVuZ3RoKSxlPTA7ZTx0aGlzLmNodW5rX29mZnNldHMubGVuZ3RoO2UrKyl0LndyaXRlVWludDY0KHRoaXMuY2h1bmtfb2Zmc2V0c1tlXSl9LHIuY3NsZ0JveC5wcm90b3R5cGUud3JpdGU9ZnVuY3Rpb24odCl7dGhpcy52ZXJzaW9uPTAsdGhpcy5mbGFncz0wLHRoaXMuc2l6ZT00KjUsdGhpcy53cml0ZUhlYWRlcih0KSx0LndyaXRlSW50MzIodGhpcy5jb21wb3NpdGlvblRvRFRTU2hpZnQpLHQud3JpdGVJbnQzMih0aGlzLmxlYXN0RGVjb2RlVG9EaXNwbGF5RGVsdGEpLHQud3JpdGVJbnQzMih0aGlzLmdyZWF0ZXN0RGVjb2RlVG9EaXNwbGF5RGVsdGEpLHQud3JpdGVJbnQzMih0aGlzLmNvbXBvc2l0aW9uU3RhcnRUaW1lKSx0LndyaXRlSW50MzIodGhpcy5jb21wb3NpdGlvbkVuZFRpbWUpfSxyLmN0dHNCb3gucHJvdG90eXBlLndyaXRlPWZ1bmN0aW9uKHQpe3ZhciBlO2Zvcih0aGlzLnZlcnNpb249MCx0aGlzLmZsYWdzPTAsdGhpcy5zaXplPTQrOCp0aGlzLnNhbXBsZV9jb3VudHMubGVuZ3RoLHRoaXMud3JpdGVIZWFkZXIodCksdC53cml0ZVVpbnQzMih0aGlzLnNhbXBsZV9jb3VudHMubGVuZ3RoKSxlPTA7ZTx0aGlzLnNhbXBsZV9jb3VudHMubGVuZ3RoO2UrKyl0LndyaXRlVWludDMyKHRoaXMuc2FtcGxlX2NvdW50c1tlXSksdGhpcy52ZXJzaW9uPT09MT90LndyaXRlSW50MzIodGhpcy5zYW1wbGVfb2Zmc2V0c1tlXSk6dC53cml0ZVVpbnQzMih0aGlzLnNhbXBsZV9vZmZzZXRzW2VdKX0sci5kcmVmQm94LnByb3RvdHlwZS53cml0ZT1mdW5jdGlvbih0KXt0aGlzLnZlcnNpb249MCx0aGlzLmZsYWdzPTAsdGhpcy5zaXplPTQsdGhpcy53cml0ZUhlYWRlcih0KSx0LndyaXRlVWludDMyKHRoaXMuZW50cmllcy5sZW5ndGgpO2Zvcih2YXIgZT0wO2U8dGhpcy5lbnRyaWVzLmxlbmd0aDtlKyspdGhpcy5lbnRyaWVzW2VdLndyaXRlKHQpLHRoaXMuc2l6ZSs9dGhpcy5lbnRyaWVzW2VdLnNpemU7ZC5kZWJ1ZygiQm94V3JpdGVyIiwiQWRqdXN0aW5nIGJveCAiK3RoaXMudHlwZSsiIHdpdGggbmV3IHNpemUgIit0aGlzLnNpemUpLHQuYWRqdXN0VWludDMyKHRoaXMuc2l6ZVBvc2l0aW9uLHRoaXMuc2l6ZSl9LHIuZWxuZ0JveC5wcm90b3R5cGUud3JpdGU9ZnVuY3Rpb24odCl7dGhpcy52ZXJzaW9uPTAsdGhpcy5mbGFncz0wLHRoaXMuc2l6ZT10aGlzLmV4dGVuZGVkX2xhbmd1YWdlLmxlbmd0aCx0aGlzLndyaXRlSGVhZGVyKHQpLHQud3JpdGVTdHJpbmcodGhpcy5leHRlbmRlZF9sYW5ndWFnZSl9LHIuZWxzdEJveC5wcm90b3R5cGUud3JpdGU9ZnVuY3Rpb24odCl7dGhpcy52ZXJzaW9uPTAsdGhpcy5mbGFncz0wLHRoaXMuc2l6ZT00KzEyKnRoaXMuZW50cmllcy5sZW5ndGgsdGhpcy53cml0ZUhlYWRlcih0KSx0LndyaXRlVWludDMyKHRoaXMuZW50cmllcy5sZW5ndGgpO2Zvcih2YXIgZT0wO2U8dGhpcy5lbnRyaWVzLmxlbmd0aDtlKyspe3ZhciBzPXRoaXMuZW50cmllc1tlXTt0LndyaXRlVWludDMyKHMuc2VnbWVudF9kdXJhdGlvbiksdC53cml0ZUludDMyKHMubWVkaWFfdGltZSksdC53cml0ZUludDE2KHMubWVkaWFfcmF0ZV9pbnRlZ2VyKSx0LndyaXRlSW50MTYocy5tZWRpYV9yYXRlX2ZyYWN0aW9uKX19LHIuZW1zZ0JveC5wcm90b3R5cGUud3JpdGU9ZnVuY3Rpb24odCl7dGhpcy52ZXJzaW9uPTAsdGhpcy5mbGFncz0wLHRoaXMuc2l6ZT00KjQrdGhpcy5tZXNzYWdlX2RhdGEubGVuZ3RoKyh0aGlzLnNjaGVtZV9pZF91cmkubGVuZ3RoKzEpKyh0aGlzLnZhbHVlLmxlbmd0aCsxKSx0aGlzLndyaXRlSGVhZGVyKHQpLHQud3JpdGVDU3RyaW5nKHRoaXMuc2NoZW1lX2lkX3VyaSksdC53cml0ZUNTdHJpbmcodGhpcy52YWx1ZSksdC53cml0ZVVpbnQzMih0aGlzLnRpbWVzY2FsZSksdC53cml0ZVVpbnQzMih0aGlzLnByZXNlbnRhdGlvbl90aW1lX2RlbHRhKSx0LndyaXRlVWludDMyKHRoaXMuZXZlbnRfZHVyYXRpb24pLHQud3JpdGVVaW50MzIodGhpcy5pZCksdC53cml0ZVVpbnQ4QXJyYXkodGhpcy5tZXNzYWdlX2RhdGEpfSxyLmZ0eXBCb3gucHJvdG90eXBlLndyaXRlPWZ1bmN0aW9uKHQpe3RoaXMuc2l6ZT04KzQqdGhpcy5jb21wYXRpYmxlX2JyYW5kcy5sZW5ndGgsdGhpcy53cml0ZUhlYWRlcih0KSx0LndyaXRlU3RyaW5nKHRoaXMubWFqb3JfYnJhbmQsbnVsbCw0KSx0LndyaXRlVWludDMyKHRoaXMubWlub3JfdmVyc2lvbik7Zm9yKHZhciBlPTA7ZTx0aGlzLmNvbXBhdGlibGVfYnJhbmRzLmxlbmd0aDtlKyspdC53cml0ZVN0cmluZyh0aGlzLmNvbXBhdGlibGVfYnJhbmRzW2VdLG51bGwsNCl9LHIuaGRsckJveC5wcm90b3R5cGUud3JpdGU9ZnVuY3Rpb24odCl7dGhpcy5zaXplPTUqNCt0aGlzLm5hbWUubGVuZ3RoKzEsdGhpcy52ZXJzaW9uPTAsdGhpcy5mbGFncz0wLHRoaXMud3JpdGVIZWFkZXIodCksdC53cml0ZVVpbnQzMigwKSx0LndyaXRlU3RyaW5nKHRoaXMuaGFuZGxlcixudWxsLDQpLHQud3JpdGVVaW50MzIoMCksdC53cml0ZVVpbnQzMigwKSx0LndyaXRlVWludDMyKDApLHQud3JpdGVDU3RyaW5nKHRoaXMubmFtZSl9LHIuaHZjQ0JveC5wcm90b3R5cGUud3JpdGU9ZnVuY3Rpb24odCl7dmFyIGUscztmb3IodGhpcy5zaXplPTIzLGU9MDtlPHRoaXMubmFsdV9hcnJheXMubGVuZ3RoO2UrKylmb3IodGhpcy5zaXplKz0zLHM9MDtzPHRoaXMubmFsdV9hcnJheXNbZV0ubGVuZ3RoO3MrKyl0aGlzLnNpemUrPTIrdGhpcy5uYWx1X2FycmF5c1tlXVtzXS5kYXRhLmxlbmd0aDtmb3IodGhpcy53cml0ZUhlYWRlcih0KSx0LndyaXRlVWludDgodGhpcy5jb25maWd1cmF0aW9uVmVyc2lvbiksdC53cml0ZVVpbnQ4KHRoaXMuZ2VuZXJhbF9wcm9maWxlX3NwYWNlPDw2K3RoaXMuZ2VuZXJhbF90aWVyX2ZsYWc8PDUrdGhpcy5nZW5lcmFsX3Byb2ZpbGVfaWRjKSx0LndyaXRlVWludDMyKHRoaXMuZ2VuZXJhbF9wcm9maWxlX2NvbXBhdGliaWxpdHkpLHQud3JpdGVVaW50OEFycmF5KHRoaXMuZ2VuZXJhbF9jb25zdHJhaW50X2luZGljYXRvciksdC53cml0ZVVpbnQ4KHRoaXMuZ2VuZXJhbF9sZXZlbF9pZGMpLHQud3JpdGVVaW50MTYodGhpcy5taW5fc3BhdGlhbF9zZWdtZW50YXRpb25faWRjKygxNTw8MjQpKSx0LndyaXRlVWludDgodGhpcy5wYXJhbGxlbGlzbVR5cGUrKDYzPDwyKSksdC53cml0ZVVpbnQ4KHRoaXMuY2hyb21hX2Zvcm1hdF9pZGMrKDYzPDwyKSksdC53cml0ZVVpbnQ4KHRoaXMuYml0X2RlcHRoX2x1bWFfbWludXM4KygzMTw8MykpLHQud3JpdGVVaW50OCh0aGlzLmJpdF9kZXB0aF9jaHJvbWFfbWludXM4KygzMTw8MykpLHQud3JpdGVVaW50MTYodGhpcy5hdmdGcmFtZVJhdGUpLHQud3JpdGVVaW50OCgodGhpcy5jb25zdGFudEZyYW1lUmF0ZTw8NikrKHRoaXMubnVtVGVtcG9yYWxMYXllcnM8PDMpKyh0aGlzLnRlbXBvcmFsSWROZXN0ZWQ8PDIpK3RoaXMubGVuZ3RoU2l6ZU1pbnVzT25lKSx0LndyaXRlVWludDgodGhpcy5uYWx1X2FycmF5cy5sZW5ndGgpLGU9MDtlPHRoaXMubmFsdV9hcnJheXMubGVuZ3RoO2UrKylmb3IodC53cml0ZVVpbnQ4KCh0aGlzLm5hbHVfYXJyYXlzW2VdLmNvbXBsZXRlbmVzczw8NykrdGhpcy5uYWx1X2FycmF5c1tlXS5uYWx1X3R5cGUpLHQud3JpdGVVaW50MTYodGhpcy5uYWx1X2FycmF5c1tlXS5sZW5ndGgpLHM9MDtzPHRoaXMubmFsdV9hcnJheXNbZV0ubGVuZ3RoO3MrKyl0LndyaXRlVWludDE2KHRoaXMubmFsdV9hcnJheXNbZV1bc10uZGF0YS5sZW5ndGgpLHQud3JpdGVVaW50OEFycmF5KHRoaXMubmFsdV9hcnJheXNbZV1bc10uZGF0YSl9LHIua2luZEJveC5wcm90b3R5cGUud3JpdGU9ZnVuY3Rpb24odCl7dGhpcy52ZXJzaW9uPTAsdGhpcy5mbGFncz0wLHRoaXMuc2l6ZT10aGlzLnNjaGVtZVVSSS5sZW5ndGgrMSsodGhpcy52YWx1ZS5sZW5ndGgrMSksdGhpcy53cml0ZUhlYWRlcih0KSx0LndyaXRlQ1N0cmluZyh0aGlzLnNjaGVtZVVSSSksdC53cml0ZUNTdHJpbmcodGhpcy52YWx1ZSl9LHIubWRoZEJveC5wcm90b3R5cGUud3JpdGU9ZnVuY3Rpb24odCl7dGhpcy5zaXplPTQqNCsyKjIsdGhpcy5mbGFncz0wLHRoaXMudmVyc2lvbj0wLHRoaXMud3JpdGVIZWFkZXIodCksdC53cml0ZVVpbnQzMih0aGlzLmNyZWF0aW9uX3RpbWUpLHQud3JpdGVVaW50MzIodGhpcy5tb2RpZmljYXRpb25fdGltZSksdC53cml0ZVVpbnQzMih0aGlzLnRpbWVzY2FsZSksdC53cml0ZVVpbnQzMih0aGlzLmR1cmF0aW9uKSx0LndyaXRlVWludDE2KHRoaXMubGFuZ3VhZ2UpLHQud3JpdGVVaW50MTYoMCl9LHIubWVoZEJveC5wcm90b3R5cGUud3JpdGU9ZnVuY3Rpb24odCl7dGhpcy52ZXJzaW9uPTAsdGhpcy5mbGFncz0wLHRoaXMuc2l6ZT00LHRoaXMud3JpdGVIZWFkZXIodCksdC53cml0ZVVpbnQzMih0aGlzLmZyYWdtZW50X2R1cmF0aW9uKX0sci5tZmhkQm94LnByb3RvdHlwZS53cml0ZT1mdW5jdGlvbih0KXt0aGlzLnZlcnNpb249MCx0aGlzLmZsYWdzPTAsdGhpcy5zaXplPTQsdGhpcy53cml0ZUhlYWRlcih0KSx0LndyaXRlVWludDMyKHRoaXMuc2VxdWVuY2VfbnVtYmVyKX0sci5tdmhkQm94LnByb3RvdHlwZS53cml0ZT1mdW5jdGlvbih0KXt0aGlzLnZlcnNpb249MCx0aGlzLmZsYWdzPTAsdGhpcy5zaXplPTIzKjQrMioyLHRoaXMud3JpdGVIZWFkZXIodCksdC53cml0ZVVpbnQzMih0aGlzLmNyZWF0aW9uX3RpbWUpLHQud3JpdGVVaW50MzIodGhpcy5tb2RpZmljYXRpb25fdGltZSksdC53cml0ZVVpbnQzMih0aGlzLnRpbWVzY2FsZSksdC53cml0ZVVpbnQzMih0aGlzLmR1cmF0aW9uKSx0LndyaXRlVWludDMyKHRoaXMucmF0ZSksdC53cml0ZVVpbnQxNih0aGlzLnZvbHVtZTw8OCksdC53cml0ZVVpbnQxNigwKSx0LndyaXRlVWludDMyKDApLHQud3JpdGVVaW50MzIoMCksdC53cml0ZVVpbnQzMkFycmF5KHRoaXMubWF0cml4KSx0LndyaXRlVWludDMyKDApLHQud3JpdGVVaW50MzIoMCksdC53cml0ZVVpbnQzMigwKSx0LndyaXRlVWludDMyKDApLHQud3JpdGVVaW50MzIoMCksdC53cml0ZVVpbnQzMigwKSx0LndyaXRlVWludDMyKHRoaXMubmV4dF90cmFja19pZCl9LHIuU2FtcGxlRW50cnkucHJvdG90eXBlLndyaXRlSGVhZGVyPWZ1bmN0aW9uKHQpe3RoaXMuc2l6ZT04LHIuQm94LnByb3RvdHlwZS53cml0ZUhlYWRlci5jYWxsKHRoaXMsdCksdC53cml0ZVVpbnQ4KDApLHQud3JpdGVVaW50OCgwKSx0LndyaXRlVWludDgoMCksdC53cml0ZVVpbnQ4KDApLHQud3JpdGVVaW50OCgwKSx0LndyaXRlVWludDgoMCksdC53cml0ZVVpbnQxNih0aGlzLmRhdGFfcmVmZXJlbmNlX2luZGV4KX0sci5TYW1wbGVFbnRyeS5wcm90b3R5cGUud3JpdGVGb290ZXI9ZnVuY3Rpb24odCl7Zm9yKHZhciBlPTA7ZTx0aGlzLmJveGVzLmxlbmd0aDtlKyspdGhpcy5ib3hlc1tlXS53cml0ZSh0KSx0aGlzLnNpemUrPXRoaXMuYm94ZXNbZV0uc2l6ZTtkLmRlYnVnKCJCb3hXcml0ZXIiLCJBZGp1c3RpbmcgYm94ICIrdGhpcy50eXBlKyIgd2l0aCBuZXcgc2l6ZSAiK3RoaXMuc2l6ZSksdC5hZGp1c3RVaW50MzIodGhpcy5zaXplUG9zaXRpb24sdGhpcy5zaXplKX0sci5TYW1wbGVFbnRyeS5wcm90b3R5cGUud3JpdGU9ZnVuY3Rpb24odCl7dGhpcy53cml0ZUhlYWRlcih0KSx0LndyaXRlVWludDhBcnJheSh0aGlzLmRhdGEpLHRoaXMuc2l6ZSs9dGhpcy5kYXRhLmxlbmd0aCxkLmRlYnVnKCJCb3hXcml0ZXIiLCJBZGp1c3RpbmcgYm94ICIrdGhpcy50eXBlKyIgd2l0aCBuZXcgc2l6ZSAiK3RoaXMuc2l6ZSksdC5hZGp1c3RVaW50MzIodGhpcy5zaXplUG9zaXRpb24sdGhpcy5zaXplKX0sci5WaXN1YWxTYW1wbGVFbnRyeS5wcm90b3R5cGUud3JpdGU9ZnVuY3Rpb24odCl7dGhpcy53cml0ZUhlYWRlcih0KSx0aGlzLnNpemUrPTIqNys2KjQrMzIsdC53cml0ZVVpbnQxNigwKSx0LndyaXRlVWludDE2KDApLHQud3JpdGVVaW50MzIoMCksdC53cml0ZVVpbnQzMigwKSx0LndyaXRlVWludDMyKDApLHQud3JpdGVVaW50MTYodGhpcy53aWR0aCksdC53cml0ZVVpbnQxNih0aGlzLmhlaWdodCksdC53cml0ZVVpbnQzMih0aGlzLmhvcml6cmVzb2x1dGlvbiksdC53cml0ZVVpbnQzMih0aGlzLnZlcnRyZXNvbHV0aW9uKSx0LndyaXRlVWludDMyKDApLHQud3JpdGVVaW50MTYodGhpcy5mcmFtZV9jb3VudCksdC53cml0ZVVpbnQ4KE1hdGgubWluKDMxLHRoaXMuY29tcHJlc3Nvcm5hbWUubGVuZ3RoKSksdC53cml0ZVN0cmluZyh0aGlzLmNvbXByZXNzb3JuYW1lLG51bGwsMzEpLHQud3JpdGVVaW50MTYodGhpcy5kZXB0aCksdC53cml0ZUludDE2KC0xKSx0aGlzLndyaXRlRm9vdGVyKHQpfSxyLkF1ZGlvU2FtcGxlRW50cnkucHJvdG90eXBlLndyaXRlPWZ1bmN0aW9uKHQpe3RoaXMud3JpdGVIZWFkZXIodCksdGhpcy5zaXplKz0yKjQrMyo0LHQud3JpdGVVaW50MzIoMCksdC53cml0ZVVpbnQzMigwKSx0LndyaXRlVWludDE2KHRoaXMuY2hhbm5lbF9jb3VudCksdC53cml0ZVVpbnQxNih0aGlzLnNhbXBsZXNpemUpLHQud3JpdGVVaW50MTYoMCksdC53cml0ZVVpbnQxNigwKSx0LndyaXRlVWludDMyKHRoaXMuc2FtcGxlcmF0ZTw8MTYpLHRoaXMud3JpdGVGb290ZXIodCl9LHIuc3RwcFNhbXBsZUVudHJ5LnByb3RvdHlwZS53cml0ZT1mdW5jdGlvbih0KXt0aGlzLndyaXRlSGVhZGVyKHQpLHRoaXMuc2l6ZSs9dGhpcy5uYW1lc3BhY2UubGVuZ3RoKzErdGhpcy5zY2hlbWFfbG9jYXRpb24ubGVuZ3RoKzErdGhpcy5hdXhpbGlhcnlfbWltZV90eXBlcy5sZW5ndGgrMSx0LndyaXRlQ1N0cmluZyh0aGlzLm5hbWVzcGFjZSksdC53cml0ZUNTdHJpbmcodGhpcy5zY2hlbWFfbG9jYXRpb24pLHQud3JpdGVDU3RyaW5nKHRoaXMuYXV4aWxpYXJ5X21pbWVfdHlwZXMpLHRoaXMud3JpdGVGb290ZXIodCl9LHIuU2FtcGxlR3JvdXBFbnRyeS5wcm90b3R5cGUud3JpdGU9ZnVuY3Rpb24odCl7dC53cml0ZVVpbnQ4QXJyYXkodGhpcy5kYXRhKX0sci5zYmdwQm94LnByb3RvdHlwZS53cml0ZT1mdW5jdGlvbih0KXt0aGlzLnZlcnNpb249MSx0aGlzLmZsYWdzPTAsdGhpcy5zaXplPTEyKzgqdGhpcy5lbnRyaWVzLmxlbmd0aCx0aGlzLndyaXRlSGVhZGVyKHQpLHQud3JpdGVTdHJpbmcodGhpcy5ncm91cGluZ190eXBlLG51bGwsNCksdC53cml0ZVVpbnQzMih0aGlzLmdyb3VwaW5nX3R5cGVfcGFyYW1ldGVyKSx0LndyaXRlVWludDMyKHRoaXMuZW50cmllcy5sZW5ndGgpO2Zvcih2YXIgZT0wO2U8dGhpcy5lbnRyaWVzLmxlbmd0aDtlKyspe3ZhciBzPXRoaXMuZW50cmllc1tlXTt0LndyaXRlSW50MzIocy5zYW1wbGVfY291bnQpLHQud3JpdGVJbnQzMihzLmdyb3VwX2Rlc2NyaXB0aW9uX2luZGV4KX19LHIuc2dwZEJveC5wcm90b3R5cGUud3JpdGU9ZnVuY3Rpb24odCl7dmFyIGUscztmb3IodGhpcy5mbGFncz0wLHRoaXMuc2l6ZT0xMixlPTA7ZTx0aGlzLmVudHJpZXMubGVuZ3RoO2UrKylzPXRoaXMuZW50cmllc1tlXSx0aGlzLnZlcnNpb249PT0xJiYodGhpcy5kZWZhdWx0X2xlbmd0aD09PTAmJih0aGlzLnNpemUrPTQpLHRoaXMuc2l6ZSs9cy5kYXRhLmxlbmd0aCk7Zm9yKHRoaXMud3JpdGVIZWFkZXIodCksdC53cml0ZVN0cmluZyh0aGlzLmdyb3VwaW5nX3R5cGUsbnVsbCw0KSx0aGlzLnZlcnNpb249PT0xJiZ0LndyaXRlVWludDMyKHRoaXMuZGVmYXVsdF9sZW5ndGgpLHRoaXMudmVyc2lvbj49MiYmdC53cml0ZVVpbnQzMih0aGlzLmRlZmF1bHRfc2FtcGxlX2Rlc2NyaXB0aW9uX2luZGV4KSx0LndyaXRlVWludDMyKHRoaXMuZW50cmllcy5sZW5ndGgpLGU9MDtlPHRoaXMuZW50cmllcy5sZW5ndGg7ZSsrKXM9dGhpcy5lbnRyaWVzW2VdLHRoaXMudmVyc2lvbj09PTEmJnRoaXMuZGVmYXVsdF9sZW5ndGg9PT0wJiZ0LndyaXRlVWludDMyKHMuZGVzY3JpcHRpb25fbGVuZ3RoKSxzLndyaXRlKHQpfSxyLnNpZHhCb3gucHJvdG90eXBlLndyaXRlPWZ1bmN0aW9uKHQpe3RoaXMudmVyc2lvbj0wLHRoaXMuZmxhZ3M9MCx0aGlzLnNpemU9NCo0KzIrMisxMip0aGlzLnJlZmVyZW5jZXMubGVuZ3RoLHRoaXMud3JpdGVIZWFkZXIodCksdC53cml0ZVVpbnQzMih0aGlzLnJlZmVyZW5jZV9JRCksdC53cml0ZVVpbnQzMih0aGlzLnRpbWVzY2FsZSksdC53cml0ZVVpbnQzMih0aGlzLmVhcmxpZXN0X3ByZXNlbnRhdGlvbl90aW1lKSx0LndyaXRlVWludDMyKHRoaXMuZmlyc3Rfb2Zmc2V0KSx0LndyaXRlVWludDE2KDApLHQud3JpdGVVaW50MTYodGhpcy5yZWZlcmVuY2VzLmxlbmd0aCk7Zm9yKHZhciBlPTA7ZTx0aGlzLnJlZmVyZW5jZXMubGVuZ3RoO2UrKyl7dmFyIHM9dGhpcy5yZWZlcmVuY2VzW2VdO3Qud3JpdGVVaW50MzIocy5yZWZlcmVuY2VfdHlwZTw8MzF8cy5yZWZlcmVuY2VkX3NpemUpLHQud3JpdGVVaW50MzIocy5zdWJzZWdtZW50X2R1cmF0aW9uKSx0LndyaXRlVWludDMyKHMuc3RhcnRzX3dpdGhfU0FQPDwzMXxzLlNBUF90eXBlPDwyOHxzLlNBUF9kZWx0YV90aW1lKX19LHIuc21oZEJveC5wcm90b3R5cGUud3JpdGU9ZnVuY3Rpb24odCl7dGhpcy52ZXJzaW9uPTAsdGhpcy5mbGFncz0xLHRoaXMuc2l6ZT00LHRoaXMud3JpdGVIZWFkZXIodCksdC53cml0ZVVpbnQxNih0aGlzLmJhbGFuY2UpLHQud3JpdGVVaW50MTYoMCl9LHIuc3Rjb0JveC5wcm90b3R5cGUud3JpdGU9ZnVuY3Rpb24odCl7dGhpcy52ZXJzaW9uPTAsdGhpcy5mbGFncz0wLHRoaXMuc2l6ZT00KzQqdGhpcy5jaHVua19vZmZzZXRzLmxlbmd0aCx0aGlzLndyaXRlSGVhZGVyKHQpLHQud3JpdGVVaW50MzIodGhpcy5jaHVua19vZmZzZXRzLmxlbmd0aCksdC53cml0ZVVpbnQzMkFycmF5KHRoaXMuY2h1bmtfb2Zmc2V0cyl9LHIuc3RzY0JveC5wcm90b3R5cGUud3JpdGU9ZnVuY3Rpb24odCl7dmFyIGU7Zm9yKHRoaXMudmVyc2lvbj0wLHRoaXMuZmxhZ3M9MCx0aGlzLnNpemU9NCsxMip0aGlzLmZpcnN0X2NodW5rLmxlbmd0aCx0aGlzLndyaXRlSGVhZGVyKHQpLHQud3JpdGVVaW50MzIodGhpcy5maXJzdF9jaHVuay5sZW5ndGgpLGU9MDtlPHRoaXMuZmlyc3RfY2h1bmsubGVuZ3RoO2UrKyl0LndyaXRlVWludDMyKHRoaXMuZmlyc3RfY2h1bmtbZV0pLHQud3JpdGVVaW50MzIodGhpcy5zYW1wbGVzX3Blcl9jaHVua1tlXSksdC53cml0ZVVpbnQzMih0aGlzLnNhbXBsZV9kZXNjcmlwdGlvbl9pbmRleFtlXSl9LHIuc3RzZEJveC5wcm90b3R5cGUud3JpdGU9ZnVuY3Rpb24odCl7dmFyIGU7Zm9yKHRoaXMudmVyc2lvbj0wLHRoaXMuZmxhZ3M9MCx0aGlzLnNpemU9MCx0aGlzLndyaXRlSGVhZGVyKHQpLHQud3JpdGVVaW50MzIodGhpcy5lbnRyaWVzLmxlbmd0aCksdGhpcy5zaXplKz00LGU9MDtlPHRoaXMuZW50cmllcy5sZW5ndGg7ZSsrKXRoaXMuZW50cmllc1tlXS53cml0ZSh0KSx0aGlzLnNpemUrPXRoaXMuZW50cmllc1tlXS5zaXplO2QuZGVidWcoIkJveFdyaXRlciIsIkFkanVzdGluZyBib3ggIit0aGlzLnR5cGUrIiB3aXRoIG5ldyBzaXplICIrdGhpcy5zaXplKSx0LmFkanVzdFVpbnQzMih0aGlzLnNpemVQb3NpdGlvbix0aGlzLnNpemUpfSxyLnN0c2hCb3gucHJvdG90eXBlLndyaXRlPWZ1bmN0aW9uKHQpe3ZhciBlO2Zvcih0aGlzLnZlcnNpb249MCx0aGlzLmZsYWdzPTAsdGhpcy5zaXplPTQrOCp0aGlzLnNoYWRvd2VkX3NhbXBsZV9udW1iZXJzLmxlbmd0aCx0aGlzLndyaXRlSGVhZGVyKHQpLHQud3JpdGVVaW50MzIodGhpcy5zaGFkb3dlZF9zYW1wbGVfbnVtYmVycy5sZW5ndGgpLGU9MDtlPHRoaXMuc2hhZG93ZWRfc2FtcGxlX251bWJlcnMubGVuZ3RoO2UrKyl0LndyaXRlVWludDMyKHRoaXMuc2hhZG93ZWRfc2FtcGxlX251bWJlcnNbZV0pLHQud3JpdGVVaW50MzIodGhpcy5zeW5jX3NhbXBsZV9udW1iZXJzW2VdKX0sci5zdHNzQm94LnByb3RvdHlwZS53cml0ZT1mdW5jdGlvbih0KXt0aGlzLnZlcnNpb249MCx0aGlzLmZsYWdzPTAsdGhpcy5zaXplPTQrNCp0aGlzLnNhbXBsZV9udW1iZXJzLmxlbmd0aCx0aGlzLndyaXRlSGVhZGVyKHQpLHQud3JpdGVVaW50MzIodGhpcy5zYW1wbGVfbnVtYmVycy5sZW5ndGgpLHQud3JpdGVVaW50MzJBcnJheSh0aGlzLnNhbXBsZV9udW1iZXJzKX0sci5zdHN6Qm94LnByb3RvdHlwZS53cml0ZT1mdW5jdGlvbih0KXt2YXIgZSxzPSEwO2lmKHRoaXMudmVyc2lvbj0wLHRoaXMuZmxhZ3M9MCx0aGlzLnNhbXBsZV9zaXplcy5sZW5ndGg+MClmb3IoZT0wO2UrMTx0aGlzLnNhbXBsZV9zaXplcy5sZW5ndGg7KWlmKHRoaXMuc2FtcGxlX3NpemVzW2UrMV0hPT10aGlzLnNhbXBsZV9zaXplc1swXSl7cz0hMTticmVha31lbHNlIGUrKztlbHNlIHM9ITE7dGhpcy5zaXplPTgsc3x8KHRoaXMuc2l6ZSs9NCp0aGlzLnNhbXBsZV9zaXplcy5sZW5ndGgpLHRoaXMud3JpdGVIZWFkZXIodCkscz90LndyaXRlVWludDMyKHRoaXMuc2FtcGxlX3NpemVzWzBdKTp0LndyaXRlVWludDMyKDApLHQud3JpdGVVaW50MzIodGhpcy5zYW1wbGVfc2l6ZXMubGVuZ3RoKSxzfHx0LndyaXRlVWludDMyQXJyYXkodGhpcy5zYW1wbGVfc2l6ZXMpfSxyLnN0dHNCb3gucHJvdG90eXBlLndyaXRlPWZ1bmN0aW9uKHQpe3ZhciBlO2Zvcih0aGlzLnZlcnNpb249MCx0aGlzLmZsYWdzPTAsdGhpcy5zaXplPTQrOCp0aGlzLnNhbXBsZV9jb3VudHMubGVuZ3RoLHRoaXMud3JpdGVIZWFkZXIodCksdC53cml0ZVVpbnQzMih0aGlzLnNhbXBsZV9jb3VudHMubGVuZ3RoKSxlPTA7ZTx0aGlzLnNhbXBsZV9jb3VudHMubGVuZ3RoO2UrKyl0LndyaXRlVWludDMyKHRoaXMuc2FtcGxlX2NvdW50c1tlXSksdC53cml0ZVVpbnQzMih0aGlzLnNhbXBsZV9kZWx0YXNbZV0pfSxyLnRmZHRCb3gucHJvdG90eXBlLndyaXRlPWZ1bmN0aW9uKHQpe3ZhciBlPU1hdGgucG93KDIsMzIpLTE7dGhpcy52ZXJzaW9uPXRoaXMuYmFzZU1lZGlhRGVjb2RlVGltZT5lPzE6MCx0aGlzLmZsYWdzPTAsdGhpcy5zaXplPTQsdGhpcy52ZXJzaW9uPT09MSYmKHRoaXMuc2l6ZSs9NCksdGhpcy53cml0ZUhlYWRlcih0KSx0aGlzLnZlcnNpb249PT0xP3Qud3JpdGVVaW50NjQodGhpcy5iYXNlTWVkaWFEZWNvZGVUaW1lKTp0LndyaXRlVWludDMyKHRoaXMuYmFzZU1lZGlhRGVjb2RlVGltZSl9LHIudGZoZEJveC5wcm90b3R5cGUud3JpdGU9ZnVuY3Rpb24odCl7dGhpcy52ZXJzaW9uPTAsdGhpcy5zaXplPTQsdGhpcy5mbGFncyZyLlRGSERfRkxBR19CQVNFX0RBVEFfT0ZGU0VUJiYodGhpcy5zaXplKz04KSx0aGlzLmZsYWdzJnIuVEZIRF9GTEFHX1NBTVBMRV9ERVNDJiYodGhpcy5zaXplKz00KSx0aGlzLmZsYWdzJnIuVEZIRF9GTEFHX1NBTVBMRV9EVVImJih0aGlzLnNpemUrPTQpLHRoaXMuZmxhZ3Mmci5URkhEX0ZMQUdfU0FNUExFX1NJWkUmJih0aGlzLnNpemUrPTQpLHRoaXMuZmxhZ3Mmci5URkhEX0ZMQUdfU0FNUExFX0ZMQUdTJiYodGhpcy5zaXplKz00KSx0aGlzLndyaXRlSGVhZGVyKHQpLHQud3JpdGVVaW50MzIodGhpcy50cmFja19pZCksdGhpcy5mbGFncyZyLlRGSERfRkxBR19CQVNFX0RBVEFfT0ZGU0VUJiZ0LndyaXRlVWludDY0KHRoaXMuYmFzZV9kYXRhX29mZnNldCksdGhpcy5mbGFncyZyLlRGSERfRkxBR19TQU1QTEVfREVTQyYmdC53cml0ZVVpbnQzMih0aGlzLmRlZmF1bHRfc2FtcGxlX2Rlc2NyaXB0aW9uX2luZGV4KSx0aGlzLmZsYWdzJnIuVEZIRF9GTEFHX1NBTVBMRV9EVVImJnQud3JpdGVVaW50MzIodGhpcy5kZWZhdWx0X3NhbXBsZV9kdXJhdGlvbiksdGhpcy5mbGFncyZyLlRGSERfRkxBR19TQU1QTEVfU0laRSYmdC53cml0ZVVpbnQzMih0aGlzLmRlZmF1bHRfc2FtcGxlX3NpemUpLHRoaXMuZmxhZ3Mmci5URkhEX0ZMQUdfU0FNUExFX0ZMQUdTJiZ0LndyaXRlVWludDMyKHRoaXMuZGVmYXVsdF9zYW1wbGVfZmxhZ3MpfSxyLnRraGRCb3gucHJvdG90eXBlLndyaXRlPWZ1bmN0aW9uKHQpe3RoaXMudmVyc2lvbj0wLHRoaXMuc2l6ZT00KjE4KzIqNCx0aGlzLndyaXRlSGVhZGVyKHQpLHQud3JpdGVVaW50MzIodGhpcy5jcmVhdGlvbl90aW1lKSx0LndyaXRlVWludDMyKHRoaXMubW9kaWZpY2F0aW9uX3RpbWUpLHQud3JpdGVVaW50MzIodGhpcy50cmFja19pZCksdC53cml0ZVVpbnQzMigwKSx0LndyaXRlVWludDMyKHRoaXMuZHVyYXRpb24pLHQud3JpdGVVaW50MzIoMCksdC53cml0ZVVpbnQzMigwKSx0LndyaXRlSW50MTYodGhpcy5sYXllciksdC53cml0ZUludDE2KHRoaXMuYWx0ZXJuYXRlX2dyb3VwKSx0LndyaXRlSW50MTYodGhpcy52b2x1bWU8PDgpLHQud3JpdGVVaW50MTYoMCksdC53cml0ZUludDMyQXJyYXkodGhpcy5tYXRyaXgpLHQud3JpdGVVaW50MzIodGhpcy53aWR0aCksdC53cml0ZVVpbnQzMih0aGlzLmhlaWdodCl9LHIudHJleEJveC5wcm90b3R5cGUud3JpdGU9ZnVuY3Rpb24odCl7dGhpcy52ZXJzaW9uPTAsdGhpcy5mbGFncz0wLHRoaXMuc2l6ZT00KjUsdGhpcy53cml0ZUhlYWRlcih0KSx0LndyaXRlVWludDMyKHRoaXMudHJhY2tfaWQpLHQud3JpdGVVaW50MzIodGhpcy5kZWZhdWx0X3NhbXBsZV9kZXNjcmlwdGlvbl9pbmRleCksdC53cml0ZVVpbnQzMih0aGlzLmRlZmF1bHRfc2FtcGxlX2R1cmF0aW9uKSx0LndyaXRlVWludDMyKHRoaXMuZGVmYXVsdF9zYW1wbGVfc2l6ZSksdC53cml0ZVVpbnQzMih0aGlzLmRlZmF1bHRfc2FtcGxlX2ZsYWdzKX0sci50cnVuQm94LnByb3RvdHlwZS53cml0ZT1mdW5jdGlvbih0KXt0aGlzLnZlcnNpb249MCx0aGlzLnNpemU9NCx0aGlzLmZsYWdzJnIuVFJVTl9GTEFHU19EQVRBX09GRlNFVCYmKHRoaXMuc2l6ZSs9NCksdGhpcy5mbGFncyZyLlRSVU5fRkxBR1NfRklSU1RfRkxBRyYmKHRoaXMuc2l6ZSs9NCksdGhpcy5mbGFncyZyLlRSVU5fRkxBR1NfRFVSQVRJT04mJih0aGlzLnNpemUrPTQqdGhpcy5zYW1wbGVfZHVyYXRpb24ubGVuZ3RoKSx0aGlzLmZsYWdzJnIuVFJVTl9GTEFHU19TSVpFJiYodGhpcy5zaXplKz00KnRoaXMuc2FtcGxlX3NpemUubGVuZ3RoKSx0aGlzLmZsYWdzJnIuVFJVTl9GTEFHU19GTEFHUyYmKHRoaXMuc2l6ZSs9NCp0aGlzLnNhbXBsZV9mbGFncy5sZW5ndGgpLHRoaXMuZmxhZ3Mmci5UUlVOX0ZMQUdTX0NUU19PRkZTRVQmJih0aGlzLnNpemUrPTQqdGhpcy5zYW1wbGVfY29tcG9zaXRpb25fdGltZV9vZmZzZXQubGVuZ3RoKSx0aGlzLndyaXRlSGVhZGVyKHQpLHQud3JpdGVVaW50MzIodGhpcy5zYW1wbGVfY291bnQpLHRoaXMuZmxhZ3Mmci5UUlVOX0ZMQUdTX0RBVEFfT0ZGU0VUJiYodGhpcy5kYXRhX29mZnNldF9wb3NpdGlvbj10LmdldFBvc2l0aW9uKCksdC53cml0ZUludDMyKHRoaXMuZGF0YV9vZmZzZXQpKSx0aGlzLmZsYWdzJnIuVFJVTl9GTEFHU19GSVJTVF9GTEFHJiZ0LndyaXRlVWludDMyKHRoaXMuZmlyc3Rfc2FtcGxlX2ZsYWdzKTtmb3IodmFyIGU9MDtlPHRoaXMuc2FtcGxlX2NvdW50O2UrKyl0aGlzLmZsYWdzJnIuVFJVTl9GTEFHU19EVVJBVElPTiYmdC53cml0ZVVpbnQzMih0aGlzLnNhbXBsZV9kdXJhdGlvbltlXSksdGhpcy5mbGFncyZyLlRSVU5fRkxBR1NfU0laRSYmdC53cml0ZVVpbnQzMih0aGlzLnNhbXBsZV9zaXplW2VdKSx0aGlzLmZsYWdzJnIuVFJVTl9GTEFHU19GTEFHUyYmdC53cml0ZVVpbnQzMih0aGlzLnNhbXBsZV9mbGFnc1tlXSksdGhpcy5mbGFncyZyLlRSVU5fRkxBR1NfQ1RTX09GRlNFVCYmKHRoaXMudmVyc2lvbj09PTA/dC53cml0ZVVpbnQzMih0aGlzLnNhbXBsZV9jb21wb3NpdGlvbl90aW1lX29mZnNldFtlXSk6dC53cml0ZUludDMyKHRoaXMuc2FtcGxlX2NvbXBvc2l0aW9uX3RpbWVfb2Zmc2V0W2VdKSl9LHJbInVybCBCb3giXS5wcm90b3R5cGUud3JpdGU9ZnVuY3Rpb24odCl7dGhpcy52ZXJzaW9uPTAsdGhpcy5sb2NhdGlvbj8odGhpcy5mbGFncz0wLHRoaXMuc2l6ZT10aGlzLmxvY2F0aW9uLmxlbmd0aCsxKToodGhpcy5mbGFncz0xLHRoaXMuc2l6ZT0wKSx0aGlzLndyaXRlSGVhZGVyKHQpLHRoaXMubG9jYXRpb24mJnQud3JpdGVDU3RyaW5nKHRoaXMubG9jYXRpb24pfSxyWyJ1cm4gQm94Il0ucHJvdG90eXBlLndyaXRlPWZ1bmN0aW9uKHQpe3RoaXMudmVyc2lvbj0wLHRoaXMuZmxhZ3M9MCx0aGlzLnNpemU9dGhpcy5uYW1lLmxlbmd0aCsxKyh0aGlzLmxvY2F0aW9uP3RoaXMubG9jYXRpb24ubGVuZ3RoKzE6MCksdGhpcy53cml0ZUhlYWRlcih0KSx0LndyaXRlQ1N0cmluZyh0aGlzLm5hbWUpLHRoaXMubG9jYXRpb24mJnQud3JpdGVDU3RyaW5nKHRoaXMubG9jYXRpb24pfSxyLnZtaGRCb3gucHJvdG90eXBlLndyaXRlPWZ1bmN0aW9uKHQpe3RoaXMudmVyc2lvbj0wLHRoaXMuZmxhZ3M9MSx0aGlzLnNpemU9OCx0aGlzLndyaXRlSGVhZGVyKHQpLHQud3JpdGVVaW50MTYodGhpcy5ncmFwaGljc21vZGUpLHQud3JpdGVVaW50MTZBcnJheSh0aGlzLm9wY29sb3IpfSxyLmN0dHNCb3gucHJvdG90eXBlLnVucGFjaz1mdW5jdGlvbih0KXt2YXIgZSxzLG47Zm9yKG49MCxlPTA7ZTx0aGlzLnNhbXBsZV9jb3VudHMubGVuZ3RoO2UrKylmb3Iocz0wO3M8dGhpcy5zYW1wbGVfY291bnRzW2VdO3MrKyl0W25dLnB0cz10W25dLmR0cyt0aGlzLnNhbXBsZV9vZmZzZXRzW2VdLG4rK30sci5zdHRzQm94LnByb3RvdHlwZS51bnBhY2s9ZnVuY3Rpb24odCl7dmFyIGUscyxuO2ZvcihuPTAsZT0wO2U8dGhpcy5zYW1wbGVfY291bnRzLmxlbmd0aDtlKyspZm9yKHM9MDtzPHRoaXMuc2FtcGxlX2NvdW50c1tlXTtzKyspbj09PTA/dFtuXS5kdHM9MDp0W25dLmR0cz10W24tMV0uZHRzK3RoaXMuc2FtcGxlX2RlbHRhc1tlXSxuKyt9LHIuc3Rjb0JveC5wcm90b3R5cGUudW5wYWNrPWZ1bmN0aW9uKHQpe3ZhciBlO2ZvcihlPTA7ZTx0aGlzLmNodW5rX29mZnNldHMubGVuZ3RoO2UrKyl0W2VdLm9mZnNldD10aGlzLmNodW5rX29mZnNldHNbZV19LHIuc3RzY0JveC5wcm90b3R5cGUudW5wYWNrPWZ1bmN0aW9uKHQpe3ZhciBlLHMsbixhLG87Zm9yKGE9MCxvPTAsZT0wO2U8dGhpcy5maXJzdF9jaHVuay5sZW5ndGg7ZSsrKWZvcihzPTA7czwoZSsxPHRoaXMuZmlyc3RfY2h1bmsubGVuZ3RoP3RoaXMuZmlyc3RfY2h1bmtbZSsxXToxLzApO3MrKylmb3IobysrLG49MDtuPHRoaXMuc2FtcGxlc19wZXJfY2h1bmtbZV07bisrKXtpZih0W2FdKXRbYV0uZGVzY3JpcHRpb25faW5kZXg9dGhpcy5zYW1wbGVfZGVzY3JpcHRpb25faW5kZXhbZV0sdFthXS5jaHVua19pbmRleD1vO2Vsc2UgcmV0dXJuO2ErK319LHIuc3RzekJveC5wcm90b3R5cGUudW5wYWNrPWZ1bmN0aW9uKHQpe3ZhciBlO2ZvcihlPTA7ZTx0aGlzLnNhbXBsZV9zaXplcy5sZW5ndGg7ZSsrKXRbZV0uc2l6ZT10aGlzLnNhbXBsZV9zaXplc1tlXX0sci5ESUZGX0JPWEVTX1BST1BfTkFNRVM9WyJib3hlcyIsImVudHJpZXMiLCJyZWZlcmVuY2VzIiwic3Vic2FtcGxlcyIsIml0ZW1zIiwiaXRlbV9pbmZvcyIsImV4dGVudHMiLCJhc3NvY2lhdGlvbnMiLCJzdWJzZWdtZW50cyIsInJhbmdlcyIsInNlZWtMaXN0cyIsInNlZWtQb2ludHMiLCJlc2QiLCJsZXZlbHMiXSxyLkRJRkZfUFJJTUlUSVZFX0FSUkFZX1BST1BfTkFNRVM9WyJjb21wYXRpYmxlX2JyYW5kcyIsIm1hdHJpeCIsIm9wY29sb3IiLCJzYW1wbGVfY291bnRzIiwic2FtcGxlX2NvdW50cyIsInNhbXBsZV9kZWx0YXMiLCJmaXJzdF9jaHVuayIsInNhbXBsZXNfcGVyX2NodW5rIiwic2FtcGxlX3NpemVzIiwiY2h1bmtfb2Zmc2V0cyIsInNhbXBsZV9vZmZzZXRzIiwic2FtcGxlX2Rlc2NyaXB0aW9uX2luZGV4Iiwic2FtcGxlX2R1cmF0aW9uIl0sci5ib3hFcXVhbEZpZWxkcz1mdW5jdGlvbih0LGUpe2lmKHQmJiFlKXJldHVybiExO3ZhciBzO2ZvcihzIGluIHQpaWYoIShyLkRJRkZfQk9YRVNfUFJPUF9OQU1FUy5pbmRleE9mKHMpPi0xKSl7aWYodFtzXWluc3RhbmNlb2Ygci5Cb3h8fGVbc11pbnN0YW5jZW9mIHIuQm94fHx0eXBlb2YgdFtzXT4idSJ8fHR5cGVvZiBlW3NdPiJ1Inx8dHlwZW9mIHRbc109PSJmdW5jdGlvbiJ8fHR5cGVvZiBlW3NdPT0iZnVuY3Rpb24ifHx0LnN1YkJveE5hbWVzJiZ0LnN1YkJveE5hbWVzLmluZGV4T2Yocy5zbGljZSgwLDQpKT4tMXx8ZS5zdWJCb3hOYW1lcyYmZS5zdWJCb3hOYW1lcy5pbmRleE9mKHMuc2xpY2UoMCw0KSk+LTF8fHM9PT0iZGF0YSJ8fHM9PT0ic3RhcnQifHxzPT09InNpemUifHxzPT09ImNyZWF0aW9uX3RpbWUifHxzPT09Im1vZGlmaWNhdGlvbl90aW1lInx8ci5ESUZGX1BSSU1JVElWRV9BUlJBWV9QUk9QX05BTUVTLmluZGV4T2Yocyk+LTEpY29udGludWU7aWYodFtzXSE9PWVbc10pcmV0dXJuITF9cmV0dXJuITB9LHIuYm94RXF1YWw9ZnVuY3Rpb24odCxlKXtpZighci5ib3hFcXVhbEZpZWxkcyh0LGUpKXJldHVybiExO2Zvcih2YXIgcz0wO3M8ci5ESUZGX0JPWEVTX1BST1BfTkFNRVMubGVuZ3RoO3MrKyl7dmFyIG49ci5ESUZGX0JPWEVTX1BST1BfTkFNRVNbc107aWYodFtuXSYmZVtuXSYmIXIuYm94RXF1YWwodFtuXSxlW25dKSlyZXR1cm4hMX1yZXR1cm4hMH07dmFyIHo9ZnVuY3Rpb24oKXt9O3oucHJvdG90eXBlLnBhcnNlU2FtcGxlPWZ1bmN0aW9uKHQpe3ZhciBlPXt9LHM7ZS5yZXNvdXJjZXM9W107dmFyIG49bmV3IGModC5kYXRhLmJ1ZmZlcik7aWYoIXQuc3Vic2FtcGxlc3x8dC5zdWJzYW1wbGVzLmxlbmd0aD09PTApZS5kb2N1bWVudFN0cmluZz1uLnJlYWRTdHJpbmcodC5kYXRhLmxlbmd0aCk7ZWxzZSBpZihlLmRvY3VtZW50U3RyaW5nPW4ucmVhZFN0cmluZyh0LnN1YnNhbXBsZXNbMF0uc2l6ZSksdC5zdWJzYW1wbGVzLmxlbmd0aD4xKWZvcihzPTE7czx0LnN1YnNhbXBsZXMubGVuZ3RoO3MrKyllLnJlc291cmNlc1tzXT1uLnJlYWRVaW50OEFycmF5KHQuc3Vic2FtcGxlc1tzXS5zaXplKTtyZXR1cm4gdHlwZW9mIERPTVBhcnNlcjwidSImJihlLmRvY3VtZW50PW5ldyBET01QYXJzZXIoKS5wYXJzZUZyb21TdHJpbmcoZS5kb2N1bWVudFN0cmluZywiYXBwbGljYXRpb24veG1sIikpLGV9O3ZhciBCPWZ1bmN0aW9uKCl7fTtCLnByb3RvdHlwZS5wYXJzZVNhbXBsZT1mdW5jdGlvbih0KXt2YXIgZSxzPW5ldyBjKHQuZGF0YS5idWZmZXIpO3JldHVybiBlPXMucmVhZFN0cmluZyh0LmRhdGEubGVuZ3RoKSxlfSxCLnByb3RvdHlwZS5wYXJzZUNvbmZpZz1mdW5jdGlvbih0KXt2YXIgZSxzPW5ldyBjKHQuYnVmZmVyKTtyZXR1cm4gcy5yZWFkVWludDMyKCksZT1zLnJlYWRDU3RyaW5nKCksZX0sXy5YTUxTdWJ0aXRsZWluNFBhcnNlcj16LF8uVGV4dGluNFBhcnNlcj1CO3ZhciB1PWZ1bmN0aW9uKHQpe3RoaXMuc3RyZWFtPXR8fG5ldyBVLHRoaXMuYm94ZXM9W10sdGhpcy5tZGF0cz1bXSx0aGlzLm1vb2ZzPVtdLHRoaXMuaXNQcm9ncmVzc2l2ZT0hMSx0aGlzLm1vb3ZTdGFydEZvdW5kPSExLHRoaXMub25Nb292U3RhcnQ9bnVsbCx0aGlzLm1vb3ZTdGFydFNlbnQ9ITEsdGhpcy5vblJlYWR5PW51bGwsdGhpcy5yZWFkeVNlbnQ9ITEsdGhpcy5vblNlZ21lbnQ9bnVsbCx0aGlzLm9uU2FtcGxlcz1udWxsLHRoaXMub25FcnJvcj1udWxsLHRoaXMuc2FtcGxlTGlzdEJ1aWx0PSExLHRoaXMuZnJhZ21lbnRlZFRyYWNrcz1bXSx0aGlzLmV4dHJhY3RlZFRyYWNrcz1bXSx0aGlzLmlzRnJhZ21lbnRhdGlvbkluaXRpYWxpemVkPSExLHRoaXMuc2FtcGxlUHJvY2Vzc2luZ1N0YXJ0ZWQ9ITEsdGhpcy5uZXh0TW9vZk51bWJlcj0wLHRoaXMuaXRlbUxpc3RCdWlsdD0hMSx0aGlzLm9uU2lkeD1udWxsLHRoaXMuc2lkeFNlbnQ9ITF9O3UucHJvdG90eXBlLnNldFNlZ21lbnRPcHRpb25zPWZ1bmN0aW9uKHQsZSxzKXt2YXIgbj10aGlzLmdldFRyYWNrQnlJZCh0KTtpZihuKXt2YXIgYT17fTt0aGlzLmZyYWdtZW50ZWRUcmFja3MucHVzaChhKSxhLmlkPXQsYS51c2VyPWUsYS50cmFrPW4sbi5uZXh0U2FtcGxlPTAsYS5zZWdtZW50U3RyZWFtPW51bGwsYS5uYl9zYW1wbGVzPTFlMyxhLnJhcEFsaWduZW1lbnQ9ITAscyYmKHMubmJTYW1wbGVzJiYoYS5uYl9zYW1wbGVzPXMubmJTYW1wbGVzKSxzLnJhcEFsaWduZW1lbnQmJihhLnJhcEFsaWduZW1lbnQ9cy5yYXBBbGlnbmVtZW50KSl9fSx1LnByb3RvdHlwZS51bnNldFNlZ21lbnRPcHRpb25zPWZ1bmN0aW9uKHQpe2Zvcih2YXIgZT0tMSxzPTA7czx0aGlzLmZyYWdtZW50ZWRUcmFja3MubGVuZ3RoO3MrKyl7dmFyIG49dGhpcy5mcmFnbWVudGVkVHJhY2tzW3NdO24uaWQ9PXQmJihlPXMpfWU+LTEmJnRoaXMuZnJhZ21lbnRlZFRyYWNrcy5zcGxpY2UoZSwxKX0sdS5wcm90b3R5cGUuc2V0RXh0cmFjdGlvbk9wdGlvbnM9ZnVuY3Rpb24odCxlLHMpe3ZhciBuPXRoaXMuZ2V0VHJhY2tCeUlkKHQpO2lmKG4pe3ZhciBhPXt9O3RoaXMuZXh0cmFjdGVkVHJhY2tzLnB1c2goYSksYS5pZD10LGEudXNlcj1lLGEudHJhaz1uLG4ubmV4dFNhbXBsZT0wLGEubmJfc2FtcGxlcz0xZTMsYS5zYW1wbGVzPVtdLHMmJnMubmJTYW1wbGVzJiYoYS5uYl9zYW1wbGVzPXMubmJTYW1wbGVzKX19LHUucHJvdG90eXBlLnVuc2V0RXh0cmFjdGlvbk9wdGlvbnM9ZnVuY3Rpb24odCl7Zm9yKHZhciBlPS0xLHM9MDtzPHRoaXMuZXh0cmFjdGVkVHJhY2tzLmxlbmd0aDtzKyspe3ZhciBuPXRoaXMuZXh0cmFjdGVkVHJhY2tzW3NdO24uaWQ9PXQmJihlPXMpfWU+LTEmJnRoaXMuZXh0cmFjdGVkVHJhY2tzLnNwbGljZShlLDEpfSx1LnByb3RvdHlwZS5wYXJzZT1mdW5jdGlvbigpe3ZhciB0LGUscz0hMTtpZighKHRoaXMucmVzdG9yZVBhcnNlUG9zaXRpb24mJiF0aGlzLnJlc3RvcmVQYXJzZVBvc2l0aW9uKCkpKWZvcig7OylpZih0aGlzLmhhc0luY29tcGxldGVNZGF0JiZ0aGlzLmhhc0luY29tcGxldGVNZGF0KCkpe2lmKHRoaXMucHJvY2Vzc0luY29tcGxldGVNZGF0KCkpY29udGludWU7cmV0dXJufWVsc2UgaWYodGhpcy5zYXZlUGFyc2VQb3NpdGlvbiYmdGhpcy5zYXZlUGFyc2VQb3NpdGlvbigpLHQ9ci5wYXJzZU9uZUJveCh0aGlzLnN0cmVhbSxzKSx0LmNvZGU9PT1yLkVSUl9OT1RfRU5PVUdIX0RBVEEpaWYodGhpcy5wcm9jZXNzSW5jb21wbGV0ZUJveCl7aWYodGhpcy5wcm9jZXNzSW5jb21wbGV0ZUJveCh0KSljb250aW51ZTtyZXR1cm59ZWxzZSByZXR1cm47ZWxzZXt2YXIgbjtzd2l0Y2goZT10LmJveCxuPWUudHlwZSE9PSJ1dWlkIj9lLnR5cGU6ZS51dWlkLHRoaXMuYm94ZXMucHVzaChlKSxuKXtjYXNlIm1kYXQiOnRoaXMubWRhdHMucHVzaChlKTticmVhaztjYXNlIm1vb2YiOnRoaXMubW9vZnMucHVzaChlKTticmVhaztjYXNlIm1vb3YiOnRoaXMubW9vdlN0YXJ0Rm91bmQ9ITAsdGhpcy5tZGF0cy5sZW5ndGg9PT0wJiYodGhpcy5pc1Byb2dyZXNzaXZlPSEwKTtkZWZhdWx0OnRoaXNbbl0hPT12b2lkIDAmJmQud2FybigiSVNPRmlsZSIsIkR1cGxpY2F0ZSBCb3ggb2YgdHlwZTogIituKyIsIG92ZXJyaWRpbmcgcHJldmlvdXMgb2NjdXJyZW5jZSIpLHRoaXNbbl09ZTticmVha310aGlzLnVwZGF0ZVVzZWRCeXRlcyYmdGhpcy51cGRhdGVVc2VkQnl0ZXMoZSx0KX19LHUucHJvdG90eXBlLmNoZWNrQnVmZmVyPWZ1bmN0aW9uKHQpe2lmKHQ9PW51bGwpdGhyb3ciQnVmZmVyIG11c3QgYmUgZGVmaW5lZCBhbmQgbm9uIGVtcHR5IjtpZih0LmZpbGVTdGFydD09PXZvaWQgMCl0aHJvdyJCdWZmZXIgbXVzdCBoYXZlIGEgZmlsZVN0YXJ0IHByb3BlcnR5IjtyZXR1cm4gdC5ieXRlTGVuZ3RoPT09MD8oZC53YXJuKCJJU09GaWxlIiwiSWdub3JpbmcgZW1wdHkgYnVmZmVyIChmaWxlU3RhcnQ6ICIrdC5maWxlU3RhcnQrIikiKSx0aGlzLnN0cmVhbS5sb2dCdWZmZXJMZXZlbCgpLCExKTooZC5pbmZvKCJJU09GaWxlIiwiUHJvY2Vzc2luZyBidWZmZXIgKGZpbGVTdGFydDogIit0LmZpbGVTdGFydCsiKSIpLHQudXNlZEJ5dGVzPTAsdGhpcy5zdHJlYW0uaW5zZXJ0QnVmZmVyKHQpLHRoaXMuc3RyZWFtLmxvZ0J1ZmZlckxldmVsKCksdGhpcy5zdHJlYW0uaW5pdGlhbGl6ZWQoKT8hMDooZC53YXJuKCJJU09GaWxlIiwiTm90IHJlYWR5IHRvIHN0YXJ0IHBhcnNpbmciKSwhMSkpfSx1LnByb3RvdHlwZS5hcHBlbmRCdWZmZXI9ZnVuY3Rpb24odCxlKXt2YXIgcztpZih0aGlzLmNoZWNrQnVmZmVyKHQpKXJldHVybiB0aGlzLnBhcnNlKCksdGhpcy5tb292U3RhcnRGb3VuZCYmIXRoaXMubW9vdlN0YXJ0U2VudCYmKHRoaXMubW9vdlN0YXJ0U2VudD0hMCx0aGlzLm9uTW9vdlN0YXJ0JiZ0aGlzLm9uTW9vdlN0YXJ0KCkpLHRoaXMubW9vdj8odGhpcy5zYW1wbGVMaXN0QnVpbHR8fCh0aGlzLmJ1aWxkU2FtcGxlTGlzdHMoKSx0aGlzLnNhbXBsZUxpc3RCdWlsdD0hMCksdGhpcy51cGRhdGVTYW1wbGVMaXN0cygpLHRoaXMub25SZWFkeSYmIXRoaXMucmVhZHlTZW50JiYodGhpcy5yZWFkeVNlbnQ9ITAsdGhpcy5vblJlYWR5KHRoaXMuZ2V0SW5mbygpKSksdGhpcy5wcm9jZXNzU2FtcGxlcyhlKSx0aGlzLm5leHRTZWVrUG9zaXRpb24/KHM9dGhpcy5uZXh0U2Vla1Bvc2l0aW9uLHRoaXMubmV4dFNlZWtQb3NpdGlvbj12b2lkIDApOnM9dGhpcy5uZXh0UGFyc2VQb3NpdGlvbix0aGlzLnN0cmVhbS5nZXRFbmRGaWxlUG9zaXRpb25BZnRlciYmKHM9dGhpcy5zdHJlYW0uZ2V0RW5kRmlsZVBvc2l0aW9uQWZ0ZXIocykpKTp0aGlzLm5leHRQYXJzZVBvc2l0aW9uP3M9dGhpcy5uZXh0UGFyc2VQb3NpdGlvbjpzPTAsdGhpcy5zaWR4JiZ0aGlzLm9uU2lkeCYmIXRoaXMuc2lkeFNlbnQmJih0aGlzLm9uU2lkeCh0aGlzLnNpZHgpLHRoaXMuc2lkeFNlbnQ9ITApLHRoaXMubWV0YSYmKHRoaXMuZmxhdHRlbkl0ZW1JbmZvJiYhdGhpcy5pdGVtTGlzdEJ1aWx0JiYodGhpcy5mbGF0dGVuSXRlbUluZm8oKSx0aGlzLml0ZW1MaXN0QnVpbHQ9ITApLHRoaXMucHJvY2Vzc0l0ZW1zJiZ0aGlzLnByb2Nlc3NJdGVtcyh0aGlzLm9uSXRlbSkpLHRoaXMuc3RyZWFtLmNsZWFuQnVmZmVycyYmKGQuaW5mbygiSVNPRmlsZSIsIkRvbmUgcHJvY2Vzc2luZyBidWZmZXIgKGZpbGVTdGFydDogIit0LmZpbGVTdGFydCsiKSAtIG5leHQgYnVmZmVyIHRvIGZldGNoIHNob3VsZCBoYXZlIGEgZmlsZVN0YXJ0IHBvc2l0aW9uIG9mICIrcyksdGhpcy5zdHJlYW0ubG9nQnVmZmVyTGV2ZWwoKSx0aGlzLnN0cmVhbS5jbGVhbkJ1ZmZlcnMoKSx0aGlzLnN0cmVhbS5sb2dCdWZmZXJMZXZlbCghMCksZC5pbmZvKCJJU09GaWxlIiwiU2FtcGxlIGRhdGEgc2l6ZSBpbiBtZW1vcnk6ICIrdGhpcy5nZXRBbGxvY2F0ZWRTYW1wbGVEYXRhU2l6ZSgpKSksc30sdS5wcm90b3R5cGUuZ2V0SW5mbz1mdW5jdGlvbigpe3ZhciB0LGUscz17fSxuLGEsbyxoLGY9bmV3IERhdGUoIjE5MDQtMDEtMDFUMDA6MDA6MDBaIikuZ2V0VGltZSgpO2lmKHRoaXMubW9vdilmb3Iocy5oYXNNb292PSEwLHMuZHVyYXRpb249dGhpcy5tb292Lm12aGQuZHVyYXRpb24scy50aW1lc2NhbGU9dGhpcy5tb292Lm12aGQudGltZXNjYWxlLHMuaXNGcmFnbWVudGVkPXRoaXMubW9vdi5tdmV4IT1udWxsLHMuaXNGcmFnbWVudGVkJiZ0aGlzLm1vb3YubXZleC5tZWhkJiYocy5mcmFnbWVudF9kdXJhdGlvbj10aGlzLm1vb3YubXZleC5tZWhkLmZyYWdtZW50X2R1cmF0aW9uKSxzLmlzUHJvZ3Jlc3NpdmU9dGhpcy5pc1Byb2dyZXNzaXZlLHMuaGFzSU9EPXRoaXMubW9vdi5pb2RzIT1udWxsLHMuYnJhbmRzPVtdLHMuYnJhbmRzLnB1c2godGhpcy5mdHlwLm1ham9yX2JyYW5kKSxzLmJyYW5kcz1zLmJyYW5kcy5jb25jYXQodGhpcy5mdHlwLmNvbXBhdGlibGVfYnJhbmRzKSxzLmNyZWF0ZWQ9bmV3IERhdGUoZit0aGlzLm1vb3YubXZoZC5jcmVhdGlvbl90aW1lKjFlMykscy5tb2RpZmllZD1uZXcgRGF0ZShmK3RoaXMubW9vdi5tdmhkLm1vZGlmaWNhdGlvbl90aW1lKjFlMykscy50cmFja3M9W10scy5hdWRpb1RyYWNrcz1bXSxzLnZpZGVvVHJhY2tzPVtdLHMuc3VidGl0bGVUcmFja3M9W10scy5tZXRhZGF0YVRyYWNrcz1bXSxzLmhpbnRUcmFja3M9W10scy5vdGhlclRyYWNrcz1bXSx0PTA7dDx0aGlzLm1vb3YudHJha3MubGVuZ3RoO3QrKyl7aWYobj10aGlzLm1vb3YudHJha3NbdF0saD1uLm1kaWEubWluZi5zdGJsLnN0c2QuZW50cmllc1swXSxhPXt9LHMudHJhY2tzLnB1c2goYSksYS5pZD1uLnRraGQudHJhY2tfaWQsYS5uYW1lPW4ubWRpYS5oZGxyLm5hbWUsYS5yZWZlcmVuY2VzPVtdLG4udHJlZilmb3IoZT0wO2U8bi50cmVmLmJveGVzLmxlbmd0aDtlKyspbz17fSxhLnJlZmVyZW5jZXMucHVzaChvKSxvLnR5cGU9bi50cmVmLmJveGVzW2VdLnR5cGUsby50cmFja19pZHM9bi50cmVmLmJveGVzW2VdLnRyYWNrX2lkcztuLmVkdHMmJihhLmVkaXRzPW4uZWR0cy5lbHN0LmVudHJpZXMpLGEuY3JlYXRlZD1uZXcgRGF0ZShmK24udGtoZC5jcmVhdGlvbl90aW1lKjFlMyksYS5tb2RpZmllZD1uZXcgRGF0ZShmK24udGtoZC5tb2RpZmljYXRpb25fdGltZSoxZTMpLGEubW92aWVfZHVyYXRpb249bi50a2hkLmR1cmF0aW9uLGEubW92aWVfdGltZXNjYWxlPXMudGltZXNjYWxlLGEubGF5ZXI9bi50a2hkLmxheWVyLGEuYWx0ZXJuYXRlX2dyb3VwPW4udGtoZC5hbHRlcm5hdGVfZ3JvdXAsYS52b2x1bWU9bi50a2hkLnZvbHVtZSxhLm1hdHJpeD1uLnRraGQubWF0cml4LGEudHJhY2tfd2lkdGg9bi50a2hkLndpZHRoLygxPDwxNiksYS50cmFja19oZWlnaHQ9bi50a2hkLmhlaWdodC8oMTw8MTYpLGEudGltZXNjYWxlPW4ubWRpYS5tZGhkLnRpbWVzY2FsZSxhLmN0c19zaGlmdD1uLm1kaWEubWluZi5zdGJsLmNzbGcsYS5kdXJhdGlvbj1uLm1kaWEubWRoZC5kdXJhdGlvbixhLnNhbXBsZXNfZHVyYXRpb249bi5zYW1wbGVzX2R1cmF0aW9uLGEuY29kZWM9aC5nZXRDb2RlYygpLGEua2luZD1uLnVkdGEmJm4udWR0YS5raW5kcy5sZW5ndGg/bi51ZHRhLmtpbmRzWzBdOntzY2hlbWVVUkk6IiIsdmFsdWU6IiJ9LGEubGFuZ3VhZ2U9bi5tZGlhLmVsbmc/bi5tZGlhLmVsbmcuZXh0ZW5kZWRfbGFuZ3VhZ2U6bi5tZGlhLm1kaGQubGFuZ3VhZ2VTdHJpbmcsYS5uYl9zYW1wbGVzPW4uc2FtcGxlcy5sZW5ndGgsYS5zaXplPW4uc2FtcGxlc19zaXplLGEuYml0cmF0ZT1hLnNpemUqOCphLnRpbWVzY2FsZS9hLnNhbXBsZXNfZHVyYXRpb24saC5pc0F1ZGlvKCk/KGEudHlwZT0iYXVkaW8iLHMuYXVkaW9UcmFja3MucHVzaChhKSxhLmF1ZGlvPXt9LGEuYXVkaW8uc2FtcGxlX3JhdGU9aC5nZXRTYW1wbGVSYXRlKCksYS5hdWRpby5jaGFubmVsX2NvdW50PWguZ2V0Q2hhbm5lbENvdW50KCksYS5hdWRpby5zYW1wbGVfc2l6ZT1oLmdldFNhbXBsZVNpemUoKSk6aC5pc1ZpZGVvKCk/KGEudHlwZT0idmlkZW8iLHMudmlkZW9UcmFja3MucHVzaChhKSxhLnZpZGVvPXt9LGEudmlkZW8ud2lkdGg9aC5nZXRXaWR0aCgpLGEudmlkZW8uaGVpZ2h0PWguZ2V0SGVpZ2h0KCkpOmguaXNTdWJ0aXRsZSgpPyhhLnR5cGU9InN1YnRpdGxlcyIscy5zdWJ0aXRsZVRyYWNrcy5wdXNoKGEpKTpoLmlzSGludCgpPyhhLnR5cGU9Im1ldGFkYXRhIixzLmhpbnRUcmFja3MucHVzaChhKSk6aC5pc01ldGFkYXRhKCk/KGEudHlwZT0ibWV0YWRhdGEiLHMubWV0YWRhdGFUcmFja3MucHVzaChhKSk6KGEudHlwZT0ibWV0YWRhdGEiLHMub3RoZXJUcmFja3MucHVzaChhKSl9ZWxzZSBzLmhhc01vb3Y9ITE7aWYocy5taW1lPSIiLHMuaGFzTW9vdiYmcy50cmFja3Mpe2ZvcihzLnZpZGVvVHJhY2tzJiZzLnZpZGVvVHJhY2tzLmxlbmd0aD4wP3MubWltZSs9J3ZpZGVvL21wNDsgY29kZWNzPSInOnMuYXVkaW9UcmFja3MmJnMuYXVkaW9UcmFja3MubGVuZ3RoPjA/cy5taW1lKz0nYXVkaW8vbXA0OyBjb2RlY3M9Iic6cy5taW1lKz0nYXBwbGljYXRpb24vbXA0OyBjb2RlY3M9IicsdD0wO3Q8cy50cmFja3MubGVuZ3RoO3QrKyl0IT09MCYmKHMubWltZSs9IiwiKSxzLm1pbWUrPXMudHJhY2tzW3RdLmNvZGVjO3MubWltZSs9JyI7IHByb2ZpbGVzPSInLHMubWltZSs9dGhpcy5mdHlwLmNvbXBhdGlibGVfYnJhbmRzLmpvaW4oKSxzLm1pbWUrPSciJ31yZXR1cm4gc30sdS5wcm90b3R5cGUuc2V0TmV4dFNlZWtQb3NpdGlvbkZyb21TYW1wbGU9ZnVuY3Rpb24odCl7dCYmKHRoaXMubmV4dFNlZWtQb3NpdGlvbj90aGlzLm5leHRTZWVrUG9zaXRpb249TWF0aC5taW4odC5vZmZzZXQrdC5hbHJlYWR5UmVhZCx0aGlzLm5leHRTZWVrUG9zaXRpb24pOnRoaXMubmV4dFNlZWtQb3NpdGlvbj10Lm9mZnNldCt0LmFscmVhZHlSZWFkKX0sdS5wcm90b3R5cGUucHJvY2Vzc1NhbXBsZXM9ZnVuY3Rpb24odCl7dmFyIGUscztpZih0aGlzLnNhbXBsZVByb2Nlc3NpbmdTdGFydGVkKXtpZih0aGlzLmlzRnJhZ21lbnRhdGlvbkluaXRpYWxpemVkJiZ0aGlzLm9uU2VnbWVudCE9PW51bGwpZm9yKGU9MDtlPHRoaXMuZnJhZ21lbnRlZFRyYWNrcy5sZW5ndGg7ZSsrKXt2YXIgbj10aGlzLmZyYWdtZW50ZWRUcmFja3NbZV07Zm9yKHM9bi50cmFrO3MubmV4dFNhbXBsZTxzLnNhbXBsZXMubGVuZ3RoJiZ0aGlzLnNhbXBsZVByb2Nlc3NpbmdTdGFydGVkOyl7ZC5kZWJ1ZygiSVNPRmlsZSIsIkNyZWF0aW5nIG1lZGlhIGZyYWdtZW50IG9uIHRyYWNrICMiK24uaWQrIiBmb3Igc2FtcGxlICIrcy5uZXh0U2FtcGxlKTt2YXIgYT10aGlzLmNyZWF0ZUZyYWdtZW50KG4uaWQscy5uZXh0U2FtcGxlLG4uc2VnbWVudFN0cmVhbSk7aWYoYSluLnNlZ21lbnRTdHJlYW09YSxzLm5leHRTYW1wbGUrKztlbHNlIGJyZWFrO2lmKChzLm5leHRTYW1wbGUlbi5uYl9zYW1wbGVzPT09MHx8dHx8cy5uZXh0U2FtcGxlPj1zLnNhbXBsZXMubGVuZ3RoKSYmKGQuaW5mbygiSVNPRmlsZSIsIlNlbmRpbmcgZnJhZ21lbnRlZCBkYXRhIG9uIHRyYWNrICMiK24uaWQrIiBmb3Igc2FtcGxlcyBbIitNYXRoLm1heCgwLHMubmV4dFNhbXBsZS1uLm5iX3NhbXBsZXMpKyIsIisocy5uZXh0U2FtcGxlLTEpKyJdIiksZC5pbmZvKCJJU09GaWxlIiwiU2FtcGxlIGRhdGEgc2l6ZSBpbiBtZW1vcnk6ICIrdGhpcy5nZXRBbGxvY2F0ZWRTYW1wbGVEYXRhU2l6ZSgpKSx0aGlzLm9uU2VnbWVudCYmdGhpcy5vblNlZ21lbnQobi5pZCxuLnVzZXIsbi5zZWdtZW50U3RyZWFtLmJ1ZmZlcixzLm5leHRTYW1wbGUsdHx8cy5uZXh0U2FtcGxlPj1zLnNhbXBsZXMubGVuZ3RoKSxuLnNlZ21lbnRTdHJlYW09bnVsbCxuIT09dGhpcy5mcmFnbWVudGVkVHJhY2tzW2VdKSlicmVha319aWYodGhpcy5vblNhbXBsZXMhPT1udWxsKWZvcihlPTA7ZTx0aGlzLmV4dHJhY3RlZFRyYWNrcy5sZW5ndGg7ZSsrKXt2YXIgbz10aGlzLmV4dHJhY3RlZFRyYWNrc1tlXTtmb3Iocz1vLnRyYWs7cy5uZXh0U2FtcGxlPHMuc2FtcGxlcy5sZW5ndGgmJnRoaXMuc2FtcGxlUHJvY2Vzc2luZ1N0YXJ0ZWQ7KXtkLmRlYnVnKCJJU09GaWxlIiwiRXhwb3J0aW5nIG9uIHRyYWNrICMiK28uaWQrIiBzYW1wbGUgIyIrcy5uZXh0U2FtcGxlKTt2YXIgaD10aGlzLmdldFNhbXBsZShzLHMubmV4dFNhbXBsZSk7aWYoaClzLm5leHRTYW1wbGUrKyxvLnNhbXBsZXMucHVzaChoKTtlbHNle3RoaXMuc2V0TmV4dFNlZWtQb3NpdGlvbkZyb21TYW1wbGUocy5zYW1wbGVzW3MubmV4dFNhbXBsZV0pO2JyZWFrfWlmKChzLm5leHRTYW1wbGUlby5uYl9zYW1wbGVzPT09MHx8cy5uZXh0U2FtcGxlPj1zLnNhbXBsZXMubGVuZ3RoKSYmKGQuZGVidWcoIklTT0ZpbGUiLCJTZW5kaW5nIHNhbXBsZXMgb24gdHJhY2sgIyIrby5pZCsiIGZvciBzYW1wbGUgIitzLm5leHRTYW1wbGUpLHRoaXMub25TYW1wbGVzJiZ0aGlzLm9uU2FtcGxlcyhvLmlkLG8udXNlcixvLnNhbXBsZXMpLG8uc2FtcGxlcz1bXSxvIT09dGhpcy5leHRyYWN0ZWRUcmFja3NbZV0pKWJyZWFrfX19fSx1LnByb3RvdHlwZS5nZXRCb3g9ZnVuY3Rpb24odCl7dmFyIGU9dGhpcy5nZXRCb3hlcyh0LCEwKTtyZXR1cm4gZS5sZW5ndGg/ZVswXTpudWxsfSx1LnByb3RvdHlwZS5nZXRCb3hlcz1mdW5jdGlvbih0LGUpe3ZhciBzPVtdO3JldHVybiB1Ll9zd2VlcC5jYWxsKHRoaXMsdCxzLGUpLHN9LHUuX3N3ZWVwPWZ1bmN0aW9uKHQsZSxzKXt0aGlzLnR5cGUmJnRoaXMudHlwZT09dCYmZS5wdXNoKHRoaXMpO2Zvcih2YXIgbiBpbiB0aGlzLmJveGVzKXtpZihlLmxlbmd0aCYmcylyZXR1cm47dS5fc3dlZXAuY2FsbCh0aGlzLmJveGVzW25dLHQsZSxzKX19LHUucHJvdG90eXBlLmdldFRyYWNrU2FtcGxlc0luZm89ZnVuY3Rpb24odCl7dmFyIGU9dGhpcy5nZXRUcmFja0J5SWQodCk7aWYoZSlyZXR1cm4gZS5zYW1wbGVzfSx1LnByb3RvdHlwZS5nZXRUcmFja1NhbXBsZT1mdW5jdGlvbih0LGUpe3ZhciBzPXRoaXMuZ2V0VHJhY2tCeUlkKHQpLG49dGhpcy5nZXRTYW1wbGUocyxlKTtyZXR1cm4gbn0sdS5wcm90b3R5cGUucmVsZWFzZVVzZWRTYW1wbGVzPWZ1bmN0aW9uKHQsZSl7dmFyIHM9MCxuPXRoaXMuZ2V0VHJhY2tCeUlkKHQpO24ubGFzdFZhbGlkU2FtcGxlfHwobi5sYXN0VmFsaWRTYW1wbGU9MCk7Zm9yKHZhciBhPW4ubGFzdFZhbGlkU2FtcGxlO2E8ZTthKyspcys9dGhpcy5yZWxlYXNlU2FtcGxlKG4sYSk7ZC5pbmZvKCJJU09GaWxlIiwiVHJhY2sgIyIrdCsiIHJlbGVhc2VkIHNhbXBsZXMgdXAgdG8gIitlKyIgKHJlbGVhc2VkIHNpemU6ICIrcysiLCByZW1haW5pbmc6ICIrdGhpcy5zYW1wbGVzRGF0YVNpemUrIikiKSxuLmxhc3RWYWxpZFNhbXBsZT1lfSx1LnByb3RvdHlwZS5zdGFydD1mdW5jdGlvbigpe3RoaXMuc2FtcGxlUHJvY2Vzc2luZ1N0YXJ0ZWQ9ITAsdGhpcy5wcm9jZXNzU2FtcGxlcyghMSl9LHUucHJvdG90eXBlLnN0b3A9ZnVuY3Rpb24oKXt0aGlzLnNhbXBsZVByb2Nlc3NpbmdTdGFydGVkPSExfSx1LnByb3RvdHlwZS5mbHVzaD1mdW5jdGlvbigpe2QuaW5mbygiSVNPRmlsZSIsIkZsdXNoaW5nIHJlbWFpbmluZyBzYW1wbGVzIiksdGhpcy51cGRhdGVTYW1wbGVMaXN0cygpLHRoaXMucHJvY2Vzc1NhbXBsZXMoITApLHRoaXMuc3RyZWFtLmNsZWFuQnVmZmVycygpLHRoaXMuc3RyZWFtLmxvZ0J1ZmZlckxldmVsKCEwKX0sdS5wcm90b3R5cGUuc2Vla1RyYWNrPWZ1bmN0aW9uKHQsZSxzKXt2YXIgbixhLG89MS8wLGg9MCxmPTAscDtpZihzLnNhbXBsZXMubGVuZ3RoPT09MClyZXR1cm4gZC5pbmZvKCJJU09GaWxlIiwiTm8gc2FtcGxlIGluIHRyYWNrLCBjYW5ub3Qgc2VlayEgVXNpbmcgdGltZSAiK2QuZ2V0RHVyYXRpb25TdHJpbmcoMCwxKSsiIGFuZCBvZmZzZXQ6IDAiKSx7b2Zmc2V0OjAsdGltZTowfTtmb3Iobj0wO248cy5zYW1wbGVzLmxlbmd0aDtuKyspe2lmKGE9cy5zYW1wbGVzW25dLG49PT0wKWY9MCxwPWEudGltZXNjYWxlO2Vsc2UgaWYoYS5jdHM+dCphLnRpbWVzY2FsZSl7Zj1uLTE7YnJlYWt9ZSYmYS5pc19zeW5jJiYoaD1uKX1mb3IoZSYmKGY9aCksdD1zLnNhbXBsZXNbZl0uY3RzLHMubmV4dFNhbXBsZT1mO3Muc2FtcGxlc1tmXS5hbHJlYWR5UmVhZD09PXMuc2FtcGxlc1tmXS5zaXplJiZzLnNhbXBsZXNbZisxXTspZisrO3JldHVybiBvPXMuc2FtcGxlc1tmXS5vZmZzZXQrcy5zYW1wbGVzW2ZdLmFscmVhZHlSZWFkLGQuaW5mbygiSVNPRmlsZSIsIlNlZWtpbmcgdG8gIisoZT8iUkFQIjoiIikrIiBzYW1wbGUgIyIrcy5uZXh0U2FtcGxlKyIgb24gdHJhY2sgIitzLnRraGQudHJhY2tfaWQrIiwgdGltZSAiK2QuZ2V0RHVyYXRpb25TdHJpbmcodCxwKSsiIGFuZCBvZmZzZXQ6ICIrbykse29mZnNldDpvLHRpbWU6dC9wfX0sdS5wcm90b3R5cGUuZ2V0VHJhY2tEdXJhdGlvbj1mdW5jdGlvbih0KXt2YXIgZTtyZXR1cm4gdC5zYW1wbGVzPyhlPXQuc2FtcGxlc1t0LnNhbXBsZXMubGVuZ3RoLTFdLChlLmN0cytlLmR1cmF0aW9uKS9lLnRpbWVzY2FsZSk6MS8wfSx1LnByb3RvdHlwZS5zZWVrPWZ1bmN0aW9uKHQsZSl7dmFyIHM9dGhpcy5tb292LG4sYSxvLGg9e29mZnNldDoxLzAsdGltZToxLzB9O2lmKHRoaXMubW9vdil7Zm9yKG89MDtvPHMudHJha3MubGVuZ3RoO28rKyluPXMudHJha3Nbb10sISh0PnRoaXMuZ2V0VHJhY2tEdXJhdGlvbihuKSkmJihhPXRoaXMuc2Vla1RyYWNrKHQsZSxuKSxhLm9mZnNldDxoLm9mZnNldCYmKGgub2Zmc2V0PWEub2Zmc2V0KSxhLnRpbWU8aC50aW1lJiYoaC50aW1lPWEudGltZSkpO3JldHVybiBkLmluZm8oIklTT0ZpbGUiLCJTZWVraW5nIGF0IHRpbWUgIitkLmdldER1cmF0aW9uU3RyaW5nKGgudGltZSwxKSsiIG5lZWRzIGEgYnVmZmVyIHdpdGggYSBmaWxlU3RhcnQgcG9zaXRpb24gb2YgIitoLm9mZnNldCksaC5vZmZzZXQ9PT0xLzA/aD17b2Zmc2V0OnRoaXMubmV4dFBhcnNlUG9zaXRpb24sdGltZTowfTpoLm9mZnNldD10aGlzLnN0cmVhbS5nZXRFbmRGaWxlUG9zaXRpb25BZnRlcihoLm9mZnNldCksZC5pbmZvKCJJU09GaWxlIiwiQWRqdXN0ZWQgc2VlayBwb3NpdGlvbiAoYWZ0ZXIgY2hlY2tpbmcgZGF0YSBhbHJlYWR5IGluIGJ1ZmZlcik6ICIraC5vZmZzZXQpLGh9ZWxzZSB0aHJvdyJDYW5ub3Qgc2VlazogbW9vdiBub3QgcmVjZWl2ZWQhIn0sdS5wcm90b3R5cGUuZXF1YWw9ZnVuY3Rpb24odCl7Zm9yKHZhciBlPTA7ZTx0aGlzLmJveGVzLmxlbmd0aCYmZTx0LmJveGVzLmxlbmd0aDspe3ZhciBzPXRoaXMuYm94ZXNbZV0sbj10LmJveGVzW2VdO2lmKCFyLmJveEVxdWFsKHMsbikpcmV0dXJuITE7ZSsrfXJldHVybiEwfSxfLklTT0ZpbGU9dSx1LnByb3RvdHlwZS5sYXN0Qm94U3RhcnRQb3NpdGlvbj0wLHUucHJvdG90eXBlLnBhcnNpbmdNZGF0PW51bGwsdS5wcm90b3R5cGUubmV4dFBhcnNlUG9zaXRpb249MCx1LnByb3RvdHlwZS5kaXNjYXJkTWRhdERhdGE9ITEsdS5wcm90b3R5cGUucHJvY2Vzc0luY29tcGxldGVCb3g9ZnVuY3Rpb24odCl7dmFyIGUscyxuO3JldHVybiB0LnR5cGU9PT0ibWRhdCI/KGU9bmV3IHJbdC50eXBlKyJCb3giXSh0LnNpemUpLHRoaXMucGFyc2luZ01kYXQ9ZSx0aGlzLmJveGVzLnB1c2goZSksdGhpcy5tZGF0cy5wdXNoKGUpLGUuc3RhcnQ9dC5zdGFydCxlLmhkcl9zaXplPXQuaGRyX3NpemUsdGhpcy5zdHJlYW0uYWRkVXNlZEJ5dGVzKGUuaGRyX3NpemUpLHRoaXMubGFzdEJveFN0YXJ0UG9zaXRpb249ZS5zdGFydCtlLnNpemUsbj10aGlzLnN0cmVhbS5zZWVrKGUuc3RhcnQrZS5zaXplLCExLHRoaXMuZGlzY2FyZE1kYXREYXRhKSxuPyh0aGlzLnBhcnNpbmdNZGF0PW51bGwsITApOih0aGlzLm1vb3ZTdGFydEZvdW5kP3RoaXMubmV4dFBhcnNlUG9zaXRpb249dGhpcy5zdHJlYW0uZmluZEVuZENvbnRpZ3VvdXNCdWYoKTp0aGlzLm5leHRQYXJzZVBvc2l0aW9uPWUuc3RhcnQrZS5zaXplLCExKSk6KHQudHlwZT09PSJtb292IiYmKHRoaXMubW9vdlN0YXJ0Rm91bmQ9ITAsdGhpcy5tZGF0cy5sZW5ndGg9PT0wJiYodGhpcy5pc1Byb2dyZXNzaXZlPSEwKSkscz10aGlzLnN0cmVhbS5tZXJnZU5leHRCdWZmZXI/dGhpcy5zdHJlYW0ubWVyZ2VOZXh0QnVmZmVyKCk6ITEscz8odGhpcy5uZXh0UGFyc2VQb3NpdGlvbj10aGlzLnN0cmVhbS5nZXRFbmRQb3NpdGlvbigpLCEwKToodC50eXBlP3RoaXMubW9vdlN0YXJ0Rm91bmQ/dGhpcy5uZXh0UGFyc2VQb3NpdGlvbj10aGlzLnN0cmVhbS5nZXRFbmRQb3NpdGlvbigpOnRoaXMubmV4dFBhcnNlUG9zaXRpb249dGhpcy5zdHJlYW0uZ2V0UG9zaXRpb24oKSt0LnNpemU6dGhpcy5uZXh0UGFyc2VQb3NpdGlvbj10aGlzLnN0cmVhbS5nZXRFbmRQb3NpdGlvbigpLCExKSl9LHUucHJvdG90eXBlLmhhc0luY29tcGxldGVNZGF0PWZ1bmN0aW9uKCl7cmV0dXJuIHRoaXMucGFyc2luZ01kYXQhPT1udWxsfSx1LnByb3RvdHlwZS5wcm9jZXNzSW5jb21wbGV0ZU1kYXQ9ZnVuY3Rpb24oKXt2YXIgdCxlO3JldHVybiB0PXRoaXMucGFyc2luZ01kYXQsZT10aGlzLnN0cmVhbS5zZWVrKHQuc3RhcnQrdC5zaXplLCExLHRoaXMuZGlzY2FyZE1kYXREYXRhKSxlPyhkLmRlYnVnKCJJU09GaWxlIiwiRm91bmQgJ21kYXQnIGVuZCBpbiBidWZmZXJlZCBkYXRhIiksdGhpcy5wYXJzaW5nTWRhdD1udWxsLCEwKToodGhpcy5uZXh0UGFyc2VQb3NpdGlvbj10aGlzLnN0cmVhbS5maW5kRW5kQ29udGlndW91c0J1ZigpLCExKX0sdS5wcm90b3R5cGUucmVzdG9yZVBhcnNlUG9zaXRpb249ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5zdHJlYW0uc2Vlayh0aGlzLmxhc3RCb3hTdGFydFBvc2l0aW9uLCEwLHRoaXMuZGlzY2FyZE1kYXREYXRhKX0sdS5wcm90b3R5cGUuc2F2ZVBhcnNlUG9zaXRpb249ZnVuY3Rpb24oKXt0aGlzLmxhc3RCb3hTdGFydFBvc2l0aW9uPXRoaXMuc3RyZWFtLmdldFBvc2l0aW9uKCl9LHUucHJvdG90eXBlLnVwZGF0ZVVzZWRCeXRlcz1mdW5jdGlvbih0LGUpe3RoaXMuc3RyZWFtLmFkZFVzZWRCeXRlcyYmKHQudHlwZT09PSJtZGF0Ij8odGhpcy5zdHJlYW0uYWRkVXNlZEJ5dGVzKHQuaGRyX3NpemUpLHRoaXMuZGlzY2FyZE1kYXREYXRhJiZ0aGlzLnN0cmVhbS5hZGRVc2VkQnl0ZXModC5zaXplLXQuaGRyX3NpemUpKTp0aGlzLnN0cmVhbS5hZGRVc2VkQnl0ZXModC5zaXplKSl9LHUucHJvdG90eXBlLmFkZD1yLkJveC5wcm90b3R5cGUuYWRkLHUucHJvdG90eXBlLmFkZEJveD1yLkJveC5wcm90b3R5cGUuYWRkQm94LHUucHJvdG90eXBlLmluaXQ9ZnVuY3Rpb24odCl7dmFyIGU9dHx8e307dGhpcy5hZGQoImZ0eXAiKS5zZXQoIm1ham9yX2JyYW5kIixlLmJyYW5kcyYmZS5icmFuZHNbMF18fCJpc280Iikuc2V0KCJtaW5vcl92ZXJzaW9uIiwwKS5zZXQoImNvbXBhdGlibGVfYnJhbmRzIixlLmJyYW5kc3x8WyJpc280Il0pO3ZhciBzPXRoaXMuYWRkKCJtb292Iik7cmV0dXJuIHMuYWRkKCJtdmhkIikuc2V0KCJ0aW1lc2NhbGUiLGUudGltZXNjYWxlfHw2MDApLnNldCgicmF0ZSIsZS5yYXRlfHwxPDwxNikuc2V0KCJjcmVhdGlvbl90aW1lIiwwKS5zZXQoIm1vZGlmaWNhdGlvbl90aW1lIiwwKS5zZXQoImR1cmF0aW9uIixlLmR1cmF0aW9ufHwwKS5zZXQoInZvbHVtZSIsZS53aWR0aD8wOjI1Nikuc2V0KCJtYXRyaXgiLFsxPDwxNiwwLDAsMCwxPDwxNiwwLDAsMCwxMDczNzQxODI0XSkuc2V0KCJuZXh0X3RyYWNrX2lkIiwxKSxzLmFkZCgibXZleCIpLHRoaXN9LHUucHJvdG90eXBlLmFkZFRyYWNrPWZ1bmN0aW9uKHQpe3RoaXMubW9vdnx8dGhpcy5pbml0KHQpO3ZhciBlPXR8fHt9O2Uud2lkdGg9ZS53aWR0aHx8MzIwLGUuaGVpZ2h0PWUuaGVpZ2h0fHwzMjAsZS5pZD1lLmlkfHx0aGlzLm1vb3YubXZoZC5uZXh0X3RyYWNrX2lkLGUudHlwZT1lLnR5cGV8fCJhdmMxIjt2YXIgcz10aGlzLm1vb3YuYWRkKCJ0cmFrIik7dGhpcy5tb292Lm12aGQubmV4dF90cmFja19pZD1lLmlkKzEscy5hZGQoInRraGQiKS5zZXQoImZsYWdzIixyLlRLSERfRkxBR19FTkFCTEVEfHIuVEtIRF9GTEFHX0lOX01PVklFfHIuVEtIRF9GTEFHX0lOX1BSRVZJRVcpLnNldCgiY3JlYXRpb25fdGltZSIsMCkuc2V0KCJtb2RpZmljYXRpb25fdGltZSIsMCkuc2V0KCJ0cmFja19pZCIsZS5pZCkuc2V0KCJkdXJhdGlvbiIsZS5kdXJhdGlvbnx8MCkuc2V0KCJsYXllciIsZS5sYXllcnx8MCkuc2V0KCJhbHRlcm5hdGVfZ3JvdXAiLDApLnNldCgidm9sdW1lIiwxKS5zZXQoIm1hdHJpeCIsWzAsMCwwLDAsMCwwLDAsMCwwXSkuc2V0KCJ3aWR0aCIsZS53aWR0aDw8MTYpLnNldCgiaGVpZ2h0IixlLmhlaWdodDw8MTYpO3ZhciBuPXMuYWRkKCJtZGlhIik7bi5hZGQoIm1kaGQiKS5zZXQoImNyZWF0aW9uX3RpbWUiLDApLnNldCgibW9kaWZpY2F0aW9uX3RpbWUiLDApLnNldCgidGltZXNjYWxlIixlLnRpbWVzY2FsZXx8MSkuc2V0KCJkdXJhdGlvbiIsZS5tZWRpYV9kdXJhdGlvbnx8MCkuc2V0KCJsYW5ndWFnZSIsZS5sYW5ndWFnZXx8InVuZCIpLG4uYWRkKCJoZGxyIikuc2V0KCJoYW5kbGVyIixlLmhkbHJ8fCJ2aWRlIikuc2V0KCJuYW1lIixlLm5hbWV8fCJUcmFjayBjcmVhdGVkIHdpdGggTVA0Qm94LmpzIiksbi5hZGQoImVsbmciKS5zZXQoImV4dGVuZGVkX2xhbmd1YWdlIixlLmxhbmd1YWdlfHwiZnItRlIiKTt2YXIgYT1uLmFkZCgibWluZiIpO2lmKHJbZS50eXBlKyJTYW1wbGVFbnRyeSJdIT09dm9pZCAwKXt2YXIgbz1uZXcgcltlLnR5cGUrIlNhbXBsZUVudHJ5Il07by5kYXRhX3JlZmVyZW5jZV9pbmRleD0xO3ZhciBoPSIiO2Zvcih2YXIgZiBpbiByLnNhbXBsZUVudHJ5Q29kZXMpZm9yKHZhciBwPXIuc2FtcGxlRW50cnlDb2Rlc1tmXSxnPTA7ZzxwLmxlbmd0aDtnKyspaWYocC5pbmRleE9mKGUudHlwZSk+LTEpe2g9ZjticmVha31zd2l0Y2goaCl7Y2FzZSJWaXN1YWwiOmlmKGEuYWRkKCJ2bWhkIikuc2V0KCJncmFwaGljc21vZGUiLDApLnNldCgib3Bjb2xvciIsWzAsMCwwXSksby5zZXQoIndpZHRoIixlLndpZHRoKS5zZXQoImhlaWdodCIsZS5oZWlnaHQpLnNldCgiaG9yaXpyZXNvbHV0aW9uIiw3Mjw8MTYpLnNldCgidmVydHJlc29sdXRpb24iLDcyPDwxNikuc2V0KCJmcmFtZV9jb3VudCIsMSkuc2V0KCJjb21wcmVzc29ybmFtZSIsZS50eXBlKyIgQ29tcHJlc3NvciIpLnNldCgiZGVwdGgiLDI0KSxlLmF2Y0RlY29kZXJDb25maWdSZWNvcmQpe3ZhciBtPW5ldyByLmF2Y0NCb3g7bS5wYXJzZShuZXcgYyhlLmF2Y0RlY29kZXJDb25maWdSZWNvcmQpKSxvLmFkZEJveChtKX1lbHNlIGlmKGUuaGV2Y0RlY29kZXJDb25maWdSZWNvcmQpe3ZhciB2PW5ldyByLmh2Y0NCb3g7di5wYXJzZShuZXcgYyhlLmhldmNEZWNvZGVyQ29uZmlnUmVjb3JkKSksby5hZGRCb3godil9YnJlYWs7Y2FzZSJBdWRpbyI6YS5hZGQoInNtaGQiKS5zZXQoImJhbGFuY2UiLGUuYmFsYW5jZXx8MCksby5zZXQoImNoYW5uZWxfY291bnQiLGUuY2hhbm5lbF9jb3VudHx8Mikuc2V0KCJzYW1wbGVzaXplIixlLnNhbXBsZXNpemV8fDE2KS5zZXQoInNhbXBsZXJhdGUiLGUuc2FtcGxlcmF0ZXx8MTw8MTYpO2JyZWFrO2Nhc2UiSGludCI6YS5hZGQoImhtaGQiKTticmVhaztjYXNlIlN1YnRpdGxlIjpzd2l0Y2goYS5hZGQoInN0aGQiKSxlLnR5cGUpe2Nhc2Uic3RwcCI6by5zZXQoIm5hbWVzcGFjZSIsZS5uYW1lc3BhY2V8fCJub25hbWVzcGFjZSIpLnNldCgic2NoZW1hX2xvY2F0aW9uIixlLnNjaGVtYV9sb2NhdGlvbnx8IiIpLnNldCgiYXV4aWxpYXJ5X21pbWVfdHlwZXMiLGUuYXV4aWxpYXJ5X21pbWVfdHlwZXN8fCIiKTticmVha31icmVhaztjYXNlIk1ldGFkYXRhIjphLmFkZCgibm1oZCIpO2JyZWFrO2Nhc2UiU3lzdGVtIjphLmFkZCgibm1oZCIpO2JyZWFrO2RlZmF1bHQ6YS5hZGQoIm5taGQiKTticmVha31lLmRlc2NyaXB0aW9uJiZvLmFkZEJveChlLmRlc2NyaXB0aW9uKSxlLmRlc2NyaXB0aW9uX2JveGVzJiZlLmRlc2NyaXB0aW9uX2JveGVzLmZvckVhY2goZnVuY3Rpb24oeSl7by5hZGRCb3goeSl9KSxhLmFkZCgiZGluZiIpLmFkZCgiZHJlZiIpLmFkZEVudHJ5KG5ldyByWyJ1cmwgQm94Il0oKS5zZXQoImZsYWdzIiwxKSk7dmFyIGI9YS5hZGQoInN0YmwiKTtyZXR1cm4gYi5hZGQoInN0c2QiKS5hZGRFbnRyeShvKSxiLmFkZCgic3R0cyIpLnNldCgic2FtcGxlX2NvdW50cyIsW10pLnNldCgic2FtcGxlX2RlbHRhcyIsW10pLGIuYWRkKCJzdHNjIikuc2V0KCJmaXJzdF9jaHVuayIsW10pLnNldCgic2FtcGxlc19wZXJfY2h1bmsiLFtdKS5zZXQoInNhbXBsZV9kZXNjcmlwdGlvbl9pbmRleCIsW10pLGIuYWRkKCJzdGNvIikuc2V0KCJjaHVua19vZmZzZXRzIixbXSksYi5hZGQoInN0c3oiKS5zZXQoInNhbXBsZV9zaXplcyIsW10pLHRoaXMubW9vdi5tdmV4LmFkZCgidHJleCIpLnNldCgidHJhY2tfaWQiLGUuaWQpLnNldCgiZGVmYXVsdF9zYW1wbGVfZGVzY3JpcHRpb25faW5kZXgiLGUuZGVmYXVsdF9zYW1wbGVfZGVzY3JpcHRpb25faW5kZXh8fDEpLnNldCgiZGVmYXVsdF9zYW1wbGVfZHVyYXRpb24iLGUuZGVmYXVsdF9zYW1wbGVfZHVyYXRpb258fDApLnNldCgiZGVmYXVsdF9zYW1wbGVfc2l6ZSIsZS5kZWZhdWx0X3NhbXBsZV9zaXplfHwwKS5zZXQoImRlZmF1bHRfc2FtcGxlX2ZsYWdzIixlLmRlZmF1bHRfc2FtcGxlX2ZsYWdzfHwwKSx0aGlzLmJ1aWxkVHJha1NhbXBsZUxpc3RzKHMpLGUuaWR9fSxyLkJveC5wcm90b3R5cGUuY29tcHV0ZVNpemU9ZnVuY3Rpb24odCl7dmFyIGU9dHx8bmV3IGw7ZS5lbmRpYW5uZXNzPWwuQklHX0VORElBTix0aGlzLndyaXRlKGUpfSx1LnByb3RvdHlwZS5hZGRTYW1wbGU9ZnVuY3Rpb24odCxlLHMpe3ZhciBuPXN8fHt9LGE9e30sbz10aGlzLmdldFRyYWNrQnlJZCh0KTtpZihvIT09bnVsbCl7YS5udW1iZXI9by5zYW1wbGVzLmxlbmd0aCxhLnRyYWNrX2lkPW8udGtoZC50cmFja19pZCxhLnRpbWVzY2FsZT1vLm1kaWEubWRoZC50aW1lc2NhbGUsYS5kZXNjcmlwdGlvbl9pbmRleD1uLnNhbXBsZV9kZXNjcmlwdGlvbl9pbmRleD9uLnNhbXBsZV9kZXNjcmlwdGlvbl9pbmRleC0xOjAsYS5kZXNjcmlwdGlvbj1vLm1kaWEubWluZi5zdGJsLnN0c2QuZW50cmllc1thLmRlc2NyaXB0aW9uX2luZGV4XSxhLmRhdGE9ZSxhLnNpemU9ZS5ieXRlTGVuZ3RoLGEuYWxyZWFkeVJlYWQ9YS5zaXplLGEuZHVyYXRpb249bi5kdXJhdGlvbnx8MSxhLmN0cz1uLmN0c3x8MCxhLmR0cz1uLmR0c3x8MCxhLmlzX3N5bmM9bi5pc19zeW5jfHwhMSxhLmlzX2xlYWRpbmc9bi5pc19sZWFkaW5nfHwwLGEuZGVwZW5kc19vbj1uLmRlcGVuZHNfb258fDAsYS5pc19kZXBlbmRlZF9vbj1uLmlzX2RlcGVuZGVkX29ufHwwLGEuaGFzX3JlZHVuZGFuY3k9bi5oYXNfcmVkdW5kYW5jeXx8MCxhLmRlZ3JhZGF0aW9uX3ByaW9yaXR5PW4uZGVncmFkYXRpb25fcHJpb3JpdHl8fDAsYS5vZmZzZXQ9MCxhLnN1YnNhbXBsZXM9bi5zdWJzYW1wbGVzLG8uc2FtcGxlcy5wdXNoKGEpLG8uc2FtcGxlc19zaXplKz1hLnNpemUsby5zYW1wbGVzX2R1cmF0aW9uKz1hLmR1cmF0aW9uLG8uZmlyc3RfZHRzPT09dm9pZCAwJiYoby5maXJzdF9kdHM9bi5kdHMpLHRoaXMucHJvY2Vzc1NhbXBsZXMoKTt2YXIgaD10aGlzLmNyZWF0ZVNpbmdsZVNhbXBsZU1vb2YoYSk7cmV0dXJuIHRoaXMuYWRkQm94KGgpLGguY29tcHV0ZVNpemUoKSxoLnRyYWZzWzBdLnRydW5zWzBdLmRhdGFfb2Zmc2V0PWguc2l6ZSs4LHRoaXMuYWRkKCJtZGF0IikuZGF0YT1uZXcgVWludDhBcnJheShlKSxhfX0sdS5wcm90b3R5cGUuY3JlYXRlU2luZ2xlU2FtcGxlTW9vZj1mdW5jdGlvbih0KXt2YXIgZT0wO3QuaXNfc3luYz9lPTE8PDI1OmU9MTw8MTY7dmFyIHM9bmV3IHIubW9vZkJveDtzLmFkZCgibWZoZCIpLnNldCgic2VxdWVuY2VfbnVtYmVyIix0aGlzLm5leHRNb29mTnVtYmVyKSx0aGlzLm5leHRNb29mTnVtYmVyKys7dmFyIG49cy5hZGQoInRyYWYiKSxhPXRoaXMuZ2V0VHJhY2tCeUlkKHQudHJhY2tfaWQpO3JldHVybiBuLmFkZCgidGZoZCIpLnNldCgidHJhY2tfaWQiLHQudHJhY2tfaWQpLnNldCgiZmxhZ3MiLHIuVEZIRF9GTEFHX0RFRkFVTFRfQkFTRV9JU19NT09GKSxuLmFkZCgidGZkdCIpLnNldCgiYmFzZU1lZGlhRGVjb2RlVGltZSIsdC5kdHMtKGEuZmlyc3RfZHRzfHwwKSksbi5hZGQoInRydW4iKS5zZXQoImZsYWdzIixyLlRSVU5fRkxBR1NfREFUQV9PRkZTRVR8ci5UUlVOX0ZMQUdTX0RVUkFUSU9OfHIuVFJVTl9GTEFHU19TSVpFfHIuVFJVTl9GTEFHU19GTEFHU3xyLlRSVU5fRkxBR1NfQ1RTX09GRlNFVCkuc2V0KCJkYXRhX29mZnNldCIsMCkuc2V0KCJmaXJzdF9zYW1wbGVfZmxhZ3MiLDApLnNldCgic2FtcGxlX2NvdW50IiwxKS5zZXQoInNhbXBsZV9kdXJhdGlvbiIsW3QuZHVyYXRpb25dKS5zZXQoInNhbXBsZV9zaXplIixbdC5zaXplXSkuc2V0KCJzYW1wbGVfZmxhZ3MiLFtlXSkuc2V0KCJzYW1wbGVfY29tcG9zaXRpb25fdGltZV9vZmZzZXQiLFt0LmN0cy10LmR0c10pLHN9LHUucHJvdG90eXBlLmxhc3RNb29mSW5kZXg9MCx1LnByb3RvdHlwZS5zYW1wbGVzRGF0YVNpemU9MCx1LnByb3RvdHlwZS5yZXNldFRhYmxlcz1mdW5jdGlvbigpe3ZhciB0LGUscyxuLGEsbyxoLGY7Zm9yKHRoaXMuaW5pdGlhbF9kdXJhdGlvbj10aGlzLm1vb3YubXZoZC5kdXJhdGlvbix0aGlzLm1vb3YubXZoZC5kdXJhdGlvbj0wLHQ9MDt0PHRoaXMubW9vdi50cmFrcy5sZW5ndGg7dCsrKXtlPXRoaXMubW9vdi50cmFrc1t0XSxlLnRraGQuZHVyYXRpb249MCxlLm1kaWEubWRoZC5kdXJhdGlvbj0wLHM9ZS5tZGlhLm1pbmYuc3RibC5zdGNvfHxlLm1kaWEubWluZi5zdGJsLmNvNjQscy5jaHVua19vZmZzZXRzPVtdLG49ZS5tZGlhLm1pbmYuc3RibC5zdHNjLG4uZmlyc3RfY2h1bms9W10sbi5zYW1wbGVzX3Blcl9jaHVuaz1bXSxuLnNhbXBsZV9kZXNjcmlwdGlvbl9pbmRleD1bXSxhPWUubWRpYS5taW5mLnN0Ymwuc3Rzenx8ZS5tZGlhLm1pbmYuc3RibC5zdHoyLGEuc2FtcGxlX3NpemVzPVtdLG89ZS5tZGlhLm1pbmYuc3RibC5zdHRzLG8uc2FtcGxlX2NvdW50cz1bXSxvLnNhbXBsZV9kZWx0YXM9W10saD1lLm1kaWEubWluZi5zdGJsLmN0dHMsaCYmKGguc2FtcGxlX2NvdW50cz1bXSxoLnNhbXBsZV9vZmZzZXRzPVtdKSxmPWUubWRpYS5taW5mLnN0Ymwuc3Rzczt2YXIgcD1lLm1kaWEubWluZi5zdGJsLmJveGVzLmluZGV4T2YoZik7cCE9LTEmJihlLm1kaWEubWluZi5zdGJsLmJveGVzW3BdPW51bGwpfX0sdS5pbml0U2FtcGxlR3JvdXBzPWZ1bmN0aW9uKHQsZSxzLG4sYSl7dmFyIG8saCxmLHA7ZnVuY3Rpb24gZyhtLHYsYil7dGhpcy5ncm91cGluZ190eXBlPW0sdGhpcy5ncm91cGluZ190eXBlX3BhcmFtZXRlcj12LHRoaXMuc2JncD1iLHRoaXMubGFzdF9zYW1wbGVfaW5fcnVuPS0xLHRoaXMuZW50cnlfaW5kZXg9LTF9Zm9yKGUmJihlLnNhbXBsZV9ncm91cHNfaW5mbz1bXSksdC5zYW1wbGVfZ3JvdXBzX2luZm98fCh0LnNhbXBsZV9ncm91cHNfaW5mbz1bXSksaD0wO2g8cy5sZW5ndGg7aCsrKXtmb3IocD1zW2hdLmdyb3VwaW5nX3R5cGUrIi8iK3NbaF0uZ3JvdXBpbmdfdHlwZV9wYXJhbWV0ZXIsZj1uZXcgZyhzW2hdLmdyb3VwaW5nX3R5cGUsc1toXS5ncm91cGluZ190eXBlX3BhcmFtZXRlcixzW2hdKSxlJiYoZS5zYW1wbGVfZ3JvdXBzX2luZm9bcF09ZiksdC5zYW1wbGVfZ3JvdXBzX2luZm9bcF18fCh0LnNhbXBsZV9ncm91cHNfaW5mb1twXT1mKSxvPTA7bzxuLmxlbmd0aDtvKyspbltvXS5ncm91cGluZ190eXBlPT09c1toXS5ncm91cGluZ190eXBlJiYoZi5kZXNjcmlwdGlvbj1uW29dLGYuZGVzY3JpcHRpb24udXNlZD0hMCk7aWYoYSlmb3Iobz0wO288YS5sZW5ndGg7bysrKWFbb10uZ3JvdXBpbmdfdHlwZT09PXNbaF0uZ3JvdXBpbmdfdHlwZSYmKGYuZnJhZ21lbnRfZGVzY3JpcHRpb249YVtvXSxmLmZyYWdtZW50X2Rlc2NyaXB0aW9uLnVzZWQ9ITAsZi5pc19mcmFnbWVudD0hMCl9aWYoZSl7aWYoYSlmb3IoaD0wO2g8YS5sZW5ndGg7aCsrKSFhW2hdLnVzZWQmJmFbaF0udmVyc2lvbj49MiYmKHA9YVtoXS5ncm91cGluZ190eXBlKyIvMCIsZj1uZXcgZyhhW2hdLmdyb3VwaW5nX3R5cGUsMCksZi5pc19mcmFnbWVudD0hMCxlLnNhbXBsZV9ncm91cHNfaW5mb1twXXx8KGUuc2FtcGxlX2dyb3Vwc19pbmZvW3BdPWYpKX1lbHNlIGZvcihoPTA7aDxuLmxlbmd0aDtoKyspIW5baF0udXNlZCYmbltoXS52ZXJzaW9uPj0yJiYocD1uW2hdLmdyb3VwaW5nX3R5cGUrIi8wIixmPW5ldyBnKG5baF0uZ3JvdXBpbmdfdHlwZSwwKSx0LnNhbXBsZV9ncm91cHNfaW5mb1twXXx8KHQuc2FtcGxlX2dyb3Vwc19pbmZvW3BdPWYpKX0sdS5zZXRTYW1wbGVHcm91cFByb3BlcnRpZXM9ZnVuY3Rpb24odCxlLHMsbil7dmFyIGEsbztlLnNhbXBsZV9ncm91cHM9W107Zm9yKGEgaW4gbilpZihlLnNhbXBsZV9ncm91cHNbYV09e30sZS5zYW1wbGVfZ3JvdXBzW2FdLmdyb3VwaW5nX3R5cGU9blthXS5ncm91cGluZ190eXBlLGUuc2FtcGxlX2dyb3Vwc1thXS5ncm91cGluZ190eXBlX3BhcmFtZXRlcj1uW2FdLmdyb3VwaW5nX3R5cGVfcGFyYW1ldGVyLHM+PW5bYV0ubGFzdF9zYW1wbGVfaW5fcnVuJiYoblthXS5sYXN0X3NhbXBsZV9pbl9ydW48MCYmKG5bYV0ubGFzdF9zYW1wbGVfaW5fcnVuPTApLG5bYV0uZW50cnlfaW5kZXgrKyxuW2FdLmVudHJ5X2luZGV4PD1uW2FdLnNiZ3AuZW50cmllcy5sZW5ndGgtMSYmKG5bYV0ubGFzdF9zYW1wbGVfaW5fcnVuKz1uW2FdLnNiZ3AuZW50cmllc1tuW2FdLmVudHJ5X2luZGV4XS5zYW1wbGVfY291bnQpKSxuW2FdLmVudHJ5X2luZGV4PD1uW2FdLnNiZ3AuZW50cmllcy5sZW5ndGgtMT9lLnNhbXBsZV9ncm91cHNbYV0uZ3JvdXBfZGVzY3JpcHRpb25faW5kZXg9blthXS5zYmdwLmVudHJpZXNbblthXS5lbnRyeV9pbmRleF0uZ3JvdXBfZGVzY3JpcHRpb25faW5kZXg6ZS5zYW1wbGVfZ3JvdXBzW2FdLmdyb3VwX2Rlc2NyaXB0aW9uX2luZGV4PS0xLGUuc2FtcGxlX2dyb3Vwc1thXS5ncm91cF9kZXNjcmlwdGlvbl9pbmRleCE9PTApe3ZhciBoO25bYV0uZnJhZ21lbnRfZGVzY3JpcHRpb24/aD1uW2FdLmZyYWdtZW50X2Rlc2NyaXB0aW9uOmg9blthXS5kZXNjcmlwdGlvbixlLnNhbXBsZV9ncm91cHNbYV0uZ3JvdXBfZGVzY3JpcHRpb25faW5kZXg+MD8oZS5zYW1wbGVfZ3JvdXBzW2FdLmdyb3VwX2Rlc2NyaXB0aW9uX2luZGV4PjY1NTM1P289KGUuc2FtcGxlX2dyb3Vwc1thXS5ncm91cF9kZXNjcmlwdGlvbl9pbmRleD4+MTYpLTE6bz1lLnNhbXBsZV9ncm91cHNbYV0uZ3JvdXBfZGVzY3JpcHRpb25faW5kZXgtMSxoJiZvPj0wJiYoZS5zYW1wbGVfZ3JvdXBzW2FdLmRlc2NyaXB0aW9uPWguZW50cmllc1tvXSkpOmgmJmgudmVyc2lvbj49MiYmaC5kZWZhdWx0X2dyb3VwX2Rlc2NyaXB0aW9uX2luZGV4PjAmJihlLnNhbXBsZV9ncm91cHNbYV0uZGVzY3JpcHRpb249aC5lbnRyaWVzW2guZGVmYXVsdF9ncm91cF9kZXNjcmlwdGlvbl9pbmRleC0xXSl9fSx1LnByb2Nlc3Nfc2R0cD1mdW5jdGlvbih0LGUscyl7ZSYmKHQ/KGUuaXNfbGVhZGluZz10LmlzX2xlYWRpbmdbc10sZS5kZXBlbmRzX29uPXQuc2FtcGxlX2RlcGVuZHNfb25bc10sZS5pc19kZXBlbmRlZF9vbj10LnNhbXBsZV9pc19kZXBlbmRlZF9vbltzXSxlLmhhc19yZWR1bmRhbmN5PXQuc2FtcGxlX2hhc19yZWR1bmRhbmN5W3NdKTooZS5pc19sZWFkaW5nPTAsZS5kZXBlbmRzX29uPTAsZS5pc19kZXBlbmRlZF9vbj0wLGUuaGFzX3JlZHVuZGFuY3k9MCkpfSx1LnByb3RvdHlwZS5idWlsZFNhbXBsZUxpc3RzPWZ1bmN0aW9uKCl7dmFyIHQsZTtmb3IodD0wO3Q8dGhpcy5tb292LnRyYWtzLmxlbmd0aDt0KyspZT10aGlzLm1vb3YudHJha3NbdF0sdGhpcy5idWlsZFRyYWtTYW1wbGVMaXN0cyhlKX0sdS5wcm90b3R5cGUuYnVpbGRUcmFrU2FtcGxlTGlzdHM9ZnVuY3Rpb24odCl7dmFyIGUscyxuLGEsbyxoLGYscCxnLG0sdixiLHksRSx3LE8sWSxELFQsRixqLGV0LFAsVjtpZih0LnNhbXBsZXM9W10sdC5zYW1wbGVzX2R1cmF0aW9uPTAsdC5zYW1wbGVzX3NpemU9MCxzPXQubWRpYS5taW5mLnN0Ymwuc3Rjb3x8dC5tZGlhLm1pbmYuc3RibC5jbzY0LG49dC5tZGlhLm1pbmYuc3RibC5zdHNjLGE9dC5tZGlhLm1pbmYuc3RibC5zdHN6fHx0Lm1kaWEubWluZi5zdGJsLnN0ejIsbz10Lm1kaWEubWluZi5zdGJsLnN0dHMsaD10Lm1kaWEubWluZi5zdGJsLmN0dHMsZj10Lm1kaWEubWluZi5zdGJsLnN0c3MscD10Lm1kaWEubWluZi5zdGJsLnN0c2QsZz10Lm1kaWEubWluZi5zdGJsLnN1YnMsYj10Lm1kaWEubWluZi5zdGJsLnN0ZHAsbT10Lm1kaWEubWluZi5zdGJsLnNiZ3BzLHY9dC5tZGlhLm1pbmYuc3RibC5zZ3BkcyxEPS0xLFQ9LTEsRj0tMSxqPS0xLGV0PTAsUD0wLFY9MCx1LmluaXRTYW1wbGVHcm91cHModCxudWxsLG0sdiksISh0eXBlb2YgYT4idSIpKXtmb3IoZT0wO2U8YS5zYW1wbGVfc2l6ZXMubGVuZ3RoO2UrKyl7dmFyIHg9e307eC5udW1iZXI9ZSx4LnRyYWNrX2lkPXQudGtoZC50cmFja19pZCx4LnRpbWVzY2FsZT10Lm1kaWEubWRoZC50aW1lc2NhbGUseC5hbHJlYWR5UmVhZD0wLHQuc2FtcGxlc1tlXT14LHguc2l6ZT1hLnNhbXBsZV9zaXplc1tlXSx0LnNhbXBsZXNfc2l6ZSs9eC5zaXplLGU9PT0wPyhFPTEseT0wLHguY2h1bmtfaW5kZXg9RSx4LmNodW5rX3J1bl9pbmRleD15LFk9bi5zYW1wbGVzX3Blcl9jaHVua1t5XSxPPTAseSsxPG4uZmlyc3RfY2h1bmsubGVuZ3RoP3c9bi5maXJzdF9jaHVua1t5KzFdLTE6dz0xLzApOmU8WT8oeC5jaHVua19pbmRleD1FLHguY2h1bmtfcnVuX2luZGV4PXkpOihFKysseC5jaHVua19pbmRleD1FLE89MCxFPD13fHwoeSsrLHkrMTxuLmZpcnN0X2NodW5rLmxlbmd0aD93PW4uZmlyc3RfY2h1bmtbeSsxXS0xOnc9MS8wKSx4LmNodW5rX3J1bl9pbmRleD15LFkrPW4uc2FtcGxlc19wZXJfY2h1bmtbeV0pLHguZGVzY3JpcHRpb25faW5kZXg9bi5zYW1wbGVfZGVzY3JpcHRpb25faW5kZXhbeC5jaHVua19ydW5faW5kZXhdLTEseC5kZXNjcmlwdGlvbj1wLmVudHJpZXNbeC5kZXNjcmlwdGlvbl9pbmRleF0seC5vZmZzZXQ9cy5jaHVua19vZmZzZXRzW3guY2h1bmtfaW5kZXgtMV0rTyxPKz14LnNpemUsZT5EJiYoVCsrLEQ8MCYmKEQ9MCksRCs9by5zYW1wbGVfY291bnRzW1RdKSxlPjA/KHQuc2FtcGxlc1tlLTFdLmR1cmF0aW9uPW8uc2FtcGxlX2RlbHRhc1tUXSx0LnNhbXBsZXNfZHVyYXRpb24rPXQuc2FtcGxlc1tlLTFdLmR1cmF0aW9uLHguZHRzPXQuc2FtcGxlc1tlLTFdLmR0cyt0LnNhbXBsZXNbZS0xXS5kdXJhdGlvbik6eC5kdHM9MCxoPyhlPj1GJiYoaisrLEY8MCYmKEY9MCksRis9aC5zYW1wbGVfY291bnRzW2pdKSx4LmN0cz10LnNhbXBsZXNbZV0uZHRzK2guc2FtcGxlX29mZnNldHNbal0pOnguY3RzPXguZHRzLGY/KGU9PWYuc2FtcGxlX251bWJlcnNbZXRdLTE/KHguaXNfc3luYz0hMCxldCsrKTooeC5pc19zeW5jPSExLHguZGVncmFkYXRpb25fcHJpb3JpdHk9MCksZyYmZy5lbnRyaWVzW1BdLnNhbXBsZV9kZWx0YStWPT1lKzEmJih4LnN1YnNhbXBsZXM9Zy5lbnRyaWVzW1BdLnN1YnNhbXBsZXMsVis9Zy5lbnRyaWVzW1BdLnNhbXBsZV9kZWx0YSxQKyspKTp4LmlzX3N5bmM9ITAsdS5wcm9jZXNzX3NkdHAodC5tZGlhLm1pbmYuc3RibC5zZHRwLHgseC5udW1iZXIpLGI/eC5kZWdyYWRhdGlvbl9wcmlvcml0eT1iLnByaW9yaXR5W2VdOnguZGVncmFkYXRpb25fcHJpb3JpdHk9MCxnJiZnLmVudHJpZXNbUF0uc2FtcGxlX2RlbHRhK1Y9PWUmJih4LnN1YnNhbXBsZXM9Zy5lbnRyaWVzW1BdLnN1YnNhbXBsZXMsVis9Zy5lbnRyaWVzW1BdLnNhbXBsZV9kZWx0YSksKG0ubGVuZ3RoPjB8fHYubGVuZ3RoPjApJiZ1LnNldFNhbXBsZUdyb3VwUHJvcGVydGllcyh0LHgsZSx0LnNhbXBsZV9ncm91cHNfaW5mbyl9ZT4wJiYodC5zYW1wbGVzW2UtMV0uZHVyYXRpb249TWF0aC5tYXgodC5tZGlhLm1kaGQuZHVyYXRpb24tdC5zYW1wbGVzW2UtMV0uZHRzLDApLHQuc2FtcGxlc19kdXJhdGlvbis9dC5zYW1wbGVzW2UtMV0uZHVyYXRpb24pfX0sdS5wcm90b3R5cGUudXBkYXRlU2FtcGxlTGlzdHM9ZnVuY3Rpb24oKXt2YXIgdCxlLHMsbixhLG8saCxmLHAsZyxtLHYsYix5LEU7aWYodGhpcy5tb292IT09dm9pZCAwKXtmb3IoO3RoaXMubGFzdE1vb2ZJbmRleDx0aGlzLm1vb2ZzLmxlbmd0aDspaWYocD10aGlzLm1vb2ZzW3RoaXMubGFzdE1vb2ZJbmRleF0sdGhpcy5sYXN0TW9vZkluZGV4KysscC50eXBlPT0ibW9vZiIpZm9yKGc9cCx0PTA7dDxnLnRyYWZzLmxlbmd0aDt0Kyspe2ZvcihtPWcudHJhZnNbdF0sdj10aGlzLmdldFRyYWNrQnlJZChtLnRmaGQudHJhY2tfaWQpLGI9dGhpcy5nZXRUcmV4QnlJZChtLnRmaGQudHJhY2tfaWQpLG0udGZoZC5mbGFncyZyLlRGSERfRkxBR19TQU1QTEVfREVTQz9uPW0udGZoZC5kZWZhdWx0X3NhbXBsZV9kZXNjcmlwdGlvbl9pbmRleDpuPWI/Yi5kZWZhdWx0X3NhbXBsZV9kZXNjcmlwdGlvbl9pbmRleDoxLG0udGZoZC5mbGFncyZyLlRGSERfRkxBR19TQU1QTEVfRFVSP2E9bS50ZmhkLmRlZmF1bHRfc2FtcGxlX2R1cmF0aW9uOmE9Yj9iLmRlZmF1bHRfc2FtcGxlX2R1cmF0aW9uOjAsbS50ZmhkLmZsYWdzJnIuVEZIRF9GTEFHX1NBTVBMRV9TSVpFP289bS50ZmhkLmRlZmF1bHRfc2FtcGxlX3NpemU6bz1iP2IuZGVmYXVsdF9zYW1wbGVfc2l6ZTowLG0udGZoZC5mbGFncyZyLlRGSERfRkxBR19TQU1QTEVfRkxBR1M/aD1tLnRmaGQuZGVmYXVsdF9zYW1wbGVfZmxhZ3M6aD1iP2IuZGVmYXVsdF9zYW1wbGVfZmxhZ3M6MCxtLnNhbXBsZV9udW1iZXI9MCxtLnNiZ3BzLmxlbmd0aD4wJiZ1LmluaXRTYW1wbGVHcm91cHModixtLG0uc2JncHMsdi5tZGlhLm1pbmYuc3RibC5zZ3BkcyxtLnNncGRzKSxlPTA7ZTxtLnRydW5zLmxlbmd0aDtlKyspe3ZhciB3PW0udHJ1bnNbZV07Zm9yKHM9MDtzPHcuc2FtcGxlX2NvdW50O3MrKyl7eT17fSx5Lm1vb2ZfbnVtYmVyPXRoaXMubGFzdE1vb2ZJbmRleCx5Lm51bWJlcl9pbl90cmFmPW0uc2FtcGxlX251bWJlcixtLnNhbXBsZV9udW1iZXIrKyx5Lm51bWJlcj12LnNhbXBsZXMubGVuZ3RoLG0uZmlyc3Rfc2FtcGxlX2luZGV4PXYuc2FtcGxlcy5sZW5ndGgsdi5zYW1wbGVzLnB1c2goeSkseS50cmFja19pZD12LnRraGQudHJhY2tfaWQseS50aW1lc2NhbGU9di5tZGlhLm1kaGQudGltZXNjYWxlLHkuZGVzY3JpcHRpb25faW5kZXg9bi0xLHkuZGVzY3JpcHRpb249di5tZGlhLm1pbmYuc3RibC5zdHNkLmVudHJpZXNbeS5kZXNjcmlwdGlvbl9pbmRleF0seS5zaXplPW8sdy5mbGFncyZyLlRSVU5fRkxBR1NfU0laRSYmKHkuc2l6ZT13LnNhbXBsZV9zaXplW3NdKSx2LnNhbXBsZXNfc2l6ZSs9eS5zaXplLHkuZHVyYXRpb249YSx3LmZsYWdzJnIuVFJVTl9GTEFHU19EVVJBVElPTiYmKHkuZHVyYXRpb249dy5zYW1wbGVfZHVyYXRpb25bc10pLHYuc2FtcGxlc19kdXJhdGlvbis9eS5kdXJhdGlvbix2LmZpcnN0X3RyYWZfbWVyZ2VkfHxzPjA/eS5kdHM9di5zYW1wbGVzW3Yuc2FtcGxlcy5sZW5ndGgtMl0uZHRzK3Yuc2FtcGxlc1t2LnNhbXBsZXMubGVuZ3RoLTJdLmR1cmF0aW9uOihtLnRmZHQ/eS5kdHM9bS50ZmR0LmJhc2VNZWRpYURlY29kZVRpbWU6eS5kdHM9MCx2LmZpcnN0X3RyYWZfbWVyZ2VkPSEwKSx5LmN0cz15LmR0cyx3LmZsYWdzJnIuVFJVTl9GTEFHU19DVFNfT0ZGU0VUJiYoeS5jdHM9eS5kdHMrdy5zYW1wbGVfY29tcG9zaXRpb25fdGltZV9vZmZzZXRbc10pLEU9aCx3LmZsYWdzJnIuVFJVTl9GTEFHU19GTEFHUz9FPXcuc2FtcGxlX2ZsYWdzW3NdOnM9PT0wJiZ3LmZsYWdzJnIuVFJVTl9GTEFHU19GSVJTVF9GTEFHJiYoRT13LmZpcnN0X3NhbXBsZV9mbGFncykseS5pc19zeW5jPSEoRT4+MTYmMSkseS5pc19sZWFkaW5nPUU+PjI2JjMseS5kZXBlbmRzX29uPUU+PjI0JjMseS5pc19kZXBlbmRlZF9vbj1FPj4yMiYzLHkuaGFzX3JlZHVuZGFuY3k9RT4+MjAmMyx5LmRlZ3JhZGF0aW9uX3ByaW9yaXR5PUUmNjU1MzU7dmFyIE89ISEobS50ZmhkLmZsYWdzJnIuVEZIRF9GTEFHX0JBU0VfREFUQV9PRkZTRVQpLFk9ISEobS50ZmhkLmZsYWdzJnIuVEZIRF9GTEFHX0RFRkFVTFRfQkFTRV9JU19NT09GKSxEPSEhKHcuZmxhZ3Mmci5UUlVOX0ZMQUdTX0RBVEFfT0ZGU0VUKSxUPTA7Tz9UPW0udGZoZC5iYXNlX2RhdGFfb2Zmc2V0Oll8fGU9PT0wP1Q9Zy5zdGFydDpUPWYsZT09PTAmJnM9PT0wP0Q/eS5vZmZzZXQ9VCt3LmRhdGFfb2Zmc2V0Onkub2Zmc2V0PVQ6eS5vZmZzZXQ9ZixmPXkub2Zmc2V0K3kuc2l6ZSwobS5zYmdwcy5sZW5ndGg+MHx8bS5zZ3Bkcy5sZW5ndGg+MHx8di5tZGlhLm1pbmYuc3RibC5zYmdwcy5sZW5ndGg+MHx8di5tZGlhLm1pbmYuc3RibC5zZ3Bkcy5sZW5ndGg+MCkmJnUuc2V0U2FtcGxlR3JvdXBQcm9wZXJ0aWVzKHYseSx5Lm51bWJlcl9pbl90cmFmLG0uc2FtcGxlX2dyb3Vwc19pbmZvKX19aWYobS5zdWJzKXt2Lmhhc19mcmFnbWVudF9zdWJzYW1wbGVzPSEwO3ZhciBGPW0uZmlyc3Rfc2FtcGxlX2luZGV4O2ZvcihlPTA7ZTxtLnN1YnMuZW50cmllcy5sZW5ndGg7ZSsrKUYrPW0uc3Vicy5lbnRyaWVzW2VdLnNhbXBsZV9kZWx0YSx5PXYuc2FtcGxlc1tGLTFdLHkuc3Vic2FtcGxlcz1tLnN1YnMuZW50cmllc1tlXS5zdWJzYW1wbGVzfX19fSx1LnByb3RvdHlwZS5nZXRTYW1wbGU9ZnVuY3Rpb24odCxlKXt2YXIgcyxuPXQuc2FtcGxlc1tlXTtpZighdGhpcy5tb292KXJldHVybiBudWxsO2lmKCFuLmRhdGEpbi5kYXRhPW5ldyBVaW50OEFycmF5KG4uc2l6ZSksbi5hbHJlYWR5UmVhZD0wLHRoaXMuc2FtcGxlc0RhdGFTaXplKz1uLnNpemUsZC5kZWJ1ZygiSVNPRmlsZSIsIkFsbG9jYXRpbmcgc2FtcGxlICMiK2UrIiBvbiB0cmFjayAjIit0LnRraGQudHJhY2tfaWQrIiBvZiBzaXplICIrbi5zaXplKyIgKHRvdGFsOiAiK3RoaXMuc2FtcGxlc0RhdGFTaXplKyIpIik7ZWxzZSBpZihuLmFscmVhZHlSZWFkPT1uLnNpemUpcmV0dXJuIG47Zm9yKDs7KXt2YXIgYT10aGlzLnN0cmVhbS5maW5kUG9zaXRpb24oITAsbi5vZmZzZXQrbi5hbHJlYWR5UmVhZCwhMSk7aWYoYT4tMSl7cz10aGlzLnN0cmVhbS5idWZmZXJzW2FdO3ZhciBvPXMuYnl0ZUxlbmd0aC0obi5vZmZzZXQrbi5hbHJlYWR5UmVhZC1zLmZpbGVTdGFydCk7aWYobi5zaXplLW4uYWxyZWFkeVJlYWQ8PW8pcmV0dXJuIGQuZGVidWcoIklTT0ZpbGUiLCJHZXR0aW5nIHNhbXBsZSAjIitlKyIgZGF0YSAoYWxyZWFkeVJlYWQ6ICIrbi5hbHJlYWR5UmVhZCsiIG9mZnNldDogIisobi5vZmZzZXQrbi5hbHJlYWR5UmVhZC1zLmZpbGVTdGFydCkrIiByZWFkIHNpemU6ICIrKG4uc2l6ZS1uLmFscmVhZHlSZWFkKSsiIGZ1bGwgc2l6ZTogIituLnNpemUrIikiKSxsLm1lbWNweShuLmRhdGEuYnVmZmVyLG4uYWxyZWFkeVJlYWQscyxuLm9mZnNldCtuLmFscmVhZHlSZWFkLXMuZmlsZVN0YXJ0LG4uc2l6ZS1uLmFscmVhZHlSZWFkKSxzLnVzZWRCeXRlcys9bi5zaXplLW4uYWxyZWFkeVJlYWQsdGhpcy5zdHJlYW0ubG9nQnVmZmVyTGV2ZWwoKSxuLmFscmVhZHlSZWFkPW4uc2l6ZSxuO2lmKG89PT0wKXJldHVybiBudWxsO2QuZGVidWcoIklTT0ZpbGUiLCJHZXR0aW5nIHNhbXBsZSAjIitlKyIgcGFydGlhbCBkYXRhIChhbHJlYWR5UmVhZDogIituLmFscmVhZHlSZWFkKyIgb2Zmc2V0OiAiKyhuLm9mZnNldCtuLmFscmVhZHlSZWFkLXMuZmlsZVN0YXJ0KSsiIHJlYWQgc2l6ZTogIitvKyIgZnVsbCBzaXplOiAiK24uc2l6ZSsiKSIpLGwubWVtY3B5KG4uZGF0YS5idWZmZXIsbi5hbHJlYWR5UmVhZCxzLG4ub2Zmc2V0K24uYWxyZWFkeVJlYWQtcy5maWxlU3RhcnQsbyksbi5hbHJlYWR5UmVhZCs9byxzLnVzZWRCeXRlcys9byx0aGlzLnN0cmVhbS5sb2dCdWZmZXJMZXZlbCgpfWVsc2UgcmV0dXJuIG51bGx9fSx1LnByb3RvdHlwZS5yZWxlYXNlU2FtcGxlPWZ1bmN0aW9uKHQsZSl7dmFyIHM9dC5zYW1wbGVzW2VdO3JldHVybiBzLmRhdGE/KHRoaXMuc2FtcGxlc0RhdGFTaXplLT1zLnNpemUscy5kYXRhPW51bGwscy5hbHJlYWR5UmVhZD0wLHMuc2l6ZSk6MH0sdS5wcm90b3R5cGUuZ2V0QWxsb2NhdGVkU2FtcGxlRGF0YVNpemU9ZnVuY3Rpb24oKXtyZXR1cm4gdGhpcy5zYW1wbGVzRGF0YVNpemV9LHUucHJvdG90eXBlLmdldENvZGVjcz1mdW5jdGlvbigpe3ZhciB0LGU9IiI7Zm9yKHQ9MDt0PHRoaXMubW9vdi50cmFrcy5sZW5ndGg7dCsrKXt2YXIgcz10aGlzLm1vb3YudHJha3NbdF07dD4wJiYoZSs9IiwiKSxlKz1zLm1kaWEubWluZi5zdGJsLnN0c2QuZW50cmllc1swXS5nZXRDb2RlYygpfXJldHVybiBlfSx1LnByb3RvdHlwZS5nZXRUcmV4QnlJZD1mdW5jdGlvbih0KXt2YXIgZTtpZighdGhpcy5tb292fHwhdGhpcy5tb292Lm12ZXgpcmV0dXJuIG51bGw7Zm9yKGU9MDtlPHRoaXMubW9vdi5tdmV4LnRyZXhzLmxlbmd0aDtlKyspe3ZhciBzPXRoaXMubW9vdi5tdmV4LnRyZXhzW2VdO2lmKHMudHJhY2tfaWQ9PXQpcmV0dXJuIHN9cmV0dXJuIG51bGx9LHUucHJvdG90eXBlLmdldFRyYWNrQnlJZD1mdW5jdGlvbih0KXtpZih0aGlzLm1vb3Y9PT12b2lkIDApcmV0dXJuIG51bGw7Zm9yKHZhciBlPTA7ZTx0aGlzLm1vb3YudHJha3MubGVuZ3RoO2UrKyl7dmFyIHM9dGhpcy5tb292LnRyYWtzW2VdO2lmKHMudGtoZC50cmFja19pZD09dClyZXR1cm4gc31yZXR1cm4gbnVsbH0sdS5wcm90b3R5cGUuaXRlbXM9W10sdS5wcm90b3R5cGUuaXRlbXNEYXRhU2l6ZT0wLHUucHJvdG90eXBlLmZsYXR0ZW5JdGVtSW5mbz1mdW5jdGlvbigpe3ZhciB0PXRoaXMuaXRlbXMsZSxzLG4sYT10aGlzLm1ldGE7aWYoYSE9bnVsbCYmYS5oZGxyIT09dm9pZCAwJiZhLmlpbmYhPT12b2lkIDApe2ZvcihlPTA7ZTxhLmlpbmYuaXRlbV9pbmZvcy5sZW5ndGg7ZSsrKW49e30sbi5pZD1hLmlpbmYuaXRlbV9pbmZvc1tlXS5pdGVtX0lELHRbbi5pZF09bixuLnJlZl90bz1bXSxuLm5hbWU9YS5paW5mLml0ZW1faW5mb3NbZV0uaXRlbV9uYW1lLGEuaWluZi5pdGVtX2luZm9zW2VdLnByb3RlY3Rpb25faW5kZXg+MCYmKG4ucHJvdGVjdGlvbj1hLmlwcm8ucHJvdGVjdGlvbnNbYS5paW5mLml0ZW1faW5mb3NbZV0ucHJvdGVjdGlvbl9pbmRleC0xXSksYS5paW5mLml0ZW1faW5mb3NbZV0uaXRlbV90eXBlP24udHlwZT1hLmlpbmYuaXRlbV9pbmZvc1tlXS5pdGVtX3R5cGU6bi50eXBlPSJtaW1lIixuLmNvbnRlbnRfdHlwZT1hLmlpbmYuaXRlbV9pbmZvc1tlXS5jb250ZW50X3R5cGUsbi5jb250ZW50X2VuY29kaW5nPWEuaWluZi5pdGVtX2luZm9zW2VdLmNvbnRlbnRfZW5jb2Rpbmc7aWYoYS5pbG9jKWZvcihlPTA7ZTxhLmlsb2MuaXRlbXMubGVuZ3RoO2UrKyl7dmFyIG89YS5pbG9jLml0ZW1zW2VdO3N3aXRjaChuPXRbby5pdGVtX0lEXSxvLmRhdGFfcmVmZXJlbmNlX2luZGV4IT09MCYmKGQud2FybigiSXRlbSBzdG9yYWdlIHdpdGggcmVmZXJlbmNlIHRvIG90aGVyIGZpbGVzOiBub3Qgc3VwcG9ydGVkIiksbi5zb3VyY2U9YS5kaW5mLmJveGVzW28uZGF0YV9yZWZlcmVuY2VfaW5kZXgtMV0pLG8uY29uc3RydWN0aW9uX21ldGhvZCl7Y2FzZSAwOmJyZWFrO2Nhc2UgMTpkLndhcm4oIkl0ZW0gc3RvcmFnZSB3aXRoIGNvbnN0cnVjdGlvbl9tZXRob2QgOiBub3Qgc3VwcG9ydGVkIik7YnJlYWs7Y2FzZSAyOmQud2FybigiSXRlbSBzdG9yYWdlIHdpdGggY29uc3RydWN0aW9uX21ldGhvZCA6IG5vdCBzdXBwb3J0ZWQiKTticmVha31mb3Iobi5leHRlbnRzPVtdLG4uc2l6ZT0wLHM9MDtzPG8uZXh0ZW50cy5sZW5ndGg7cysrKW4uZXh0ZW50c1tzXT17fSxuLmV4dGVudHNbc10ub2Zmc2V0PW8uZXh0ZW50c1tzXS5leHRlbnRfb2Zmc2V0K28uYmFzZV9vZmZzZXQsbi5leHRlbnRzW3NdLmxlbmd0aD1vLmV4dGVudHNbc10uZXh0ZW50X2xlbmd0aCxuLmV4dGVudHNbc10uYWxyZWFkeVJlYWQ9MCxuLnNpemUrPW4uZXh0ZW50c1tzXS5sZW5ndGh9aWYoYS5waXRtJiYodFthLnBpdG0uaXRlbV9pZF0ucHJpbWFyeT0hMCksYS5pcmVmKWZvcihlPTA7ZTxhLmlyZWYucmVmZXJlbmNlcy5sZW5ndGg7ZSsrKXt2YXIgaD1hLmlyZWYucmVmZXJlbmNlc1tlXTtmb3Iocz0wO3M8aC5yZWZlcmVuY2VzLmxlbmd0aDtzKyspdFtoLmZyb21faXRlbV9JRF0ucmVmX3RvLnB1c2goe3R5cGU6aC50eXBlLGlkOmgucmVmZXJlbmNlc1tzXX0pfWlmKGEuaXBycClmb3IodmFyIGY9MDtmPGEuaXBycC5pcG1hcy5sZW5ndGg7ZisrKXt2YXIgcD1hLmlwcnAuaXBtYXNbZl07Zm9yKGU9MDtlPHAuYXNzb2NpYXRpb25zLmxlbmd0aDtlKyspe3ZhciBnPXAuYXNzb2NpYXRpb25zW2VdO2ZvcihuPXRbZy5pZF0sbi5wcm9wZXJ0aWVzPT09dm9pZCAwJiYobi5wcm9wZXJ0aWVzPXt9LG4ucHJvcGVydGllcy5ib3hlcz1bXSkscz0wO3M8Zy5wcm9wcy5sZW5ndGg7cysrKXt2YXIgbT1nLnByb3BzW3NdO2lmKG0ucHJvcGVydHlfaW5kZXg+MCYmbS5wcm9wZXJ0eV9pbmRleC0xPGEuaXBycC5pcGNvLmJveGVzLmxlbmd0aCl7dmFyIHY9YS5pcHJwLmlwY28uYm94ZXNbbS5wcm9wZXJ0eV9pbmRleC0xXTtuLnByb3BlcnRpZXNbdi50eXBlXT12LG4ucHJvcGVydGllcy5ib3hlcy5wdXNoKHYpfX19fX19LHUucHJvdG90eXBlLmdldEl0ZW09ZnVuY3Rpb24odCl7dmFyIGUscztpZighdGhpcy5tZXRhKXJldHVybiBudWxsO2lmKHM9dGhpcy5pdGVtc1t0XSwhcy5kYXRhJiZzLnNpemUpcy5kYXRhPW5ldyBVaW50OEFycmF5KHMuc2l6ZSkscy5hbHJlYWR5UmVhZD0wLHRoaXMuaXRlbXNEYXRhU2l6ZSs9cy5zaXplLGQuZGVidWcoIklTT0ZpbGUiLCJBbGxvY2F0aW5nIGl0ZW0gIyIrdCsiIG9mIHNpemUgIitzLnNpemUrIiAodG90YWw6ICIrdGhpcy5pdGVtc0RhdGFTaXplKyIpIik7ZWxzZSBpZihzLmFscmVhZHlSZWFkPT09cy5zaXplKXJldHVybiBzO2Zvcih2YXIgbj0wO248cy5leHRlbnRzLmxlbmd0aDtuKyspe3ZhciBhPXMuZXh0ZW50c1tuXTtpZihhLmFscmVhZHlSZWFkIT09YS5sZW5ndGgpe3ZhciBvPXRoaXMuc3RyZWFtLmZpbmRQb3NpdGlvbighMCxhLm9mZnNldCthLmFscmVhZHlSZWFkLCExKTtpZihvPi0xKXtlPXRoaXMuc3RyZWFtLmJ1ZmZlcnNbb107dmFyIGg9ZS5ieXRlTGVuZ3RoLShhLm9mZnNldCthLmFscmVhZHlSZWFkLWUuZmlsZVN0YXJ0KTtpZihhLmxlbmd0aC1hLmFscmVhZHlSZWFkPD1oKWQuZGVidWcoIklTT0ZpbGUiLCJHZXR0aW5nIGl0ZW0gIyIrdCsiIGV4dGVudCAjIituKyIgZGF0YSAoYWxyZWFkeVJlYWQ6ICIrYS5hbHJlYWR5UmVhZCsiIG9mZnNldDogIisoYS5vZmZzZXQrYS5hbHJlYWR5UmVhZC1lLmZpbGVTdGFydCkrIiByZWFkIHNpemU6ICIrKGEubGVuZ3RoLWEuYWxyZWFkeVJlYWQpKyIgZnVsbCBleHRlbnQgc2l6ZTogIithLmxlbmd0aCsiIGZ1bGwgaXRlbSBzaXplOiAiK3Muc2l6ZSsiKSIpLGwubWVtY3B5KHMuZGF0YS5idWZmZXIscy5hbHJlYWR5UmVhZCxlLGEub2Zmc2V0K2EuYWxyZWFkeVJlYWQtZS5maWxlU3RhcnQsYS5sZW5ndGgtYS5hbHJlYWR5UmVhZCksZS51c2VkQnl0ZXMrPWEubGVuZ3RoLWEuYWxyZWFkeVJlYWQsdGhpcy5zdHJlYW0ubG9nQnVmZmVyTGV2ZWwoKSxzLmFscmVhZHlSZWFkKz1hLmxlbmd0aC1hLmFscmVhZHlSZWFkLGEuYWxyZWFkeVJlYWQ9YS5sZW5ndGg7ZWxzZSByZXR1cm4gZC5kZWJ1ZygiSVNPRmlsZSIsIkdldHRpbmcgaXRlbSAjIit0KyIgZXh0ZW50ICMiK24rIiBwYXJ0aWFsIGRhdGEgKGFscmVhZHlSZWFkOiAiK2EuYWxyZWFkeVJlYWQrIiBvZmZzZXQ6ICIrKGEub2Zmc2V0K2EuYWxyZWFkeVJlYWQtZS5maWxlU3RhcnQpKyIgcmVhZCBzaXplOiAiK2grIiBmdWxsIGV4dGVudCBzaXplOiAiK2EubGVuZ3RoKyIgZnVsbCBpdGVtIHNpemU6ICIrcy5zaXplKyIpIiksbC5tZW1jcHkocy5kYXRhLmJ1ZmZlcixzLmFscmVhZHlSZWFkLGUsYS5vZmZzZXQrYS5hbHJlYWR5UmVhZC1lLmZpbGVTdGFydCxoKSxhLmFscmVhZHlSZWFkKz1oLHMuYWxyZWFkeVJlYWQrPWgsZS51c2VkQnl0ZXMrPWgsdGhpcy5zdHJlYW0ubG9nQnVmZmVyTGV2ZWwoKSxudWxsfWVsc2UgcmV0dXJuIG51bGx9fXJldHVybiBzLmFscmVhZHlSZWFkPT09cy5zaXplP3M6bnVsbH0sdS5wcm90b3R5cGUucmVsZWFzZUl0ZW09ZnVuY3Rpb24odCl7dmFyIGU9dGhpcy5pdGVtc1t0XTtpZihlLmRhdGEpe3RoaXMuaXRlbXNEYXRhU2l6ZS09ZS5zaXplLGUuZGF0YT1udWxsLGUuYWxyZWFkeVJlYWQ9MDtmb3IodmFyIHM9MDtzPGUuZXh0ZW50cy5sZW5ndGg7cysrKXt2YXIgbj1lLmV4dGVudHNbc107bi5hbHJlYWR5UmVhZD0wfXJldHVybiBlLnNpemV9ZWxzZSByZXR1cm4gMH0sdS5wcm90b3R5cGUucHJvY2Vzc0l0ZW1zPWZ1bmN0aW9uKHQpe2Zvcih2YXIgZSBpbiB0aGlzLml0ZW1zKXt2YXIgcz10aGlzLml0ZW1zW2VdO3RoaXMuZ2V0SXRlbShzLmlkKSx0JiYhcy5zZW50JiYodChzKSxzLnNlbnQ9ITAscy5kYXRhPW51bGwpfX0sdS5wcm90b3R5cGUuaGFzSXRlbT1mdW5jdGlvbih0KXtmb3IodmFyIGUgaW4gdGhpcy5pdGVtcyl7dmFyIHM9dGhpcy5pdGVtc1tlXTtpZihzLm5hbWU9PT10KXJldHVybiBzLmlkfXJldHVybi0xfSx1LnByb3RvdHlwZS5nZXRNZXRhSGFuZGxlcj1mdW5jdGlvbigpe3JldHVybiB0aGlzLm1ldGE/dGhpcy5tZXRhLmhkbHIuaGFuZGxlcjpudWxsfSx1LnByb3RvdHlwZS5nZXRQcmltYXJ5SXRlbT1mdW5jdGlvbigpe3JldHVybiF0aGlzLm1ldGF8fCF0aGlzLm1ldGEucGl0bT9udWxsOnRoaXMuZ2V0SXRlbSh0aGlzLm1ldGEucGl0bS5pdGVtX2lkKX0sdS5wcm90b3R5cGUuaXRlbVRvRnJhZ21lbnRlZFRyYWNrRmlsZT1mdW5jdGlvbih0KXt2YXIgZT10fHx7fSxzPW51bGw7aWYoZS5pdGVtSWQ/cz10aGlzLmdldEl0ZW0oZS5pdGVtSWQpOnM9dGhpcy5nZXRQcmltYXJ5SXRlbSgpLHM9PW51bGwpcmV0dXJuIG51bGw7dmFyIG49bmV3IHU7bi5kaXNjYXJkTWRhdERhdGE9ITE7dmFyIGE9e3R5cGU6cy50eXBlLGRlc2NyaXB0aW9uX2JveGVzOnMucHJvcGVydGllcy5ib3hlc307cy5wcm9wZXJ0aWVzLmlzcGUmJihhLndpZHRoPXMucHJvcGVydGllcy5pc3BlLmltYWdlX3dpZHRoLGEuaGVpZ2h0PXMucHJvcGVydGllcy5pc3BlLmltYWdlX2hlaWdodCk7dmFyIG89bi5hZGRUcmFjayhhKTtyZXR1cm4gbz8obi5hZGRTYW1wbGUobyxzLmRhdGEpLG4pOm51bGx9LHUucHJvdG90eXBlLndyaXRlPWZ1bmN0aW9uKHQpe2Zvcih2YXIgZT0wO2U8dGhpcy5ib3hlcy5sZW5ndGg7ZSsrKXRoaXMuYm94ZXNbZV0ud3JpdGUodCl9LHUucHJvdG90eXBlLmNyZWF0ZUZyYWdtZW50PWZ1bmN0aW9uKHQsZSxzKXt2YXIgbj10aGlzLmdldFRyYWNrQnlJZCh0KSxhPXRoaXMuZ2V0U2FtcGxlKG4sZSk7aWYoYT09bnVsbClyZXR1cm4gdGhpcy5zZXROZXh0U2Vla1Bvc2l0aW9uRnJvbVNhbXBsZShuLnNhbXBsZXNbZV0pLG51bGw7dmFyIG89c3x8bmV3IGw7by5lbmRpYW5uZXNzPWwuQklHX0VORElBTjt2YXIgaD10aGlzLmNyZWF0ZVNpbmdsZVNhbXBsZU1vb2YoYSk7aC53cml0ZShvKSxoLnRyYWZzWzBdLnRydW5zWzBdLmRhdGFfb2Zmc2V0PWguc2l6ZSs4LGQuZGVidWcoIk1QNEJveCIsIkFkanVzdGluZyBkYXRhX29mZnNldCB3aXRoIG5ldyB2YWx1ZSAiK2gudHJhZnNbMF0udHJ1bnNbMF0uZGF0YV9vZmZzZXQpLG8uYWRqdXN0VWludDMyKGgudHJhZnNbMF0udHJ1bnNbMF0uZGF0YV9vZmZzZXRfcG9zaXRpb24saC50cmFmc1swXS50cnVuc1swXS5kYXRhX29mZnNldCk7dmFyIGY9bmV3IHIubWRhdEJveDtyZXR1cm4gZi5kYXRhPWEuZGF0YSxmLndyaXRlKG8pLG99LHUud3JpdGVJbml0aWFsaXphdGlvblNlZ21lbnQ9ZnVuY3Rpb24odCxlLHMsbil7dmFyIGE7ZC5kZWJ1ZygiSVNPRmlsZSIsIkdlbmVyYXRpbmcgaW5pdGlhbGl6YXRpb24gc2VnbWVudCIpO3ZhciBvPW5ldyBsO28uZW5kaWFubmVzcz1sLkJJR19FTkRJQU4sdC53cml0ZShvKTt2YXIgaD1lLmFkZCgibXZleCIpO2ZvcihzJiZoLmFkZCgibWVoZCIpLnNldCgiZnJhZ21lbnRfZHVyYXRpb24iLHMpLGE9MDthPGUudHJha3MubGVuZ3RoO2ErKyloLmFkZCgidHJleCIpLnNldCgidHJhY2tfaWQiLGUudHJha3NbYV0udGtoZC50cmFja19pZCkuc2V0KCJkZWZhdWx0X3NhbXBsZV9kZXNjcmlwdGlvbl9pbmRleCIsMSkuc2V0KCJkZWZhdWx0X3NhbXBsZV9kdXJhdGlvbiIsbikuc2V0KCJkZWZhdWx0X3NhbXBsZV9zaXplIiwwKS5zZXQoImRlZmF1bHRfc2FtcGxlX2ZsYWdzIiwxPDwxNik7cmV0dXJuIGUud3JpdGUobyksby5idWZmZXJ9LHUucHJvdG90eXBlLnNhdmU9ZnVuY3Rpb24odCl7dmFyIGU9bmV3IGw7ZS5lbmRpYW5uZXNzPWwuQklHX0VORElBTix0aGlzLndyaXRlKGUpLGUuc2F2ZSh0KX0sdS5wcm90b3R5cGUuZ2V0QnVmZmVyPWZ1bmN0aW9uKCl7dmFyIHQ9bmV3IGw7cmV0dXJuIHQuZW5kaWFubmVzcz1sLkJJR19FTkRJQU4sdGhpcy53cml0ZSh0KSx0LmJ1ZmZlcn0sdS5wcm90b3R5cGUuaW5pdGlhbGl6ZVNlZ21lbnRhdGlvbj1mdW5jdGlvbigpe3ZhciB0LGUscyxuO2Zvcih0aGlzLm9uU2VnbWVudD09PW51bGwmJmQud2FybigiTVA0Qm94IiwiTm8gc2VnbWVudGF0aW9uIGNhbGxiYWNrIHNldCEiKSx0aGlzLmlzRnJhZ21lbnRhdGlvbkluaXRpYWxpemVkfHwodGhpcy5pc0ZyYWdtZW50YXRpb25Jbml0aWFsaXplZD0hMCx0aGlzLm5leHRNb29mTnVtYmVyPTAsdGhpcy5yZXNldFRhYmxlcygpKSxlPVtdLHQ9MDt0PHRoaXMuZnJhZ21lbnRlZFRyYWNrcy5sZW5ndGg7dCsrKXt2YXIgYT1uZXcgci5tb292Qm94O2EubXZoZD10aGlzLm1vb3YubXZoZCxhLmJveGVzLnB1c2goYS5tdmhkKSxzPXRoaXMuZ2V0VHJhY2tCeUlkKHRoaXMuZnJhZ21lbnRlZFRyYWNrc1t0XS5pZCksYS5ib3hlcy5wdXNoKHMpLGEudHJha3MucHVzaChzKSxuPXt9LG4uaWQ9cy50a2hkLnRyYWNrX2lkLG4udXNlcj10aGlzLmZyYWdtZW50ZWRUcmFja3NbdF0udXNlcixuLmJ1ZmZlcj11LndyaXRlSW5pdGlhbGl6YXRpb25TZWdtZW50KHRoaXMuZnR5cCxhLHRoaXMubW9vdi5tdmV4JiZ0aGlzLm1vb3YubXZleC5tZWhkP3RoaXMubW9vdi5tdmV4Lm1laGQuZnJhZ21lbnRfZHVyYXRpb246dm9pZCAwLHRoaXMubW9vdi50cmFrc1t0XS5zYW1wbGVzLmxlbmd0aD4wP3RoaXMubW9vdi50cmFrc1t0XS5zYW1wbGVzWzBdLmR1cmF0aW9uOjApLGUucHVzaChuKX1yZXR1cm4gZX0sci5Cb3gucHJvdG90eXBlLnByaW50SGVhZGVyPWZ1bmN0aW9uKHQpe3RoaXMuc2l6ZSs9OCx0aGlzLnNpemU+UyYmKHRoaXMuc2l6ZSs9OCksdGhpcy50eXBlPT09InV1aWQiJiYodGhpcy5zaXplKz0xNiksdC5sb2codC5pbmRlbnQrInNpemU6Iit0aGlzLnNpemUpLHQubG9nKHQuaW5kZW50KyJ0eXBlOiIrdGhpcy50eXBlKX0sci5GdWxsQm94LnByb3RvdHlwZS5wcmludEhlYWRlcj1mdW5jdGlvbih0KXt0aGlzLnNpemUrPTQsci5Cb3gucHJvdG90eXBlLnByaW50SGVhZGVyLmNhbGwodGhpcyx0KSx0LmxvZyh0LmluZGVudCsidmVyc2lvbjoiK3RoaXMudmVyc2lvbiksdC5sb2codC5pbmRlbnQrImZsYWdzOiIrdGhpcy5mbGFncyl9LHIuQm94LnByb3RvdHlwZS5wcmludD1mdW5jdGlvbih0KXt0aGlzLnByaW50SGVhZGVyKHQpfSxyLkNvbnRhaW5lckJveC5wcm90b3R5cGUucHJpbnQ9ZnVuY3Rpb24odCl7dGhpcy5wcmludEhlYWRlcih0KTtmb3IodmFyIGU9MDtlPHRoaXMuYm94ZXMubGVuZ3RoO2UrKylpZih0aGlzLmJveGVzW2VdKXt2YXIgcz10LmluZGVudDt0LmluZGVudCs9IiAiLHRoaXMuYm94ZXNbZV0ucHJpbnQodCksdC5pbmRlbnQ9c319LHUucHJvdG90eXBlLnByaW50PWZ1bmN0aW9uKHQpe3QuaW5kZW50PSIiO2Zvcih2YXIgZT0wO2U8dGhpcy5ib3hlcy5sZW5ndGg7ZSsrKXRoaXMuYm94ZXNbZV0mJnRoaXMuYm94ZXNbZV0ucHJpbnQodCl9LHIubXZoZEJveC5wcm90b3R5cGUucHJpbnQ9ZnVuY3Rpb24odCl7ci5GdWxsQm94LnByb3RvdHlwZS5wcmludEhlYWRlci5jYWxsKHRoaXMsdCksdC5sb2codC5pbmRlbnQrImNyZWF0aW9uX3RpbWU6ICIrdGhpcy5jcmVhdGlvbl90aW1lKSx0LmxvZyh0LmluZGVudCsibW9kaWZpY2F0aW9uX3RpbWU6ICIrdGhpcy5tb2RpZmljYXRpb25fdGltZSksdC5sb2codC5pbmRlbnQrInRpbWVzY2FsZTogIit0aGlzLnRpbWVzY2FsZSksdC5sb2codC5pbmRlbnQrImR1cmF0aW9uOiAiK3RoaXMuZHVyYXRpb24pLHQubG9nKHQuaW5kZW50KyJyYXRlOiAiK3RoaXMucmF0ZSksdC5sb2codC5pbmRlbnQrInZvbHVtZTogIisodGhpcy52b2x1bWU+PjgpKSx0LmxvZyh0LmluZGVudCsibWF0cml4OiAiK3RoaXMubWF0cml4LmpvaW4oIiwgIikpLHQubG9nKHQuaW5kZW50KyJuZXh0X3RyYWNrX2lkOiAiK3RoaXMubmV4dF90cmFja19pZCl9LHIudGtoZEJveC5wcm90b3R5cGUucHJpbnQ9ZnVuY3Rpb24odCl7ci5GdWxsQm94LnByb3RvdHlwZS5wcmludEhlYWRlci5jYWxsKHRoaXMsdCksdC5sb2codC5pbmRlbnQrImNyZWF0aW9uX3RpbWU6ICIrdGhpcy5jcmVhdGlvbl90aW1lKSx0LmxvZyh0LmluZGVudCsibW9kaWZpY2F0aW9uX3RpbWU6ICIrdGhpcy5tb2RpZmljYXRpb25fdGltZSksdC5sb2codC5pbmRlbnQrInRyYWNrX2lkOiAiK3RoaXMudHJhY2tfaWQpLHQubG9nKHQuaW5kZW50KyJkdXJhdGlvbjogIit0aGlzLmR1cmF0aW9uKSx0LmxvZyh0LmluZGVudCsidm9sdW1lOiAiKyh0aGlzLnZvbHVtZT4+OCkpLHQubG9nKHQuaW5kZW50KyJtYXRyaXg6ICIrdGhpcy5tYXRyaXguam9pbigiLCAiKSksdC5sb2codC5pbmRlbnQrImxheWVyOiAiK3RoaXMubGF5ZXIpLHQubG9nKHQuaW5kZW50KyJhbHRlcm5hdGVfZ3JvdXA6ICIrdGhpcy5hbHRlcm5hdGVfZ3JvdXApLHQubG9nKHQuaW5kZW50KyJ3aWR0aDogIit0aGlzLndpZHRoKSx0LmxvZyh0LmluZGVudCsiaGVpZ2h0OiAiK3RoaXMuaGVpZ2h0KX07dmFyIEk9e307SS5jcmVhdGVGaWxlPWZ1bmN0aW9uKHQsZSl7dmFyIHM9dCE9PXZvaWQgMD90OiEwLG49bmV3IHUoZSk7cmV0dXJuIG4uZGlzY2FyZE1kYXREYXRhPSFzLG59LF8uY3JlYXRlRmlsZT1JLmNyZWF0ZUZpbGV9KSgkKTtjb25zdCB1dD17c2FtcGxlUmF0ZTo0OGUzLGNoYW5uZWxDb3VudDoyLGNvZGVjOiJtcDRhLjQwLjIifTt2YXIgZnQsSyx0dCxwdCxXLGl0LHZ0LEV0O2NvbnN0IGN0PWNsYXNze2NvbnN0cnVjdG9yKF8sZD17fSl7cSh0aGlzLHZ0KSxrKHRoaXMsInJlYWR5IikscSh0aGlzLGZ0LHtkdXJhdGlvbjowLHdpZHRoOjAsaGVpZ2h0OjB9KSxxKHRoaXMsSyxuZXcgRmxvYXQzMkFycmF5KSxxKHRoaXMsdHQsbmV3IEZsb2F0MzJBcnJheSkscSh0aGlzLHB0LDApLHEodGhpcyxXLDApLHEodGhpcyxpdCx2b2lkIDApLEoodGhpcyxpdCx7bG9vcDohMSx2b2x1bWU6MSwuLi5kfSksdGhpcy5yZWFkeT16dCh0aGlzLHZ0LEV0KS5jYWxsKHRoaXMsXykudGhlbigoKT0+KHt3aWR0aDowLGhlaWdodDowLGR1cmF0aW9uOmQubG9vcD8xLzA6Qyh0aGlzLGZ0KS5kdXJhdGlvbn0pKX1nZXRQQ01EYXRhKCl7cmV0dXJuW0ModGhpcyxLKSxDKHRoaXMsdHQpXX1hc3luYyB0aWNrKF8pe2lmKF88Qyh0aGlzLHB0KSl0aHJvdyBFcnJvcigidGltZSBub3QgYWxsb3cgcm9sbGJhY2siKTtpZighQyh0aGlzLGl0KS5sb29wJiZfPj1DKHRoaXMsZnQpLmR1cmF0aW9uKXJldHVybnthdWRpbzpbXSxzdGF0ZToiZG9uZSJ9O2NvbnN0IGQ9Xy1DKHRoaXMscHQpO0oodGhpcyxwdCxfKTtjb25zdCBjPU1hdGguY2VpbChkKih1dC5zYW1wbGVSYXRlLzFlNikpLGw9Qyh0aGlzLFcpK2MsUz1DKHRoaXMsaXQpLmxvb3A/W2J0KEModGhpcyxLKSxDKHRoaXMsVyksbCksYnQoQyh0aGlzLHR0KSxDKHRoaXMsVyksbCldOltDKHRoaXMsSykuc2xpY2UoQyh0aGlzLFcpLGwpLEModGhpcyx0dCkuc2xpY2UoQyh0aGlzLFcpLGwpXTtyZXR1cm4gSih0aGlzLFcsbCkse2F1ZGlvOlMsc3RhdGU6InN1Y2Nlc3MifX1kZXN0cm95KCl7Sih0aGlzLEssbmV3IEZsb2F0MzJBcnJheSgwKSksSih0aGlzLHR0LG5ldyBGbG9hdDMyQXJyYXkoMCkpLE0uaW5mbygiLS0tLSBhdWRpb2NsaXAgZGVzdHJveSAtLS0tIil9fTtsZXQgTHQ9Y3Q7ZnQ9bmV3IFdlYWtNYXAsSz1uZXcgV2Vha01hcCx0dD1uZXcgV2Vha01hcCxwdD1uZXcgV2Vha01hcCxXPW5ldyBXZWFrTWFwLGl0PW5ldyBXZWFrTWFwLHZ0PW5ldyBXZWFrU2V0LEV0PWFzeW5jIGZ1bmN0aW9uKF8pe2N0LmN0eD09bnVsbCYmKGN0LmN0eD1uZXcgQXVkaW9Db250ZXh0KHtzYW1wbGVSYXRlOnV0LnNhbXBsZVJhdGV9KSk7Y29uc3QgZD1wZXJmb3JtYW5jZS5ub3coKSxjPV8gaW5zdGFuY2VvZiBSZWFkYWJsZVN0cmVhbT9hd2FpdCBrdChfLGN0LmN0eCk6XztNLmluZm8oIkF1ZGlvIGNsaXAgZGVjb2RlZCBjb21wbGV0ZToiLHBlcmZvcm1hbmNlLm5vdygpLWQpO2NvbnN0IGw9Qyh0aGlzLGl0KS52b2x1bWU7aWYobCE9PTEpZm9yKGNvbnN0IFMgb2YgYylmb3IobGV0IFU9MDtVPFMubGVuZ3RoO1UrPTEpU1tVXSo9bDtDKHRoaXMsZnQpLmR1cmF0aW9uPWNbMF0ubGVuZ3RoL3V0LnNhbXBsZVJhdGUqMWU2LEoodGhpcyxLLGNbMF0pLEoodGhpcyx0dCxjWzFdPz9DKHRoaXMsSykpLE0uaW5mbygiQXVkaW8gY2xpcCBjb252ZXJ0IHRvIEF1ZGlvRGF0YSwgdGltZToiLHBlcmZvcm1hbmNlLm5vdygpLWQpfSxrKEx0LCJjdHgiLG51bGwpO2FzeW5jIGZ1bmN0aW9uIGt0KF8sZCl7Y29uc3QgYz1hd2FpdCBuZXcgUmVzcG9uc2UoXykuYXJyYXlCdWZmZXIoKTtyZXR1cm4gUHQoYXdhaXQgZC5kZWNvZGVBdWRpb0RhdGEoYykpfXZhciBYO2NsYXNzIER0e2NvbnN0cnVjdG9yKCl7cSh0aGlzLFgsbmV3IE1hcCksayh0aGlzLCJvbiIsKGQsYyk9Pntjb25zdCBsPUModGhpcyxYKS5nZXQoZCk/P25ldyBTZXQ7cmV0dXJuIGwuYWRkKGMpLEModGhpcyxYKS5oYXMoZCl8fEModGhpcyxYKS5zZXQoZCxsKSwoKT0+e2wuZGVsZXRlKGMpLGwuc2l6ZT09PTAmJkModGhpcyxYKS5kZWxldGUoZCl9fSksayh0aGlzLCJvbmNlIiwoZCxjKT0+e2NvbnN0IGw9dGhpcy5vbihkLCguLi5TKT0+e2woKSxjKC4uLlMpfSk7cmV0dXJuIGx9KSxrKHRoaXMsImVtaXQiLChkLC4uLmMpPT57Y29uc3QgbD1DKHRoaXMsWCkuZ2V0KGQpO2whPW51bGwmJmwuZm9yRWFjaChTPT5TKC4uLmMpKX0pfWRlc3Ryb3koKXtDKHRoaXMsWCkuY2xlYXIoKX19WD1uZXcgV2Vha01hcDtmdW5jdGlvbiBSdChfKXtNLmluZm8oInJlY29kZW11eCBvcHRzOiIsXyk7Y29uc3QgZD0kLmNyZWF0ZUZpbGUoKSxjPW5ldyBEdCxsPU50KF8sZCxjKTtsZXQgUz1udWxsO18uYXVkaW89PW51bGw/Yy5lbWl0KCJBdWRpb1JlYWR5Iik6Uz1PdChfLmF1ZGlvLGQsYyk7bGV0IFU9MDtyZXR1cm57ZW5jb2RlVmlkZW86KEEscik9PntsLmVuY29kZShBLHIpLEEuY2xvc2UoKSxsLmVuY29kZVF1ZXVlU2l6ZT5VJiYoVT1sLmVuY29kZVF1ZXVlU2l6ZSl9LGVuY29kZUF1ZGlvOkE9PntTIT1udWxsJiYoUy5lbmNvZGUoQSksQS5jbG9zZSgpKX0sZ2V0RWVjb2RlUXVldWVTaXplOigpPT5sLmVuY29kZVF1ZXVlU2l6ZSxmbHVzaDphc3luYygpPT57YXdhaXQgUHJvbWlzZS5hbGwoW2wuc3RhdGU9PT0iY29uZmlndXJlZCI/bC5mbHVzaCgpOm51bGwsKFM9PW51bGw/dm9pZCAwOlMuc3RhdGUpPT09ImNvbmZpZ3VyZWQiP1MuZmx1c2goKTpudWxsXSl9LGNsb3NlOigpPT57Yy5kZXN0cm95KCksbC5zdGF0ZT09PSJjb25maWd1cmVkIiYmbC5jbG9zZSgpLChTPT1udWxsP3ZvaWQgMDpTLnN0YXRlKT09PSJjb25maWd1cmVkIiYmUy5jbG9zZSgpfSxtcDRmaWxlOmR9fWZ1bmN0aW9uIE50KF8sZCxjKXtjb25zdCBsPXt0aW1lc2NhbGU6MWU2LHdpZHRoOl8udmlkZW8ud2lkdGgsaGVpZ2h0Ol8udmlkZW8uaGVpZ2h0LGJyYW5kczpbImlzb20iLCJpc28yIiwiYXZjMSIsIm1wNDIiLCJtcDQxIl0sYXZjRGVjb2RlckNvbmZpZ1JlY29yZDpudWxsfTtsZXQgUyxVPVtdLEE9ITE7cmV0dXJuIGMub25jZSgiQXVkaW9SZWFkeSIsKCk9PntBPSEwLFUuZm9yRWFjaChyPT57Y29uc3Qgej1fdChyKTtkLmFkZFNhbXBsZShTLHouZGF0YSx6KX0pLFU9W119KSxNdChfLChyLHopPT57dmFyIEI7aWYoUz09bnVsbCYmeiE9bnVsbCYmKGwuYXZjRGVjb2RlckNvbmZpZ1JlY29yZD0oQj16LmRlY29kZXJDb25maWcpPT1udWxsP3ZvaWQgMDpCLmRlc2NyaXB0aW9uLFM9ZC5hZGRUcmFjayhsKSxjLmVtaXQoIlZpZGVvUmVhZHkiKSxNLmluZm8oIlZpZGVvRW5jb2RlciwgdmlkZW8gdHJhY2sgcmVhZHksIHRyYWNrSWQ6IixTKSksQSl7Y29uc3QgdT1fdChyKTtkLmFkZFNhbXBsZShTLHUuZGF0YSx1KX1lbHNlIFUucHVzaChyKX0pfWZ1bmN0aW9uIE10KF8sZCl7Y29uc3QgYz1uZXcgVmlkZW9FbmNvZGVyKHtlcnJvcjpNLmVycm9yLG91dHB1dDpkfSksbD1fLnZpZGVvO3JldHVybiBjLmNvbmZpZ3VyZSh7Y29kZWM6ImF2YzEuNEQwMDMyIixmcmFtZXJhdGU6bC5leHBlY3RGUFMsYml0cmF0ZTpfLmJpdHJhdGUsd2lkdGg6bC53aWR0aCxoZWlnaHQ6bC5oZWlnaHQsYWxwaGE6ImRpc2NhcmQiLGF2Yzp7Zm9ybWF0OiJhdmMifX0pLGN9ZnVuY3Rpb24gT3QoXyxkLGMpe2NvbnN0IGw9e3RpbWVzY2FsZToxZTYsc2FtcGxlcmF0ZTpfLnNhbXBsZVJhdGUsY2hhbm5lbF9jb3VudDpfLmNoYW5uZWxDb3VudCxoZGxyOiJzb3VuIix0eXBlOl8uY29kZWM9PT0iYWFjIj8ibXA0YSI6Ik9wdXMifTtsZXQgUz0wLFU9W10sQT0hMTtjLm9uY2UoIlZpZGVvUmVhZHkiLCgpPT57QT0hMCxVLmZvckVhY2goej0+e2NvbnN0IEI9X3Qoeik7ZC5hZGRTYW1wbGUoUyxCLmRhdGEsQil9KSxVPVtdfSk7Y29uc3Qgcj1uZXcgQXVkaW9FbmNvZGVyKHtlcnJvcjpNLmVycm9yLG91dHB1dDooeixCKT0+e3ZhciB1LEk7aWYoUz09PTAmJigodT1CLmRlY29kZXJDb25maWcpPT1udWxsP3ZvaWQgMDp1LmRlc2NyaXB0aW9uKSE9bnVsbCYmKFM9ZC5hZGRUcmFjayh7Li4ubCxkZXNjcmlwdGlvbjpIdCgoST1CLmRlY29kZXJDb25maWcpPT1udWxsP3ZvaWQgMDpJLmRlc2NyaXB0aW9uKX0pLGMuZW1pdCgiQXVkaW9SZWFkeSIpLE0uaW5mbygiQXVkaW9FbmNvZGVyLCBhdWRpbyB0cmFjayByZWFkeSwgdHJhY2tJZDoiLFMpKSxBKXtjb25zdCB0PV90KHopO2QuYWRkU2FtcGxlKFMsdC5kYXRhLHQpfWVsc2UgVS5wdXNoKHopfX0pO3JldHVybiByLmNvbmZpZ3VyZSh7Y29kZWM6Xy5jb2RlYz09PSJhYWMiP3V0LmNvZGVjOiJvcHVzIixzYW1wbGVSYXRlOl8uc2FtcGxlUmF0ZSxudW1iZXJPZkNoYW5uZWxzOl8uY2hhbm5lbENvdW50LGJpdHJhdGU6MTI4ZTN9KSxyfWZ1bmN0aW9uIEd0KF8sZCxjKXtsZXQgbD0wLFM9MDtjb25zdCBVPV8uYm94ZXMsQT1bXSxyPSgpPT57aWYoVS5sZW5ndGg8NHx8Uz49VS5sZW5ndGgpcmV0dXJuIG51bGw7aWYoQS5sZW5ndGg9PT0wKWZvcihsZXQgdD0xOzt0Kz0xKXtjb25zdCBlPV8uZ2V0VHJhY2tCeUlkKHQpO2lmKGU9PW51bGwpYnJlYWs7QS5wdXNoKHt0cmFjazplLGlkOnR9KX1jb25zdCBJPW5ldyAkLkRhdGFTdHJlYW07SS5lbmRpYW5uZXNzPSQuRGF0YVN0cmVhbS5CSUdfRU5ESUFOO2ZvcihsZXQgdD1TO3Q8VS5sZW5ndGg7dCsrKVVbdF0ud3JpdGUoSSksZGVsZXRlIFVbdF07cmV0dXJuIEEuZm9yRWFjaCgoe3RyYWNrOnQsaWQ6ZX0pPT57Xy5yZWxlYXNlVXNlZFNhbXBsZXMoZSx0LnNhbXBsZXMubGVuZ3RoKSx0LnNhbXBsZXM9W119KSxfLm1kYXRzPVtdLF8ubW9vZnM9W10sUz1VLmxlbmd0aCxuZXcgVWludDhBcnJheShJLmJ1ZmZlcil9O2xldCB6PSExLEI9ITEsdT1udWxsO3JldHVybntzdHJlYW06bmV3IFJlYWRhYmxlU3RyZWFtKHtzdGFydChJKXtsPXNlbGYuc2V0SW50ZXJ2YWwoKCk9Pntjb25zdCB0PXIoKTt0IT1udWxsJiYhQiYmSS5lbnF1ZXVlKHQpfSxkKSx1PSgpPT57Y2xlYXJJbnRlcnZhbChsKSxfLmZsdXNoKCk7Y29uc3QgdD1yKCk7dCE9bnVsbCYmIUImJkkuZW5xdWV1ZSh0KSxCfHxJLmNsb3NlKCl9LHomJnUoKX0sY2FuY2VsKCl7Qj0hMCxjbGVhckludGVydmFsKGwpLGM9PW51bGx8fGMoKX19KSxzdG9wOigpPT57enx8KHo9ITAsdT09bnVsbHx8dSgpKX19fWZ1bmN0aW9uIF90KF8pe2NvbnN0IGQ9bmV3IEFycmF5QnVmZmVyKF8uYnl0ZUxlbmd0aCk7Xy5jb3B5VG8oZCk7Y29uc3QgYz1fLnRpbWVzdGFtcDtyZXR1cm57ZHVyYXRpb246Xy5kdXJhdGlvbj8/MCxkdHM6YyxjdHM6Yyxpc19zeW5jOl8udHlwZT09PSJrZXkiLGRhdGE6ZH19ZnVuY3Rpb24gSHQoXyl7Y29uc3QgZD1fLmJ5dGVMZW5ndGgsYz1uZXcgVWludDhBcnJheShbMCwwLDAsMCwzLDIzK2QsMCwyLDAsNCwxOCtkLDY0LDIxLDAsMCwwLDAsMCwwLDAsMCwwLDAsMCw1LGQsLi4ubmV3IFVpbnQ4QXJyYXkoXyBpbnN0YW5jZW9mIEFycmF5QnVmZmVyP186Xy5idWZmZXIpLDYsMSwyXSksbD1uZXcgJC5Cb3hQYXJzZXIuZXNkc0JveChjLmJ5dGVMZW5ndGgpO3JldHVybiBsLmhkcl9zaXplPTAsbC5wYXJzZShuZXcgJC5EYXRhU3RyZWFtKGMsMCwkLkRhdGFTdHJlYW0uQklHX0VORElBTikpLGx9Y29uc3QgSD1jbGFzc3tjb25zdHJ1Y3RvcihfLGQsYyxsLFMpe2sodGhpcywieCIsMCksayh0aGlzLCJ5IiwwKSxrKHRoaXMsInciLDApLGsodGhpcywiaCIsMCksayh0aGlzLCJhbmdsZSIsMCksayh0aGlzLCJtYXN0ZXIiLG51bGwpLHRoaXMueD1fPz8wLHRoaXMueT1kPz8wLHRoaXMudz1jPz8wLHRoaXMuaD1sPz8wLHRoaXMubWFzdGVyPVM/P251bGx9Z2V0IGNlbnRlcigpe2NvbnN0e3g6Xyx5OmQsdzpjLGg6bH09dGhpcztyZXR1cm57eDpfK2MvMix5OmQrbC8yfX1nZXQgY3RybHMoKXtjb25zdHt3Ol8saDpkfT10aGlzLGM9SC5DVFJMX1NJWkUsbD1jLzIsUz1fLzIsVT1kLzIsQT1jKjEuNSxyPUEvMjtyZXR1cm57dDpuZXcgSCgtbCwtVS1sLGMsYyx0aGlzKSxiOm5ldyBIKC1sLFUtbCxjLGMsdGhpcyksbDpuZXcgSCgtUy1sLC1sLGMsYyx0aGlzKSxyOm5ldyBIKFMtbCwtbCxjLGMsdGhpcyksbHQ6bmV3IEgoLVMtbCwtVS1sLGMsYyx0aGlzKSxsYjpuZXcgSCgtUy1sLFUtbCxjLGMsdGhpcykscnQ6bmV3IEgoUy1sLC1VLWwsYyxjLHRoaXMpLHJiOm5ldyBIKFMtbCxVLWwsYyxjLHRoaXMpLHJvdGF0ZTpuZXcgSCgtciwtVS1jKjItcixBLEEsdGhpcyl9fWNsb25lKCl7Y29uc3R7eDpfLHk6ZCx3OmMsaDpsLG1hc3RlcjpTfT10aGlzO3JldHVybiBuZXcgSChfLGQsYyxsLFMpfWNoZWNrSGl0KF8sZCl7bGV0e2FuZ2xlOmMsY2VudGVyOmwseDpTLHk6VSx3OkEsaDpyLG1hc3Rlcjp6fT10aGlzO2NvbnN0IEI9KHo9PW51bGw/dm9pZCAwOnouY2VudGVyKT8/bCx1PSh6PT1udWxsP3ZvaWQgMDp6LmFuZ2xlKT8/Yzt6PT1udWxsJiYoUz1TLUIueCxVPVUtQi55KTtjb25zdCBJPV8tQi54LHQ9ZC1CLnk7bGV0IGU9SSxzPXQ7cmV0dXJuIHUhPT0wJiYoZT1JKk1hdGguY29zKHUpK3QqTWF0aC5zaW4odSkscz10Kk1hdGguY29zKHUpLUkqTWF0aC5zaW4odSkpLCEoZTxTfHxlPlMrQXx8czxVfHxzPlUrcil9fTtrKEgsIkNUUkxfU0laRSIsMTYpO3ZhciBzdD0oXz0+KF8uU2FmZUV4aXQ9IlNhZmVFeGl0IixfLlN0b3A9IlN0b3AiLF8uUGF1c2VkPSJQYXVzZWQiLF8uU3RhcnQ9IlN0YXJ0IixfLk91dHB1dFN0cmVhbT0iT3V0cHV0U3RyZWFtIixfKSkoc3R8fHt9KTtjbGFzcyBZdHtjb25zdHJ1Y3RvcihkKXtodCh0aGlzLHJ0LHBlcmZvcm1hbmNlLm5vdygpKTtodCh0aGlzLG50LE4odGhpcyxydCkpO2h0KHRoaXMsYXQsMCk7aHQodGhpcyxaLCExKTtodCh0aGlzLG90LDApO3RoaXMuZXhwZWN0RlBTPWR9cGxheSgpe04odGhpcyxaKSYmKFEodGhpcyxaLCExKSxRKHRoaXMscnQsTih0aGlzLHJ0KSsocGVyZm9ybWFuY2Uubm93KCktTih0aGlzLG90KSkpLFEodGhpcyxudCxOKHRoaXMsbnQpKyhwZXJmb3JtYW5jZS5ub3coKS1OKHRoaXMsb3QpKSkpfXBhdXNlKCl7Tih0aGlzLFopfHwoUSh0aGlzLFosITApLFEodGhpcyxvdCxwZXJmb3JtYW5jZS5ub3coKSkpfXRyYW5zZnJvbShkKXtjb25zdCBjPXBlcmZvcm1hbmNlLm5vdygpLGw9Yy1OKHRoaXMscnQpO2lmKE4odGhpcyxaKXx8Tih0aGlzLGF0KS9sKjFlMz50aGlzLmV4cGVjdEZQUyl7ZC5jbG9zZSgpO3JldHVybn1jb25zdCBTPW5ldyBWaWRlb0ZyYW1lKGQse3RpbWVzdGFtcDpsKjFlMyxkdXJhdGlvbjooYy1OKHRoaXMsbnQpKSoxZTN9KTtyZXR1cm4gUSh0aGlzLG50LGMpLFEodGhpcyxhdCxOKHRoaXMsYXQpKzEpLGQuY2xvc2UoKSx7dmY6UyxvcHRzOntrZXlGcmFtZTpOKHRoaXMsYXQpJTMwPT09MH19fX1ydD1uZXcgV2Vha01hcCxudD1uZXcgV2Vha01hcCxhdD1uZXcgV2Vha01hcCxaPW5ldyBXZWFrTWFwLG90PW5ldyBXZWFrTWFwO2NvbnN0IFV0PW5ldyBZdCgzMCk7bGV0IG10PSJwcmVwYXJpbmciLEF0PSExLGd0PW51bGw7c2VsZi5vbm1lc3NhZ2U9YXN5bmMgXz0+e2NvbnN0e3R5cGU6ZCxkYXRhOmN9PV8uZGF0YTtzd2l0Y2goZCl7Y2FzZSBzdC5TdGFydDptdD09PSJwcmVwYXJpbmciJiYobXQ9InJ1bm5pbmciLGd0PVZ0KGMsKCk9PnttdD0ic3RvcHBlZCJ9KSk7YnJlYWs7Y2FzZSBzdC5TdG9wOm10PSJzdG9wcGVkIixndD09bnVsbHx8Z3QoKSxzZWxmLnBvc3RNZXNzYWdlKHt0eXBlOnN0LlNhZmVFeGl0fSk7YnJlYWs7Y2FzZSBzdC5QYXVzZWQ6QXQ9YyxjP1V0LnBhdXNlKCk6VXQucGxheSgpfX07ZnVuY3Rpb24gVnQoXyxkKXtsZXQgYz1udWxsLGw9bnVsbDtjb25zdCBTPVJ0KHt2aWRlbzpfLnZpZGVvLGF1ZGlvOl8uYXVkaW8sYml0cmF0ZTpfLmJpdHJhdGU/PzNlNn0pO2xldCBVPSExO18uc3RyZWFtcy52aWRlbyE9bnVsbCYmKGM9d3QoXy5zdHJlYW1zLnZpZGVvLHtvbkNodW5rOmFzeW5jIEI9PntpZihVKXtCLmNsb3NlKCk7cmV0dXJufWNvbnN0IHU9VXQudHJhbnNmcm9tKEIpO3UhPW51bGwmJlMuZW5jb2RlVmlkZW8odS52Zix1Lm9wdHMpfSxvbkRvbmU6KCk9Pnt9fSkpLF8uYXVkaW8hPW51bGwmJl8uc3RyZWFtcy5hdWRpbyE9bnVsbCYmKGw9d3QoXy5zdHJlYW1zLmF1ZGlvLHtvbkNodW5rOmFzeW5jIEI9PntpZihVfHxBdCl7Qi5jbG9zZSgpO3JldHVybn1TLmVuY29kZUF1ZGlvKEIpfSxvbkRvbmU6KCk9Pnt9fSkpO2NvbnN0e3N0cmVhbTpBLHN0b3A6cn09R3QoUy5tcDRmaWxlLF8udGltZVNsaWNlLCgpPT57eigpLGQoKX0pO3NlbGYucG9zdE1lc3NhZ2Uoe3R5cGU6c3QuT3V0cHV0U3RyZWFtLGRhdGE6QX0sW0FdKTtmdW5jdGlvbiB6KCl7VT0hMCxjPT1udWxsfHxjKCksbD09bnVsbHx8bCgpLFMuY2xvc2UoKSxyKCl9cmV0dXJuIHp9fSkoKTsKLy8jIHNvdXJjZU1hcHBpbmdVUkw9bXV4LW1wNC13b3JrZXItNzg1YjU2NDcuanMubWFwCg==",zl=typeof window<"u"&&window.Blob&&new Blob([atob(Yl)],{type:"text/javascript;charset=utf-8"});function vl(){let h;try{if(h=zl&&(window.URL||window.webkitURL).createObjectURL(zl),!h)throw"";return new Worker(h)}catch(m){return new Worker("data:application/javascript;base64,"+Yl)}finally{h&&(window.URL||window.webkitURL).revokeObjectURL(h)}}var _=(h=>(h.SafeExit="SafeExit",h.Stop="Stop",h.Paused="Paused",h.Start="Start",h.OutputStream="OutputStream",h))(_||{}),al,q,Q,$;class gl{constructor(m,e={}){N(this,al,"inactive"),N(this,q,void 0),N(this,Q,void 0),N(this,$,null),ul(this,"outputStream",null),k(this,q,m),k(this,Q,hl({width:1280,height:720,bitrate:3e6,expectFPS:30,audioCodec:"aac"},e))}get state(){return I(this,al)}set state(m){throw new Error("state is readonly")}start(m=500){return dl(this,null,function*(){var K,U;T.info("AVRecorder.start recoding");const e=new vl;k(this,$,e);const G={},R=I(this,q).getVideoTracks()[0];R!=null&&(G.video=new MediaStreamTrackProcessor({track:R}).readable);const o=I(this,q).getAudioTracks()[0];let H=null;if(o!=null){const u=o.getSettings();H={codec:I(this,Q).audioCodec,sampleRate:(K=u.sampleRate)!=null?K:0,channelCount:(U=u.channelCount)!=null?U:0},T.info("AVRecorder recording audioConf:",H),G.audio=new MediaStreamTrackProcessor({track:o}).readable}if(G.audio==null&&G.video==null)throw new Error("No available tracks in MediaStream");const Z={video:{width:I(this,Q).width,height:I(this,Q).height,expectFPS:I(this,Q).expectFPS},audio:H,bitrate:I(this,Q).bitrate,timeSlice:m,streams:G};return e.postMessage({type:_.Start,data:Z},Object.values(G)),yield new Promise(u=>{e.addEventListener("message",B=>{const{type:l,data:d}=B.data;switch(l){case _.OutputStream:k(this,al,"recording"),this.outputStream=d,u();break}})})})}pause(){var m;(m=I(this,$))==null||m.postMessage({type:_.Paused,data:!0})}resume(){var m;(m=I(this,$))==null||m.postMessage({type:_.Paused,data:!1})}stop(){return dl(this,null,function*(){k(this,al,"inactive");const m=I(this,$);if(m!=null)return m.postMessage({type:_.Stop}),yield new Promise(e=>{m.addEventListener("message",G=>{const{type:R}=G.data;switch(R){case _.SafeExit:m.terminate(),I(this,q).getTracks().forEach(o=>{o.stop()}),this.outputStream=null,console.log(4444),e();break}})})})}}al=new WeakMap,q=new WeakMap,Q=new WeakMap,$=new WeakMap}}]);
}());